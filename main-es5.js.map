{"version":3,"sources":["webpack:///(webpack)/buildin/global.js","webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/account-view/account-view.component.ts","webpack:///src/app/components/account-view/account-view.component.html","webpack:///src/app/components/accounts/accounts.component.ts","webpack:///src/app/components/accounts/accounts.component.html","webpack:///src/app/components/activate/activate.component.ts","webpack:///src/app/components/activate/activate.component.html","webpack:///src/app/components/agreement/agreement.component.ts","webpack:///src/app/components/agreement/agreement.component.html","webpack:///src/app/components/agreement/privacy-policy/privacy-policy.component.ts","webpack:///src/app/components/agreement/privacy-policy/privacy-policy.component.html","webpack:///src/app/components/agreement/terms-of-use/terms-of-use.component.ts","webpack:///src/app/components/agreement/terms-of-use/terms-of-use.component.html","webpack:///src/app/components/connect-ledger/connect-ledger.component.html","webpack:///src/app/components/connect-ledger/connect-ledger.component.ts","webpack:///src/app/components/delegate/delegate.component.html","webpack:///src/app/components/delegate/delegate.component.ts","webpack:///src/app/components/footer/footer.component.ts","webpack:///src/app/components/footer/footer.component.html","webpack:///src/app/components/header/header.component.ts","webpack:///src/app/components/header/header.component.html","webpack:///src/app/components/messages/messages.component.ts","webpack:///src/app/components/messages/messages.component.html","webpack:///src/app/components/mnemonic-import/mnemonic-import.component.ts","webpack:///src/app/components/mnemonic-import/mnemonic-import.component.html","webpack:///src/app/components/new-implicit/new-implicit.component.html","webpack:///src/app/components/new-implicit/new-implicit.component.ts","webpack:///src/app/components/new-wallet/new-wallet.component.html","webpack:///src/app/components/new-wallet/new-wallet.component.ts","webpack:///src/app/components/receive/receive.component.ts","webpack:///src/app/components/receive/receive.component.html","webpack:///src/app/components/send/send.component.html","webpack:///src/app/components/send/send.component.ts","webpack:///src/app/components/spinner/spinner.component.ts","webpack:///src/app/components/spinner/spinner.component.html","webpack:///src/app/components/start/start.component.ts","webpack:///src/app/components/start/start.component.html","webpack:///src/app/components/torus/torus.component.html","webpack:///src/app/components/torus/torus.component.ts","webpack:///src/app/constants.ts","webpack:///src/app/interfaces.ts","webpack:///src/app/pipes/delegator-name.pipe.ts","webpack:///src/app/pipes/error-handling.pipe.ts","webpack:///src/app/pipes/time-ago.pipe.ts","webpack:///src/app/pipes/truncate.pipe.ts","webpack:///src/app/services/activity/activity.service.ts","webpack:///src/app/services/balance/balance.service.ts","webpack:///src/app/services/conseil/conseil.service.ts","webpack:///src/app/services/coordinator/coordinator.service.ts","webpack:///src/app/services/delegate/delegate.service.ts","webpack:///src/app/services/encryption/encryption.service.ts","webpack:///src/app/services/estimate/estimate.service.ts","webpack:///src/app/services/export/export.service.ts","webpack:///src/app/services/import/import.service.ts","webpack:///src/app/services/input-validation/input-validation.service.ts","webpack:///src/app/services/ledger/ledger.service.ts","webpack:///src/app/services/lookup/lookup.service.ts","webpack:///src/app/services/message/message.service.ts","webpack:///src/app/services/operation/operation.service.ts","webpack:///src/app/services/torus/torus.service.ts","webpack:///src/app/services/tzrate/tzrate.service.ts","webpack:///src/app/services/wallet/wallet.service.ts","webpack:///src/app/services/wallet/wallet.ts","webpack:///src/app/views/error/404.component.ts","webpack:///src/app/views/error/404.component.html","webpack:///src/app/views/error/500.component.ts","webpack:///src/app/views/error/500.component.html","webpack:///src/data/bakers-list.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts","webpack:///util (ignored)","webpack:///util (ignored)?264f","webpack:///util (ignored)?83cd","webpack:///crypto (ignored)?e5b4","webpack:///buffer (ignored)?75a6","webpack:///buffer (ignored)?d821","webpack:///buffer (ignored)?3694","webpack:///buffer (ignored)?ebc1","webpack:///buffer (ignored)?fa72","webpack:///fs (ignored)?ee27","webpack:///util (ignored)?8744","webpack:///buffer (ignored)","webpack:///crypto (ignored)","webpack:///crypto (ignored)?9177","webpack:///fs (ignored)","webpack:///src/methods/node.js (ignored)","webpack:///node.js (ignored)","webpack:///buffer (ignored)?a3f0"],"names":["g","Function","e","window","module","exports","webpackEmptyAsyncContext","req","Promise","resolve","then","Error","code","keys","id","routes","path","component","data","title","redirectTo","AppRoutingModule","forRoot","imports","AppComponent","walletService","coordinatorService","router","translate","CONSTANTS","setDefaultLang","languagePreference","localStorage","getItem","browserLang","getBrowserLang","use","loadStoredWallet","wallet","startAll","events","subscribe","evt","scrollTo","lang","map","Map","language","get","setItem","stopAll","clearWallet","navigate","selector","templateUrl","styleUrls","DEFAULT_PERFECT_SCROLLBAR_CONFIG","suppressScrollX","HttpLoaderFactory","http","AppModule","loader","provide","useFactory","deps","declarations","providers","bootstrap","AccountViewComponent","route","messageService","timeAgoPipe","lookupService","activityService","trigger","address","snapshot","paramMap","addressExists","account","getAccount","pipe","setInterval","transaction","type","destination","operationType","source","getCounterparty","copyToClipboard","instant","add","hash","baseURL","NET","NETWORK","$event","stopPropagation","AccountsComponent","wideAccounts","onResize","implicitAccounts","console","log","innerWidth","shortAddress","ActivateComponent","operationService","inputValidationService","formInvalid","checkInput","pkh","secret","activate","ans","success","payload","opHash","res","addSuccess","addWarning","errorMessage","msg","JSON","stringify","addError","err","activateFailed","AgreementComponent","location","displayAgreement","key","accepted","scrollBarWidth","document","body","offsetWidth","style","marginRight","toString","overflowY","open","PrivacyPolicyComponent","TermsOfUseComponent","ConnectLedgerComponent","ledgerService","importService","activePanel","defaultPath","defaultText","pendingLedgerConfirmation","isHDDerivationPathCustom","replace","derivationPath","startSpinner","getPublicAddress","pk","importFromPk","stopSpinner","validPublicKey","importWalletFromPk","length","originatedAccounts","setDefaultPath","getPk","DelegateComponent","modalService","exportService","modalOpen","activeView","recommendedFee","revealFee","pkhFee","ktFee","ledgerError","init","overflow","clearForm","checkReveal","setTimeout","inputElem","toPkhView","nativeElement","focus","invalidInput","fee","storedFee","storedDelegate","toPkh","isLedgerWallet","getKeys","sendDelegation","pwd","password","activeAccount","broadCastLedgerTransaction","sendResponse","pwdValid","closeModal","template1","modalRef1","show","template","ledgerSign","hide","modalRef2","modalRef3","delegate","getDelegate","Number","metadata","boost","requestLedgerSignature","op","unsignedOperation","signOperation","signature","signedOp","signedOperation","broadcast","error","isRevealed","revealed","checkSource","slice","getImplicitAccount","downloadOperationData","FooterComponent","HeaderComponent","impAccs","clear","displayName","verifier","logout","MessagesComponent","torusService","subject","index","messages","splice","hostname","message","email","mailtoFormat","username","redditPmFormat","twitterId","twitterPmFormat","encodeURI","encodedBody","amount","getHostName","accountType","url","s","b","t","handler","MnemonicImportComponent","showTacos","MIN_PWD_LENGTH","importOption","hdImport","pwdStrength","Downloaded","fileName","mnemonic","toLowerCase","trim","passphrase","mnemonics","keyPairFromAccountIndex","mnemonicToSeed","seedToKeyPair","validPwd","pwd1","pwd2","createEncryptedWallet","passwordStrengthDisplay","downloadWallet","importWalletFromObject","seed","keyFile","typeCheckFile","pwdRequired","walletJson","obj","parse","provider","version","walletType","encryptedSeed","iv","encryptedEntropy","importWalletFromJson","files","fileToUpload","item","validateFile","name","fileNotSupported","reader","FileReader","readAsText","onload","result","importPreCheck","ext","substring","lastIndexOf","NewImplicitComponent","cdRef","errorMsg","openPkhSpot","pwdView","incrementAccountIndex","start","counter","activitiesCounter","balance","balanceXTZ","NewWalletComponent","userMnemonic","hideBlur","ekfDownloaded","generateSeed","createNewWallet","MNEMONIC","string","array","split","verify","wordsToVerify","mnemonicLength","Math","floor","random","includes","push","sort","a","wordInput","shift","getElementById","blur","storeWallet","ReceiveComponent","showReceiveFormat","btnOutline","dropdownItem","getQR","activeAddress","errorCorrectionLevel","scaleFactor","canvas","openModal","zeroTxParams","gas","storage","burn","SendComponent","estimateService","torusVerifier","torusPendingLookup","torusLookupAddress","torusLookupId","torusTwitterId","advancedForm","sendMax","defaultTransactionParams","burnFee","isMultipleDestinations","toMultipleDestinationsString","toMultipleDestinations","showTransactions","simSemaphore","latestSimError","transactions","prevEquiClass","XTZrate","showBtn","amountInputView","preLoadData","clearFee","prepTransactions","checkBalance","sendTransaction","accountBalance","div","numberWithCommas","x","parts","join","event","checkMaxAmount","max","maxToSend","maxAmount","minus","finalCheck","gasLimit","storageLimit","toAddress","to","meta","alias","transfer","torusNotification","clearTorus","updateDefaultValues","invalidInputMultiple","invalidInputSingle","plus","tx","gt","maxKt","maxTz","estimateFees","totalAmount","prevSimError","equiClass","callback","updateMaxAmount","estimate","sender","txs","customLimits","numberOfTxs","txsLimit","reveal","verifierMapKeys","torusAccount","torusLookup","checkReceiverAndAmount","toMultipleDestinationsArray","validationError","forEach","singleSendDataArray","singleSendDataCheckresult","batchSpace","totalSent","display","totalFee","getTotalFee","getTotalBurn","mul","size","validateReceiverAddress","lookupPkh","emailNotify","redditNotify","twitterNotify","recipientKind","SpinnerComponent","StartComponent","animationActive","TorusComponent","activeLogin","initTorus","loginTorus","keyPair","userInfo","typeOfLogin","verifierId","Constants","carthagenet","NAME","CSI","apiKey","NODE_URL","BLOCK_EXPLORER_URL","WalletType","PeriodKind","DelegatorNamePipe","findIndex","identity","baker_name","ErrorHandlingPipe","ERROR_LIST","errorId","indexOf","TimeAgoPipe","timestamp","secTmp","secsTmp","mnTmp","mnsTmp","hrTmp","hrsTmp","dayTmp","daysTmp","monthTmp","monthsTmp","yearTmp","yearsTmp","now","Date","getTime","delta","round","String","agoTmp","pure","TruncatePipe","value","args","endTrail","limit","trail","returnString","endTrailstring","ActivityService","conseilService","maxTransactions","getTransactonsCounter","accountInfo","getAllTransactions","upToDate","getOperations","Array","isArray","oldActivities","activities","oldActivitiesCounter","promptNewActivities","activity","counterParty","check","newActivities","status","withLookup","BalanceService","tzrateService","getAccounts","getAccountBalance","getBalance","updateAccountBalance","newBalance","undefined","updateTotalBalance","updateFiatBalances","change","totalBalanceXTZ","ConseilService","conseilServer","network","platform","entity","query","blankQuery","addFields","addPredicate","EQ","addOrdering","DESC","setLimit","executeEntityQuery","results","addresses","originated_contracts","block_level","sendQuery","IN","receiveQuery","sendResult","formatTx","receiveResult","concat","input","output","kind","block","block_hash","operation_group_hash","providedIn","State","CoordinatorService","balanceService","delegateService","errorHandlingPipe","scheduler","defaultDelayActivity","shortDelayActivity","defaultDelayPrice","accounts","i","startXTZ","tzrateInterval","getTzrate","scheduleData","state","UpToDate","interval","update","stateCounter","set","updateAccountData","addUnconfirmedOperations","Wait","changeState","setDelay","updateTransactions","Updating","acc","latestActivity","age","newState","clearInterval","time","stop","handleDelegateResponse","from","times","unshift","delegation","DelegateService","EncryptionService","plaintext","salt","encrypt_v2","chiphertext","decrypt_v1","decrypt_v2","aesCtr","ctr","encrypt","hex","fromBytes","warn","toBytes","decrypt","salty","Buffer","cipher","createCipher","byteStringBuffer","createBuffer","finish","toHex","mode","tag","chipher","decipher","createDecipher","pass","bumps","buf","httpOptions","headers","hardGasLimit","hardStorageLimit","EstimateService","queue","revealGasLimit","nodeURL","chainId","manager","all","getHeader","toPromise","getCounter","getManager","chain_id","retry","_estimate","extraGas","simulation","createTransactionObject","simulate","contents","limits","content","operation_result","getOpUsage","gasUsage","storageUsage","localForge","fop","bytes","averageGasLimit","averageStorageLimit","dtp","recommendFee","balance_updates","balanceUpdate","contract","consumed_gas","internal_operation_results","internalResult","minimalFee","feePerByte","feePerGasUnit","gasUnits","numberOfOperations","ceil","totalGasLimit","totalStorageLimit","post","operation","checkApplied","errHandler","fetch","response","json","ExportService","blob","Blob","filename","signed","ImportService","encryptionService","walletData","initStorage","addImplicitAccount","findContracts","verifierDetails","ledgerImport","torusImport","updateTwitterName","twitterLookup","recursiveScan","getContractAddresses","KT","addOriginatedAccount","InputValidationService","validMnemonic","score","validAddress","loginType","redditAccount","twitterAccount","re","test","match","m","LedgerService","transport","create","setTransport","transportCheck","xtz","getAddress","hex2pk","publicKey","toSign","LookupType","LookupService","records","pendingLookups","initCheck","lookups","lookupType","y","indexTop","torusKeyLookup","Verifiers","Object","verifierMap","Google","Reddit","verifierArray","Twitter","noReveal","mark","record","entry","fill","j","MessageService","spinnerOn","spinnerText","defaultTime","seconds","timeout","text","OperationService","prefix","tz1","Uint8Array","tz2","tz3","edpk","sppk","edsk","spsk","edsig","spsig","sig","o","B","TZ","microTez","feeHardCap","header","branch","opbytes","sopbytes","protocol","preApplyResult","final","opCheck","newPkh","actions","script","getManagerScript","gas_limit","storage_limit","public_key","currentFee","transactionOp","managerTransaction","getContractPkhTransaction","parameters","getContractKtTransaction","delegationOp","getContractDelegation","getContractUnDelegation","origination","localOpbytes","sk","applied","sign","sbytes","sig2edsig","decodeOpBytes","parsed","tz2address","decompress","torusReq","jsonrpc","method","params","pub_key_X","X","pub_key_Y","Y","PublicKey","errors","transform","statusText","forge","localForgedBytes","listings","operationLevel","operationHash","opHashes","opIndex","managerPubkey","manager_pubkey","opBytes","pk2pkh","buf2hex","b58cdecode","sopBytes","hex2buf","hash2","mergebuf","b58cencode","privateKey","pkDecoded","secretKey","keyFromPrivate","prefixVal","getPublic","getY","toArray","pad","getX","pubX","pubY","keyFromPublic","decodedPk","hexPk","secp256k1","compressed","uncompressed","uncompressPublicKey","xy","h","parseInt","buffer","byteArray","hexParts","paddedHex","prefixx","n","enc","wm","r","canonical","decodeContents","decodeActivateAccount","decodeReveal","decodeTransaction","decodeOrigination","decodeDelegation","decodeCommon","rest","zarithDecode","decodeContractId","count","argument","decodeString","amount2","zarithDecodeInt","kt","managerScript","storageDefinition","decodePkh","byte","typeTmp","sourceTmp","destinationTmp","amountTmp","managerTmp","balanceTmp","delegateTmp","tagNotSupportedTmp","feeTmp","entrypoint","prim","pkHex","annots","GOOGLE","REDDIT","TWITTER","AUTH_DOMAIN","TorusService","torus","nodeDetails","verifierMaps","testnet","clientId","caseSensitiveVerifierID","mainnet","_loginToConnectionMap","domain","proxy","torusdirectsdk","baseUrl","origin","enableLogging","proxyContractAddress","skipSw","selectedVerifier","fetchNodeDetails","proxyAddress","getNodeDetails","torusNodeEndpoints","torusNodePub","torusIndexes","sanitizedVerifierId","toLocaleLowerCase","spPointsToPkh","referrerPolicy","jwtParams","login_hint","triggerLogin","loginDetails","spPrivKeyToKeyPair","TzrateService","apiUrl","price","tezos","usd","tot","balanceUSD","totalBalanceUSD","WalletService","storeKey","storageId","generateMnemonic","hdSeed","entropy","mnemonicToEntropy","seed2keyPair","encrypted","iv2","bumpIV","exportKeyStoreInit","HdWallet","FullWallet","IV","getTorusKeyPair","entropyToMnemonic","pkToPkh","implicitAccount","origAcc","removeItem","localStorageId","getLocalStorageId","parsedWalletData","wd","deserializeStoredWallet","implicit","impAcc","originated","Wallet","originatedAccount","LegacyWalletV1","encrypedSeed","LegacyWalletV2","LegacyWalletV3","TorusWallet","LedgerWallet","Account","ImplicitAccount","OriginatedAccount","ktAddress","managerPkh","managerPk","Activity","P404Component","P500Component","BAKERSLIST","image","environment","production","bootstrapModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,QAAIA,CAAJ,C,CAEA;;AACAA,KAAC,GAAI,YAAW;AACf,aAAO,IAAP;AACA,KAFG,EAAJ;;AAIA,QAAI;AACH;AACAA,OAAC,GAAGA,CAAC,IAAI,IAAIC,QAAJ,CAAa,aAAb,GAAT;AACA,KAHD,CAGE,OAAOC,CAAP,EAAU;AACX;AACA,UAAI,OAAOC,MAAP,KAAkB,QAAtB,EAAgCH,CAAC,GAAGG,MAAJ;AAChC,K,CAED;AACA;AACA;;;AAEAC,UAAM,CAACC,OAAP,GAAiBL,CAAjB;;;;;;;;;;;;;;ACnBA,aAASM,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,aAAOC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAW;AACxC,YAAIR,CAAC,GAAG,IAAIS,KAAJ,CAAU,yBAAyBJ,GAAzB,GAA+B,GAAzC,CAAR;AACAL,SAAC,CAACU,IAAF,GAAS,kBAAT;AACA,cAAMV,CAAN;AACA,OAJM,CAAP;AAKA;;AACDI,4BAAwB,CAACO,IAAzB,GAAgC,YAAW;AAAE,aAAO,EAAP;AAAY,KAAzD;;AACAP,4BAAwB,CAACG,OAAzB,GAAmCH,wBAAnC;AACAF,UAAM,CAACC,OAAP,GAAiBC,wBAAjB;AACAA,4BAAwB,CAACQ,EAAzB,GAA8B,6CAA9B;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAeA,QAAMC,MAAM,GAAW,CACrB;AAAEC,UAAI,EAAE,EAAR;AAAYC,eAAS,EAAE;AAAvB,KADqB,EAErB;AAAED,UAAI,EAAE,YAAR;AAAsBC,eAAS,EAAE;AAAjC,KAFqB,EAGrB;AAAED,UAAI,EAAE,QAAR;AAAkBC,eAAS,EAAE;AAA7B,KAHqB,EAIrB;AAAED,UAAI,EAAE,UAAR;AAAoBC,eAAS,EAAE;AAA/B,KAJqB,EAKrB;AAAED,UAAI,EAAE,gBAAR;AAA0BC,eAAS,EAAE;AAArC,KALqB,EAMrB;AAAED,UAAI,EAAE,aAAR;AAAuBC,eAAS,EAAE;AAAlC,KANqB,EAOrB;AAAED,UAAI,EAAE,UAAR;AAAoBC,eAAS,EAAE;AAA/B,KAPqB,EAQrB;AAAED,UAAI,EAAE,kBAAR;AAA4BC,eAAS,EAAE;AAAvC,KARqB,EASrB;AAAED,UAAI,EAAE,gBAAR;AAA0BC,eAAS,EAAE;AAArC,KATqB,EAUrB;AAAED,UAAI,EAAE,cAAR;AAAwBC,eAAS,EAAE;AAAnC,KAVqB,EAWrB;AAAED,UAAI,EAAE,eAAR;AAAyBC,eAAS,EAAE;AAApC,KAXqB,EAYrB;AAAED,UAAI,EAAE,KAAR;AAAeC,eAAS,EAAE,wEAA1B;AAAyCC,UAAI,EAAE;AAAEC,aAAK,EAAE;AAAT;AAA/C,KAZqB,EAarB;AAAEH,UAAI,EAAE,KAAR;AAAeC,eAAS,EAAE,wEAA1B;AAAyCC,UAAI,EAAE;AAAEC,aAAK,EAAE;AAAT;AAA/C,KAbqB,EAcrB;AAAEH,UAAI,EAAE,IAAR;AAAcI,gBAAU,EAAE;AAA1B,KAdqB,CAAvB;;QAqBaC,gB;;;;;YAAAA;;;;yBAAAA,gB;AAAgB,O;AAAA,gBAHlB,CAAE,6DAAaC,OAAb,CAAqBP,MAArB,CAAF,CAGkB,EAFhB,4DAEgB;;;;0HAAhBM,gB,EAAgB;AAAA;AAAA,kBAFhB,4DAEgB;AAAA,O;AAFJ,K;;;;;sEAEZA,gB,EAAgB;cAJ5B,sDAI4B;eAJnB;AACRE,iBAAO,EAAE,CAAE,6DAAaD,OAAb,CAAqBP,MAArB,CAAF,CADD;AAERV,iBAAO,EAAE,CAAE,4DAAF;AAFD,S;AAImB,Q;;;;;;;;;;;;;;;;;;ACpC7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAgBamB,Y;AAGX,4BACUC,aADV,EAEUC,kBAFV,EAGUC,MAHV,EAISC,SAJT,EAIoC;AAAA;;AAH1B,aAAAH,aAAA,GAAAA,aAAA;AACA,aAAAC,kBAAA,GAAAA,kBAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AACD,aAAAC,SAAA,GAAAA,SAAA;AALT,aAAAC,SAAA,GAAY,IAAI,oDAAJ,EAAZ,CAKoC,CAGhC;;AACAD,iBAAS,CAACE,cAAV,CAAyB,IAAzB,EAJgC,CAMhC;;AACA,YAAMC,kBAAkB,GAAG5B,MAAM,CAAC6B,YAAP,CAAoBC,OAApB,CAA4B,oBAA5B,CAA3B;AACA,YAAMC,WAAW,GAAGN,SAAS,CAACO,cAAV,EAApB;AACAP,iBAAS,CAACQ,GAAV,CAAc,IAAd;AACA;;;;;AAKH;;;;mCAEU;AACT,eAAKX,aAAL,CAAmBY,gBAAnB;;AACA,cAAI,KAAKZ,aAAL,CAAmBa,MAAvB,EAA+B;AAC7B,iBAAKZ,kBAAL,CAAwBa,QAAxB,GAD6B,CAE7B;AACD;;AACD,eAAKZ,MAAL,CAAYa,MAAZ,CAAmBC,SAAnB,CAA6B,UAACC,GAAD,EAAS;AACpC,gBAAI,EAAEA,GAAG,YAAY,6DAAjB,CAAJ,EAAqC;AACnC;AACD;;AACDvC,kBAAM,CAACwC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACD,WALD;AAMD;;;uCAEcC,I,EAAc;AAE3B;AACA;AAEA,cAAMC,GAAG,GAAwB,IAAIC,GAAJ,CAAQ,CACrC,CAAC,IAAD,EAAO,SAAP,CADqC,EAErC,CAAC,IAAD,EAAO,IAAP,CAFqC,EAGrC,CAAC,IAAD,EAAO,SAAP,CAHqC,EAIrC,CAAC,IAAD,EAAO,UAAP,CAJqC,EAKrC,CAAC,IAAD,EAAO,SAAP,CALqC,EAMrC,CAAC,IAAD,EAAO,KAAP,CANqC,EAOrC,CAAC,KAAD,EAAQ,KAAR,CAPqC,EAQrC,CAAC,KAAD,EAAQ,WAAR,CARqC,EASrC,CAAC,KAAD,EAAQ,SAAR,CATqC,CAAR,CAAjC;AAYA,cAAMC,QAAQ,GAAGF,GAAG,CAACG,GAAJ,CAAQJ,IAAR,CAAjB;AAEA,iBAAOG,QAAP;AACD;;;oCACWH,I,EAAM;AAChBzC,gBAAM,CAAC6B,YAAP,CAAoBiB,OAApB,CAA4B,oBAA5B,EAAkDL,IAAlD;AACA,eAAKhB,SAAL,CAAeQ,GAAf,CAAmBQ,IAAnB;AACD;;;iCAEQ;AACP,eAAKlB,kBAAL,CAAwBwB,OAAxB;AACA,eAAKzB,aAAL,CAAmB0B,WAAnB;AACA,eAAKxB,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,EAAD,CAArB;AACD;;;;;;;uBApEU5B,Y,EAAY,8I,EAAA,6J,EAAA,uH,EAAA,qI;AAAA,K;;;YAAZA,Y;AAAY,+B;AAAA,c;AAAA,a;AAAA;AAAA;AChBzB;;AACA;;AACA;;AACA;;AACA;;;;;;;;;sEDYaA,Y,EAAY;cARxB,uDAQwB;eARd;AACT6B,kBAAQ,EAAE,UADD;AAETC,qBAAW,EAAE,sBAFJ;AAGTC,mBAAS,EAAE,CAAC,sBAAD;AAHF,S;AAQc,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEhBzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,qD,CAOA;AAKA;AAIA;AAeA;AAcA;AAgBA;;;AAlCA,QAAMC,gCAAgC,GAAoC;AACxEC,qBAAe,EAAE;AADuD,KAA1E,C,CAmDA;;AACO,aAASC,iBAAT,CAA2BC,IAA3B,EAA6C;AAClD,aAAO,IAAI,8EAAJ,CAAwBA,IAAxB,EAA8B,gBAA9B,EAAgD,OAAhD,CAAP;AACD;;QAwFYC,S;;;;;YAAAA,S;AAAS,kBAFR,4DAEQ;;;;yBAATA,S;AAAS,O;AAAA,iBA3BT,CACT;AACA,uFAFS,EAGT,8EAHS,EAIT,oFAJS,EAKT,0FALS,EAMT,iFANS,EAOT,8EAPS,EAQT,sFARS,EAST,6EATS,EAUT,8EAVS,EAWT,6FAXS,EAYT,uFAZS,EAaT,8EAbS,EAcT,oFAdS,EAeT,2GAfS,EAgBT,8EAhBS,EAiBT,oFAjBS,EAmBT;AACA,mFApBS,EAqBT,6EArBS,EAsBT,kEAtBS,EAuBT,iEAvBS,C;AAwBV,gBAhDQ,CACP,uEADO,EAEP,4FAFO,EAGP,oEAHO,EAIP,oEAJO,EAKP,0DALO,EAMP,oEANO,EAOP,qEAPO,EAQP,uEAAetC,OAAf,EARO,EASP,2DAAYA,OAAZ,EATO,EAUP,2DAAYA,OAAZ,EAVO,EAWP,6EAXO,EAYP,iEAAkBA,OAAlB,EAZO,EAaP,6DAAcA,OAAd,EAbO,EAcP,gEAAiBA,OAAjB,EAdO,EAeP,0DAAWA,OAAX,EAfO,EAgBP,oEAAgBA,OAAhB,CAAwB;AACtBuC,cAAM,EAAE;AACNC,iBAAO,EAAE,mEADH;AAENC,oBAAU,EAAEL,iBAFN;AAGNM,cAAI,EAAE,CAAC,+DAAD;AAHA;AADc,OAAxB,CAhBO,CAsBH;AAtBG,OAgDR;;;;0HAGUJ,S,EAAS;AAAA,uBAlFlB,4DAkFkB,EAhFlB;AACA,uGA+EkB,EA9ElB,iFA8EkB,EA7ElB,8EA6EkB,EA5ElB,uFA4EkB,EA3ElB,0FA2EkB,EA1ElB,8GA0EkB,EAzElB,0FAyEkB,EAxElB,0FAwEkB,EAvElB,oFAuEkB,EAtElB,yEAsEkB,EArElB,yEAqEkB,EAnElB;AACA,qFAkEkB,EAjElB,6EAiEkB,EAhElB,kEAgEkB,EA/DlB,iEA+DkB,EA9DlB,2GA8DkB,EA7DlB,oFA6DkB,EA5DlB,0FA4DkB,EA3DlB,qGA2DkB,EA1DlB,qGA0DkB,EAzDlB,uFAyDkB,EAxDlB,6FAwDkB,EAvDlB,8GAuDkB,EAtDlB,qHAsDkB,EArDlB,iFAqDkB;AArDJ,kBAGd,uEAHc,EAId,4FAJc,EAKd,oEALc,EAMd,oEANc,EAOd,0DAPc,EAQd,oEARc,EASd,qEATc,EASE,sEATF,EASE,0DATF,EASE,0DATF,EAad,6EAbc,EAaQ,gEAbR,EAaQ,4DAbR,EAaQ,+DAbR,EAaQ,yDAbR,EAaQ,mEAbR;AAqDI,O;AAxCI,K;;;;;sEAwCbA,S,EAAS;cApFrB,sDAoFqB;eApFZ;AACRK,sBAAY,EAAE,CACZ,4DADY,EAGZ;AACA,yGAJY,EAKZ,iFALY,EAMZ,8EANY,EAOZ,uFAPY,EAQZ,0FARY,EASZ,8GATY,EAUZ,0FAVY,EAWZ,0FAXY,EAYZ,oFAZY,EAaZ,yEAbY,EAcZ,yEAdY,EAgBZ;AACA,uFAjBY,EAkBZ,6EAlBY,EAmBZ,kEAnBY,EAoBZ,iEApBY,EAqBZ,2GArBY,EAsBZ,oFAtBY,EAuBZ,0FAvBY,EAwBZ,qGAxBY,EAyBZ,qGAzBY,EA0BZ,uFA1BY,EA2BZ,6FA3BY,EA4BZ,8GA5BY,EA6BZ,qHA7BY,EA8BZ,iFA9BY,CADN;AAiCR1C,iBAAO,EAAE,CACP,uEADO,EAEP,4FAFO,EAGP,oEAHO,EAIP,oEAJO,EAKP,0DALO,EAMP,oEANO,EAOP,qEAPO,EAQP,uEAAeD,OAAf,EARO,EASP,2DAAYA,OAAZ,EATO,EAUP,2DAAYA,OAAZ,EAVO,EAWP,6EAXO,EAYP,iEAAkBA,OAAlB,EAZO,EAaP,6DAAcA,OAAd,EAbO,EAcP,gEAAiBA,OAAjB,EAdO,EAeP,0DAAWA,OAAX,EAfO,EAgBP,oEAAgBA,OAAhB,CAAwB;AACtBuC,kBAAM,EAAE;AACNC,qBAAO,EAAE,mEADH;AAENC,wBAAU,EAAEL,iBAFN;AAGNM,kBAAI,EAAE,CAAC,+DAAD;AAHA;AADc,WAAxB,CAhBO,CAsBH;AAtBG,WAjCD;AAyDRE,mBAAS,EAAE,CACT;AACA,2FAFS,EAGT,8EAHS,EAIT,oFAJS,EAKT,0FALS,EAMT,iFANS,EAOT,8EAPS,EAQT,sFARS,EAST,6EATS,EAUT,8EAVS,EAWT,6FAXS,EAYT,uFAZS,EAaT,8EAbS,EAcT,oFAdS,EAeT,2GAfS,EAgBT,8EAhBS,EAiBT,oFAjBS,EAmBT;AACA,uFApBS,EAqBT,6EArBS,EAsBT,kEAtBS,EAuBT,iEAvBS,CAzDH;AAkFRC,mBAAS,EAAE,CAAC,4DAAD;AAlFH,S;AAoFY,Q;;;;;;;;;;;;;;;;;;ACzKtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACoCM;;AACE;;AAAkB;;AAAM;;AAAmB;;AAAO;;AACpD;;;;;;AAOY;;;;;;AACA;;;;;;AACA;;;;;;AAJJ;;AACE;;AACE;;AACA;;AACA;;AACF;;AACA;;AAA2B;;;;;;AALb;;AAAA;;AACP;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AAEP;;AAAA;;;;;;AACsB;;;;;;AAAA;;;;;;AAR1B;;AACE;;AAOA;;AACF;;;;;;;;AARgB;;AAAA,+FAAuC,UAAvC,EAAuC,KAAvC;;;;;;AAeV;;AAA0C;;;;AAA0C;;;;;;;;AAA1C;;AAAA;;;;;;AAC1C;;AAA4C;;AAAW;;;;;;;;;;;;;;AAN/D;;AACE;;AACA;;AACE;;AAAkB;;AAAkB;;;;AAAyD;;AAAO;;AAEhG;;AACA;;AACF;;AAAI;;AACN;;AAAkB;;AAAmB;;AAAI;;AACzC;;AACA;;AACF;;AACF;;;;;;;;;;AATwC;;AAAA;;AAChC;;AAAA;;AACc;;AAAA;;AACA;;AAAA;;AAGL;;AAAA,2FAAoC,yBAApC,EAAoC,4GAApC;;;;;;AAST;;AAA0C;;;;AAA0C;;;;;;;;AAA1C;;AAAA;;;;;;AAC1C;;AAA4C;;AAAW;;;;;;;;AAN/D;;AACE;;AACA;;AACE;;AAAkB;;AAAoB;;;;AAC/B;;AAAO;;AACV;;AACA;;AACF;;AAAI;;AACN;;AAAkB;;AAAmB;;AAAM;;AACzC;;AACF;;AACF;;AACF;;;;;;;;;;AAT0C;;AAAA;;AACrB;;AAAA;;AACC;;AAAA;;AACA;;AAAA;;AAGH;;AAAA,2FAAoC,yBAApC,EAAoC,4GAApC;;;;;;AASX;;AAA0C;;;;AAA0C;;;;;;;;AAA1C;;AAAA;;;;;;AAC1C;;AAA4C;;AAAW;;;;;;;;AAN/D;;AACE;;AACA;;AACE;;AAAkB;;AAAmB;;AAAS;;AAAO;;AAEjD;;AACA;;AACF;;AAAI;;AACN;;AAAkB;;AAAmB;;AAAI;;AACvC;;AACF;;AACF;;AACF;;;;;;;;;;AAT4D;;AAAA;;AAEtC;;AAAA;;AACA;;AAAA;;AAGH;;AAAA,2FAAoC,yBAApC,EAAoC,4GAApC;;;;;;AASX;;AAA0C;;;;AAA0C;;;;;;;;AAA1C;;AAAA;;;;;;AAC1C;;AAA4C;;AAAW;;;;;;;;AAN/D;;AACE;;AACA;;AACE;;AAAkB;;AAAmB;;AAAW;;AAAO;;AAEnD;;AACA;;AACF;;AAAI;;AACN;;AAAkB;;AAAmB;;AAAI;;AACvC;;AACF;;AACF;;AACF;;;;;;;;;;AAT8D;;AAAA;;AAExC;;AAAA;;AACA;;AAAA;;AAGH;;AAAA,2FAAoC,yBAApC,EAAoC,4GAApC;;;;;;AAQX;;AAA0C;;;;AAA0C;;;;;;;;AAA1C;;AAAA;;;;;;AAC1C;;AAA4C;;AAAW;;;;;;;;AAL/D;;AACE;;AACE;;AAAkB;;AAAoB;;;;AAAmC;;AAAO;;AAE5E;;AACA;;AACF;;AAAI;;AACN;;AAAkB;;AAAmB;;AAAc;;AACjD;;AACF;;AACF;;AACF;;;;;;;;;;AAT0C;;AAAA;;AAClC;;AAAA;;AACc;;AAAA;;AACA;;AAAA;;AAGH;;AAAA,2FAAoC,yBAApC,EAAoC,6GAApC;;;;;;AA1EvB;;AACE;;AACE;;AAYA;;AAaA;;AAaA;;AAaA;;AAaA;;AAYF;;AACF;;;;;;;;AA9EgB;;AAAA;;AAaP;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;AAaA;;AAAA;;;;;;AAzDX;;AACE;;AAGA;;;;AAgFF;;;;;;AAnFgB;;AAAA;;AAGA;;AAAA;;;;;;;;AAtCpB;;AACE;;AACE;;AACE;;AACE;;AAAI;;AAAmB;;AACzB;;AACA;;AACE;;AACE;;AACE;;AAA0B;;AAAO;;AACjC;;AACE;;AAA+D;AAAA;;AAAA;;AAAA;AAAA;;AAA/D;;AACA;;AACF;;AACF;;AACA;;AAAgD;;AAAqB;;AACrE;;AAAI;;AAAO;;AACX;;AAA2B;;AAAM;;;;AAAwD;;AAAO;;AAC/E;;AAAC;;AAAO;;AACM;;;;AAA8C;;AAAO;;AACpF;;AAAI;;AAAQ;;AACZ;;AACF;;AACA;;AACE;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAuB;;AAAe;;AACtC;;AAA8E;;AAAgB;;AAChG;;AACA;;AAqFF;;AACF;;;;;;AA5G2B;;AAAA;;AAG+B;;AAAA;;AAEf;;AAAA;;AAEF;;AAAA;;AAEjB;;AAAA;;AAGJ;;AAAA;;AAQM;;AAAA;;AAES;;AAAA;;;;QDhBtBC,oB;AAGX,oCACUC,KADV,EAEU5C,aAFV,EAGSG,SAHT,EAIS0C,cAJT,EAKSC,WALT,EAMU5C,MANV,EAOUD,kBAPV,EAQU8C,aARV,EASUC,eATV,EAS0C;AAAA;;AARhC,aAAAJ,KAAA,GAAAA,KAAA;AACA,aAAA5C,aAAA,GAAAA,aAAA;AACD,aAAAG,SAAA,GAAAA,SAAA;AACA,aAAA0C,cAAA,GAAAA,cAAA;AACA,aAAAC,WAAA,GAAAA,WAAA;AACC,aAAA5C,MAAA,GAAAA,MAAA;AACA,aAAAD,kBAAA,GAAAA,kBAAA;AACA,aAAA8C,aAAA,GAAAA,aAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AAVV,aAAA5C,SAAA,GAAY,IAAI,oDAAJ,EAAZ;AAYE,aAAA6C,OAAA,GAAU,IAAV;AADE;;;;mCAGI;AAAA;;AACN,cAAI,CAAC,KAAKjD,aAAL,CAAmBa,MAAxB,EAAgC;AAC9B,iBAAKX,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,EAAD,CAArB;AACD,WAFD,MAEO;AACL,iBAAK1B,kBAAL,CAAwBa,QAAxB;AACA,gBAAIoC,OAAO,GAAG,KAAKN,KAAL,CAAWO,QAAX,CAAoBC,QAApB,CAA6B7B,GAA7B,CAAiC,SAAjC,CAAd;;AACA,gBAAI,KAAKvB,aAAL,CAAmBqD,aAAnB,CAAiCH,OAAjC,CAAJ,EAA+C;AAC7C,mBAAKI,OAAL,GAAe,KAAKtD,aAAL,CAAmBa,MAAnB,CAA0B0C,UAA1B,CAAqCL,OAArC,CAAf;AACD;;AACD,iBAAKhD,MAAL,CAAYa,MAAZ,CACGyC,IADH,CACQ,8EAAO,UAACvC,GAAD;AAAA,qBAASA,GAAG,YAAY,6DAAxB;AAAA,aAAP,CADR,EAEGD,SAFH,CAEa,YAAM;AACfkC,qBAAO,GAAG,KAAI,CAACN,KAAL,CAAWO,QAAX,CAAoBC,QAApB,CAA6B7B,GAA7B,CAAiC,SAAjC,CAAV;;AACA,kBAAI,KAAI,CAACvB,aAAL,CAAmBa,MAAnB,IAA6B,KAAI,CAACb,aAAL,CAAmBqD,aAAnB,CAAiCH,OAAjC,CAAjC,EAA4E;AAC1E,qBAAI,CAACI,OAAL,GAAe,KAAI,CAACtD,aAAL,CAAmBa,MAAnB,CAA0B0C,UAA1B,CAAqCL,OAArC,CAAf;AACD;AACF,aAPH;AAQEO,uBAAW,CAAC;AAAA,qBAAM,KAAI,CAACR,OAAL,GAAe,CAAC,KAAI,CAACA,OAA3B;AAAA,aAAD,EAAqC,KAAK,IAA1C,CAAX;AACH;AACF;;;gCACOS,W,EAAgB;AACtB,cAAIA,WAAW,CAACC,IAAZ,KAAqB,aAAzB,EAAwC;AACtC,gBAAID,WAAW,CAACC,IAAZ,KAAqB,YAAzB,EAAuC;AACrC,kBAAID,WAAW,CAACE,WAAhB,EAA6B;AAC3B,uBAAO,WAAP;AACD,eAFD,MAEO;AACL,uBAAO,aAAP;AACD;AACF,aAND,MAMO;AACL,qBAAOF,WAAW,CAACC,IAAnB;AACD;AACF,WAVD,MAUO;AACL,gBAAIE,aAAa,GAAG,EAApB;;AACA,gBAAIH,WAAW,CAACI,MAAZ,KAAuB,KAAKR,OAAL,CAAaJ,OAAxC,EAAiD;AAC/CW,2BAAa,GAAG,MAAhB;AACD,aAFD,MAEO;AACLA,2BAAa,GAAG,UAAhB;AACD;;AACD,mBAAOA,aAAP;AACD;AACF;;;wCAEeH,W,EAAgB;AAC9B,iBAAO,KAAKV,eAAL,CAAqBe,eAArB,CAAqCL,WAArC,EAAkD,KAAKJ,OAAvD,CAAP;AACD;;;6BACIA,O,EAAkB;AACrB,wDAAI,CAACA,OAAO,CAACJ,OAAT,CAAJ;AACA,cAAMc,eAAe,GAAG,KAAK7D,SAAL,CAAe8D,OAAf,CACtB,qCADsB,CAAxB;AAGA,eAAKpB,cAAL,CAAoBqB,GAApB,CAAwBZ,OAAO,CAACJ,OAAR,GAAkB,GAAlB,GAAwBc,eAAhD,EAAiE,CAAjE;AACD;;;oCACWG,I,EAAc;AACxB,cAAMC,OAAO,GAAG,KAAKhE,SAAL,CAAeiE,GAAf,CAAmBC,OAAnB,KAA+B,SAA/B,GAA2C,kBAA3C,GAAgE,2BAAhF;AACA,iBAAOF,OAAO,GAAGD,IAAjB;AACD;;;;;;;uBAvEUxB,oB,EAAoB,+H,EAAA,8I,EAAA,qI,EAAA,iJ,EAAA,iI,EAAA,uH,EAAA,6J,EAAA,+I,EAAA,qJ;AAAA,K;;;YAApBA,oB;AAAoB,uC;AAAA;AAAA;AAAA,O;AAAA,c;AAAA,a;AAAA,wwD;AAAA;AAAA;ACnBjC;;AACA;;;;AADY;;AACM;;AAAA;;;;;;;;;;sEDkBLA,oB,EAAoB;cALhC,uDAKgC;eALtB;AACTf,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,+BAAD;AAHF,S;AAKsB,Q;;;;;;;;;;;;;;;;;;;;;;gBAe5B;;;;;;;;;;;;;;;;;;;;AElCL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,mE,CAIwD;;;;;ACc5B;;AAAoD;;;;AAA6C;;;;;;AAA7C;;AAAA;;;;;;AAoBhD;;AAAqD;;;;AAA8C;;;;;;AAA9C;;AAAA;;;;;;;;AAVrE;;AACI;;AAA2C;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACvC;;AACI;;AACA;;AAA8B;;AAA4B;;AAC1D;;AAA+D;AAAA;;AAAA;;AAAA;;AAASyC,gBAAM,CAACC,eAAP;AAAwB;AAAA,SAAjC;;AAA/D;;AACJ;;AACA;;AACI;;AACI;;AAA0B;;;;AAAuD;;AACjF;;AACJ;;AACA;;AAKJ;;AACJ;;AACA;;AACJ;;;;;;;;AAhB0C;;AAAA;;AAKA;;AAAA;;AACpB;;AAAA;;;;;;;;AA9B1B;;AACI;;AAA2C;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACvC;;AACI;;AACA;;AAA8B;;AAA2B;;AACzD;;AAA+D;AAAA;;AAAA;;AAAA;;AAASD,gBAAM,CAACC,eAAP;AAAwB;AAAA,SAAjC;;AAA/D;;AACJ;;AACA;;AACI;;AACI;;AAA0B;;;;AAAsD;;AAChF;;AACJ;;AACA;;AAKJ;;AACJ;;AACA;;AACA;;AAqBJ;;;;;;;;AArC0C;;AAAA;;AAKA;;AAAA;;AACpB;;AAAA;;AAUJ;;AAAA;;;;;;AA3B9B;;AACI;;AACI;;AACI;;AAAiB;;AAAQ;;AACzB;;AACJ;;AACA;;AACI;;AA0CA;;AACI;;AACI;;AACI;;AAA0B;;;;AAAyE;;AACnG;;AAA0B;;;;AAAgE;;AAC9F;;AACJ;;AACJ;;AACJ;;AACJ;;AACJ;;;;;;AApD0B;;AAAA;;AA6CwB;;AAAA;;AACA;;AAAA;;;;QDnCrCC,iB;AAGX,iCACSzE,aADT,EAEUE,MAFV,EAGUC,SAHV,EAIU0C,cAJV,EAKU5C,kBALV,EAKgD;AAAA;;AAJvC,aAAAD,aAAA,GAAAA,aAAA;AACC,aAAAE,MAAA,GAAAA,MAAA;AACA,aAAAC,SAAA,GAAAA,SAAA;AACA,aAAA0C,cAAA,GAAAA,cAAA;AACA,aAAA5C,kBAAA,GAAAA,kBAAA;AAPV,aAAAyE,YAAA,GAAe,KAAf;AAQK;;;;mCAEG;AACN,cAAI,CAAC,KAAK1E,aAAL,CAAmBa,MAAxB,EAAgC;AAC9B,iBAAKX,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,EAAD,CAArB;AACD,WAFD,MAEO;AACL,iBAAKgD,QAAL;AACA,iBAAK1E,kBAAL,CAAwBa,QAAxB;AACA,iBAAK8D,gBAAL,GAAwB,KAAK5E,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAAlD;AACD;AACF;;;6BACItB,O,EAAkB;AACrB,wDAAI,CAACA,OAAO,CAACJ,OAAT,CAAJ;AACA,cAAMc,eAAe,GAAG,KAAK7D,SAAL,CAAe8D,OAAf,CACtB,qCADsB,CAAxB;AAGA,eAAKpB,cAAL,CAAoBqB,GAApB,CAAwBZ,OAAO,CAACJ,OAAR,GAAkB,GAAlB,GAAwBc,eAAhD,EAAiE,CAAjE;AACD;;;+BACMV,O,EAAkB;AACvBuB,iBAAO,CAACC,GAAR,CAAY,eAAexB,OAAO,CAACJ,OAAnC;AACA,eAAKhD,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,SAAD,EAAY2B,OAAO,CAACJ,OAApB,CAArB;AACD;;;mCAEU;AACT,eAAKwB,YAAL,GAAqBhG,MAAM,CAACqG,UAAP,GAAoB,GAAzC;AACD;;;sCACazB,O,EAAkB;AAC9B,cAAI,KAAKoB,YAAT,EAAuB;AACrB,mBAAOpB,OAAO,CAACJ,OAAf;AACD,WAFD,MAEO;AACL,mBAAOI,OAAO,CAAC0B,YAAR,EAAP;AACD;AACF;;;;;;;uBAzCUP,iB,EAAiB,8I,EAAA,uH,EAAA,qI,EAAA,iJ,EAAA,6J;AAAA,K;;;YAAjBA,iB;AAAiB,mC;AAAA;AAAA;;mBAAjB,c;AAAU,W,EAAA,K,EAAA,6D;;;;;;;;ACnBvB;;AACA;;;;AAAkB;;AAAA;;;;;;;;;;sEDkBLA,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACT7C,kBAAQ,EAAE,cADD;AAETC,qBAAW,EAAE,2BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD;AAHF,S;AAKmB,Q;;;;;;;;;;;;;;gBA+B3B,0D;iBAAa,e;;;;;;;;;;;;;;;;;;;;AElDhB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACWM;;AACI;;AACJ;;;;;;AADI;;AAAA;;;;QDDGmD,iB;AAIX,iCACUpC,cADV,EAEUqC,gBAFV,EAGUC,sBAHV,EAIUhF,SAJV,EAIqC;AAAA;;AAH3B,aAAA0C,cAAA,GAAAA,cAAA;AACA,aAAAqC,gBAAA,GAAAA,gBAAA;AACA,aAAAC,sBAAA,GAAAA,sBAAA;AACA,aAAAhF,SAAA,GAAAA,SAAA;AALV,aAAAiF,WAAA,GAAc,EAAd;AAMK;;;;mCAEM,CACV;;;mCACU;AAAA;;AACT,eAAKA,WAAL,GAAmB,KAAKC,UAAL,EAAnB;;AACA,cAAI,CAAC,KAAKD,WAAV,EAAuB;AACrB,gBAAME,GAAG,GAAG,KAAKA,GAAjB;AACA,gBAAMC,MAAM,GAAG,KAAKA,MAApB;AACA,iBAAKD,GAAL,GAAW,EAAX;AACA,iBAAKC,MAAL,GAAc,EAAd;AACA,iBAAKL,gBAAL,CAAsBM,QAAtB,CAA+BF,GAA/B,EAAoCC,MAApC,EAA4CvE,SAA5C,CACE,UAACyE,GAAD,EAAc;AACZ,kBAAIA,GAAG,CAACC,OAAR,EAAiB;AACf,oBAAID,GAAG,CAACE,OAAJ,CAAYC,MAAhB,EAAwB;AACtB,wBAAI,CAACzF,SAAL,CAAeoB,GAAf,CAAmB,mCAAnB,EAAwDP,SAAxD,CACE,UAAC6E,GAAD;AAAA,2BAAiB,MAAI,CAAChD,cAAL,CAAoBiD,UAApB,CAA+BD,GAA/B,CAAjB;AAAA,mBADF,CACwD;AADxD;AAGD,iBAJD,MAIO;AACL,wBAAI,CAAC1F,SAAL,CAAeoB,GAAf,CAAmB,gCAAnB,EAAqDP,SAArD,CACE,UAAC6E,GAAD;AAAA,2BAAiB,MAAI,CAAChD,cAAL,CAAoBkD,UAApB,CAA+BF,GAA/B,CAAjB;AAAA,mBADF,CACwD;AADxD;AAGD;AACF,eAVD,MAUO;AACL,oBAAIG,YAAY,GAAG,EAAnB;;AACA,oBAAI,OAAOP,GAAG,CAACE,OAAJ,CAAYM,GAAnB,KAA2B,QAA/B,EAAyC;AACvCD,8BAAY,GAAG,eAAeP,GAAG,CAACE,OAAJ,CAAYM,GAA1C;AACD,iBAFD,MAEO;AACLD,8BAAY,GAAG,eAAeE,IAAI,CAACC,SAAL,CAAeV,GAAG,CAACE,OAAJ,CAAYM,GAA3B,CAA9B;AACD;;AACD,sBAAI,CAACpD,cAAL,CAAoBuD,QAApB,CAA6BJ,YAA7B;;AACAnB,uBAAO,CAACC,GAAR,CAAYoB,IAAI,CAACC,SAAL,CAAeV,GAAG,CAACE,OAAJ,CAAYM,GAA3B,CAAZ;AACD;AACF,aAtBH,EAuBE,UAAAI,GAAG,EAAI;AACL,oBAAI,CAAClG,SAAL,CAAeoB,GAAf,CAAmB,gCAAnB,EAAqDP,SAArD,CACE,UAAC6E,GAAD,EAAiB;AACf,oBAAIG,YAAY,GAAG,EAAnB;AACA,oBAAMM,cAAc,GAAGT,GAAvB;;AACA,oBAAI,OAAOQ,GAAG,CAACV,OAAJ,CAAYM,GAAnB,KAA2B,QAA/B,EAAyC;AACvCD,8BAAY,GAAGM,cAAc,GAAG,GAAjB,GAAuBD,GAAG,CAACV,OAAJ,CAAYM,GAAlD;AACD,iBAFD,MAEO;AACLD,8BAAY,GAAGM,cAAf;AACD;;AACD,sBAAI,CAACzD,cAAL,CAAoBuD,QAApB,CAA6BJ,YAA7B;AACD,eAVH,CAUK;AAVL;;AAYAnB,qBAAO,CAACC,GAAR,CAAYoB,IAAI,CAACC,SAAL,CAAeE,GAAf,CAAZ;AACD,aArCH;AAuCD;AACF;;;qCACS;AACR,cAAI,CAAC,KAAKlB,sBAAL,CAA4BjC,OAA5B,CAAoC,KAAKoC,GAAzC,CAAL,EAAoD;AAClD,mBAAO,0BAAP;AACD,WAFD,MAEO,IAAI,CAAC,KAAKH,sBAAL,CAA4BhG,IAA5B,CAAiC,KAAKoG,MAAtC,CAAL,EAAoD;AACzD,mBAAO,0BAAP;AACD;;AACD,iBAAO,EAAP;AACD;;;;;;;uBApEUN,iB,EAAiB,iJ,EAAA,uJ,EAAA,2K,EAAA,qI;AAAA,K;;;YAAjBA,iB;AAAiB,mC;AAAA,e;AAAA,a;AAAA,yT;AAAA;AAAA;ACX9B;;AACI;;AACI;;AACJ;;AACA;;AAAuB;;AAAkH;;AACzI;;AACE;;AAAgB;;AAAoB;;AACpC;;AAAgC;AAAA;AAAA;;AAAhC;;AACA;;AAAgB;;AAAoB;;AACpC;;AAAgC;AAAA;AAAA;;AAAhC;;AACA;;AAAqB;;AAAwB;;AAA4B;;AAAI;;AAAS;;AAAI;;AAA4B;AAAA,mBAAS,IAAAO,QAAA,EAAT;AAAmB,WAAnB;;AAAqB;;AAAQ;;AAAS;;AAC5J;;AAGF;;AACJ;;;;AARsC;;AAAA,uFAAiB,aAAjB,EAAiB,QAAjB;;AAEA;;AAAA,0FAAoB,aAApB,EAAoB,MAApB;;AAE1B;;AAAA;;;;;;;;;sEDACP,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACTrD,kBAAQ,EAAE,cADD;AAETC,qBAAW,EAAE,2BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD;AAHF,S;AAKmB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEX9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACAA;;AACE;;AACE;;AACE;;AAAG;;AAA8J;;AAAyC;;AAAY;;AAAK;;AAAI;;AAA2C;;AAAc;;AAAI;;AAAC;;AAC7R;;AAAK;;AACH;;AAAQ;AAAA;;AAAA;;AAAA;AAAA;;AAAmB;;AAAM;;AACjC;;AAAG;;AAAsH;;AAC3H;;AACA;;AACE;;AAAsB;;AAAQ;;AAAO;;AAAS;;AAC9C;;AAAG;;AAA6H;;AAClI;;AACA;;AACF;;AACF;;AACF;;;;QDPayE,kB;AAGX,kCACUC,QADV,EAC4B;AAAA;;AAAlB,aAAAA,QAAA,GAAAA,QAAA;AAHV,aAAAC,gBAAA,GAAmB,KAAnB;AACA,aAAAC,GAAA,GAAM,gBAAN;AAGO;;;;mCACC;AACN;AACA,cAAMC,QAAQ,GAAGpG,YAAY,CAACC,OAAb,CAAqB,KAAKkG,GAA1B,CAAjB;AACA,cAAMnH,IAAI,GAAG,KAAKiH,QAAL,CAAcjH,IAAd,EAAb;AACAsF,iBAAO,CAACC,GAAR,CAAYvF,IAAZ;;AACA,cAAI,CAACoH,QAAD,IAAapH,IAAI,KAAK,eAAtB,IAAyCA,IAAI,KAAK,iBAAtD,EAAyE;AACvE,iBAAKkH,gBAAL,GAAwB,IAAxB;AACA,gBAAMG,cAAc,GAAGlI,MAAM,CAACqG,UAAP,GAAoB8B,QAAQ,CAACC,IAAT,CAAcC,WAAzD;AACAF,oBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkCL,cAAc,CAACM,QAAf,EAAlC;AACAL,oBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBG,SAApB,GAAgC,QAAhC;AACD;AACF;;;iCACQ;AACP5G,sBAAY,CAACiB,OAAb,CAAqB,KAAKkF,GAA1B,EAA+B,GAA/B;AACA,eAAKD,gBAAL,GAAwB,KAAxB;AACAI,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkC,EAAlC;AACAJ,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBG,SAApB,GAAgC,EAAhC;AACD;;;iCACQ;AACPN,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkC,EAAlC;AACAJ,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBG,SAApB,GAAgC,EAAhC;AACAzI,gBAAM,CAAC0I,IAAP,CAAY,EAAZ,EAAgB,OAAhB;AACD;;;;;;;uBA5BUb,kB,EAAkB,yH;AAAA,K;;;YAAlBA,kB;AAAkB,oC;AAAA,c;AAAA,a;AAAA,yT;AAAA;AAAA;ACR/B;;;;AAAK;;;;;;;;;sEDQQA,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACT3E,kBAAQ,EAAE,eADD;AAETC,qBAAW,EAAE,4BAFJ;AAGTC,mBAAS,EAAE,CAAC,4BAAD;AAHF,S;AAKoB,Q;;;;;;;;;;;;;;;;;;;;;;AER/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOauF,sB;AAEX,wCAAc;AAAA;AAAG;;;;mCAET,CACP;;;;;;;uBALUA,sB;AAAsB,K;;;YAAtBA,sB;AAAsB,yC;AAAA,e;AAAA,a;AAAA,4B;AAAA;AAAA;ACPnC;;AACE;;AAAI;;AAAc;;AAClB;;AAAI;;AAAY;;AAChB;;AAAG;;AAI4D;;AAE/D;;AAAG;;AAA6G;;AAEhH;;AAAI;;AAAuB;;AAC3B;;AAAG;;AAIH;;AAEA;;AAAG;;AAAH;;AACA;;AAAG;;AAEsF;;AAEzF;;AAAG;;AAE0C;;AAE7C;;AAAI;;AAAe;;AACnB;;AAAG;;AACS;;AAEZ;;AAAG;;AAAyC;;AAE5C;;AAAI;;AAAgE;;AAEpE;;AAAG;;AAGmB;;AAEtB;;AAAI;;AAAa;;AACjB;;AAAG;;AACqE;;AAExE;;AAAI;;AAAgB;;AACpB;;AAAG;;AACgD;;AAEnD;;AAAI;;AAAY;;AAChB;;AAAG;;AAEuE;;AAE1E;;AAAI;;AAAQ;;AACZ;;AAAG;;AAGO;;AAEV;;AAAI;;AAAmC;;AACvC;;AAAG;;AAES;;AAEZ;;AAAI;;AAAyB;;AAC7B;;AAAG;;AACW;;AAEd;;AAAI;;AAAU;;AACd;;AAAG;;AAG4C;;AAEjD;;;;;;;;sEDnEaA,sB,EAAsB;cALlC,uDAKkC;eALxB;AACTzF,kBAAQ,EAAE,oBADD;AAETC,qBAAW,EAAE,iCAFJ;AAGTC,mBAAS,EAAE,CAAC,iCAAD;AAHF,S;AAKwB,Q;;;;;;;;;;;;;;;;;;;;AEPnC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOawF,mB;AAEX,qCAAc;AAAA;AAAG;;;;mCAET,CACP;;;;;;;uBALUA,mB;AAAmB,K;;;YAAnBA,mB;AAAmB,uC;AAAA,gB;AAAA,a;AAAA,4B;AAAA;AAAA;ACPhC;;AACE;;AAAI;;AAAY;;AAChB;;AAAG;;AAAG;;AAA2B;;AAAI;;AACrC;;AAAG;;AACkD;;AAErD;;AAAI;;AAAsB;;AAC1B;;AAAG;;AAUiE;;AAEpE;;AAAI;;AAA+B;;AACnC;;AAAG;;AAKwC;;AAE3C;;AAAI;;AAAc;;AAClB;;AAAG;;AAEW;;AAEd;;AAAG;;AAK4G;;AAE/G;;AAAG;;AAMsD;;AAEzD;;AAAI;;AAAgC;;AACpC;;AAAG;;AAAH;;AAQA;;AAAI;;AAAqB;;AAEzB;;AAAI;;AAAwB;;AAC5B;;AAAG;;AASiE;;AAEpE;;AAAG;;AAIG;;AAEN;;AAAG;;AAIsE;;AAEzE;;AAAI;;AAAoD;;AACxD;;AAAG;;AAGgB;;AAEnB;;AAAI;;AAA2D;;AAC/D;;AAAG;;AAE2G;;AAE9G;;AAAI;;AAA+D;;AACnE;;AAAG;;AAKgF;;AAEnF;;AAAI;;AAAkC;;AACtC;;AAAG;;AAIqE;;AAExE;;AAAI;;AAAwB;;AAC5B;;AAAG;;AAO6D;;AAEhE;;AAAI;;AAAY;;AAChB;;AAAG;;AAO4D;;AAE/D;;AAAI;;AAA0B;;AAC9B;;AAAG;;AAiBwD;;AAE3D;;AAAG;;AACoG;;AAEvG;;AAAI;;AAAwB;;AAC5B;;AAAI;;AAA0B;;AAC9B;;AAAG;;AAI8C;;AAEjD;;AAAI;;AAAmB;;AACvB;;AAAG;;AAEiE;;AAEpE;;AAAG;;AAGyB;;AAE5B;;AAAG;;AAE4G;;AAE/G;;AAAG;;AAE+D;;AAElE;;AAAG;;AACmE;;AAEtE;;AAAG;;AAC+G;;AAElH;;AAAI;;AAAQ;;AACZ;;AAAG;;AAOQ;;AAEX;;AAAI;;AAA8B;;AAClC;;AAAG;;AAE6D;;AAEhE;;AAAG;;AAEwD;;AAE3D;;AAAI;;AAAgC;;AACpC;;AAAG;;AACY;;AAEf;;AAAI;;AAAoE;;AACxE;;AAAG;;AAC8G;;AAEjH;;AAAG;;AAED;;AAAI;;AACJ;;AAAI;;AAEJ;;AAAI;;AAEJ;;AAAI;;AAEoB;;AAE1B;;AAAG;;AAAiD;;AAEpD;;AAAG;;AAAsB;;AAEzB;;AAAI;;AAA+C;;AAEnD;;AAAG;;AACe;;AAElB;;AAAI;;AAA+B;;AAEnC;;AAAG;;AAEW;;AAEd;;AAAI;;AAAwB;;AAE5B;;AAAG;;AAOgD;;AAEnD;;AAAG;;AAK4D;;AAE/D;;AAAG;;AAEsF;;AAEzF;;AAAI;;AAAa;;AAEjB;;AAAG;;AAEmG;;AAEtG;;AAAI;;AAAwB;;AAE5B;;AAAG;;AAOkB;;AAErB;;AAAI;;AAAkF;;AAEtF;;AAAG;;AAGwG;;AAE3G;;AAAI;;AAAkB;;AAEtB;;AAAG;;AAC4C;;AAE/C;;AAAI;;AAAuB;;AAE3B;;AAAI;;AAAqB;;AAEzB;;AAAG;;AAIsB;;AAEzB;;AAAI;;AAAqC;;AAEzC;;AAAG;;AAIqB;;AAExB;;AAAI;;AAA2B;;AAE/B;;AAAG;;AAEiC;;AAEpC;;AAAI;;AAAmB;;AAEvB;;AAAG;;AAAiG;;AAEpG;;AAAI;;AAAmB;;AAEvB;;AAAG;;AAC4D;;AACjE;;;;;;;;sEDxTaA,mB,EAAmB;cAL/B,uDAK+B;eALrB;AACT1F,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,+BAAD;AAHF,S;AAKqB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEOlB;;AAAgD;;AAAG;;;;;;AACnD;;AAA+C;;AAAE;;;;QCAlDyF,sB;AASX,sCACUrH,MADV,EAEUsH,aAFV,EAGUC,aAHV,EAIU5E,cAJV,EAKUsC,sBALV,EAMUnF,aANV,EAMsC;AAAA;;AAL5B,aAAAE,MAAA,GAAAA,MAAA;AACA,aAAAsH,aAAA,GAAAA,aAAA;AACA,aAAAC,aAAA,GAAAA,aAAA;AACA,aAAA5E,cAAA,GAAAA,cAAA;AACA,aAAAsC,sBAAA,GAAAA,sBAAA;AACA,aAAAnF,aAAA,GAAAA,aAAA;AAdV,aAAA0H,WAAA,GAAc,CAAd;AACA,aAAAtH,SAAA,GAAY,IAAI,oDAAJ,EAAZ;AACA,aAAAuH,WAAA,GAAc,qBAAd;AACA,aAAAC,WAAA,GAAc,yBAAd;AAEA,aAAAC,yBAAA,GAA4B,KAA5B;AACA,aAAAC,wBAAA,GAA2B,KAA3B;AASO;;;;mCAEI;AACT,eAAKvI,IAAL,GAAY,KAAKqI,WAAjB;AACD;;;gCACa;;;;;;;AACNrI,wB,GAAe,KAAKA,IAAL,CAAUwI,OAAV,CAAkB,KAAKH,WAAvB,EAAoC,KAAKD,WAAzC,C;;yBACjB,KAAKxC,sBAAL,CAA4B6C,cAA5B,CAA2CzI,IAA3C,C;;;;;AACF,yBAAKsI,yBAAL,GAAiC,IAAjC;;AAEE,yBAAKhF,cAAL,CAAoBoF,YAApB,CAAiC,oCAAjC;;AACW,2BAAM,KAAKT,aAAL,CAAmBU,gBAAnB,CAAoC3I,IAApC,CAAN;;;AAAL4I,sB;AACNtD,2BAAO,CAACC,GAAR,CAAY,cAAcqD,EAA1B;;AACA,2BAAM,KAAKC,YAAL,CAAkBD,EAAlB,EAAsB5I,IAAtB,CAAN;;;;;;;;;;;;;AAIA,yBAAKsI,yBAAL,GAAiC,KAAjC;AACA,yBAAKhF,cAAL,CAAoBwF,WAApB;;;;;;;;AAGF,yBAAKxF,cAAL,CAAoBkD,UAApB,CAA+B,yBAA/B;;;;;;;;;AAEH;;;qCACkBoC,E,EAAY5I,I,EAAc;;;;;;yBACvC,qEAAM+I,cAAN,CAAqBH,EAArB,C;;;;;;AACE,2BAAM,KAAKV,aAAL,CAAmBc,kBAAnB,CAAsCJ,EAAtC,EAA0C5I,IAA1C,CAAN;;;;;;;;AACF,wBAAI,KAAKS,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C4D,MAA3C,KAAsD,CAAtD,IAA2D,KAAKxI,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8C6D,kBAA9C,CAAiED,MAAjE,KAA4E,CAA3I,EAA8I;AAC5I,2BAAKtI,MAAL,CAAYyB,QAAZ,CAAqB,oBAAa,KAAK3B,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8C1B,OAA3D,EAArB;AACD,qBAFD,MAEO;AACL,2BAAKhD,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACD;;;;;;AAED,yBAAKkB,cAAL,CAAoBuD,QAApB,CAA6B,gCAA7B;;;;;;;AAGF,yBAAKvD,cAAL,CAAoBuD,QAApB,CAA6B,wBAA7B;;;;;;;;;AAEH;;;yCACgB;AACf,cAAI,KAAK0B,wBAAT,EAAmC;AACjC,iBAAKvI,IAAL,GAAY,KAAKqI,WAAjB;AACD,WAFD,MAEO;AACL,iBAAKrI,IAAL,GAAY,KAAKoI,WAAjB;AACD;AACF;;;;;;;uBA7DUJ,sB,EAAsB,uH,EAAA,8I,EAAA,8I,EAAA,iJ,EAAA,2K,EAAA,8I;AAAA,K;;;YAAtBA,sB;AAAsB,yC;AAAA,e;AAAA,a;AAAA,+c;AAAA;AAAA;ADfnC;;AACI;;AAAI;;AAA+B;;AACnC;;AACE;;AAA4B;;AACb;;AACf;;AAAuB;;AAAwF;;AAC/G;;AAAuE;AAAA;AAAA;;AAAvE;;AAEA;;AAAO;;AAA6B;;AACpC;;AACI;;AACI;;AAAuB;AAAA;AAAA,aAAsC,OAAtC,EAAsC;AAAA,mBAAU,IAAAmB,cAAA,EAAV;AAA0B,WAAhE;;AAAvB;;AACA;;AACJ;;AAAQ;;AACJ;;AACA;;AACJ;;AACJ;;AACA;;AACI;;AAAkB;;AAA4B;;AAAI;;AAAS;;AAC3D;;AAA4B;AAAA,mBAAS,IAAAC,KAAA,EAAT;AAAgB,WAAhB;;AAAkB;;AAAO;;AACzD;;AACF;;AACJ;;;;AAjBsC;;AAAA,8GAAsC,SAAtC,EAAsC,QAAtC;;AAKD;;AAAA;;AAGT;;AAAA;;AACA;;AAAA;;;;;;;;;sECAfpB,sB,EAAsB;cALlC,uDAKkC;eALxB;AACT3F,kBAAQ,EAAE,oBADD;AAETC,qBAAW,EAAE,iCAFJ;AAGTC,mBAAS,EAAE,CAAC,iCAAD;AAHF,S;AAKwB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdjC;;AAAsC;;AAAgB;;AAAM;AAAA;;AAAA;;AAAA;AAAA;;AAAsB;;AAAgB;;AAAO;;;;;;;;AACzG;;AAAqC;;AAA6B;;AAAM;AAAA;;AAAA;;AAAA;AAAA;;AAAsB;;AAAmB;;AAAO;;;;;;AAAnF;;AAAA;;;;;;AAwBjC;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;;;AAdJ;;AACE;;AACE;;AAAO;;AAAuB;;AAC9B;;AAAG;;AAA2B;;AAChC;;AACA;;AACE;;AAAO;;AAAyB;;AAChC;;AAA4C;AAAA;;AAAA;;AAAA;AAAA;;AAA5C;;AACF;;AACA;;AACE;;AAAO;;AAAS;;AAChB;;AAAgC;AAAA;;AAAA;;AAAA;AAAA;;AAAhC;;AACF;;AACA;;AAGA;;AAAqB;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAO;;AACrD;;;;;;AAdO;;AAAA;;AAIyC;;AAAA;;AAIM;;AAAA;;AAAlB;;AAE5B;;AAAA;;;;;;AAUN;;AACE;;;;AACF;;;;;;AADE;;AAAA;;;;;;AAEF;;AACE;;AACF;;;;;;;;AAKE;;AAAiF;AAAA;;AAAA;;AAAA;AAAA,WAAsB,OAAtB,EAAsB;AAAA;;AAAA;;AAAA,qCAAuH,EAAvH;AAAyH,SAA/I,EAAsB,QAAtB,EAAsB;AAAA;;AAAA;;AAAA,qCAAqJ,EAArJ;AAAuJ,SAA7K;;AAAjF;;;;;;AAAiF;;;;;;;;AACjF;;AAA4F;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAgB;;;;;;;;AAEjI;;AAA6B;AAAA;;AAAA;;AAAA;AAAA;;AAC3B;;AAA6D;;;;;;AADf;;AAC9C;;AAAA;;;;;;AAGN;;AAAkD;;AAAmB;;;;;;AAAnB;;AAAA;;;;;;AArBpD;;AACE;;AACE;;AACF;;AACA;;AAGA;;AAGA;;AACE;;;;AACF;;AACA;;AACE;;AACA;;AACA;;AAIF;;AACA;;AACF;;;;;;;;AApBI;;AAAA;;AAEC;;AAAA;;AAGA;;AAAA;;AAID;;AAAA;;AAGO;;AAAA;;AACC;;AAAA,0IAAqE,UAArE,EAAqE,KAArE;;AAMJ;;AAAA;;;;;;;;AAhDZ;;AAEE;;AACE;;AAAe;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAtC;;AACA;;AACE;;AAAI;;AAAyB;;AAC/B;;AAEA;;AAmBA;;AAuBF;;AACF;;;;;;AA3CyB;;AAAA;;AAmBA;;AAAA;;;;QCXZ8G,iB;AAwBX,iCACUC,YADV,EAEU7I,aAFV,EAGUkF,gBAHV,EAIUjF,kBAJV,EAKU6I,aALV,EAMU3D,sBANV,EAOUqC,aAPV,EAQU3E,cARV,EAQwC;AAAA;;AAP9B,aAAAgG,YAAA,GAAAA,YAAA;AACA,aAAA7I,aAAA,GAAAA,aAAA;AACA,aAAAkF,gBAAA,GAAAA,gBAAA;AACA,aAAAjF,kBAAA,GAAAA,kBAAA;AACA,aAAA6I,aAAA,GAAAA,aAAA;AACA,aAAA3D,sBAAA,GAAAA,sBAAA;AACA,aAAAqC,aAAA,GAAAA,aAAA;AACA,aAAA3E,cAAA,GAAAA,cAAA;AA/BV,aAAAkG,SAAA,GAAY,KAAZ;AACA,aAAAC,UAAA,GAAa,CAAb;AACA,aAAAC,cAAA,GAAiB,MAAjB;AACA,aAAAC,SAAA,GAAY,CAAZ;AACA,aAAAC,MAAA,GAAS,MAAT;AACA,aAAAC,KAAA,GAAQ,KAAR;AAEA,aAAAhJ,SAAA,GAAY,IAAI,oDAAJ,EAAZ;AASA,aAAAgF,WAAA,GAAc,EAAd;AAEA,aAAAiE,WAAA,GAAc,EAAd;AAcK;;;;mCAEM;AACT,cAAI,KAAKrJ,aAAL,CAAmBa,MAAvB,EAA+B;AAC7B,iBAAKyI,IAAL;AACD;AACF;;;+BAEM;AACL,eAAK1E,gBAAL,GAAwB,KAAK5E,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAAlD;AACD;;;oCACW;AAAA;;AACV,cAAI,KAAK5E,aAAL,CAAmBa,MAAvB,EAA+B;AAC7B;AACA,gBAAM+F,cAAc,GAAGlI,MAAM,CAACqG,UAAP,GAAoB8B,QAAQ,CAACC,IAAT,CAAcC,WAAzD;AACAF,oBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkCL,cAAc,CAACM,QAAf,EAAlC;AACAL,oBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBuC,QAApB,GAA+B,QAA/B;AACA,iBAAKC,SAAL;AACA,iBAAKC,WAAL;AACA,iBAAKV,SAAL,GAAiB,IAAjB;;AACA,gBAAIrK,MAAM,CAACqG,UAAP,GAAoB,IAAxB,EAA8B;AAC5B2E,wBAAU,CAAC,YAAM;AACf,oBAAMC,SAAS,GAAqB,MAAI,CAACC,SAAL,CAAeC,aAAnD;AACAF,yBAAS,CAACG,KAAV;AACD,eAHS,EAGP,GAHO,CAAV;AAID;AACF;AACF;;;qCACY;AACX;AACAjD,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkC,EAAlC;AACAJ,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBuC,QAApB,GAA+B,EAA/B;AACA,eAAKR,SAAL,GAAiB,KAAjB;AACA,eAAKC,UAAL,GAAkB,CAAlB;AACA,eAAKQ,SAAL;AACA,eAAKH,WAAL,GAAmB,EAAnB;AACA,eAAKxG,cAAL,CAAoBwF,WAApB;AACD;;;qCACkB;;;;;;;AACjB,yBAAKjD,WAAL,GAAmB,KAAK2E,YAAL,EAAnB;;wBACK,KAAK3E,W;;;;;AACR,wBAAI,CAAC,KAAK4E,GAAV,EAAe;AAAE,2BAAKA,GAAL,GAAW,KAAKf,cAAL,CAAoB/B,QAApB,EAAX;AAA4C;;AAC7D,yBAAK+C,SAAL,GAAiB,KAAKD,GAAtB;AACA,yBAAKE,cAAL,GAAsB,KAAKC,KAA3B;AACA,yBAAKnB,UAAL,GAAkB,CAAlB;;yBACI,KAAKhJ,aAAL,CAAmBoK,cAAnB,E;;;;;;AACW,2BAAM,KAAKpK,aAAL,CAAmBqK,OAAnB,CAA2B,EAA3B,CAAN;;;AAAPjL,wB;AACN,yBAAKkL,cAAL,CAAoBlL,IAApB;;;;;;;;;AAGL;;;iCACc;;;;;;;AACPmL,uB,GAAM,KAAKC,Q;AACjB,yBAAKA,QAAL,GAAgB,EAAhB;AACA,yBAAK3H,cAAL,CAAoBoF,YAApB,CAAiC,sBAAjC;;;AAGS,2BAAM,KAAKjI,aAAL,CAAmBqK,OAAnB,CAA2BE,GAA3B,EAAgC,KAAKE,aAAL,CAAmBnF,GAAnD,CAAN;;;AAAPlG,wB;;;;;;;AAEA,yBAAKyD,cAAL,CAAoBwF,WAApB;;;AAEF,wBAAI,KAAKrI,aAAL,CAAmBoK,cAAnB,EAAJ,EAAyC;AACvC,2BAAKM,0BAAL;AACA,2BAAKC,YAAL,GAAoB,IAApB;AACD,qBAHD,MAGO;AACL,0BAAIvL,IAAJ,EAAU;AACR,6BAAKwL,QAAL,GAAgB,EAAhB;AACA,6BAAK/H,cAAL,CAAoBoF,YAApB,CAAiC,sBAAjC;AACA,6BAAKqC,cAAL,CAAoBlL,IAApB;AACA,6BAAKyL,UAAL;AACD,uBALD,MAKO;AACL,6BAAKhI,cAAL,CAAoBwF,WAApB;;AACA,4BAAI,KAAKrI,aAAL,CAAmBa,MAAnB,YAAqC,oEAAzC,EAAsD;AACpD,+BAAK+J,QAAL;AACD,yBAFD,MAEO;AACL,+BAAKA,QAAL,GAAgB,iBAAhB;AACD;AACF;AACF;;;;;;;;;AACF;;;8BACKE,S,EAA6B;AACjC,cAAI,KAAK9K,aAAL,CAAmBa,MAAvB,EAA+B;AAC7B,iBAAK2I,SAAL;AACA,iBAAKC,WAAL;AACA,iBAAKsB,SAAL,GAAiB,KAAKlC,YAAL,CAAkBmC,IAAlB,CAAuBF,SAAvB,EAAkC;AAAE,uBAAO;AAAT,aAAlC,CAAjB;AACD;AACF;;;8BACWG,Q,EAA4B;;;;;;AACtC,yBAAK7F,WAAL,GAAmB,KAAK2E,YAAL,EAAnB;;wBACK,KAAK3E,W;;;;;AACR,wBAAI,CAAC,KAAK4E,GAAV,EAAe;AAAE,2BAAKA,GAAL,GAAW,KAAKf,cAAL,CAAoB/B,QAApB,EAAX;AAA4C;;AAC7D,yBAAK+C,SAAL,GAAiB,KAAKD,GAAtB;AACA,yBAAKE,cAAL,GAAsB,KAAKC,KAA3B;;yBACI,KAAKnK,aAAL,CAAmBoK,cAAnB,E;;;;;;AACF,2BAAM,KAAKc,UAAL,EAAN;;;;;;;;;AAGL;;;qCACkB;;;;;;;AACjB,yBAAK7B,WAAL,GAAmB,EAAnB;;AACa,2BAAM,KAAKrJ,aAAL,CAAmBqK,OAAnB,CAA2B,EAA3B,CAAN;;;AAAPjL,wB;;AACN,wBAAIA,IAAJ,EAAU;AACR,2BAAKkL,cAAL,CAAoBlL,IAApB;AACD;;;;;;;;;AACF;;;iCAEQ;AACP,eAAK2L,SAAL,CAAeI,IAAf;AACA,eAAKJ,SAAL,GAAiB,IAAjB;AACD;;;iCAEQ;AACP,eAAKK,SAAL,CAAeD,IAAf;AACA,eAAKC,SAAL,GAAiB,IAAjB;AACD;;;iCAEQ;AACP,eAAKC,SAAL,CAAeF,IAAf;AACA,eAAKE,SAAL,GAAiB,IAAjB;AACD;;;uCAEoBjM,I,EAAe;;;;;;;;;AAC9B4K,uB,GAAM,KAAKC,S;AACf,yBAAKD,GAAL,GAAW,EAAX;;AACA,wBAAI,CAACA,GAAL,EAAU;AACRA,yBAAG,GAAG,GAAN;AACD;;AACD,yBAAK9E,gBAAL,CAAsBoG,QAAtB,CAA+B,KAAKb,aAAL,CAAmBvH,OAAlD,EAA2D,KAAKqI,WAAL,EAA3D,EAA+EC,MAAM,CAACxB,GAAD,CAArF,EAA4F5K,IAA5F,EAAkG4B,SAAlG,CACE,UAAOyE,GAAP;AAAA,6BAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAClB,qCAAKkF,YAAL,GAAoBlF,GAApB;AACAZ,uCAAO,CAACC,GAAR,CAAYoB,IAAI,CAACC,SAAL,CAAeV,GAAf,CAAZ;;AACA,oCAAIA,GAAG,CAACC,OAAJ,KAAgB,IAApB,EAA0B;AACxB,sCAAID,GAAG,CAACE,OAAJ,CAAYC,MAAhB,EAAwB;AAChB6F,4CADgB,GACL;AAAEH,8CAAQ,EAAE,KAAKC,WAAL,EAAZ;AAAgC3F,4CAAM,EAAEH,GAAG,CAACE,OAAJ,CAAYC;AAApD,qCADK;AAEtB,yCAAK3F,kBAAL,CAAwByL,KAAxB,CAA8B,KAAKjB,aAAL,CAAmBvH,OAAjD,EAA0DuI,QAA1D;AACD,mCAHD,MAGO,IAAI,KAAKzL,aAAL,CAAmBoK,cAAnB,EAAJ,EAAyC;AAC9C,yCAAKuB,sBAAL;AACD;AACF,iCAPD,MAOO;AACL,uCAAK9I,cAAL,CAAoBwF,WAApB;AACAxD,yCAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCW,GAAG,CAACE,OAAJ,CAAYM,GAAhD;AACA,uCAAKpD,cAAL,CAAoBuD,QAApB,CAA6BX,GAAG,CAACE,OAAJ,CAAYM,GAAzC,EAA8C,CAA9C;;AACA,sCAAI,KAAKjG,aAAL,CAAmBoK,cAAvB,EAAuC;AACrC,yCAAKS,UAAL;AACD;AACF;;AAjBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAApB;AAAA,qBADF,EAoBE,UAAAxE,GAAG,EAAI;AACLxB,6BAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BoB,IAAI,CAACC,SAAL,CAAeE,GAAf,CAA9B;AACA,4BAAI,CAACgD,WAAL,GAAmB,4BAAnB;AACD,qBAvBH;;;;;;;;;AAyBD;;;iDAC8B;;;;;;;0BACzB,KAAKrJ,aAAL,CAAmBa,MAAnB,YAAqC,qE;;;;;AACjC+K,sB,GAAK,KAAKjB,YAAL,CAAkBhF,OAAlB,CAA0BkG,iB;AACrC,yBAAKhJ,cAAL,CAAoBoF,YAApB,CAAiC,8BAAjC;;;AAGc,2BAAM,KAAKT,aAAL,CAAmBsE,aAAnB,CAAiCF,EAAjC,EAAqC,KAAK5L,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8CoD,cAAnF,CAAN;;;AAAZ+D,6B;;;;AAEA,yBAAKlJ,cAAL,CAAoBwF,WAApB;;;;AAEF,wBAAI0D,SAAJ,EAAe;AACPC,8BADO,GACIJ,EAAE,GAAGG,SADT;AAEb,2BAAKpB,YAAL,CAAkBhF,OAAlB,CAA0BsG,eAA1B,GAA4CD,QAA5C;AACAnH,6BAAO,CAACC,GAAR,CAAY,KAAK6F,YAAjB;AACD,qBAJD,MAIO;AACL,2BAAKtB,WAAL,GAAmB,0BAAnB;AACD;;;;;;;;;AAEJ;;;qDACkC;;;;;;;;AACjC,yBAAKxG,cAAL,CAAoBoF,YAApB,CAAiC,wBAAjC;AACA,yBAAK/C,gBAAL,CAAsBgH,SAAtB,CAAgC,KAAKvB,YAAL,CAAkBhF,OAAlB,CAA0BsG,eAA1D,EAA2EjL,SAA3E,CACG,UAACyE,GAAD,EAAc;AACb,4BAAI,CAACkF,YAAL,GAAoBlF,GAApB;;AACA,0BAAIA,GAAG,CAACC,OAAJ,IAAe,MAAI,CAAC+E,aAAL,CAAmBvH,OAAtC,EAA+C;AAC7C,4BAAMuI,QAAQ,GAAG;AAAEH,kCAAQ,EAAE,MAAI,CAACC,WAAL,EAAZ;AAAgC3F,gCAAM,EAAEH,GAAG,CAACE,OAAJ,CAAYC;AAApD,yBAAjB;;AACA,8BAAI,CAAC3F,kBAAL,CAAwByL,KAAxB,CAA8B,MAAI,CAACjB,aAAL,CAAmBvH,OAAjD,EAA0DuI,QAA1D;AACD,uBAHD,MAGO;AACL,8BAAI,CAAC5I,cAAL,CAAoBuD,QAApB,CAA6B,MAAI,CAACuE,YAAL,CAAkBhF,OAAlB,CAA0BM,GAAvD,EAA4D,CAA5D;AACD;;AACD,4BAAI,CAAC4E,UAAL;;AACAhG,6BAAO,CAACC,GAAR,CAAY,UAAUoB,IAAI,CAACC,SAAL,CAAeV,GAAf,CAAtB;AACD,qBAXH,EAYG,UAAA0G,KAAK,EAAI;AACR,4BAAI,CAACtJ,cAAL,CAAoBwF,WAApB;;AACA,4BAAI,CAACxF,cAAL,CAAoBuD,QAApB,CAA6B+F,KAA7B,EAAoC,CAApC;AACD,qBAfH;;;;;;;;;AAiBD;;;sCACa;AAAA;;AACZtH,iBAAO,CAACC,GAAR,CAAY,kBAAkB,KAAK2F,aAAL,CAAmBnF,GAAjD;AACA,eAAKJ,gBAAL,CAAsBkH,UAAtB,CAAiC,KAAK3B,aAAL,CAAmBnF,GAApD,EACGtE,SADH,CACa,UAACqL,QAAD,EAAuB;AAChC,gBAAI,CAACA,QAAL,EAAe;AACb,oBAAI,CAACnD,SAAL,GAAiB,MAAjB;AACD,aAFD,MAEO;AACL,oBAAI,CAACA,SAAL,GAAiB,CAAjB;AACD;;AACD,kBAAI,CAACoD,WAAL;AACD,WARH;AASD;;;sCACa;AACZ,cAAI,KAAK7B,aAAL,YAA8B,wEAAlC,EAAmD;AACjD,iBAAKxB,cAAL,GAAsB,KAAKC,SAAL,GAAiB,KAAKC,MAA5C;AACD,WAFD,MAEO,IAAI,KAAKsB,aAAL,YAA8B,0EAAlC,EAAqD;AAC1D,iBAAKxB,cAAL,GAAsB,KAAKC,SAAL,GAAiB,KAAKE,KAA5C;AACD;AACF;;;iCACQ;AACP,cAAI,KAAKY,GAAT,EAAc;AACZ,mBAAO,KAAKA,GAAZ;AACD;;AACD,iBAAO,KAAKC,SAAZ;AACD;;;sCACa;AACZ,cAAI,KAAKE,KAAT,EAAgB;AACd,mBAAO,KAAKA,KAAZ;AACD;;AACD,iBAAO,KAAKD,cAAZ;AACD;;;oCACW;AACV,eAAKC,KAAL,GAAa,EAAb;AACA,eAAKH,GAAL,GAAW,EAAX;AACA,eAAKQ,QAAL,GAAgB,EAAhB;AACA,eAAKI,QAAL,GAAgB,EAAhB;AACA,eAAKxF,WAAL,GAAmB,EAAnB;AACA,eAAKuF,YAAL,GAAoB,EAApB;AACA,eAAKtB,WAAL,GAAmB,EAAnB;AACD;;;uCACW;AACV,cAAK,CAAC,KAAKlE,sBAAL,CAA4BjC,OAA5B,CAAoC,KAAKiH,KAAzC,CAAD,IACH,KAAKA,KAAL,KAAe,EADb,IAEA,KAAKA,KAAL,CAAW3B,MAAX,GAAoB,CAApB,IAAyB,KAAK2B,KAAL,CAAWoC,KAAX,CAAiB,CAAjB,EAAoB,CAApB,MAA2B,IAFpD,IAGA,KAAKvM,aAAL,CAAmBa,MAAnB,CAA0B2L,kBAA1B,CAA6C,KAAKrC,KAAlD,CAHJ,EAG+D;AAC7D,mBAAO,0BAAP;AACD,WALD,MAKO,IAAI,CAAC,KAAKhF,sBAAL,CAA4B6E,GAA5B,CAAgC,KAAKA,GAArC,CAAL,EAAgD;AACrD,mBAAO,aAAP;AACD,WAFM,MAEA;AACL,mBAAO,EAAP;AACD;AACF;;;mCACU;AACT,eAAKlB,aAAL,CAAmB2D,qBAAnB,CAAyC,KAAK9B,YAAL,CAAkBhF,OAAlB,CAA0BkG,iBAAnE,EAAsF,KAAtF;AACD;;;;;;;uBAvRUjD,iB,EAAiB,mI,EAAA,8I,EAAA,uJ,EAAA,6J,EAAA,8I,EAAA,2K,EAAA,8I,EAAA,kJ;AAAA,K;;;YAAjBA,iB;AAAiB,mC;AAAA;AAAA;;;;;;;;;;;;;;;;;;ADrB9B;;AACE;;AACA;;AACF;;AAEA;;;;AAJQ;;AAAA;;AACA;;AAAA;;AAGH;;AAAA;;;;;;;;;;sECgBQA,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACThH,kBAAQ,EAAE,cADD;AAETC,qBAAW,EAAE,2BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD;AAHF,S;AAKmB,Q;;;;;;;;;;;;;;;;;;;;gBAO3B,uD;iBAAU,Y;;;gBAEV;;;;;;;;;;;;;;;;;;;;AC9BH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOa4K,e;AAEX,iCAAc;AAAA;AAAG;;;;mCAET,CACP;;;;;;;uBALUA,e;AAAe,K;;;YAAfA,e;AAAe,iC;AAAA,e;AAAA,a;AAAA,qsB;AAAA;AAAA;ACP5B;;AACA;;AACI;;AAAM;;AAAe;;AACrB;;AAAgE;;AAAhE;;AACA;;AAA2D;;AAA3D;;AACA;;AAA2D;;AAA3D;;AACJ;;AACA;;AACA;;AAAyC;;AAAY;;AACrD;;AAA2C;;AAAc;;AACzD;;AAAmD;;AAAO;;AAC1D;;AAAmF;;AAAnF;;AACA;;AACA;;;;;;;;sEDNaA,e,EAAe;cAL3B,uDAK2B;eALjB;AACT9K,kBAAQ,EAAE,YADD;AAETC,qBAAW,EAAE,yBAFJ;AAGTC,mBAAS,EAAE,CAAC,yBAAD;AAHF,S;AAKiB,Q;;;;;;;;;;;;;;;;;;;;AEP5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACGI;;AACE;;AAAM;;AAAQ;;AAChB;;;;;;AAeU;;AACE;;AAEE;;AACF;;AACF;;;;;;;;AAHI;;AAAA;;AADC;;AAED;;AAAA;;;;;;AAPN;;AACE;;AACE;;AACF;;AACA;;AAMF;;;;;;;;AAT8C;;AAAA;;AAAzC;;AACD;;AAAA;;AAEY;;AAAA;;;;;;AAdxB;;AACE;;AACE;;AACF;;AACA;;AACA;;AACE;;AAAqB;;AAAM;;AAAkC;;AAAO;;AAApE;;AAEA;;AACE;;AACE;;AAWF;;AACF;;AACF;;AACF;;;;;;AAlB+B;;AAAA;;AAIT;;AAAA;;;;;;AAuBxB;;AAAoC;;AACuB;;AAAM;;;;;;AAA7D;;AAAA;;;;QD5BO6K,e;AAGX,+BACUzM,MADV,EAESF,aAFT,EAGS+C,aAHT,EAIU9C,kBAJV,EAKU4C,cALV,EAKwC;AAAA;;AAJ9B,aAAA3C,MAAA,GAAAA,MAAA;AACD,aAAAF,aAAA,GAAAA,aAAA;AACA,aAAA+C,aAAA,GAAAA,aAAA;AACC,aAAA9C,kBAAA,GAAAA,kBAAA;AACA,aAAA4C,cAAA,GAAAA,cAAA;AACL;;;;mCAEG;AACN,cAAI,KAAK7C,aAAL,CAAmBa,MAAvB,EAA+B;AAC7B,iBAAK+L,OAAL,GAAe,KAAK5M,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAAzC;AACD;AACF;;;iCACQ;AACP,eAAK3E,kBAAL,CAAwBwB,OAAxB;AACA,eAAKoB,cAAL,CAAoBgK,KAApB;AACA,eAAK7M,aAAL,CAAmB0B,WAAnB;AACA,eAAKqB,aAAL,CAAmB8J,KAAnB;AACA,eAAK3M,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,EAAD,CAArB;AACD;;;gCACO,CACP;;;sCACa;AACZ,cAAI,KAAK3B,aAAL,CAAmBa,MAAnB,YAAqC,mEAAzC,EAAsD;AACpD,mBAAO,KAAKb,aAAL,CAAmBa,MAAnB,CAA0BiM,WAA1B,EAAP;AACD;;AACD,iBAAO,EAAP;AACD;;;sCACa;AACZ,cAAI,KAAK9M,aAAL,CAAmBa,MAAnB,YAAqC,mEAAzC,EAAsD;AACpD,mBAAO,KAAKb,aAAL,CAAmBa,MAAnB,CAA0BkM,QAAjC;AACD;;AACD,iBAAO,EAAP;AACD;;;;;;;uBApCUJ,e,EAAe,uH,EAAA,8I,EAAA,8I,EAAA,6J,EAAA,iJ;AAAA,K;;;YAAfA,e;AAAe,iC;AAAA;AAAA;AAAA,O;AAAA,e;AAAA,a;AAAA,of;AAAA;AAAA;ACZ5B;;AACE;;AAAuC;;AAAvC;;AACA;;AACE;;AAGA;;AAyBF;;AACA;;AACE;;AAAe;AAAA,mBAAS,IAAAK,MAAA,EAAT;AAAiB,WAAjB;;AACb;;AAAM;;AAAM;;AAAO;;AACrB;;AACF;;AACF;;AACA;;AACE;;AACgF;;AAClF;;;;AAtCkB;;AAAA;;AAGA;;AAAA;;AAiCF;;AAAA;;AACkE;;AAAA;;;;;;;;;sED5BrEL,e,EAAe;cAL3B,uDAK2B;eALjB;AACT/K,kBAAQ,EAAE,YADD;AAETC,qBAAW,EAAE,yBAFJ;AAGTC,mBAAS,EAAE,CAAC,yBAAD;AAHF,S;AAKiB,Q;;;;;;;;;;;;;;gBACzB;;;;;;;;;;;;;;;;;;;;AEbH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACMM;;AAAuF;;AAAiB;;;;;;AAAjB;;AAAA;;;;;;AACvF;;AAAqE;;AAAM;;AAAsD;;AAAc;;AAAK;;AAA+C;;AAAG;;AAAwB;;AAAK;;AAAI;;;;;;;;AAAzI;;AAAA;;AAAsD;;AAAA;;AAAkD;;AAAA;;;;;;;;AALxM;;AACE;;AAAuD;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACrD;;AAAyB;;AAAO;;AAClC;;AACA;;AACA;;AACF;;;;;;AANgC;;AAIxB;;AAAA;;AACA;;AAAA;;;;;;AAGN;;AAA0B;;AAAiB;;;;;;AAAjB;;AAAA;;;;;;AAD5B;;AACE;;AAAkD;;;;;;AADrB,4FAAqB,kBAArB,EAAqB,oBAArB;;AACvB;;AAAA;;;;;;AATV;;AACE;;AAOA;;AAEF;;;;;;AATS;;AAAA;;AAOA;;AAAA;;;;QDCEmL,iB;AACX,iCACSpK,cADT,EAEU2D,QAFV,EAGS0G,YAHT,EAGmC;AAAA;;AAF1B,aAAArK,cAAA,GAAAA,cAAA;AACC,aAAA2D,QAAA,GAAAA,QAAA;AACD,aAAA0G,YAAA,GAAAA,YAAA;AAEA,aAAAC,OAAA,GAAU,uBAAV;AADF;;;;mCAEI,CACV;;;sCACaC,K,EAAe;AAC3B,eAAKvK,cAAL,CAAoBwK,QAApB,CAA6BC,MAA7B,CAAoCF,KAApC,EAA2C,CAA3C;AACD;;;sCACa;AACZ,iBAAO5G,QAAQ,CAAC+G,QAAhB;AACD;;;qCACYC,O,EAAc;AACzB,cAAIA,OAAO,CAACC,KAAZ,EAAmB;AACjB,mBAAO,KAAKC,YAAL,CAAkBF,OAAlB,CAAP;AACD,WAFD,MAEO,IAAIA,OAAO,CAACG,QAAZ,EAAsB;AAC3B,mBAAO,KAAKC,cAAL,CAAoBJ,OAApB,CAAP;AACD,WAFM,MAEA,IAAIA,OAAO,CAACK,SAAZ,EAAuB;AAC5B,mBAAO,KAAKC,eAAL,CAAqBN,OAArB,CAAP;AACD,WAFM,MAEA;AACL,kBAAM,IAAItO,KAAJ,CAAU,iBAAV,CAAN;AACD;AACF;;;qCACYsO,O,EAAY;AACvB,cAAML,OAAO,GAAGY,SAAS,CAAC,KAAKZ,OAAN,CAAzB;AACA,cAAMrG,IAAI,GAAG,KAAKkH,WAAL,CAAiBR,OAAO,CAACS,MAAzB,EAAiC,QAAjC,oBAAsD,KAAKC,WAAL,EAAtD,sBAAb;AACA,kCAAiBV,OAAO,CAACC,KAAzB,sBAA0CN,OAA1C,mBAA0DrG,IAA1D;AACD;;;uCACc0G,O,EAAc;AAC3B;AACA,cAAML,OAAO,GAAGY,SAAS,CAAC,KAAKZ,OAAN,CAAzB;AACA,cAAMrG,IAAI,GAAG,KAAKkH,WAAL,WAAoBR,OAAO,CAACS,MAA5B,GAAsC,QAAtC,gCAAuE,KAAKC,WAAL,EAAvE,mBAAb;AACA,qEAAoDV,OAAO,CAACG,QAA5D,sBAAgFR,OAAhF,sBAAmGrG,IAAnG;AACD;;;wCACe0G,O,EAAc;AAC5B;AACA,cAAM1G,IAAI,GAAG,KAAKkH,WAAL,CAAiBR,OAAO,CAACS,MAAzB,EAAiC,SAAjC,oBAAuD,KAAKC,WAAL,EAAvD,kBAAb;AACA,6EAA4DV,OAAO,CAACK,SAApE,mBAAsF/G,IAAtF;AACD;;;oCACWmH,M,EAAgBE,W,EAAqBC,G,EAAW;AAC1D,cAAMC,CAAC,GAAIF,WAAW,KAAK,QAAjB,GAA6B,IAA7B,GAAoC,EAA9C;AACA,cAAMG,CAAC,GAAIH,WAAW,KAAK,QAAjB,GAA6B,IAA7B,GAAoC,EAA9C;AACA,cAAMI,CAAC,GAAIJ,WAAW,KAAK,SAAjB,GAA8B,QAA9B,GAAyC,EAAnD;AACA,iBAAOJ,SAAS,cAAOM,CAAP,0BAAwBC,CAAxB,SAA4BL,MAA5B,iBAAyCK,CAAzC,6DAA6FC,CAA7F,8BAAkHJ,WAAlH,0BAA6IC,GAA7I,EAAhB;AACD;;;iCACQZ,O,EAAc;AACrB,iBAAOA,OAAO,CAACC,KAAR,GAAgBD,OAAO,CAACC,KAAxB,GACLD,OAAO,CAACG,QAAR,GAAmBH,OAAO,CAACG,QAA3B,GACAH,OAAO,CAACgB,OAAR,GAAkBhB,OAAO,CAACgB,OAA1B,GACA,WAHF;AAID;;;;;;;uBArDUvB,iB,EAAiB,iJ,EAAA,yH,EAAA,2I;AAAA,K;;;YAAjBA,iB;AAAiB,mC;AAAA,c;AAAA,a;AAAA,yT;AAAA;AAAA;ACV9B;;AACE;;AAWF;;;;AAXO;;AAAA;;;;;;;;;sEDSMA,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACTrL,kBAAQ,EAAE,cADD;AAETC,qBAAW,EAAE,2BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD;AAHF,S;AAKmB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qEEP0B;;;;;ACYqB;;AACtC;;AAAc;;;;;;AAAd;;AAAA;;;;;;;;AAC3B;;AACI;;AAAoE;AAAA;;AAAA;;AAAA;AAAA,WAAkC,eAAlC,EAAkC;AAAA;;AAAA;;AAAA;AAAA,SAAlC;;AAApE;;AAEA;;;;;;AAFgH;;AAAA;;;;;;;;AATxH;;AACI;;AACI;;AACJ;;AACA;;AAAmB;AAAA;;AAAA;;AAAA;AAAA;;AAAnB;;AAEA;;AAAiE;;AACjB;;AAAM;;AAAM;;AAAO;;AACnE;;AAII;;AACE;;AACI;;AAA4B;;AAAI;;AACpC;;AACA;;AAA0E;AAAA;;AAAA;;AAAA;AAAA;;AAA2B;;AAAM;;AAC/G;;AACN;;;;;;AAZyC;;AAAA;;AAC7B;;AAAA;;AACkB;;AAAA;;AAQQ;;AAAA;;;;;;AAIlC;;AAAyD;;AAAM;;AAA0B;;AAA0B;;AAAQ;;AAAK;;AAAuB;;AAAO;;;;;;;;AAK9J;;AACI;;AAAO;;AAA6E;;AACpF;;AAAmF;AAAA;;AAAA;;AAAA;AAAA;;AAAnF;;AACJ;;;;;;AADuF;;AAAA,gGAAwB,aAAxB,EAAwB,uBAAxB;;;;;;;;AAEvF;;AACI;;AAAO;;AAAoC;;AAC3C;;AAAgC;AAAA;;AAAA;;AAAA;AAAA;;AAAhC;;AACA;;AAAO;;AAA4C;;AACnD;;AAAqF;AAAA;;AAAA;;AAAA;AAAA;;AAArF;;AACJ;;;;;;AAHoC;;AAAA,2FAAmB,aAAnB,EAAmB,kBAAnB;;AAEqD;;AAAA,8FAAsB,aAAtB,EAAsB,qBAAtB;;;;;;AAGrF;;AAAkC;;;;AAAmD;;;;AAAnD;;AAAA;;;;;;AAClC;;AAAkC;;;;AAAsD;;;;AAAtD;;AAAA;;;;;;;;AAGtC;;AACI;;AACI;;AAAO;AAAA;;AAAA;;AAAA;AAAA;;AAAP;;AACA;;AAAO;;AAAa;;AACxB;;AACA;;AACI;;AAAO;AAAA;;AAAA;;AAAA;AAAA;;AAAP;;AACA;;AAAO;;AAAS;;AACpB;;AACJ;;;;;;;;AA9BJ;;AACI;;AACA;;AACI;;AAAO;;AAAsB;;AAC7B;;AAAuB;AAAA;;AAAA;;AAAA;AAAA;;AAAkF;;AAC7G;;AACA;;AAIA;;AAMA;;AACI;;AACA;;AACA;;AAAgC;AAAA;;AAAA;;AAAA;AAAA;;AAAhC;;AACJ;;AACA;;AAUA;;AACI;;AACI;;AAA4B;;AAAI;;AACpC;;AACA;;AAA4B;AAAA;;AAAA;;AAAA;AAAA;;AAAqB;;AAAM;;AAC3D;;AACJ;;;;;;AApCkC;;AAAA;;AAGH;;AAAA,8FAAsB,aAAtB,EAAsB,uBAAtB;;AAEb;;AAAA;;AAIA;;AAAA;;AAOH;;AAAA;;AACA;;AAAA;;AACyB;;AAAA,yFAAiB,aAAjB,EAAiB,qBAAjB;;AAEhB;;AAAA;;;;;;;;AAhD9B;;AACI;;AAAI;;AAAa;;AACjB;;AACI;;AAA0C;AAAA;;AAAA;;AAAA,wCAAwB,CAAxB;AAAyB,SAAzB;;AAA2B;;AAAa;;AAClF;;AAA0C;AAAA;;AAAA;;AAAA,wCAAwB,CAAxB;AAAyB,SAAzB;;AAA2B;;AAAU;;AAC/E;;AAA0C;AAAA;;AAAA;;AAAA,wCAAwB,CAAxB;AAAyB,SAAzB;;AAA2B;;AAAU;;AACnF;;AACA;;AACE;;AAmBA;;AAsCF;;AACJ;;;;;;AA/Dc;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AAGM;;AAAA;;AAmBA;;AAAA;;;;;;;;AAyCpB;;AACI;;AAAI;;AAAc;;AAClB;;AACE;;AAAiC;;AAAgE;;AACjG;;AAAmD;;AAAsG;;AACzJ;;AAAyJ;AAAA;;AAAA;;AAAA;AAAA,WAAkB,OAAlB,EAAkB;AAAA;;AAAA;;AAAA;AAAA,SAAlB;;;;AAAzJ;;AACA;;AAAgD;;;;AAA2E;;AAC3H;;AAAgK;AAAA;;AAAA;;AAAA;AAAA;;;;AAAhK;;AACA;;AAA8C;;AACtC;;AAA4B;;AAAM;;AACtC;;AACA;;AAA4D;AAAA;;AAAA;;AAAA;AAAA;;AAAmB;;AAAI;;AACvF;;AACF;;AACJ;;;;;;AATiG;;AAAA;;AAA8D;;AACzG;;AAAA;;AAC2C;;AAAA;;AAAqE;;AAIhI;;AAAA;;;;;;;;AAKtC;;AACI;;AAAsC;;AAAgB;;AACtD;;AACA;;AAA4B;;AAA+C;;AAC3E;;AAAuB;;AAAwF;;AAC/G;;AACE;;AAAgC;;AAAqD;;AACvF;;AACA;;AACE;;AAA4B;AAAA;;AAAA;;AAAA;AAAA;;AAAqB;;AAAQ;;AACzD;;AAAkE;AAAA;;AAAA;;AAAA;AAAA;;AAAiB;;AAAW;;AAChG;;AACF;;AACF;;;;;;AAPsC;;AAAA;;AAIJ;;AAAA;;;;QD9EvB2M,uB;AAsBX,uCACUtO,SADV,EAEUsH,aAFV,EAGUvH,MAHV,EAIU2C,cAJV,EAKU7C,aALV,EAMU8I,aANV,EAOU3D,sBAPV,EAOwD;AAAA;;AAN9C,aAAAhF,SAAA,GAAAA,SAAA;AACA,aAAAsH,aAAA,GAAAA,aAAA;AACA,aAAAvH,MAAA,GAAAA,MAAA;AACA,aAAA2C,cAAA,GAAAA,cAAA;AACA,aAAA7C,aAAA,GAAAA,aAAA;AACA,aAAA8I,aAAA,GAAAA,aAAA;AACA,aAAA3D,sBAAA,GAAAA,sBAAA;AA5BV,aAAA/E,SAAA,GAAY,IAAI,oDAAJ,EAAZ;AAC4B,aAAAsO,SAAA,GAAY,KAAZ;AAC5B,aAAAC,cAAA,GAAiB,CAAjB;AAMA,aAAAC,YAAA,GAAe,CAAf;AACA,aAAAlH,WAAA,GAAc,CAAd;AACA,aAAAmH,QAAA,GAAW,KAAX;AAGA,aAAAtE,GAAA,GAAM,EAAN;AAGA,aAAAuE,WAAA,GAAc,EAAd;AACA,aAAAC,UAAA,GAAa,KAAb;AACA,aAAAC,QAAA,GAAW,EAAX;AAWK;;;;mCAEM,CACV;;;mCAEU;AAAA;;AACT,cAAI,KAAKC,QAAT,EAAmB;AACjB,iBAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAcC,WAAd,GAA4BnH,OAA5B,CAAoC,gBAApC,EAAsD,GAAtD,EAA2DoH,IAA3D,EAAhB;AACD;;AACD,cAAI,KAAKP,YAAL,KAAsB,CAA1B,EAA6B;AAC3B,iBAAKQ,UAAL,GAAkB,KAAK3B,KAAL,GAAa,KAAKjD,QAApC;AACD;;AACD,cAAI,CAAC,KAAKrF,sBAAL,CAA4BkK,SAA5B,CAAsC,KAAKJ,QAA3C,CAAL,EAA2D;AACzD,iBAAK9O,SAAL,CACGoB,GADH,CACO,yCADP,EAEGP,SAFH,CAEa,UAAC6E,GAAD;AAAA,qBAAiB,MAAI,CAAChD,cAAL,CAAoBkD,UAApB,CAA+BF,GAA/B,EAAoC,EAApC,CAAjB;AAAA,aAFb;AAGD,WAJD,MAIO,IACL,KAAK+I,YAAL,KAAsB,CAAtB,IACA,CAAC,KAAKzJ,sBAAL,CAA4BsI,KAA5B,CAAkC,KAAKA,KAAvC,CAFI,EAGL;AACA,iBAAKtN,SAAL,CAAeoB,GAAf,CAAmB,sCAAnB,EAA2DP,SAA3D,CACE,UAAC6E,GAAD;AAAA,qBAAiB,MAAI,CAAChD,cAAL,CAAoBkD,UAApB,CAA+BF,GAA/B,EAAoC,EAApC,CAAjB;AAAA,aADF,CAC2D;AAD3D;AAGD,WAPM,MAOA,IAAI,KAAK+I,YAAL,KAAsB,CAAtB,IAA2B,CAAC,KAAKpE,QAArC,EAA+C;AACpD,iBAAKrK,SAAL,CAAeoB,GAAf,CAAmB,yCAAnB,EAA8DP,SAA9D,CACE,UAAC6E,GAAD;AAAA,qBAAiB,MAAI,CAAChD,cAAL,CAAoBkD,UAApB,CAA+BF,GAA/B,EAAoC,EAApC,CAAjB;AAAA,aADF,CAC2D;AAD3D;AAGD,WAJM,MAIA,IAAI,CAAC,KAAKV,sBAAL,CAA4BiK,UAA5B,CAAuC,KAAKA,UAA5C,CAAL,EAA8D;AACnE,iBAAKjP,SAAL,CAAeoB,GAAf,CAAmB,2CAAnB,EAAgEP,SAAhE,CACE,UAAC6E,GAAD;AAAA,qBAAiB,MAAI,CAAChD,cAAL,CAAoBkD,UAApB,CAA+BF,GAA/B,EAAoC,EAApC,CAAjB;AAAA,aADF,CAC2D;AAD3D;AAGD,WAJM,MAIA,IAAI,KAAKP,GAAL,IAAY,CAAC,KAAKH,sBAAL,CAA4BjC,OAA5B,CAAoC,KAAKoC,GAAzC,CAAjB,EAAgE;AACrE,iBAAKnF,SAAL,CAAeoB,GAAf,CAAmB,oCAAnB,EAAyDP,SAAzD,CACE,UAAC6E,GAAD;AAAA,qBAAiB,MAAI,CAAChD,cAAL,CAAoBkD,UAApB,CAA+BF,GAA/B,EAAoC,EAApC,CAAjB;AAAA,aADF,CAC2D;AAD3D;AAGD,WAJM,MAIA;AACL,gBAAIP,GAAG,GAAG,EAAV;;AACA,gBAAI,KAAKA,GAAT,EAAc;AACZ,kBAAI,KAAKsJ,YAAL,KAAsB,CAAtB,IAA2B,KAAKC,QAApC,EAA8C;AAC5CvJ,mBAAG,GAAG,mEAAGgK,uBAAH,CACJ,sEAAMC,cAAN,CAAqB,KAAKN,QAA1B,EAAoC,KAAKG,UAAzC,EAAqD,IAArD,CADI,EAEJ,CAFI,EAGJ9J,GAHF;AAID,eALD,MAKO;AACLA,mBAAG,GAAG,sEAAMkK,aAAN,CACJ,sEAAMD,cAAN,CAAqB,KAAKN,QAA1B,EAAoC,KAAKG,UAAzC,EAAqD,KAArD,CADI,EAEJ9J,GAFF;AAGD;AACF;;AACD,gBAAI,KAAKA,GAAL,IAAYA,GAAG,KAAK,KAAKA,GAA7B,EAAkC;AAChC,kBAAI,KAAKsJ,YAAL,KAAsB,CAA1B,EAA6B;AAC3B,qBAAKzO,SAAL,CACGoB,GADH,CACO,8CADP,EAEGP,SAFH,CAEa,UAAC6E,GAAD;AAAA,yBAAiB,MAAI,CAAChD,cAAL,CAAoBkD,UAApB,CAA+BF,GAA/B,EAAoC,CAApC,CAAjB;AAAA,iBAFb;AAGD,eAJD,MAIO;AACL,qBAAK1F,SAAL,CACGoB,GADH,CACO,2CADP,EAEGP,SAFH,CAEa,UAAC6E,GAAD;AAAA,yBAAiB,MAAI,CAAChD,cAAL,CAAoBkD,UAApB,CAA+BF,GAA/B,EAAoC,CAApC,CAAjB;AAAA,iBAFb;AAGD;AACF,aAVD,MAUO;AACL,mBAAK6B,WAAL;AACD;AACF;AACF;;;iCACc;;;;;;;yBACT,KAAK+H,QAAL,E;;;;;AACIjF,4B,GAAW,KAAKkF,I;AACtB,yBAAKA,IAAL,GAAY,EAAZ;AACA,yBAAKC,IAAL,GAAY,EAAZ;;AACA,2BAAM,KAAK9M,cAAL,CAAoBoF,YAApB,CAAiC,sBAAjC,CAAN;;;;;AAEgB,2BAAM,KAAKjI,aAAL,CAAmB4P,qBAAnB,CAClB,KAAKX,QADa,EAElBzE,QAFkB,EAGlB,KAAK4E,UAHa,EAIlB,KAAKR,YAAL,KAAsB,CAAtB,IAA2B,KAAKC,QAJd,CAAN;;;AAAd,yBAAKhO,M;;;;AAOL,yBAAKgC,cAAL,CAAoBwF,WAApB;;;;AAEF,yBAAK4G,QAAL,GAAgB,EAAhB;AACA,yBAAKG,UAAL,GAAkB,EAAlB;AACA,yBAAK3B,KAAL,GAAa,EAAb;AACA,yBAAKjD,QAAL,GAAgB,EAAhB;AACA,yBAAK9C,WAAL;;AACA,wBAAIb,QAAQ,CAACC,IAAT,CAAcC,WAAd,IAA6B,GAAjC,EAAsC;AACpC,2BAAK2H,SAAL,GAAiB,IAAjB;AACD;;;;;;;;;AAEJ;;;mCAEO;AAAA;;AACN,cAAI,CAAC,KAAKvJ,sBAAL,CAA4BqF,QAA5B,CAAqC,KAAKkF,IAA1C,CAAL,EAAsD;AACpD,iBAAKvP,SAAL,CAAeoB,GAAf,CAAmB,sCAAnB,EAA2DP,SAA3D,CACE,UAAC6E,GAAD;AAAA,qBAAiB,MAAI,CAAChD,cAAL,CAAoBkD,UAApB,CAA+BF,GAA/B,EAAoC,EAApC,CAAjB;AAAA,aADF,CAC2D;AAD3D;AAGA,mBAAO,KAAP;AACD,WALD,MAKO,IAAI,KAAK6J,IAAL,KAAc,KAAKC,IAAvB,EAA6B;AAClC,iBAAKxP,SAAL,CAAeoB,GAAf,CAAmB,0CAAnB,EAA+DP,SAA/D,CACE,UAAC6E,GAAD;AAAA,qBAAiB,MAAI,CAAChD,cAAL,CAAoBkD,UAApB,CAA+BF,GAA/B,EAAoC,EAApC,CAAjB;AAAA,aADF,CAC2D;AAD3D;AAGA,mBAAO,KAAP;AACD,WALM,MAKA;AACL,mBAAO,IAAP;AACD;AACF;;;uCACc;AACb,eAAKiJ,WAAL,GAAmB,KAAK3J,sBAAL,CAA4B0K,uBAA5B,CACjB,KAAKH,IADY,CAAnB;AAGD;;;kCACK;AACJ,iBAAOxJ,IAAI,CAACC,SAAL,CAAe,KAAKtF,MAAL,CAAYpB,IAA3B,CAAP;AACD;;;kCACM;AACL,iBAAO,KAAKoB,MAAL,CAAYyE,GAAnB;AACD;;;mCACU;AACT,eAAKwD,aAAL,CAAmBgH,cAAnB,CAAkC,KAAKjP,MAAL,CAAYpB,IAA9C;AACA,eAAKsP,UAAL,GAAkB,IAAlB;AACD;;;+BACY;;;;;;;;;AACX,2BAAM,KAAKlM,cAAL,CAAoBoF,YAApB,CAAiC,mBAAjC,CAAN;;;;;AAEE,2BAAM,KAAKR,aAAL,CAAmBsI,sBAAnB,CACJ,KAAKlP,MAAL,CAAYpB,IADR,EAEJ,KAAKoB,MAAL,CAAYmP,IAFR,CAAN;;;;AAKA,yBAAKnN,cAAL,CAAoBwF,WAApB;;;;AAEF,yBAAKxH,MAAL,GAAc,IAAd;;AACA,wBAAI,KAAKb,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C4D,MAA3C,KAAsD,CAAtD,IAA2D,KAAKxI,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8C6D,kBAA9C,CAAiED,MAAjE,KAA4E,CAA3I,EAA8I;AAC5I,2BAAKtI,MAAL,CAAYyB,QAAZ,CAAqB,oBAAa,KAAK3B,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8C1B,OAA3D,EAArB;AACD,qBAFD,MAEO;AACL,2BAAKhD,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACD;;AACD,yBAAKxB,SAAL,CACGoB,GADH,CACO,qCADP,EAEGP,SAFH,CAEa,UAAC6E,GAAD;AAAA,6BAAiB,MAAI,CAAChD,cAAL,CAAoBiD,UAApB,CAA+BD,GAA/B,CAAjB;AAAA,qBAFb;;;;;;;;;AAGD;AACD;;;;uCACeoK,O,EAAiB;AAC9B,eAAKC,aAAL,CAAmBD,OAAnB;;AACA,cAAI,KAAKxI,aAAL,CAAmB0I,WAAnB,CAA+BF,OAA/B,CAAJ,EAA6C;AAC3C,iBAAKG,UAAL,GAAkBH,OAAlB;AACD,WAFD,MAEO;AACL,kBAAM,IAAI/Q,KAAJ,CAAU,yBAAV,CAAN;AACD;AACF;;;sCACa+Q,O,EAAiB;AAC7B,cAAMI,GAAG,GAAGnK,IAAI,CAACoK,KAAL,CAAWL,OAAX,CAAZ,CAD6B,CAE7B;;AACA,cAAI;AACF,gBAAI,OAAOI,GAAG,CAACE,QAAX,KAAwB,QAA5B,EAAsC;AACpC,oBAAM,IAAIrR,KAAJ,CAAU,wBAAV,CAAN;AACD;;AACD,gBAAI,OAAOmR,GAAG,CAACG,OAAX,KAAuB,QAA3B,EAAqC;AACnC,oBAAM,IAAItR,KAAJ,CAAU,uBAAV,CAAN;AACD;;AACD,gBAAI,OAAOmR,GAAG,CAACI,UAAX,KAA0B,QAA9B,EAAwC;AACtC,oBAAM,IAAIvR,KAAJ,CAAU,0BAAV,CAAN;AACD,aATC,CAUF;;;AACA,gBAAImR,GAAG,CAACK,aAAJ,IAAqB,OAAOL,GAAG,CAACK,aAAX,KAA6B,QAAtD,EAAgE;AAC9D,oBAAM,IAAIxR,KAAJ,CAAU,6BAAV,CAAN;AACD;;AACD,gBAAImR,GAAG,CAAC/K,GAAJ,IAAW,OAAO+K,GAAG,CAAC/K,GAAX,KAAmB,QAAlC,EAA4C;AAC1C,oBAAM,IAAIpG,KAAJ,CAAU,mBAAV,CAAN;AACD;;AACD,gBAAImR,GAAG,CAACM,EAAJ,IAAU,OAAON,GAAG,CAACM,EAAX,KAAkB,QAAhC,EAA0C;AACxC,oBAAM,IAAIzR,KAAJ,CAAU,kBAAV,CAAN;AACD;;AACD,gBAAImR,GAAG,CAAClI,EAAJ,IAAU,OAAOkI,GAAG,CAAClI,EAAX,KAAkB,QAAhC,EAA0C;AACxC,oBAAM,IAAIjJ,KAAJ,CAAU,kBAAV,CAAN;AACD;;AACD,gBAAImR,GAAG,CAACO,gBAAJ,IAAwB,OAAOP,GAAG,CAACO,gBAAX,KAAgC,QAA5D,EAAsE;AACpE,oBAAM,IAAI1R,KAAJ,CAAU,gCAAV,CAAN;AACD;AACF,WA1BD,CA0BE,OAAOT,CAAP,EAAU;AACV,iBAAKoE,cAAL,CAAoBuD,QAApB,CAA6B3H,CAA7B;AACA,kBAAMA,CAAN;AACD;AACF;;;yCACsB;;;;;;yBACjB,KAAK8L,G;;;;;;AACP,2BAAM,KAAK1H,cAAL,CAAoBoF,YAApB,CAAiC,qBAAjC,CAAN;;;;;AAEE,2BAAM,eAAY,KAAKmI,UAAjB,EAA6B,KAAK7F,GAAlC,CAAN;;;AACA,yBAAKA,GAAL,GAAW,EAAX;;;;AAEA,yBAAK1H,cAAL,CAAoBwF,WAApB;;;;;;;;AAGF,yBAAKxF,cAAL,CAAoBkD,UAApB,CAA+B,sBAA/B,EAAuD,CAAvD;;;;;;;;;AAEH;;;gCACYkK,O,EAAiB1F,G,EAAa;;;;;;;;AACzC,yBAAK2F,aAAL,CAAmBD,OAAnB;;AACA,2BAAM,KAAKxI,aAAL,CACHoJ,oBADG,CACkBZ,OADlB,EAC2B1F,GAD3B,EAEHtL,IAFG,CAEE,UAACyG,OAAD,EAAsB;AAC1B,0BAAIA,OAAJ,EAAa;AACX,4BAAI,OAAI,CAAC1F,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C4D,MAA3C,KAAsD,CAAtD,IAA2D,OAAI,CAACxI,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8C6D,kBAA9C,CAAiED,MAAjE,KAA4E,CAA3I,EAA8I;AAC5I,iCAAI,CAACtI,MAAL,CAAYyB,QAAZ,CAAqB,oBAAa,OAAI,CAAC3B,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8C1B,OAA3D,EAArB;AACD,yBAFD,MAEO;AACL,iCAAI,CAAChD,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACD;AACF,uBAND,MAMO;AACLkD,+BAAO,CAACC,GAAR,CAAYY,OAAZ;;AACA,+BAAI,CAAC7C,cAAL,CAAoBuD,QAApB,CAA6B,sBAA7B;AACD;AACF,qBAbG,WAaK,UAAC3H,CAAD,EAAO;AACd,6BAAI,CAACoE,cAAL,CAAoBuD,QAApB,CAA6B3H,CAA7B;AACD,qBAfG,CAAN;;;;;;;;;AAgBD;;;wCACeqS,K,EAAiB;AAAA;;AAC/B,cAAIC,YAAY,GAAGD,KAAK,CAACE,IAAN,CAAW,CAAX,CAAnB;;AACA,cAAI,CAACD,YAAL,EAAmB;AACjB,mBAAO,KAAP;AACD,WAFD,MAEO,IAAI,CAAC,KAAKE,YAAL,CAAkBF,YAAY,CAACG,IAA/B,CAAL,EAA2C;AAChD,gBAAIC,gBAAgB,GAAG,EAAvB;AACA,iBAAKhR,SAAL,CACGoB,GADH,CACO,kCADP,EAEGP,SAFH,CAEa,UAAC6E,GAAD;AAAA,qBAAkBsL,gBAAgB,GAAGtL,GAArC;AAAA,aAFb;AAGA,iBAAKhD,cAAL,CAAoBqB,GAApB,CAAwBiN,gBAAxB;AAEAtM,mBAAO,CAACC,GAAR,CAAY,uCAAZ;AACAiM,wBAAY,GAAG,IAAf;AACA,iBAAKX,UAAL,GAAkB,IAAlB;AACA,mBAAO,KAAP;AACD,WAXM,MAWA;AAEL,gBAAMgB,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,kBAAM,CAACE,UAAP,CAAkBP,YAAlB;;AACAK,kBAAM,CAACG,MAAP,GAAgB,YAAM;AACpB,kBAAI,OAAOH,MAAM,CAACI,MAAd,KAAyB,QAA7B,EAAuC;AACrC,oBAAI;AACF,yBAAI,CAACC,cAAL,CAAoBL,MAAM,CAACI,MAA3B;AACD,iBAFD,CAEE,OAAO/S,CAAP,EAAU;AACV,yBAAI,CAACoE,cAAL,CAAoBuD,QAApB,CAA6B3H,CAA7B,EAAgC,CAAhC;;AACA,yBAAI,CAAC2R,UAAL,GAAkB,IAAlB;AACD;;AACD,oBAAI,OAAI,CAACA,UAAT,EAAqB;AACnB,yBAAI,CAACpB,QAAL,GAAgB+B,YAAY,CAACG,IAA7B;AACD;AACF,eAVD,MAUO;AACL,uBAAI,CAACd,UAAL,GAAkB,IAAlB;AACA,sBAAM,IAAIlR,KAAJ,CAAU,qBAAV,CAAN;AACD;AACF,aAfD;AAgBD;AACF;;;qCACYgS,I,EAAc;AACzB,cAAMQ,GAAG,GAAGR,IAAI,CAACS,SAAL,CAAeT,IAAI,CAACU,WAAL,CAAiB,GAAjB,IAAwB,CAAvC,CAAZ;;AACA,cAAIF,GAAG,CAACxC,WAAJ,OAAsB,KAAtB,IAA+BwC,GAAG,CAACxC,WAAJ,OAAsB,MAAzD,EAAiE;AAC/D,mBAAO,IAAP;AACD,WAFD,MAEO;AACL,mBAAO,KAAP;AACD;AACF;;;;;;;uBAlSUT,uB,EAAuB,qI,EAAA,8I,EAAA,uH,EAAA,iJ,EAAA,8I,EAAA,8I,EAAA,2K;AAAA,K;;;YAAvBA,uB;AAAuB,iD;AAAA,iB;AAAA;AAAA;;;;;;;;;ACjBpC;;AACE;;AAoEA;;AAgBA;;AAcF;;;;AAlGO;;AAAA;;AAoEA;;AAAA;;AAgBA;;AAAA;;;;;;;;;;sEDpEMA,uB,EAAuB;cALnC,uDAKmC;eALzB;AACT7M,kBAAQ,EAAE,4BADD;AAETC,qBAAW,EAAE,kCAFJ;AAGTC,mBAAS,EAAE,CAAC,kCAAD;AAHF,S;AAKyB,Q;;;;;;;;;;;;;;;;;;gBAEjC,yD;iBAAY,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEnBf;;AAAsF;AAAA;;AAAA;;AAAA;AAAA;;AAAtF;;;;;;AAiBM;;AAAkD;;AAAmB;;;;;;AAAnB;;AAAA;;;;;;;;AAdxD;;AAEE;;AACE;;AAAe;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAtC;;AACA;;AACE;;AAAI;;AAAiB;;AACvB;;AAEA;;AACE;;AAAG;;AAAoE;;AACvE;;AACE;;AAAiB;AAAA;;AAAA;;AAAA;AAAA,WAAsB,OAAtB,EAAsB;AAAA;;AAAA;;AAAA,qCAAuH,EAAvH;AAAyH,SAA/I,EAAsB,QAAtB,EAAsB;AAAA;;AAAA;;AAAA,qCAAqJ,EAArJ;AAAuJ,SAA7K;;AAAjB;;AACA;;AAA8B;AAAA;;AAAA;;AAAA;AAAA;;AAAmB;;AAAO;;AAC1D;;AACA;;AACF;;AACF;;AACF;;;;;;AANyB;;AAAA;;AAGb;;AAAA;;;;QCLC+P,oB;AAMX,oCACS7R,aADT,EAEUC,kBAFV,EAGU4I,YAHV,EAIUhG,cAJV,EAKUiP,KALV,EAKkC;AAAA;;AAJzB,aAAA9R,aAAA,GAAAA,aAAA;AACC,aAAAC,kBAAA,GAAAA,kBAAA;AACA,aAAA4I,YAAA,GAAAA,YAAA;AACA,aAAAhG,cAAA,GAAAA,cAAA;AACA,aAAAiP,KAAA,GAAAA,KAAA;AATV,aAAA/I,SAAA,GAAY,KAAZ;AACA,aAAAyB,QAAA,GAAW,EAAX;AACA,aAAAuH,QAAA,GAAW,EAAX;AAQI;;;;oCACQ;AAAA;;AACV,cAAI,KAAKC,WAAL,EAAJ,EAAwB;AACtB;AACA,gBAAMpL,cAAc,GAAGlI,MAAM,CAACqG,UAAP,GAAoB8B,QAAQ,CAACC,IAAT,CAAcC,WAAzD;AACAF,oBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkCL,cAAc,CAACM,QAAf,EAAlC;AACAL,oBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBuC,QAApB,GAA+B,QAA/B;AACA,iBAAKsD,KAAL;AACA,iBAAK9D,SAAL,GAAiB,IAAjB;AACAW,sBAAU,CAAC,YAAM;AACf,kBAAMC,SAAS,GAAqB,OAAI,CAACsI,OAAL,CAAapI,aAAjD;AACAF,uBAAS,CAACG,KAAV;AACD,aAHS,EAGP,GAHO,CAAV;AAID,WAXD,MAWO;AACL,iBAAKjH,cAAL,CAAoBkD,UAApB,CAA+B,yEAA/B;AACD;AACF;;;qCACY;AACX;AACAc,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkC,EAAlC;AACAJ,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBuC,QAApB,GAA+B,EAA/B;AACA,eAAKsD,KAAL;AACA,eAAK9D,SAAL,GAAiB,KAAjB;AACD;;;mCACO,CAAW;;;iCACJ;;;;;;;yBACT,KAAKiJ,WAAL,E;;;;;AACF,yBAAKnP,cAAL,CAAoBoF,YAApB,CAAiC,sBAAjC;;AACY,2BAAM,KAAKjI,aAAL,CAAmBkS,qBAAnB,CAAyC,KAAK1H,QAA9C,CAAN;;;AAANlF,uB;;AACN,wBAAIA,GAAJ,EAAS;AACP,2BAAKrF,kBAAL,CAAwBkS,KAAxB,CAA8B7M,GAA9B;AACA,2BAAKuF,UAAL;AACD,qBAHD,MAGO;AACL,2BAAKkH,QAAL,GAAgB,iBAAhB;AACD;;AACD,yBAAKlP,cAAL,CAAoBwF,WAApB;;;;;AAEAxD,2BAAO,CAACC,GAAR,CAAY,UAAZ;;;;;;;;;AAEH;;;sCACU;AACT,cAAMsN,OAAO,GAAG,KAAKpS,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CACd,KAAK5E,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C4D,MAA3C,GAAoD,CADtC,EAEd6J,iBAFF;AAGA,cAAMC,OAAO,GAAW,KAAKtS,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CACtB,KAAK5E,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C4D,MAA3C,GAAoD,CAD9B,EAEtB+J,UAFF;AAGA,iBACE,KAAKvS,aAAL,CAAmBa,MAAnB,YAAqC,gEAArC,KACEuR,OAAO,IAAIA,OAAO,GAAG,CAAtB,IAA6BE,OAAO,KAAK,IAAZ,IAAoBA,OAAO,GAAG,CAD5D,CADF;AAID;;;gCACO;AACN,eAAK9H,QAAL,GAAgB,EAAhB;AACA,eAAKuH,QAAL,GAAgB,EAAhB;AACD;;;;;;;uBAnEUF,oB,EAAoB,8I,EAAA,6J,EAAA,mI,EAAA,iJ,EAAA,gI;AAAA,K;;;YAApBA,oB;AAAoB,uC;AAAA;AAAA;;;;;;;;;;;;;;;ADZjC;;AAGA;;;;AAHiB;;AAGZ;;AAAA;;;;;;;;;sECSQA,oB,EAAoB;cALhC,uDAKgC;eALtB;AACTjQ,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,+BAAD;AAHF,S;AAKsB,Q;;;;;;;;;;;;;;gBAC9B,uD;iBAAU,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJP;;AAAyC;AAAA;;AAAA;;AAAA,4BAAoB,IAApB;AAAwB,iBAAGyC,MAAM,CAACC,eAAP,EAAH;AAA2B,SAAnD;;AACvC;;AAAoB;;AAAoC;;AAC1D;;;;;;;;AAPJ;;AAA4B;AAAA;;AAAA;;AAAA,mCAAoB,KAApB;AAAyB,SAAzB;;AAC1B;;AAAI;;AAAiB;;AACrB;;AAAuB;;AAAqJ;;AAC5K;;AACE;;AAAsB;AAAA;;AAAA;;AAAA,mCAAuB,KAAvB;AAA4B,SAA5B,EAA6B,OAA7B,EAA6B;AAAA;;AAAA,iBAAUD,MAAM,CAACC,eAAP,EAAV;AAAkC,SAA/D;;AAAiE;;AAAqB;;AAC5G;;AAGA;;AAA2D;;AAAoE;;AAC/H;;AAAqB;;AAAkB;;AAA4B;;AAAI;;AAAS;;AAAI;;AAA4B;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAI;;AAAS;;AACtJ;;AACF;;;;;;AAP2F;;AAAA;;AAClF;;AAAA;;;;;;AAkBwB;;AAA6C;;AAAiC;;;;;;AAAjC;;AAAA;;;;;;;;AAN1E;;AACE;;AACE;;AAAyB;;AAAyC;;AAClE;;AAAyB;;AAAyC;;AACpE;;AACA;;AACE;;AAAyB;;AAA6F;;AACtH;;AAA+C;AAAA;;AAAA;;AAAA;AAAA,WAAqB,QAArB,EAAqB;AAAA;;AAAA;;AAAA;AAAA,SAArB,EAAqB,eAArB,EAAqB;AAAA;;AAAA;;AAAA;AAAA,SAArB;;AAA/C;;AACF;;AACA;;AACE;;AAAyB;;AAAyC;;AAClE;;AAAyB;;AAAyC;;AACpE;;AACF;;;;;;AAX6B;;AAAA;;AACA;;AAAA;;AAGc;;AAAA;;AACqD;;AAAA,+FAAuB,UAAvB,EAAuB,+BAAvB;;AAGnE;;AAAA;;AACA;;AAAA;;;;;;;;AAhBjC;;AACE;;AAAI;;AAAgB;;AACpB;;AACE;;AAAuB;;AAAqD;;AAC5E;;AACA;;AAcA;;AAAqB;;AAAkB;;AAA4B;;AAAM;;AAAS;;AAAI;;AAA6E;AAAA;;AAAA;;AAAA;AAAA;;AAAoB;;AAAI;;AAAS;;AACtM;;AACF;;;;;;AAlB2B;;AAAA;;AACb;;AAAA;;AAAmC;;AACxC;;AAAA;;AAc6G;;AAAA;;;;;;;;AAGtH;;AACE;;AAAI;;AAAc;;AAClB;;AACE;;AAAiC;;AAAgE;;AACjG;;AAAmD;;AAAsG;;AACzJ;;AAAyJ;AAAA;;AAAA;;AAAA;AAAA,WAAkB,OAAlB,EAAkB;AAAA;;AAAA;;AAAA;AAAA,SAAlB;;;;AAAzJ;;AACA;;AAAgD;;;;AAA2E;;AAAQ;;AACnI;;AAAgK;AAAA;;AAAA;;AAAA;AAAA;;;;AAAhK;;AACA;;AAAqB;;AAAkB;;AAA4B;;AAAM;;AAAS;;AAAI;;AAA4D;AAAA;;AAAA;;AAAA;AAAA;;AAA0B;;AAAI;;AAAS;;AAC3L;;AACF;;;;;;AALsD;;AAAA;;AAAuG;;AACzG;;AAAA;;AACE;;AAAA;;AAA8G;;AAC9C;;AAAA;;;;;;;;AAGtH;;AACE;;AAAsC;;AAAe;;AACrD;;AACE;;AAA4B;;AAA+C;;AAC3E;;AAAuB;;AAAwF;;AAC/G;;AACE;;AAAgC;;AAAoD;;AACtF;;AACA;;AACE;;AAA4B;AAAA;;AAAA;;AAAA;AAAA;;AAAqB;;AAAQ;;AACzD;;AAAqE;AAAA;;AAAA;;AAAA;AAAA;;AAAiB;;AAAW;;AACnG;;AACF;;AACF;;;;;;AAPsC;;AAAA;;AAIJ;;AAAA;;;;QC5CvBgO,kB;AAoBX,kCACUrS,SADV,EAEUH,aAFV,EAGU6C,cAHV,EAIUiG,aAJV,EAKUrB,aALV,EAMUtC,sBANV,EAOUjF,MAPV,EAOwB;AAAA;;AANd,aAAAC,SAAA,GAAAA,SAAA;AACA,aAAAH,aAAA,GAAAA,aAAA;AACA,aAAA6C,cAAA,GAAAA,cAAA;AACA,aAAAiG,aAAA,GAAAA,aAAA;AACA,aAAArB,aAAA,GAAAA,aAAA;AACA,aAAAtC,sBAAA,GAAAA,sBAAA;AACA,aAAAjF,MAAA,GAAAA,MAAA;AAzBkB,aAAAwO,SAAA,GAAY,KAAZ;AACnB,aAAAgB,IAAA,GAAO,EAAP;AACA,aAAAC,IAAA,GAAO,EAAP;AACA,aAAA8C,YAAA,GAAe,EAAf;AACT,aAAAC,QAAA,GAAW,KAAX;AACA,aAAA5D,WAAA,GAAc,EAAd;AACA,aAAA6D,aAAA,GAAgB,KAAhB;AACA,aAAAjL,WAAA,GAAc,CAAd;AAmBK;;;;mCAEM;AACT,eAAKkL,YAAL;AACD;;;uCACc;AACb,cAAM3D,QAAQ,GAAG,KAAKjP,aAAL,CAAmB6S,eAAnB,EAAjB;AACA,eAAKC,QAAL,GAAgB;AACdC,kBAAM,EAAE9D,QADM;AAEd+D,iBAAK,EAAE/D,QAAQ,CAACgE,KAAT,CAAe,GAAf,CAFO;AAGdC,kBAAM,EAAE,EAHM;AAIdC,yBAAa,EAAE;AAJD,WAAhB,CAFa,CAQb;;AACA,cAAMC,cAAc,GAAG,KAAKN,QAAL,CAAcE,KAAd,CAAoBxK,MAA3C;;AACA,iBAAO,KAAKsK,QAAL,CAAcI,MAAd,CAAqB1K,MAArB,GAA8B,KAAKsK,QAAL,CAAcK,aAAnD,EAAkE;AAChE,gBAAM/F,KAAK,GAAGiG,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBF,IAAI,CAACC,KAAL,CAAWF,cAAX,CAA3B,CAAd;;AACA,gBAAI,CAAC,KAAKN,QAAL,CAAcI,MAAd,CAAqBM,QAArB,CAA8BpG,KAA9B,CAAL,EAA2C;AACzC,mBAAK0F,QAAL,CAAcI,MAAd,CAAqBO,IAArB,CAA0BrG,KAA1B;AACD;AACF;;AACD,eAAK0F,QAAL,CAAcI,MAAd,CAAqBQ,IAArB,CAA0B,UAACC,CAAD,EAAIrF,CAAJ;AAAA,mBAAUqF,CAAC,GAAGrF,CAAd;AAAA,WAA1B;AACA,eAAK5G,WAAL;AACD;;;oCACW;AACV,eAAKkM,SAAL,GAAiB,KAAKA,SAAL,CAAe1E,WAAf,GAA6BC,IAA7B,EAAjB;;AACA,cAAI,KAAKyE,SAAL,KAAmB,KAAKd,QAAL,CAAcE,KAAd,CAAoB,KAAKF,QAAL,CAAcI,MAAd,CAAqB,CAArB,CAApB,CAAvB,EAAqE;AACnE,iBAAKJ,QAAL,CAAcI,MAAd,CAAqBW,KAArB;AACA,iBAAKD,SAAL,GAAiB,EAAjB;AACD;;AACD,cAAI,CAAC,KAAKd,QAAL,CAAcI,MAAnB,EAA2B;AACzB;AACArM,oBAAQ,CAACiN,cAAT,CAAwB,WAAxB,EAAqCC,IAArC;AACD;AACF;;;gDACuB3G,K,EAAa;AACnC,cAAI,KAAK0F,QAAL,CAAcI,MAAd,CAAqB1K,MAArB,KAAgC,CAApC,EAAuC;AACrC,mBAAO,gCAAP;AACD;;AACD,kBAAQ4E,KAAR;AACE,iBAAK,CAAL;AACA,iBAAK,EAAL;AACE,2CAAsBA,KAAtB;;AACF,iBAAK,CAAL;AACA,iBAAK,EAAL;AACE,2CAAsBA,KAAtB;;AACF,iBAAK,CAAL;AACA,iBAAK,EAAL;AACE,2CAAsBA,KAAtB;;AACF;AACE,2CAAsBA,KAAtB;AAXJ;AAaD;;;oCACWA,K,EAAa;AACvB,cAAI,KAAK0F,QAAL,CAAcI,MAAd,CAAqB1K,MAArB,KAAgC,CAApC,EAAuC;AACrC,mBAAO,EAAP;AACD,WAFD,MAEO,IAAI4E,KAAK,GAAG,CAAR,IAAaA,KAAK,IAAI,KAAK0F,QAAL,CAAcE,KAAd,CAAoBxK,MAA9C,EAAsD;AAC3D,mBAAO,EAAP;AACD,WAFM,MAEA;AACL,mBAAO,WAAW4E,KAAK,GAAG,CAAnB,CAAP;AACD;AACF;;;oCACWA,K,EAAa;AACvB,cAAI,KAAK0F,QAAL,CAAcI,MAAd,CAAqB1K,MAArB,KAAgC,CAApC,EAAuC;AACrC,mBAAO,EAAP;AACD,WAFD,MAEO,IAAI4E,KAAK,GAAG,CAAR,IAAaA,KAAK,GAAG,KAAK0F,QAAL,CAAcE,KAAd,CAAoBxK,MAA7C,EAAqD;AAC1D,mBAAO,EAAP;AACD,WAFM,MAEA;AACL,mBAAO,KAAKsK,QAAL,CAAcE,KAAd,CAAoB5F,KAApB,CAAP;AACD;AACF;;;qCACY;AACX,cAAI,KAAK0F,QAAL,CAAcI,MAAd,CAAqB1K,MAAzB,EAAiC;AAC/B,iBAAKd,WAAL;AACD,WAFD,MAEO;AACL,kBAAM,IAAIxI,KAAJ,CAAU,yBAAV,CAAN;AACD;AACF;;;kCACS;AACR,eAAKwI,WAAL;AACA,eAAK+K,YAAL,GAAoB,EAApB;AACD;;;wCAEY;AACX,iBAAQ,KAAKK,QAAL,CAAcC,MAAd,KAAyB,KAAKN,YAAtC;AACD;;;wCACqB;;;;;;;yBAChB,KAAKhD,QAAL,E;;;;;AACF,yBAAK5M,cAAL,CAAoBoF,YAApB,CAAiC,sBAAjC;AACMsC,uB,GAAM,KAAKmF,I;AACjB,yBAAKA,IAAL,GAAY,EAAZ;AACA,yBAAKC,IAAL,GAAY,EAAZ;;AACY,2BAAM,KAAK3P,aAAL,CAAmB4P,qBAAnB,CAAyC,KAAKkD,QAAL,CAAcC,MAAvD,EAA+DxI,GAA/D,EAAoE,EAApE,EAAwE,IAAxE,CAAN;;;AAAN9E,uB;AACN,yBAAKuK,IAAL,GAAYvK,GAAG,CAACuK,IAAhB;AACA,yBAAKvQ,IAAL,GAAYgG,GAAG,CAAChG,IAAhB;AACA,yBAAK6F,GAAL,GAAWG,GAAG,CAACH,GAAf;AACA,yBAAK6C,EAAL,GAAU1C,GAAG,CAAC0C,EAAd;AACA,yBAAK2K,QAAL,CAAcC,MAAd,GAAuB,EAAvB;AACA,yBAAKD,QAAL,CAAcE,KAAd,GAAsB,EAAtB;AACA,yBAAKF,QAAL,CAAcI,MAAd,GAAuB,EAAvB;AACA,yBAAKxL,WAAL;AACA,yBAAK7E,cAAL,CAAoBwF,WAApB;;AACA,wBAAIxB,QAAQ,CAACC,IAAT,CAAcC,WAAd,IAA6B,GAAjC,EAAsC;AACpC,2BAAK2H,SAAL,GAAiB,IAAjB;AACD;;;;;;;;;AAEJ;;;mCACO;AACN,cAAI,CAAC,KAAKvJ,sBAAL,CAA4BqF,QAA5B,CAAqC,KAAKkF,IAA1C,CAAL,EAAsD;AACpD,iBAAK7M,cAAL,CAAoBkD,UAApB,CAA+B,KAAK5F,SAAL,CAAe8D,OAAf,CAAuB,sCAAvB,CAA/B,EAA+F,CAA/F;AACA,mBAAO,KAAP;AACD,WAHD,MAGO,IAAI,KAAKyL,IAAL,KAAc,KAAKC,IAAvB,EAA6B;AAClC,iBAAK9M,cAAL,CAAoBkD,UAApB,CAA+B,KAAK5F,SAAL,CAAe8D,OAAf,CAAuB,0CAAvB,CAA/B,EAAmG,CAAnG;AACA,mBAAO,KAAP;AACD,WAHM,MAGA;AACL,mBAAO,IAAP;AACD;AACF;;;uCACc;AACb,eAAK6K,WAAL,GAAmB,KAAK3J,sBAAL,CAA4B0K,uBAA5B,CAAoD,KAAKH,IAAzD,CAAnB;AACD;;;+BACY;;;;;;;AACLM,wB,GAAO,KAAKA,I;AAClB,yBAAKA,IAAL,GAAY,IAAZ;;AACA,2BAAM,KAAKvI,aAAL,CAAmBsI,sBAAnB,CAA0C,KAAKtQ,IAA/C,EAAqDuQ,IAArD,CAAN;;;AACA,yBAAKhQ,aAAL,CAAmBgU,WAAnB;AACA,yBAAKvU,IAAL,GAAY,IAAZ;AACA,yBAAKoD,cAAL,CAAoBiD,UAApB,CAA+B,iDAA/B;AACA,yBAAK5F,MAAL,CAAYyB,QAAZ,CAAqB,oBAAa,KAAK3B,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8C1B,OAA3D,EAArB;;;;;;;;;AACD;;;kCACK;AACJ,iBAAOgD,IAAI,CAACC,SAAL,CAAe,KAAK1G,IAApB,CAAP;AACD;;;iCACK;AACJ,iBAAO,KAAK6F,GAAZ;AACD;;;mCACU;AACT,eAAKwD,aAAL,CAAmBgH,cAAnB,CAAkC,KAAKrQ,IAAvC;AACA,eAAKkT,aAAL,GAAqB,IAArB;AACD;;;;;;;uBAvKUH,kB,EAAkB,qI,EAAA,8I,EAAA,iJ,EAAA,8I,EAAA,8I,EAAA,2K,EAAA,uH;AAAA,K;;;YAAlBA,kB;AAAkB,qC;AAAA,iB;AAAA;AAAA;;;;;;;;;;;;;;ADf/B;;AACE;;AACE;;AACF;;AACA;;AAYA;;AAsBA;;AAWA;;AAcF;;;;AA7DI;;AAAA;;AAEG;;AAAA;;AAYA;;AAAA;;AAsBA;;AAAA;;AAWA;;AAAA;;;;;;;;;;sEClCMA,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACT5Q,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,6BAAD;AAHF,S;AAKoB,Q;;;;;;;;;;;;;;;;;;gBAE5B,yD;iBAAY,a;;;gBACZ;;;gBACA;;;gBACA;;;;;;;;;;;;;;;;;;;;ACpBH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACGA;;AAEE;;AACE;;AAAe;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAtC;;AACA;;AACE;;AAAI;;;;AAA+C;;AACrD;;AAEA;;AACE;;AAAO;;AAAoB;;AAC3B;;AACE;;AACF;;AACA;;AAAM;;AAAmB;;AAC3B;;AACF;;AACF;;;;;;AAXU;;AAAA;;AAQE;;AAAA;;;;QDFCmS,gB;AAST,gCACYpL,YADZ,EAEYhG,cAFZ,EAE0C;AAAA;;AAD9B,aAAAgG,YAAA,GAAAA,YAAA;AACA,aAAAhG,cAAA,GAAAA,cAAA;AARZ,aAAAqR,iBAAA,GAAoB;AAChBC,oBAAU,EAAE,IADI;AAEhBC,sBAAY,EAAE;AAFE,SAApB;AAKA,aAAArL,SAAA,GAAY,KAAZ;AAIK;;;;mCAEM,CACV;;;oCACW;AAAA;;AACV;AACA,cAAMnC,cAAc,GAAGlI,MAAM,CAACqG,UAAP,GAAoB8B,QAAQ,CAACC,IAAT,CAAcC,WAAzD;AACAF,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkCL,cAAc,CAACM,QAAf,EAAlC;AACAL,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBuC,QAApB,GAA+B,QAA/B;AACA,eAAKR,SAAL,GAAiB,IAAjB;AACAW,oBAAU,CAAC,YAAM;AACf,mBAAI,CAAC2K,KAAL;AACD,WAFS,EAEP,GAFO,CAAV;AAGD;;;qCACY;AACX;AACAxN,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkC,EAAlC;AACAJ,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBuC,QAApB,GAA+B,EAA/B;AACA,eAAKR,SAAL,GAAiB,KAAjB;AACD;;;gCACO;AACJ,0DAAgBlC,QAAQ,CAACiN,cAAT,CAAwB,QAAxB,CAAhB,EAAmD,KAAKQ,aAAxD,EAAuE;AAAEC,gCAAoB,EAAE,GAAxB;AAA8BC,uBAAW,EAAE;AAA3C,WAAvE,EAAsH,UAAUnO,GAAV,EAAeoO,MAAf,EAAuB;AACzI,gBAAIpO,GAAJ,EAAS;AAAE,oBAAMA,GAAN;AAAY;AAC1B,WAFD;AAGH;;;8BAEKyE,S,EAA6B;AAAA;;AAC/B,cAAI,KAAKwJ,aAAT,EAAwB;AACpB,iBAAKvJ,SAAL,GAAiB,KAAKlC,YAAL,CAAkBmC,IAAlB,CAAuBF,SAAvB,EAAkC;AAAE,uBAAO;AAAT,aAAlC,CAAjB,CADoB,CACqD;;AACzEpB,sBAAU,CAAC,YAAM;AACb,qBAAI,CAAC2K,KAAL;AACH,aAFS,EAEP,GAFO,CAAV;AAGH,WALD,MAKO;AACH,iBAAKxR,cAAL,CAAoBqB,GAApB,CAAwB,4CAAxB;AACH;AACJ;;;;;;;uBA/CQ+P,gB,EAAgB,mI,EAAA,iJ;AAAA,K;;;YAAhBA,gB;AAAgB,kC;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACb7B;;AAAsD;AAAA,mBAAS,IAAAS,SAAA,EAAT;AAAoB,WAApB;;AAAtD;;AAEA;;;;AAAK;;AAAA;;;;;;;;;;sEDWQT,gB,EAAgB;cAL5B,uDAK4B;eALlB;AACPrS,kBAAQ,EAAE,aADH;AAEPC,qBAAW,EAAE,0BAFN;AAGPC,mBAAS,EAAE,CAAC,0BAAD;AAHJ,S;AAKkB,Q;;;;;;;;gBACxB,uD;iBAAU,Q;;;gBACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AERC;;AAA6B;;AAAQ;;;;;;AACrC;;AAA6B;;AAAY;;;;;;AAIvC;;AAAmD;;AAAqB;;;;;;AACxE;;AAAkD;;AAAkB;;;;;;;;AAHtE;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AACA;;AACA;;AACF;;;;;;AAFgB;;AAAA;;AACA;;AAAA;;;;;;;;AAYd;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AAAoC;;AAAQ;;;;;;AADyB;;;;;;AAEvE;;;;;;AAEE;;AAAkD;;AAAK;;;;;;AACpC;;;;;;AAYjB;;AAAyE;;AAAgD;;;;;;;;AAAhE;;AAAgB;;AAAA;;;;;;;;AAJ/E;;AACE;;AAAwF;;AAAM;;AAAO;;AACnG;;AAA2B;AAAA;;AAAA;;AAAA;AAAA,WAA2B,eAA3B,EAA2B;AAAA;;AAAA;;AAAA;AAAA,SAA3B;;AACzB;;AAA0B;;AAAa;;AACvC;;AACF;;AAAS;;AACX;;AAAgC;AAAA;;AAAA;;AAAA;AAAA,WAA+B,QAA/B,EAA+B;AAAA;;AAAA;;AAAA;AAAA,SAA/B,EAA+B,eAA/B,EAA+B;AAAA;;AAAA;;AAAA;AAAA,SAA/B;;AAAhC;;AAEF;;;;;;AAN+B;;AAAA;;AAEjB;;AAAA;;AAGV;;AAAA;;;;;;AAGF;;AAAoD;;AAAkB;;;;;;AACtE;;AAA2E;;AAAwB;;;;;;AAAxB;;AAAA;;;;;;AAF7E;;AACE;;AACA;;AACF;;;;;;AAF2B;;AAAA;;AACA;;AAAA;;;;;;;;AAE3B;;AACE;;AAAO;;AAAsB;;AAAwB;;AAAkB;;AAAO;;AAC9E;;AAAmC;AAAA;;AAAA;;AAAA;AAAA,WAA+B,QAA/B,EAA+B;AAAA;;AAAA;;AAAA;AAAA,SAA/B,EAA+B,eAA/B,EAA+B;AAAA;;AAAA;;AAAA;AAAA,SAA/B;;AAE0C;;AAC/E;;;;;;AAJuD;;AAAA;;AAEnD;;AAAA;;;;;;AAUE;;AAAoC;;AAAG;;;;;;AACvC;;AAAmC;;AAAE;;;;;;;;AAI3C;;AACE;;AACE;;AACE;;AAAO;;AAAS;;AAChB;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AADF;;AAEF;;AACA;;AACE;;AAAO;;AAAG;;AACV;;AAAmB;AAAA;;AAAA;;AAAA;AAAA,WAA2B,OAA3B,EAA2B;AAAA;;AAAA;;AAAA;AAAA,SAA3B,EAA2B,eAA3B,EAA2B;AAAA;;AAAA;;AAAA;AAAA,SAA3B;;AAAnB;;AAEF;;AACF;;AACA;;AACE;;AACE;;AAAO;;AAAa;;AACpB;;AAAmB;AAAA;;AAAA;;AAAA;AAAA,WAA2B,OAA3B,EAA2B;AAAA;;AAAA;;AAAA;AAAA,SAA3B,EAA2B,eAA3B,EAA2B;AAAA;;AAAA;;AAAA;AAAA,SAA3B;;AAAnB;;AAEF;;AACA;;AACE;;AAAO;;AAAgB;;AACvB;;AAEF;;AACF;;AACF;;;;;;AArBsC;;AAAA;;AAC9B;;AAKA;;AAAA;;AAA6D;;AAO7D;;AAAA;;AAAiE;;AAIzB;;AAAA;;;;;;AAKhD;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;;;AA/EJ;;AACE;;AACE;;AAA0E;AAAA;;AAAA;;AAAA;AAAA,WAAoB,OAApB,EAAoB;AAAA;;AAAA;;AAAA,oCACzE,KADyE;AACpE,SADgD;;AAA1E;;AAGA;;AAAkB;;AAAG;;AACvB;;AACA;;AACE;;AAEA;;AACA;;AACE;;AACA;;AACA;;AACF;;AACF;;AACA;;AACE;;AAAO;;AAAY;;AACnB;;AAAG;;AAA2B;;AAChC;;AACA;;AASA;;AAIA;;AAMA;;AACE;;AAAO;;AAAQ;;AACf;;AACE;;AACE;;AAAuB;AAAA;;AAAA;;AAAA;AAAA;;AAAvB;;AACA;;AACF;;AAAQ;;AACN;;AACA;;AACF;;AACF;;AACF;;AACA;;AA0BA;;AAGA;;AAAwD;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAO;;AACxF;;;;;;;;AA/EiC;;AAAA,0GAAiC,OAAjC,EAAiC,kDAAjC,EAAiC,IAAjC;;AAD6C,6FAAoB,UAApB,EAAoB,+BAApB;;AAMlE;;AAAA;;AAEL;;AAAA;;AAEa;;AAAA,mGAAmC,UAAnC,EAAmC,KAAnC;;AAEd;;AAAA;;AAKC;;AAAA;;AAEA;;AAAA;;AASS;;AAAA;;AAIT;;AAAA;;AAUwB;;AAAA;;AAGT;;AAAA;;AACA;;AAAA;;AAIf;;AAAA;;AA0BC;;AAAA;;;;;;AAaJ;;AAAsD;;AAAE;;;;;;AAKxD;;AAA6C;;AAC3C;;AAAmB;;;;;;AAD6B;;AAAA;;AAChD;;AAAA;;;;;;AAEF;;AAA+C;;AAAwB;;;;;;AAAxB;;AAAA;;;;;;AAJjD;;AACE;;AAEA;;AAAwB;;AAAwB;;AAChD;;AACA;;AACF;;;;;;AALQ;;AAAA;;AAEkB;;AAAA;;AACC;;AAAA;;;;;;AAef;;AAAuC;;AAAC;;;;;;AAD9C;;AACE;;AAAI;;AAA+C;;AAAoB;;AACvE;;AAAqB;;;;AAAyC;;AAChE;;;;;;AAFY;;AAAA;;AAAyC;;AAAA;;AAC9B;;AAAA;;;;;;;;AAI3B;;AACsC;AAAA;;AAAA;;AAAA;AAAA;;AACpC;;AAA0B;;AAAc;;AAC1C;;;;;;AAD4B;;AAAA;;;;;;AAnB9B;;AAEE;;AACA;;AACE;;AACE;;AACE;;AAAgB;;;;AAAoC;;AACpD;;AAAgB;;;;AAAwC;;AAC1D;;AACF;;AACA;;AACE;;AAIF;;AACF;;AACA;;AAIA;;AACF;;;;;;AAhBwB;;AAAA;;AACA;;AAAA;;AAId;;AAAA;;AAMgE;;AAAA;;;;;;AAO1E;;AAEE;;AACE;;AAAM;;AAAI;;AAAO;;AAAM;;AACrB;;AACF;;AACF;;AACA;;AACE;;AAAM;;AAAO;;AAAO;;AAAM;;AAA2B;;AACvD;;AACF;;;;;;AAPgC;;AAAA;;AAC1B;;AAAA;;AAIwB;;AAAA;;;;;;AAG9B;;AAEE;;AACE;;AAAM;;AAAI;;AAAO;;AAAM;;AAA2B;;AACpD;;AACF;;;;;;AAF2B;;AAAA;;;;;;AAO3B;;AACE;;AAAM;;AAAgB;;AAAO;;AAAM;;;;AAAyC;;AAC9E;;;;;;AADqC;;AAAA;;;;;;;;AAInC;;AAAiF;AAAA;;AAAA;;AAAA;AAAA,WAAsB,OAAtB,EAAsB;AAAA;;AAAA;;AAAA,qCAE5E,EAF4E;AAE1E,SAFoD,EAAsB,QAAtB,EAAsB;AAAA;;AAAA;;AAAA,qCAE9C,EAF8C;AAE5C,SAFsB;;AAAjF;;;;;;AAAiF;;;;;;;;AAGjF;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AAAwB;;AAAgB;;;;;;;;AAExC;;AAA+B;AAAA;;AAAA;;AAAA;AAAA;;AAE7B;;AAA6D;;;;;;AAD7D;;AACA;;AAAA;;;;;;AAGN;;AAAkD;;AAAmB;;;;;;AAAnB;;AAAA;;;;;;AA/EpD;;AAEE;;AACA;;AACE;;AAAsB;;AAAI;;AAC1B;;AAAyB;;;;AAAwC;;AACjE;;AAAyB;;;;AAAuE;;AAChG;;AACF;;AACA;;AACA;;AACA;;AAOA;;AAwBA;;AAWA;;AAMA;;AACA;;AACE;;AAAM;;AAAG;;AAAO;;AAAM;;;;AAAwC;;AAChE;;AACA;;AAGA;;AACA;;AACE;;AAGA;;AAEA;;AAKF;;AACA;;AACF;;;;;;;;AA3E6B;;AAAA;;AACA;;AAAA;;AACnB;;AAAA;;AAIM;;AAAA;;AAOA;;AAAA;;AAwBA;;AAAA;;AAWA;;AAAA;;AAQU;;AAAA;;AAEnB;;AAAA;;AAKI;;AAAA;;AAGe;;AAAA,0IAAqE,UAArE,EAAqE,KAArE;;AAQlB;;AAAA;;;;;;;;AAlLZ;;AAEE;;AACE;;AAAe;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAtC;;AACA;;AACE;;AACA;;AAEA;;AAKF;;AAEA;;AAoFA;;AAiFF;;AACF;;;;;;AAhLU;;AAAA;;AACA;;AAAA;;AAEI;;AAAA;;AAOW;;AAAA;;AAoFA;;AAAA;;;;AC1EzB,QAAM6S,YAAY,GAA6B;AAC7CC,SAAG,EAAE,CADwC;AAE7CC,aAAO,EAAE,CAFoC;AAG7C7K,SAAG,EAAE,CAHwC;AAI7C8K,UAAI,EAAE;AAJuC,KAA/C;;QAWaC,a;AA6CX,6BACU5U,SADV,EAEUH,aAFV,EAGUkF,gBAHV,EAIUjF,kBAJV,EAKUkF,sBALV,EAMUqC,aANV,EAOUwN,eAPV,EAQUnS,cARV,EASSqK,YATT,EAUUnK,aAVV,EAUsC;AAAA;;AAT5B,aAAA5C,SAAA,GAAAA,SAAA;AACA,aAAAH,aAAA,GAAAA,aAAA;AACA,aAAAkF,gBAAA,GAAAA,gBAAA;AACA,aAAAjF,kBAAA,GAAAA,kBAAA;AACA,aAAAkF,sBAAA,GAAAA,sBAAA;AACA,aAAAqC,aAAA,GAAAA,aAAA;AACA,aAAAwN,eAAA,GAAAA,eAAA;AACA,aAAAnS,cAAA,GAAAA,cAAA;AACD,aAAAqK,YAAA,GAAAA,YAAA;AACC,aAAAnK,aAAA,GAAAA,aAAA,CAA4B,CAtDtC;;AACA,aAAAkS,aAAA,GAAgB,EAAhB;AACA,aAAAC,kBAAA,GAAqB,KAArB;AACA,aAAAC,kBAAA,GAAqB,EAArB;AACA,aAAAC,aAAA,GAAgB,EAAhB;AACA,aAAAC,cAAA,GAAiB,EAAjB;AACA;;AACA,aAAAtM,SAAA,GAAY,KAAZ;AACA,aAAAuM,YAAA,GAAe,KAAf;AACA,aAAAC,OAAA,GAAU,KAAV;AAIA,aAAAnV,SAAA,GAAY,IAAI,qDAAJ,EAAZ;AACA,aAAAoV,wBAAA,GAAqDb,YAArD;AAIA,aAAA1G,MAAA,GAAS,EAAT;AAGA,aAAAwH,OAAA,GAAU,CAAV;AACA,aAAAb,GAAA,GAAM,EAAN;AACA,aAAAC,OAAA,GAAU,EAAV;AACA,aAAAa,sBAAA,GAAyB,KAAzB;AACA,aAAAC,4BAAA,GAA+B,EAA/B;AACA,aAAAC,sBAAA,GAAqC,EAArC;AACA,aAAA5M,UAAA,GAAa,CAAb;AACA,aAAA6M,gBAAA,GAA+B,EAA/B;AACA,aAAAC,YAAA,GAAe,CAAf;AAEA,aAAAlR,gBAAA,GAAmB,IAAnB;AAGA,aAAAQ,WAAA,GAAc,EAAd;AAEA,aAAAY,YAAA,GAAe,EAAf;AACA,aAAA+P,cAAA,GAAiB,EAAjB;AACA,aAAAC,YAAA,GAA2B,EAA3B;AACA,aAAAC,aAAA,GAAgB,EAAhB;AACA,aAAAC,OAAA,GAAU,CAAV;AACA,aAAA7M,WAAA,GAAc,EAAd;AACA,aAAA8M,OAAA,GAAU,WAAV;AAaK;;;;mCAEM;AACT,cAAI,KAAKnW,aAAL,CAAmBa,MAAvB,EAA+B;AAC7B,iBAAKyI,IAAL;AACD;AACF;;;+BAEM;AACL,cAAI,CAAC,KAAKmB,aAAV,EAAyB;AACvB,iBAAKA,aAAL,GAAqB,KAAKzK,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,CAArB;AACD;;AACDC,iBAAO,CAACC,GAAR,CAAY,KAAK2F,aAAL,CAAmBvH,OAA/B;AACA,eAAK0B,gBAAL,GAAwB,KAAK5E,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAAlD;AACD;AACD;;;;oCACY;AAAA;;AACV;AACA,cAAMgC,cAAc,GAAGlI,MAAM,CAACqG,UAAP,GAAoB8B,QAAQ,CAACC,IAAT,CAAcC,WAAzD;AACAF,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkCL,cAAc,CAACM,QAAf,EAAlC;AACAL,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBuC,QAApB,GAA+B,QAA/B;AACA1E,iBAAO,CAACC,GAAR,CAAY,YAAZ;AACA,eAAKiE,SAAL,GAAiB,IAAjB;;AACA,cAAI,KAAK/I,aAAL,CAAmBa,MAAvB,EAA+B;AAC7B,gBAAI,CAAC,KAAK4J,aAAV,EAAyB;AACvB,mBAAKA,aAAL,GAAqB,KAAK7F,gBAAL,CAAsB,CAAtB,CAArB;AACD;;AACD,iBAAK4E,SAAL;;AACA,gBAAI9K,MAAM,CAACqG,UAAP,GAAoB,IAAxB,EAA8B;AAC5B2E,wBAAU,CAAC,YAAM;AACf,oBAAMC,SAAS,GAAqB,OAAI,CAACyM,eAAL,CAAqBvM,aAAzD;AACAF,yBAAS,CAACG,KAAV;AACD,eAHS,EAGP,GAHO,CAAV;AAID;;AACD,iBAAKkL,eAAL,CAAqBqB,WAArB,CAAiC,KAAK5L,aAAL,CAAmBnF,GAApD,EAAyD,KAAKmF,aAAL,CAAmBtC,EAA5E;AACD;AACF;;;qCACkB;;;;;;;0BACb,CAAC,KAAK2N,YAAN,IAAsB,CAAC,KAAKZ,kB;;;;;AAC9B,yBAAK9P,WAAL,GAAmB,KAAKC,UAAL,CAAgB,IAAhB,CAAnB;;wBACK,KAAKD,W;;;;;AACR,wBAAI,CAAC,KAAK6I,MAAV,EAAkB;AAAE,2BAAKA,MAAL,GAAc,GAAd;AAAoB;;AACpCqI,4B,GAAW,K;;AACf,wBAAI,CAAC,KAAKtM,GAAV,EAAe;AACb,2BAAKA,GAAL,GAAW,KAAKwL,wBAAL,CAA8BxL,GAA9B,CAAkC9C,QAAlC,EAAX;AACAoP,8BAAQ,GAAG,IAAX;AACD;;AACD,yBAAKC,gBAAL;AACA,yBAAKnR,WAAL,GAAmB,KAAKoR,YAAL,EAAnB;;wBACK,KAAKpR,W;;;;;AACR,yBAAK4D,UAAL;;yBACI,KAAKhJ,aAAL,CAAmBoK,cAAnB,E;;;;;AACF,yBAAKvH,cAAL,CAAoBoF,YAApB,CAAiC,0BAAjC;;AACa,2BAAM,KAAKjI,aAAL,CAAmBqK,OAAnB,CAA2B,EAA3B,CAAN;;;AAAPjL,wB;;yBACFA,I;;;;;;AACF,2BAAM,KAAKqX,eAAL,CAAqBrX,IAArB,CAAN;;;;;;;AAEA,yBAAKyD,cAAL,CAAoBwF,WAApB;;;;;;;AAGC,wBAAIiO,QAAJ,EAAc;AACnB,2BAAKtM,GAAL,GAAW,EAAX;AACD;;;;;;;;;AAGN;;;sCACmB;;;;;;;AAClB,yBAAKX,WAAL,GAAmB,EAAnB;AACA,yBAAKxG,cAAL,CAAoBoF,YAApB,CAAiC,0BAAjC;;AACa,2BAAM,KAAKjI,aAAL,CAAmBqK,OAAnB,CAA2B,EAA3B,CAAN;;;AAAPjL,wB;;yBACFA,I;;;;;;AACF,2BAAM,KAAKqX,eAAL,CAAqBrX,IAArB,CAAN;;;;;;;AAEA,yBAAKyD,cAAL,CAAoBwF,WAApB;;;;;;;;;AAEH;;;iCACc;;;;;;;yBACT,KAAKrI,aAAL,CAAmBoK,cAAnB,E;;;;;AACF,yBAAKM,0BAAL;AACA,yBAAKC,YAAL,GAAoB,IAApB;AACA,yBAAKE,UAAL;;;;;AAEMN,uB,GAAM,KAAKC,Q;AACjB,yBAAKA,QAAL,GAAgB,EAAhB;AACA,yBAAK3H,cAAL,CAAoBoF,YAApB,CAAiC,wBAAjC;;;AAGS,2BAAM,KAAKjI,aAAL,CAAmBqK,OAAnB,CAA2BE,GAA3B,EAAgC,KAAKE,aAAL,CAAmBnF,GAAnD,CAAN;;;AAAPlG,wB;;;;;;;AAEA,yBAAKyD,cAAL,CAAoBwF,WAApB;;;AAEF,wBAAIjJ,IAAJ,EAAU;AACR,2BAAKwL,QAAL,GAAgB,EAAhB;AACA,2BAAK/H,cAAL,CAAoBoF,YAApB,CAAiC,wBAAjC;AACA,2BAAKwO,eAAL,CAAqBrX,IAArB;AACA,2BAAKyL,UAAL;AACD,qBALD,MAKO;AACL,2BAAKhI,cAAL,CAAoBwF,WAApB;;AACA,0BAAI,KAAKrI,aAAL,CAAmBa,MAAnB,YAAqC,oEAAzC,EAAsD;AACpD,6BAAK+J,QAAL;AACD,uBAFD,MAEO;AACL,6BAAKA,QAAL,GAAgB,KAAKzK,SAAL,CAAe8D,OAAf,CAAuB,6BAAvB,CAAhB,CADK,CACmE;AACzE;AACF;;;;;;;;;AAEJ;;;qCACY;AACX;AACA4C,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBC,WAApB,GAAkC,EAAlC;AACAJ,kBAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBuC,QAApB,GAA+B,EAA/B;AACA,eAAKP,UAAL,GAAkB,CAAlB;AACA,eAAKD,SAAL,GAAiB,KAAjB;AACA,eAAKS,SAAL;AACD;;;6CACoB;AACnB,cAAMkN,cAAc,GAAG,8CAAI,KAAKjM,aAAL,CAAmB8H,UAAvB,EAAmCoE,GAAnC,CAAuC,OAAvC,EAAgDzP,QAAhD,EAAvB;AACA,iBAAO,KAAK0P,gBAAL,CAAsBF,cAAtB,IAAwC,MAA/C;AACD;;;yCACgBG,C,EAAW;AAC1B,cAAMC,KAAK,GAAkBD,CAAC,CAAC5D,KAAF,CAAQ,GAAR,CAA7B;AACA6D,eAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAAL,CAAS/O,OAAT,CAAiB,uBAAjB,EAA0C,GAA1C,CAAX;AACA,iBAAO+O,KAAK,CAACC,IAAN,CAAW,GAAX,CAAP;AACD;;;0CACiBC,K,EAAc;AAC9BA,eAAK,CAACxS,eAAN;AACA,eAAK+Q,OAAL,GAAe,IAAf;AACA,eAAK0B,cAAL;AACD;;;yCACgB;AACf,cAAI,KAAK1B,OAAT,EAAkB;AAChB,gBAAM2B,GAAG,GAAG,KAAKC,SAAL,CAAe,KAAK1M,aAApB,CAAZ;;AACA,gBAAIyM,GAAG,CAAC1O,MAAJ,IAAc0O,GAAG,CAAC3K,KAAJ,CAAU,CAAV,EAAa,CAAb,MAAoB,GAAtC,EAA2C;AACzC,mBAAK0B,MAAL,GAAciJ,GAAd;AACD,aAFD,MAEO;AACL,mBAAKjJ,MAAL,GAAc,GAAd;AACD;AACF;AACF;;;0CACiB;AAChB,cAAI,KAAKsH,OAAT,EAAkB;AAChB,gBAAM2B,GAAG,GAAG,KAAKC,SAAL,CAAe,KAAK1M,aAApB,CAAZ;AACA,gBAAI2M,SAAS,GAAG,GAAhB;;AACA,gBAAIF,GAAG,CAAC1O,MAAJ,IAAc0O,GAAG,CAAC3K,KAAJ,CAAU,CAAV,EAAa,CAAb,MAAoB,GAAtC,EAA2C;AACzC6K,uBAAS,GAAGF,GAAZ;AACD;;AACD,gBAAI,KAAKjJ,MAAL,KAAgBmJ,SAApB,EAA+B;AAC7B,mBAAKnJ,MAAL,GAAcmJ,SAAd;AACD;AACF;AACF;;;kCACS9T,O,EAAgB;AACxB,cAAIA,OAAO,IAAKA,OAAO,YAAY,wEAAnC,EAAqD;AACnD,gBAAIoT,cAAc,GAAG,8CAAIpT,OAAO,CAACiP,UAAZ,EAAwBoE,GAAxB,CAA4B,OAA5B,CAArB;AACAD,0BAAc,GAAGA,cAAc,CAACW,KAAf,CAAqB,KAAKrN,GAAL,IAAYwB,MAAM,CAAC,KAAKxB,GAAN,CAAlB,GAA+BwB,MAAM,CAAC,KAAKxB,GAAN,CAArC,GAAkD,KAAKwL,wBAAL,CAA8BxL,GAArG,CAAjB;;AACA,gBAAI,CAAC,KAAK0L,sBAAV,EAAkC;AAChCgB,4BAAc,GAAGA,cAAc,CAACW,KAAf,CAAqB,KAAKxC,OAAL,IAAgBrJ,MAAM,CAAC,KAAKqJ,OAAN,CAAtB,GAAuCrJ,MAAM,CAAC,KAAKqJ,OAAN,CAAN,GAAuB,IAA9D,GAAqE,KAAKW,wBAAL,CAA8BV,IAAxH,CAAjB;AACD,aAFD,MAEO;AACL4B,4BAAc,GAAGA,cAAc,CAACW,KAAf,CAAqB,KAAK7B,wBAAL,CAA8BV,IAAnD,CAAjB;AACD;;AACD4B,0BAAc,GAAGA,cAAc,CAACW,KAAf,CAAqB,QAArB,CAAjB,CARmD,CAQF;;AACjD,mBAAOX,cAAc,CAACxP,QAAf,EAAP;AACD,WAVD,MAUO;AACL,mBAAO,8CAAI5D,OAAO,CAACiP,UAAZ,EAAwBoE,GAAxB,CAA4B,OAA5B,EAAqCzP,QAArC,EAAP;AACD;AACF;;;2CACkC;AAAA,cAAlBoQ,UAAkB,uEAAL,KAAK;;AACjC,cAAI,CAAC,KAAKjS,UAAL,CAAgBiS,UAAhB,CAAL,EAAkC;AAChC,gBAAI,CAAC,KAAK3B,4BAAV,EAAwC;AAAE,mBAAKA,4BAAL,GAAoC,EAApC;AAAyC;;AACnF,gBAAI,KAAKD,sBAAT,EAAiC;AAC/B,mBAAKM,YAAL,GAAoB,KAAKJ,sBAAzB;AACA,mBAAKC,gBAAL,GAAwB,EAAxB;;AACA,kBAAI,KAAKG,YAAL,CAAkBxN,MAAlB,GAA2B,CAA/B,EAAkC;AAChC,qBAAKqN,gBAAL,CAAsBpC,IAAtB,CAA2B,KAAKuC,YAAL,CAAkB,CAAlB,CAA3B,EAAiD,KAAKA,YAAL,CAAkB,CAAlB,CAAjD;AACD,eAFD,MAEO;AACL,qBAAKH,gBAAL,CAAsBpC,IAAtB,CAA2B,KAAKuC,YAAL,CAAkB,CAAlB,CAA3B;AACD;AACF,aARD,MAQO;AACL,kBAAMuB,QAAQ,GAAG,KAAK3C,GAAL,GAAWpJ,MAAM,CAAC,KAAKoJ,GAAN,CAAjB,GAA8B,KAAKY,wBAAL,CAA8BZ,GAA7E;AACA,kBAAM4C,YAAY,GAAG,KAAK3C,OAAL,GAAerJ,MAAM,CAAC,KAAKqJ,OAAN,CAArB,GAAsC,KAAKW,wBAAL,CAA8BX,OAAzF;AACA,kBAAM4C,SAAS,GAAG,CAAC,KAAKxC,aAAN,GAAsB,KAAK9K,KAA3B,GAAmC,KAAKgL,kBAA1D;AACA,mBAAKa,YAAL,GAAoB,CAAC;AAAE0B,kBAAE,EAAED,SAAN;AAAiBxJ,sBAAM,EAAEzC,MAAM,CAAC,KAAKyC,MAAN,CAA/B;AAA8CsJ,wBAAQ,EAARA,QAA9C;AAAwDC,4BAAY,EAAZA;AAAxD,eAAD,CAApB;;AACA,kBAAI,KAAKpC,aAAT,EAAwB;AACtB,oBAAI,KAAKH,aAAL,KAAuB,SAA3B,EAAsC;AACpC,uBAAKe,YAAL,CAAkB,CAAlB,EAAqB2B,IAArB,GAA4B;AAAEC,yBAAK,EAAE,KAAKxC,aAAd;AAA6BrI,4BAAQ,EAAE,KAAKkI,aAA5C;AAA2DpH,6BAAS,EAAE,KAAKwH;AAA3E,mBAA5B;AACD,iBAFD,MAEO;AACL,uBAAKW,YAAL,CAAkB,CAAlB,EAAqB2B,IAArB,GAA4B;AAAEC,yBAAK,EAAE,KAAKxC,aAAd;AAA6BrI,4BAAQ,EAAE,KAAKkI;AAA5C,mBAA5B;AACD;AACF;AACF;;AACD,mBAAO,IAAP;AACD;;AACD,iBAAO,KAAP;AACD;;;wCACqB7V,I,EAAe;;;;;;;;;AAC/B6O,0B,GAAS,KAAKA,M;AACdjE,uB,GAAM,KAAKA,G;;AACf,wBAAI,CAAC,KAAKhK,aAAL,CAAmBoK,cAAnB,EAAL,EAA0C;AACxC,2BAAKD,KAAL,GAAa,EAAb;AACA,2BAAK8D,MAAL,GAAc,EAAd;AACA,2BAAKjE,GAAL,GAAW,EAAX;AACA,2BAAK4K,GAAL,GAAW,EAAX;AACA,2BAAKC,OAAL,GAAe,EAAf;AACA,2BAAKc,4BAAL,GAAoC,EAApC;AACA,2BAAKC,sBAAL,GAA8B,EAA9B;AACA,2BAAKC,gBAAL,GAAwB,EAAxB;AACD;;AACD,wBAAI,CAAC5H,MAAL,EAAa;AAAEA,4BAAM,GAAG,GAAT;AAAe;;AAC9B,wBAAI,CAACjE,GAAL,EAAU;AAAEA,yBAAG,GAAG,GAAN;AAAY;;AACxB,yBAAK9E,gBAAL,CAAsB2S,QAAtB,CAA+B,KAAKpN,aAAL,CAAmBvH,OAAlD,EAA2D,KAAK8S,YAAhE,EAA8ExK,MAAM,CAACxB,GAAD,CAApF,EAA2F5K,IAA3F,EAAiG4B,SAAjG,CACE,UAAOyE,GAAP;AAAA,6BAAoB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAClB,qCAAKkF,YAAL,GAAoBlF,GAApB;;AADkB,sCAEdA,GAAG,CAACC,OAAJ,KAAgB,IAFF;AAAA;AAAA;AAAA;;AAGhBb,uCAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCW,GAAvC;;AAHgB,qCAIZA,GAAG,CAACE,OAAJ,CAAYC,MAJA;AAAA;AAAA;AAAA;;AAKd,qCAAK/C,cAAL,CAAoBwF,WAApB;AACMoD,wCANQ,GAMG;AAAEuK,8CAAY,EAAE,KAAKA,YAArB;AAAmCpQ,wCAAM,EAAEH,GAAG,CAACE,OAAJ,CAAYC;AAAvD,iCANH;AAOd,qCAAK3F,kBAAL,CAAwByL,KAAxB,CAA8B,KAAKjB,aAAL,CAAmBvH,OAAjD,EAA0DuI,QAA1D;;AACA,oCAAI,KAAKuK,YAAL,CAAkB,CAAlB,EAAqB2B,IAAzB,EAA+B;AAC7B,uCAAKG,iBAAL,CAAuB,KAAK9B,YAAL,CAAkB,CAAlB,CAAvB;AACD;;AAVa,uEAWY,KAAKA,YAXjB;;AAAA;AAWd,sFAA6C;AAAlCtS,+CAAkC;;AAC3C,wCAAI,KAAK1D,aAAL,CAAmBqD,aAAnB,CAAiCK,WAAW,CAACgU,EAA7C,CAAJ,EAAsD;AACpD,2CAAKzX,kBAAL,CAAwByL,KAAxB,CAA8BhI,WAAW,CAACgU,EAA1C;AACD;AACF;AAfa;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,sCAgBL,KAAK1X,aAAL,CAAmBa,MAAnB,YAAqC,qEAhBhC;AAAA;AAAA;AAAA;;AAAA;AAiBd,uCAAM,KAAK8K,sBAAL,EAAN;;AAjBc;AAAA;AAAA;;AAAA;AAoBhB,qCAAK9I,cAAL,CAAoBwF,WAApB;AACAxD,uCAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCW,GAAG,CAACE,OAAJ,CAAYM,GAAjD;AACA,qCAAKpD,cAAL,CAAoBuD,QAApB,CAA6BX,GAAG,CAACE,OAAJ,CAAYM,GAAzC,EAA8C,CAA9C;;AAtBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAApB;AAAA,qBADF,EA0BE,UAAAI,GAAG,EAAI;AACL,6BAAI,CAACxD,cAAL,CAAoBwF,WAApB;;AACAxD,6BAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BoB,IAAI,CAACC,SAAL,CAAeE,GAAf,CAA9B;;AACA,0BAAI,OAAI,CAACrG,aAAL,CAAmBoK,cAAnB,EAAJ,EAAyC;AACvC,+BAAI,CAACvH,cAAL,CAAoBuD,QAApB,CAA6B,8BAA7B,EAA6D,CAA7D;AACD;AACF,qBAhCH;;;;;;;;;AAkCD;;;iDAC8B;;;;;;;0BACzB,KAAKpG,aAAL,CAAmBa,MAAnB,YAAqC,qE;;;;;;AACvC,2BAAM,KAAKgC,cAAL,CAAoBoF,YAApB,CAAiC,iCAAjC,CAAN;;;;AAEQ2D,sB,GAAK,KAAKjB,YAAL,CAAkBhF,OAAlB,CAA0BkG,iB;;AACnB,2BAAM,KAAKrE,aAAL,CAAmBsE,aAAnB,CAAiCF,EAAjC,EAAqC,KAAK5L,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8CoD,cAAnF,CAAN;;;AAAZ+D,6B;;AACN,wBAAIA,SAAJ,EAAe;AACPC,8BADO,GACIJ,EAAE,GAAGG,SADT;AAEb,2BAAKpB,YAAL,CAAkBhF,OAAlB,CAA0BsG,eAA1B,GAA4CD,QAA5C;AACD,qBAHD,MAGO;AACL,2BAAK3C,WAAL,GAAmB,4BAAnB;AACD;;;;AAED,yBAAKxG,cAAL,CAAoBwF,WAApB;;;;;;;;;;AAGL;;;qDAEkC;;;;;;;;AACjC,yBAAKnD,gBAAL,CAAsBgH,SAAtB,CAAgC,KAAKvB,YAAL,CAAkBhF,OAAlB,CAA0BsG,eAA1D,EAA2EjL,SAA3E,CACG,UAACyE,GAAD,EAAc;AACb,6BAAI,CAACkF,YAAL,GAAoBlF,GAApB;;AACA,0BAAIA,GAAG,CAACC,OAAJ,IAAe,OAAI,CAAC+E,aAAxB,EAAuC;AACrC,4BAAMgB,QAAQ,GAAG;AAAEuK,sCAAY,EAAE,OAAI,CAACA,YAArB;AAAmCpQ,gCAAM,EAAEH,GAAG,CAACE,OAAJ,CAAYC;AAAvD,yBAAjB;;AACA,4BAAI,OAAI,CAACoQ,YAAL,CAAkB,CAAlB,EAAqB2B,IAAzB,EAA+B;AAC7B,iCAAI,CAACG,iBAAL,CAAuB,OAAI,CAAC9B,YAAL,CAAkB,CAAlB,CAAvB;AACD;;AACD,+BAAI,CAAC/V,kBAAL,CAAwByL,KAAxB,CAA8B,OAAI,CAACjB,aAAL,CAAmBvH,OAAjD,EAA0DuI,QAA1D;;AACA,4BAAI,OAAI,CAACzL,aAAL,CAAmBqD,aAAnB,CAAiC,OAAI,CAAC2S,YAAL,CAAkB,CAAlB,EAAqB0B,EAAtD,CAAJ,EAA+D;AAC7D,iCAAI,CAACzX,kBAAL,CAAwByL,KAAxB,CAA8B,OAAI,CAACsK,YAAL,CAAkB,CAAlB,EAAqB0B,EAAnD;AACD;AACF,uBATD,MASO;AACL,+BAAI,CAAC7U,cAAL,CAAoBuD,QAApB,CAA6B,OAAI,CAACuE,YAAL,CAAkBhF,OAAlB,CAA0BM,GAAvD,EAA4D,CAA5D;AACD;;AACDpB,6BAAO,CAACC,GAAR,CAAY,UAAUoB,IAAI,CAACC,SAAL,CAAeV,GAAf,CAAtB;AACD,qBAhBH;;;;;;;;;AAkBD;;;4CACmB;AAClB,eAAK+P,wBAAL,GAAgCb,YAAhC;AACA,eAAKY,OAAL,GAAe,KAAf;AACA,eAAKU,aAAL,GAAqB,EAArB;AACA,eAAKP,sBAAL,GAA8B,CAAC,KAAKA,sBAApC;AACA,eAAKM,YAAL,GAAoB,EAApB;AACA,eAAKL,4BAAL,GAAoC,EAApC;AACA,eAAKvQ,WAAL,GAAmB,EAAnB;AACA,eAAK+E,KAAL,GAAa,EAAb;AACA,eAAK8D,MAAL,GAAc,EAAd;AACA,eAAKjE,GAAL,GAAW,EAAX;AACA,eAAK4K,GAAL,GAAW,EAAX;AACA,eAAKC,OAAL,GAAe,EAAf;AACA,eAAKkD,UAAL;AACA,eAAKC,mBAAL;AACD;;;qCACS;AACR,cAAMlD,IAAI,GAAG,KAAKD,OAAL,GAAerJ,MAAM,CAAC,KAAKqJ,OAAN,CAAN,GAAuB,IAAtC,GAA6C,KAAKW,wBAAL,CAA8BX,OAA9B,GAAwC,IAAlG;;AACA,cAAIC,IAAJ,EAAU;AACR,mBAAOA,IAAI,GAAG,MAAd;AACD;;AACD,iBAAO,EAAP;AACD;;;oCACW;AACV,eAAK3K,KAAL,GAAa,EAAb;AACA,eAAK8D,MAAL,GAAc,EAAd;AACA,eAAKjE,GAAL,GAAW,EAAX;AACA,eAAK4K,GAAL,GAAW,EAAX;AACA,eAAKC,OAAL,GAAe,EAAf;AACA,eAAKS,YAAL,GAAoB,KAApB;AACA,eAAKC,OAAL,GAAe,KAAf;AACA,eAAKI,4BAAL,GAAoC,EAApC;AACA,eAAKC,sBAAL,GAA8B,EAA9B;AACA,eAAKF,sBAAL,GAA8B,KAA9B;AACA,eAAKG,gBAAL,GAAwB,EAAxB;AACA,eAAKrL,QAAL,GAAgB,EAAhB;AACA,eAAKI,QAAL,GAAgB,EAAhB;AACA,eAAKxF,WAAL,GAAmB,EAAnB;AACA,eAAKuF,YAAL,GAAoB,IAApB;AACA,eAAKtB,WAAL,GAAmB,EAAnB;AACA,eAAK8M,OAAL,GAAe,WAAf;AACA,eAAKX,wBAAL,GAAgCb,YAAhC;AACA,eAAKsB,aAAL,GAAqB,EAArB;AACA,eAAKF,cAAL,GAAsB,EAAtB;AACA,eAAKgC,UAAL;AACD;;;qCAE4B;AAAA,cAAlBT,UAAkB,uEAAL,KAAK;AAC3B,cAAI9F,MAAJ;;AACA,cAAI,KAAKkE,sBAAT,EAAiC;AAC/BlE,kBAAM,GAAG,KAAKyG,oBAAL,CAA0BX,UAA1B,CAAT;AACD,WAFD,MAEO;AACL9F,kBAAM,GAAG,KAAK0G,kBAAL,CAAwBZ,UAAxB,CAAT;AACD;;AACD,cAAI,CAAC9F,MAAD,IAAW,KAAKuE,cAApB,EAAoC;AAClCvE,kBAAM,GAAG,KAAKuE,cAAd;AACD;;AACD,iBAAOvE,MAAP;AACD;;;uCACc;AACb,cAAI,KAAKwE,YAAL,CAAkBxN,MAAlB,GAA2B,CAA/B,EAAkC;AAChC,gBAAI,KAAKiC,aAAL,IAAuB,KAAKA,aAAL,YAA8B,wEAAzD,EAA2E;AACzE,kBAAMyM,GAAG,GAAG,8CAAI,KAAKC,SAAL,CAAe,KAAK1M,aAApB,CAAJ,EAAwC0N,IAAxC,CAA6C,QAA7C,CAAZ;AACA,kBAAIlK,MAAM,GAAG,8CAAI,CAAJ,CAAb;;AAFyE,0DAGxD,KAAK+H,YAHmD;AAAA;;AAAA;AAGzE,uEAAoC;AAAA,sBAAzBoC,EAAyB;AAClCnK,wBAAM,GAAGA,MAAM,CAACkK,IAAP,CAAY,8CAAIC,EAAE,CAACnK,MAAP,CAAZ,CAAT;AACD;AALwE;AAAA;AAAA;AAAA;AAAA;;AAMzE,kBAAIA,MAAM,CAACoK,EAAP,CAAUnB,GAAV,CAAJ,EAAoB;AAClB,uBAAO,KAAK/W,SAAL,CAAe8D,OAAf,CAAuB,kCAAvB,CAAP;AACD;AACF,aATD,MASO,IAAI,KAAKwG,aAAL,IAAuB,KAAKA,aAAL,YAA8B,0EAAzD,EAA6E;AAClF,kBAAM6N,KAAK,GAAG,8CAAI,KAAKnB,SAAL,CAAe,KAAK1M,aAApB,CAAJ,CAAd;AACA,kBAAM8N,KAAK,GAAG,8CAAI,KAAKpB,SAAL,CAAe,KAAKnX,aAAL,CAAmBa,MAAnB,CAA0B2L,kBAA1B,CAA6C,KAAK/B,aAAL,CAAmBnF,GAAhE,CAAf,CAAJ,EAA0F6S,IAA1F,CAA+F,QAA/F,CAAd;;AACA,kBAAIlK,OAAM,GAAG,8CAAI,CAAJ,CAAb;;AAHkF,0DAIjE,KAAK+H,YAJ4D;AAAA;;AAAA;AAIlF,uEAAoC;AAAA,sBAAzBoC,GAAyB;AAClCnK,yBAAM,GAAGA,OAAM,CAACkK,IAAP,CAAY,8CAAIC,GAAE,CAACnK,MAAP,CAAZ,CAAT;AACD;AANiF;AAAA;AAAA;AAAA;AAAA;;AAOlF,kBAAIA,OAAM,CAACoK,EAAP,CAAUC,KAAV,CAAJ,EAAsB;AACpB,uBAAO,KAAKnY,SAAL,CAAe8D,OAAf,CAAuB,6BAAvB,CAAP;AACD,eAFD,MAEO,IAAK,IAAI,6CAAJ,CAAQ,GAAR,CAAD,CAAeoU,EAAf,CAAkBE,KAAlB,CAAJ,EAA8B;AACnC,uBAAO,KAAKpY,SAAL,CAAe8D,OAAf,CAAuB,0BAAvB,CAAP;AACD;AACF;AACF;;AACD,iBAAO,EAAP;AACD;;;8CAC2B;;;;;;;AAC1B,2BAAM,KAAK+Q,eAAL,CAAqBqB,WAArB,CAAiC,KAAK5L,aAAL,CAAmBnF,GAApD,EAAyD,KAAKmF,aAAL,CAAmBtC,EAA5E,CAAN;;;AACA,yBAAK6P,mBAAL;;;;;;;;;AACD;;;8CACqB;AACpB,cAAI,CAAC,KAAK/C,aAAV,EAAyB;AACvB,iBAAKuD,YAAL;;AACA,gBAAI,KAAK9C,sBAAT,EAAiC;AAC/B,mBAAKzH,MAAL,GAAc,KAAKwK,WAAL,GAAmBvR,QAAnB,EAAd;AACD;AACF;AACF;;;uCACoB;;;;;;;;;AACbwR,gC,GAAe,KAAK3C,c;AAC1B,yBAAKA,cAAL,GAAsB,EAAtB;;AACA,wBAAI,KAAKQ,gBAAL,EAAJ,EAA6B;AACrBoC,+BADqB,GACT,KAAKA,SAAL,CAAe,KAAKlO,aAAL,CAAmBvH,OAAlC,EAA2C,KAAK8S,YAAhD,CADS;;AAE3B,0BAAI,KAAKC,aAAL,KAAuB0C,SAA3B,EAAsC;AACpC,6BAAK5C,cAAL,GAAsB,EAAtB;AACA,6BAAKE,aAAL,GAAqB0C,SAArB;AACA,6BAAK7C,YAAL,GAHoC,CAGf;;AACf8C,gCAJ8B,GAInB,SAAXA,QAAW,CAAC/S,GAAD,EAAS;AACxB,8BAAIA,GAAJ,EAAS;AACP,gCAAIA,GAAG,CAACsG,KAAR,EAAe;AACb,qCAAI,CAAC/G,WAAL,GAAmBS,GAAG,CAACsG,KAAvB;AACA,qCAAI,CAAC4J,cAAL,GAAsBlQ,GAAG,CAACsG,KAA1B;AACD,6BAHD,MAGO;AACL,qCAAI,CAACqJ,wBAAL,GAAgC3P,GAAhC;AACA,qCAAI,CAACT,WAAL,GAAmB,EAAnB;AACA,qCAAI,CAAC2Q,cAAL,GAAsB,EAAtB;;AACA,qCAAI,CAAC8C,eAAL;AACD;AACF;;AACD,iCAAI,CAAC/C,YAAL;AACD,yBAjBmC;;AAkBpCjR,+BAAO,CAACC,GAAR,CAAY,aAAZ;AACA,6BAAKkQ,eAAL,CAAqB8D,QAArB,CAA8B5S,IAAI,CAACoK,KAAL,CAAWpK,IAAI,CAACC,SAAL,CAAe,KAAK6P,YAApB,CAAX,CAA9B,EAA6E,KAAKvL,aAAL,CAAmBvH,OAAhG,EAAyG0V,QAAzG;AACD,uBApBD,MAoBO;AACL,6BAAK7C,cAAL,GAAsB2C,YAAtB;AACA,6BAAKtT,WAAL,GAAmB,KAAK2Q,cAAxB;AACD;AACF,qBA1BD,MA0BO;AACL,2BAAKA,cAAL,GAAsB2C,YAAtB;;AACA,0BAAI,KAAKhD,sBAAL,GAA8B,CAAC,KAAKC,4BAApC,GAAmE,CAAC,KAAKxL,KAA7E,EAAoF;AAClF,6BAAKqL,wBAAL,GAAgCb,YAAhC;AACA,6BAAKkE,eAAL;AACA,6BAAK5C,aAAL,GAAqB,EAArB;AACD;AACF;;;;;;;;;AACF,S,CACD;;;;kCACU8C,M,EAAgB/C,Y,EAAwB;AAChD,cAAIvW,IAAI,GAAGsZ,MAAX;;AADgD,sDAE/B/C,YAF+B;AAAA;;AAAA;AAEhD,mEAA+B;AAAA,kBAApBoC,EAAoB;AAC7B3Y,kBAAI,IAAI2Y,EAAE,CAACV,EAAX;AACD;AAJ+C;AAAA;AAAA;AAAA;AAAA;;AAKhD,iBAAOjY,IAAP;AACD;;;qCACmB;AAAA,cAATuZ,GAAS,uEAAH,CAAG;;AAClB,cAAI,KAAKtD,sBAAL,IAA+B,KAAKF,wBAAL,CAA8ByD,YAA7D,IAA6E,KAAKzD,wBAAL,CAA8ByD,YAA9B,CAA2CzQ,MAA5H,EAAoI;AAClI,gBAAM0Q,WAAW,GAAGF,GAAG,GAAGA,GAAH,GAAS,KAAKxD,wBAAL,CAA8ByD,YAA9B,CAA2CzQ,MAA3E;AACA,gBAAM2Q,QAAQ,GAAG,OAAO,KAAK3D,wBAAL,CAA8B4D,MAA9B,GAAuC,CAAvC,GAA2C,CAAlD,CAAjB,CAFkI,CAE3D;;AACvE,mBAAO,CAACJ,GAAD,GAAO,KAAKpC,gBAAL,CAAsBsC,WAAW,GAAG,KAAd,GAAsBC,QAA5C,CAAP,GAA+DD,WAAW,IAAIC,QAArF;AAED;;AACD,iBAAO,CAACH,GAAD,GAAO,EAAP,GAAY,IAAnB;AACD;;;uCACc;AACb,iBAAQ,KAAK7T,sBAAL,CAA4BjC,OAA5B,CAAoC,KAAKiH,KAAzC,KAAmD,KAAKA,KAAL,CAAWoC,KAAX,CAAiB,CAAjB,EAAoB,CAApB,MAA2B,IAAtF;AACD;;;qCACY;AACX,iBAAQ,KAAK9B,aAAL,IAAuB,KAAKA,aAAL,YAA8B,0EAA7D;AACD;;;kDACyB;AACxB,cAAI,CAAC,KAAKwK,aAAV,EAAyB;AACvB,gBAAI,CAAC,KAAK9P,sBAAL,CAA4BjC,OAA5B,CAAoC,KAAKiH,KAAzC,CAAD,IAAoD,KAAKA,KAAL,KAAe,EAAvE,EAA2E;AACzE,mBAAK/E,WAAL,GAAmB,KAAKjF,SAAL,CAAe8D,OAAf,CAAuB,sCAAvB,CAAnB;AACD,aAFD,MAEO,IAAI,CAAC,KAAK8R,cAAV,EAA0B;AAC/B,mBAAK3Q,WAAL,GAAmB,EAAnB,CAD+B,CACR;AACxB;AACF,WAND,MAMO;AAAE;AACP,iBAAK+P,kBAAL,GAA0B,EAA1B;AACA;;;;;AAIA,gBAAI,KAAKjI,YAAL,CAAkBmM,eAAlB,CAAkC7F,QAAlC,CAA2C,KAAKyB,aAAhD,CAAJ,EAAoE;AAClE,kBAAI,CAAC,KAAK9P,sBAAL,CAA4BmU,YAA5B,CAAyC,KAAKnP,KAA9C,EAAqD,KAAK8K,aAA1D,CAAD,IAA6E,KAAK9K,KAAL,KAAe,EAAhG,EAAoG;AAClG,wBAAQ,KAAK8K,aAAb;AACE,uBAAK,QAAL;AACE,yBAAK7P,WAAL,GAAmB,8BAAnB;AACA;;AACF,uBAAK,QAAL;AACE,yBAAKA,WAAL,GAAmB,yBAAnB;AACA;;AACF,uBAAK,SAAL;AACE,yBAAKA,WAAL,GAAmB,kCAAnB;AACA;;AACF;AACE,yBAAKA,WAAL,GAAmB,oBAAnB;AAXJ;AAaD,eAdD,MAcO;AACL,oBAAI,CAAC,KAAK2Q,cAAV,EAA0B;AACxB,uBAAK3Q,WAAL,GAAmB,EAAnB,CADwB,CACD;AACxB;;AACD,qBAAKmU,WAAL;AACD;AACF,aArBD,MAqBO;AACL,mBAAKnU,WAAL,GAAmB,uBAAnB;AACD;AACF;AACF;;;wCACe;AACd,eAAKA,WAAL,GAAmB,KAAKC,UAAL,EAAnB;AACD;;;2CACkBiS,U,EAAmB;AACpC,cAAI,CAAC,KAAKnS,sBAAL,CAA4BjC,OAA5B,CAAoC,KAAKuH,aAAL,CAAmBvH,OAAvD,CAAL,EAAsE;AACpE,mBAAO,KAAK/C,SAAL,CAAe8D,OAAf,CAAuB,oCAAvB,CAAP;AACD,WAFD,MAEO,IAAI,CAAC,KAAKkB,sBAAL,CAA4B6E,GAA5B,CAAgC,KAAKA,GAArC,CAAL,EAAgD;AACrD,mBAAO,KAAK7J,SAAL,CAAe8D,OAAf,CAAuB,0BAAvB,CAAP;AACD,WAFM,MAEA;AACL,mBAAO,KAAKuV,sBAAL,CAA4B,KAAKrP,KAAjC,EAAwC,KAAK8D,MAA7C,EAAqDqJ,UAArD,CAAP;AACD;AACF;;;+CACsBnN,K,EAAe8D,M,EAAgBqJ,U,EAAmB;AACvEzS,iBAAO,CAACC,GAAR,CAAYqF,KAAK,GAAG,GAAR,GAAc8D,MAA1B;;AACA,cAAI,CAAC,KAAKgH,aAAN,KAAwB,CAAC,KAAK9P,sBAAL,CAA4BjC,OAA5B,CAAoCiH,KAApC,CAAD,IAA+CA,KAAK,KAAK,KAAKM,aAAL,CAAmBvH,OAApG,CAAJ,EAAkH;AAChH,mBAAO,KAAK/C,SAAL,CAAe8D,OAAf,CAAuB,sCAAvB,CAAP;AACD,WAFD,MAEO,IAAI,KAAKgR,aAAL,KACL,CAAC,KAAK9P,sBAAL,CAA4BmU,YAA5B,CAAyC,KAAKnP,KAA9C,EAAqD,KAAK8K,aAA1D,CAAD,IAA6E,KAAKE,kBAAL,KAA4B,KAAK1K,aAAL,CAAmBvH,OADvH,CAAJ,EACqI;AAC1I,mBAAO,mBAAP;AACA;;;;AAID,WAPM,MAOA,IAAI,CAAC,KAAKiC,sBAAL,CAA4B8I,MAA5B,CAAmCA,MAAnC,CAAD,IACRqJ,UAAU,IAAK,CAAErJ,MAAM,KAAK,GAAZ,IAAoBA,MAAM,KAAK,EAAhC,KAAwC9D,KAAK,CAACoC,KAAN,CAAY,CAAZ,EAAe,CAAf,MAAsB,KADzE,EACmF;AACxF,mBAAO,KAAKpM,SAAL,CAAe8D,OAAf,CAAuB,6BAAvB,CAAP;AACD,WAHM,MAGA,IAAI,CAAC,KAAKkB,sBAAL,CAA4ByP,GAA5B,CAAgC,KAAKA,GAArC,CAAL,EAAgD;AACrD,mBAAO,KAAKzU,SAAL,CAAe8D,OAAf,CAAuB,+BAAvB,CAAP;AACD,WAFM,MAEA,IAAI,CAAC,KAAKkB,sBAAL,CAA4B0P,OAA5B,CAAoC,KAAKA,OAAzC,CAAL,EAAwD;AAC7D,mBAAO,KAAK1U,SAAL,CAAe8D,OAAf,CAAuB,mCAAvB,CAAP;AACD;;AACD,iBAAO,EAAP;AACD,S,CAED;;;;+CACuC;AAAA;;AAAA,cAAlBqT,UAAkB,uEAAL,KAAK;;AACrC,cAAI,CAAC,KAAKnS,sBAAL,CAA4BjC,OAA5B,CAAoC,KAAKuH,aAAL,CAAmBvH,OAAvD,CAAL,EAAsE;AACpE,mBAAO,KAAK/C,SAAL,CAAe8D,OAAf,CAAuB,oCAAvB,CAAP;AACD,WAFD,MAEO,IAAI,CAAC,KAAKkB,sBAAL,CAA4B6E,GAA5B,CAAgC,KAAKA,GAArC,CAAL,EAAgD;AACrD,mBAAO,KAAK7J,SAAL,CAAe8D,OAAf,CAAuB,0BAAvB,CAAP;AACD;;AACD,eAAK2R,sBAAL,GAA8B,EAA9B;AACA,cAAM6D,2BAA2B,GAAG,KAAK9D,4BAAL,CAAkC1C,KAAlC,CAAwC,GAAxC,CAApC;;AACA,cAAIwG,2BAA2B,CAACjR,MAA5B,KAAuC,CAAvC,IAA4CiR,2BAA2B,CAAC,CAAD,CAA3B,CAA+BtK,IAA/B,OAA0C,EAA1F,EAA8F;AAC5F,mBAAO,KAAKhP,SAAL,CAAe8D,OAAf,CAAuB,sCAAvB,CAAP;AACD;;AACD,cAAIyV,eAAe,GAAG,EAAtB;AACAD,qCAA2B,CAACE,OAA5B,CAAoC,UAAC3I,IAAD,EAAO5D,KAAP,EAAiB;AACnDqM,uCAA2B,CAACrM,KAAD,CAA3B,GAAqC4D,IAAI,CAAC7B,IAAL,EAArC;;AACA,gBAAIsK,2BAA2B,CAACrM,KAAD,CAA3B,KAAuC,EAA3C,EAA+C;AAC7C,kBAAMwM,mBAAmB,GAAGH,2BAA2B,CAACrM,KAAD,CAA3B,CAAmC6F,KAAnC,CAAyC,GAAzC,CAA5B;;AACA,kBAAI2G,mBAAmB,CAACpR,MAApB,KAA+B,CAAnC,EAAsC;AACpC,oBAAMqR,yBAAyB,GAAG,OAAI,CAACL,sBAAL,CAA4BI,mBAAmB,CAAC,CAAD,CAA/C,EAAoDA,mBAAmB,CAAC,CAAD,CAAvE,EAA4EtC,UAA5E,CAAlC;;AACA,oBAAIuC,yBAAyB,KAAK,EAAlC,EAAsC;AACpC,sBAAMtC,QAAQ,GAAG,OAAI,CAAC3C,GAAL,GAAWpJ,MAAM,CAAC,OAAI,CAACoJ,GAAN,CAAjB,GAA8B,OAAI,CAACY,wBAAL,CAA8ByD,YAA9B,IAC7C,OAAI,CAACzD,wBAAL,CAA8ByD,YAA9B,CAA2CzQ,MAA3C,GAAoD4E,KADP,GAE7C,OAAI,CAACoI,wBAAL,CAA8ByD,YAA9B,CAA2C7L,KAA3C,EAAkDmK,QAFL,GAEgB,OAAI,CAAC/B,wBAAL,CAA8BZ,GAF7F;AAGA,sBAAM4C,YAAY,GAAG,OAAI,CAAC3C,OAAL,GAAerJ,MAAM,CAAC,OAAI,CAACqJ,OAAN,CAArB,GAAsC,OAAI,CAACW,wBAAL,CAA8ByD,YAA9B,IACzD,OAAI,CAACzD,wBAAL,CAA8ByD,YAA9B,CAA2CzQ,MAA3C,GAAoD4E,KADK,GAEzD,OAAI,CAACoI,wBAAL,CAA8ByD,YAA9B,CAA2C7L,KAA3C,EAAkDoK,YAFO,GAEQ,OAAI,CAAChC,wBAAL,CAA8BX,OAFjG;;AAGA,yBAAI,CAACe,sBAAL,CAA4BnC,IAA5B,CAAiC;AAAEiE,sBAAE,EAAEkC,mBAAmB,CAAC,CAAD,CAAzB;AAA8B3L,0BAAM,EAAEzC,MAAM,CAACoO,mBAAmB,CAAC,CAAD,CAApB,CAA5C;AAAsErC,4BAAQ,EAARA,QAAtE;AAAgFC,gCAAY,EAAZA;AAAhF,mBAAjC;AACD,iBARD,MAQO;AACL,yBAAI,CAAC5B,sBAAL,GAA8B,EAA9B;AACA8D,iCAAe,GAAGG,yBAAyB,GAAG,gBAA5B,IAAgDzM,KAAK,GAAG,CAAxD,CAAlB;AACD;AACF,eAdD,MAcO,IAAIwM,mBAAmB,CAACpR,MAApB,KAA+B,CAAnC,EAAsC;AAC3CkR,+BAAe,GAAG,OAAI,CAACvZ,SAAL,CAAe8D,OAAf,CAAuB,iCAAvB,IAA4D,eAA5D,IAA+EmJ,KAAK,GAAG,CAAvF,CAAlB;AACD,eAFM,MAEA;AACLsM,+BAAe,GAAG,2CAA2CtM,KAAK,GAAG,CAAnD,CAAlB;AACD;AACF;AACF,WAxBD;;AAyBA,cAAI,CAACsM,eAAD,IAAoBpC,UAApB,IAAkC,CAAC,KAAKwC,UAAL,CAAgB,KAAKlE,sBAAL,CAA4BpN,MAA5C,CAAvC,EAA4F;AAC1FkR,2BAAe,GAAG,KAAKvZ,SAAL,CAAe8D,OAAf,CAAuB,oCAAvB,CAAlB;AACD;;AACD,iBAAOyV,eAAP;AACD;;;sCAEU;AACT,cAAIK,SAAS,GAAG,8CAAI,CAAJ,CAAhB;;AADS,sDAEQ,KAAK/D,YAFb;AAAA;;AAAA;AAET,mEAAoC;AAAA,kBAAzBoC,EAAyB;AAClC2B,uBAAS,GAAGA,SAAS,CAAC7V,GAAV,CAAckU,EAAE,CAACnK,MAAjB,CAAZ;AACD;AAJQ;AAAA;AAAA;AAAA;AAAA;;AAKT,iBAAO8L,SAAS,CAAC7S,QAAV,EAAP;AACD;;;uCACoC;AAAA,cAAxB8S,OAAwB,uEAAL,KAAK;AACnC,cAAMC,QAAQ,GAAG,8CAAI,KAAKC,WAAL,EAAJ,EAAwB/B,IAAxB,CAA6B,8CAAI,KAAKgC,YAAL,EAAJ,CAA7B,EAAuDjT,QAAvD,EAAjB;;AACA,cAAI8S,OAAO,IAAIC,QAAQ,KAAK,GAA5B,EAAiC;AAC/B,mBAAO,GAAP;AACD;;AACD,iBAAOA,QAAP;AACD;;;sCACU;AACT,cAAI,KAAKjQ,GAAL,KAAa,EAAb,IAAmBwB,MAAM,CAAC,KAAKxB,GAAN,CAA7B,EAAyC;AACvC,mBAAOwB,MAAM,CAAC,KAAKxB,GAAN,CAAb;AACD;;AACD,iBAAOwB,MAAM,CAAC,KAAKgK,wBAAL,CAA8BxL,GAA/B,CAAb;AACD;;;uCACW;AACV,cAAI,KAAK6K,OAAL,KAAiB,EAAjB,IAAuBrJ,MAAM,CAAC,KAAKqJ,OAAN,CAAjC,EAAiD;AAC/C,mBAAOrJ,MAAM,CAAC,8CAAI,KAAKqJ,OAAT,EAAkBuF,GAAlB,CAAsB,KAAKpE,YAAL,CAAkBxN,MAAxC,EAAgDmO,GAAhD,CAAoD,MAApD,EAA4DzP,QAA5D,EAAD,CAAb;AACD;;AACD,iBAAOsE,MAAM,CAAC,KAAKgK,wBAAL,CAA8BV,IAA/B,CAAb;AACD;;;6CACoB;AACnB,cAAI,KAAKe,gBAAL,CAAsBrN,MAAtB,KAAiC,CAArC,EAAwC;AACtC,iBAAKqN,gBAAL,GAAwB,KAAKG,YAA7B;AACA,iBAAKG,OAAL,GAAe,WAAf;AACD,WAHD,MAGO;AACL,iBAAKN,gBAAL,GAAwB,EAAxB;AACA,iBAAKA,gBAAL,CAAsBpC,IAAtB,CAA2B,KAAKuC,YAAL,CAAkB,CAAlB,CAA3B,EAAiD,KAAKA,YAAL,CAAkB,CAAlB,CAAjD;AACA,iBAAKG,OAAL,GAAe,WAAf;AACD;AACF;;;kCACM;AACL,cAAMkE,IAAI,GAAG,KAAKpM,MAAL,GAAc,KAAKA,MAAL,CAAYzF,MAA1B,GAAmC,CAAhD;;AACA,cAAI6R,IAAI,GAAG,CAAX,EAAc;AACZ,mBAAO,GAAP;AACD,WAFD,MAEO,IAAIA,IAAI,GAAG,CAAX,EAAc;AACnB,mBAAO,GAAP;AACD,WAFM,MAEA,IAAIA,IAAI,GAAG,EAAX,EAAe;AACpB,mBAAO,GAAP;AACD,WAFM,MAEA,IAAIA,IAAI,GAAG,EAAX,EAAe;AACpB,mBAAO,GAAP;AACD;;AACD,iBAAO,KAAP;AACD;;;yCACsB;;;;;;AACrB,yBAAKlF,kBAAL,GAA0B,EAA1B;AACAtQ,2BAAO,CAACC,GAAR,CAAY,eAAe,KAAKmQ,aAAhC;AACA,yBAAKqF,uBAAL,G,CACA;;;;;;;;;AACD;;;sCACmB;;;;;;;;;;wBACb,KAAKpN,YAAL,CAAkBmM,eAAlB,CAAkC7F,QAAlC,CAA2C,KAAKyB,aAAhD,C;;;;;AACH,yBAAK7P,WAAL,GAAmB,kBAAnB;AACAP,2BAAO,CAACC,GAAR,CAAY,KAAKoI,YAAL,CAAkBmM,eAA9B;AACAxU,2BAAO,CAACC,GAAR,CAAY,KAAKmQ,aAAjB;;;;;yBACS,KAAK9K,K;;;;;AACd,yBAAK+K,kBAAL,GAA0B,IAA1B;AACA,yBAAKE,aAAL,GAAqB,KAAKjL,KAA1B;;AAC2B,2BAAM,KAAK+C,YAAL,CAAkBqN,SAAlB,CAA4B,KAAKtF,aAAjC,EAAgD,KAAK9K,KAArD,WAAkE,UAAA1L,CAAC,EAAI;AACtGoG,6BAAO,CAACsH,KAAR,CAAc1N,CAAd;AACA,6BAAI,CAAC2G,WAAL,GAAmB3G,CAAnB;AACA,6BAAO,EAAP;AACD,qBAJgC,CAAN;;;;AAAnB6G,uB,yBAAAA,G;AAAKuI,6B,yBAAAA,S;AAKb,yBAAKqH,kBAAL,GAA0B,KAA1B;;AACA,wBAAI5P,GAAJ,EAAS;AACP,2BAAK6P,kBAAL,GAA0B7P,GAA1B;AACA,2BAAK+P,cAAL,GAAsBxH,SAAS,GAAGA,SAAH,GAAe,EAA9C;AACA,2BAAK2K,YAAL;AACA3T,6BAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BQ,GAA7B;AACD,qBALD,MAKO;AACL,2BAAK6P,kBAAL,GAA0B,EAA1B;AACD;;;;;;;;;AAEJ;;;qCACS;AACR,iBAAQ,CAAC,KAAKD,kBAAN,IAA4B,KAAKC,kBAAL,KAA4B,EAAhE;AACD;;;qCACY;AACX,eAAKF,aAAL,GAAqB,EAArB;AACA,eAAKC,kBAAL,GAA0B,KAA1B;AACA,eAAKC,kBAAL,GAA0B,EAA1B;AACA,eAAKC,aAAL,GAAqB,EAArB;AACA,eAAKC,cAAL,GAAsB,EAAtB;AACD;;;0CACuB3R,W,EAAuB;;;;;;AAC7C,wBAAIA,WAAW,CAACiU,IAAhB,EAAsB;AACpB,0BAAIjU,WAAW,CAACiU,IAAZ,CAAiB5K,QAAjB,KAA8B,QAAlC,EAA4C;AAC1C,6BAAKlK,cAAL,CAAoB2X,WAApB,CAAgC9W,WAAW,CAACiU,IAAZ,CAAiBC,KAAjD,EAAwDlU,WAAW,CAACuK,MAAZ,CAAmB/G,QAAnB,EAAxD;AACA,6BAAKnE,aAAL,CAAmBmB,GAAnB,CAAuBR,WAAW,CAACgU,EAAnC,EAAuChU,WAAW,CAACiU,IAAZ,CAAiBC,KAAxD,EAA+D,CAA/D;AACD,uBAHD,MAGO,IAAIlU,WAAW,CAACiU,IAAZ,CAAiB5K,QAAjB,KAA8B,QAAlC,EAA4C;AACjD,6BAAKlK,cAAL,CAAoB4X,YAApB,CAAiC/W,WAAW,CAACiU,IAAZ,CAAiBC,KAAlD,EAAyDlU,WAAW,CAACuK,MAAZ,CAAmB/G,QAAnB,EAAzD;AACA,6BAAKnE,aAAL,CAAmBmB,GAAnB,CAAuBR,WAAW,CAACgU,EAAnC,EAAuChU,WAAW,CAACiU,IAAZ,CAAiBC,KAAxD,EAA+D,CAA/D;AACD,uBAHM,MAGA,IAAIlU,WAAW,CAACiU,IAAZ,CAAiB5K,QAAjB,KAA8B,SAAlC,EAA6C;AAClD,6BAAKlK,cAAL,CAAoB6X,aAApB,CAAkChX,WAAW,CAACiU,IAAZ,CAAiB9J,SAAnD,EAA8DnK,WAAW,CAACiU,IAAZ,CAAiBC,KAA/E,EAAsFlU,WAAW,CAACuK,MAAZ,CAAmB/G,QAAnB,EAAtF;AACA,6BAAKnE,aAAL,CAAmBmB,GAAnB,CAAuBR,WAAW,CAACgU,EAAnC,EAAuChU,WAAW,CAACiU,IAAZ,CAAiBC,KAAxD,EAA+D,CAA/D;AACD;AACF;;;;;;;;;AACF;;;2CACe;AACd,cAAI,KAAKxC,aAAT,EAAwB;AACtB,gBAAI,IAAI,6CAAJ,CAAQ,KAAKqD,WAAL,EAAR,EAA4BJ,EAA5B,CAA+B,IAA/B,CAAJ,EAA0C;AACxC,kBAAIsC,aAAa,GAAG,EAApB;;AACA,sBAAQ,KAAK1F,aAAb;AACE,qBAAK,QAAL;AACE0F,+BAAa,GAAG,8BAAhB;AACA;;AACF,qBAAK,QAAL;AACEA,+BAAa,GAAG,iBAAhB;AACA;;AACF,qBAAK,SAAL;AACEA,+BAAa,GAAG,gBAAhB;AACA;;AACF;AACEA,+BAAa,GAAG,aAAhB;AAXJ;;AAaA,gEAA2CA,aAA3C;AACD;AACF;;AACD,iBAAO,EAAP;AACD;;;;;;;uBAjuBU5F,a,EAAa,qI,EAAA,8I,EAAA,uJ,EAAA,6J,EAAA,2K,EAAA,8I,EAAA,oJ,EAAA,kJ,EAAA,4I,EAAA,+I;AAAA,K;;;YAAbA,a;AAAa,+B;AAAA;AAAA;;;;;;;;;;;;;;;;;;ADvC1B;;AAAuB;AAAA,mBAAS,IAAAL,SAAA,EAAT;AAAoB,WAApB;;AAAsB;;AAAI;;AAGjD;;;;AAAK;;AAAA;;;;;;;;;;sECoCQK,a,EAAa;cALzB,uDAKyB;eALf;AACTnT,kBAAQ,EAAE,UADD;AAETC,qBAAW,EAAE,uBAFJ;AAGTC,mBAAS,EAAE,CAAC,uBAAD;AAHF,S;AAKe,Q;;;;;;;;;;;;;;;;;;;;;;;;gBAYvB;;;gBACA,uD;iBAAU,a;;;;;;;;;;;;;;;;;;;;ACpDb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACAA;;AACI;;AACI;;AACI;;AACI;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAAqB;;AAAgC;;AACzD;;AACJ;;AACJ;;AACJ;;;;;;AAJqC;;AAAA;;;;QDJxB8Y,gB;AAEX,gCAAmB/X,cAAnB,EAAmD;AAAA;;AAAhC,aAAAA,cAAA,GAAAA,cAAA;AAAmC;;;;mCAE9C,CACP;;;;;;;uBALU+X,gB,EAAgB,iJ;AAAA,K;;;YAAhBA,gB;AAAgB,kC;AAAA,c;AAAA,a;AAAA,2J;AAAA;AAAA;ACR7B;;;;AAAK;;;;;;;;;sEDQQA,gB,EAAgB;cAL5B,uDAK4B;eALlB;AACThZ,kBAAQ,EAAE,aADD;AAETC,qBAAW,EAAE,0BAFJ;AAGTC,mBAAS,EAAE,CAAC,0BAAD;AAHF,S;AAKkB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QEEhB+Y,c;AACX,8BACU7a,aADV,EAESG,SAFT,EAGUD,MAHV,EAGwB;AAAA;;AAFd,aAAAF,aAAA,GAAAA,aAAA;AACD,aAAAG,SAAA,GAAAA,SAAA;AACC,aAAAD,MAAA,GAAAA,MAAA;AAGV,aAAA4a,eAAA,GAAkB,IAAlB;AADC;;;;mCAGgB;;;;;;AACf,wBAAI,KAAK9a,aAAL,CAAmBa,MAAvB,EAA+B;AAC7B,2BAAKX,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACD;;;;;;;;;AACF;;;;;;;uBAbUkZ,c,EAAc,8I,EAAA,qI,EAAA,uH;AAAA,K;;;YAAdA,c;AAAc,gC;AAAA,e;AAAA,a;AAAA,s4B;AAAA;AAAA;ACV3B;;AACE;;AACE;;AACE;;AACE;;AACA;;AAAG;;AAA2F;;AAChG;;AACA;;AACE;;AACE;;AACE;;AAAI;;AAAa;;AACjB;;AACE;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAI;;AAAU;;AACd;;AACE;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAI;;AAAc;;AAClB;;AACE;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAI;;AAAU;;AACd;;AACE;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACA;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACF;;AACA;;AACE;;AAAI;;AAAa;;AACjB;;AAAG;;AAAkG;;AACvG;;AACF;;AACA;;AACE;;AACE;;AACF;;AACA;;AACE;;AAAI;;AAAU;;AACd;;AAAG;;AAAwG;;AAC7G;;AACF;;AACA;;AACE;;AACE;;AACF;;AACA;;AACE;;AAAI;;AAAc;;AAClB;;AAAG;;AAAuF;;AAC5F;;AACF;;AACA;;AACE;;AACE;;AACF;;AACA;;AACE;;AAAI;;AAAU;;AACd;;AAAG;;AAA2D;;AAChE;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACA;;AACF;;;;AAhD+B;;AAAA;;;;;;;;;sED/BlBA,c,EAAc;cAL1B,uDAK0B;eALhB;AACTjZ,kBAAQ,EAAE,WADD;AAETC,qBAAW,EAAE,wBAFJ;AAGTC,mBAAS,EAAE,CAAC,wBAAD;AAHF,S;AAKgB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEGjB;;;;;;AACoB;;;;;;AAA8B;;;;;;AAC/B;;;;;;AAA6B;;;;;;;;AAHlD;;AAAsD;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAyB,WAAzB,EAAyB;AAAA;;AAAA;;AAAA;;AAAA;AAAA,SAAzB;;AACpD;;AACA;;AACA;;AACF;;;;;;;;;;;;AAHgB;;AAAA,iIAA6D,UAA7D,EAA6D,KAA7D,EAA6D,UAA7D,EAA6D,KAA7D;;;;QCAXiZ,c;AAEX,8BACU/a,aADV,EAESkN,YAFT,EAGUzF,aAHV,EAIU5E,cAJV,EAKU3C,MALV,EAKwB;AAAA;;AAJd,aAAAF,aAAA,GAAAA,aAAA;AACD,aAAAkN,YAAA,GAAAA,YAAA;AACC,aAAAzF,aAAA,GAAAA,aAAA;AACA,aAAA5E,cAAA,GAAAA,cAAA;AACA,aAAA3C,MAAA,GAAAA,MAAA;AANV,aAAA8a,WAAA,GAAc,QAAd;AAOK;;;;mCAEG;AACN,eAAK9N,YAAL,CAAkB+N,SAAlB;AACD;;;mCACgBlO,Q,EAAkB;;;;;;;;;;;AACjC,2BAAM,KAAKlK,cAAL,CAAoBoF,YAApB,CAAiC,mBAAjC,CAAN;;;;AAC8B,2BAAM,KAAKiF,YAAL,CAAkBgO,UAAlB,CAA6BnO,QAA7B,WAA6C,UAAOtO,CAAP;AAAA,6BAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAC3F,uCAAM,KAAKoE,cAAL,CAAoBwF,WAApB,EAAN;;AAD2F;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAZ;AAAA,qBAA7C,CAAN;;;;AAAtB8S,2B,0BAAAA,O;AAASC,4B,0BAAAA,Q;AAGjBvW,2BAAO,CAACC,GAAR,CAAY,YAAZ;;yBACIqW,O;;;;;;AACF,2BAAM,KAAK1T,aAAL,CACHc,kBADG,CACgB4S,OAAO,CAAChT,EADxB,EAC4B,EAD5B,EACgC;AAAE4E,8BAAQ,EAAEqO,QAAQ,CAACC,WAArB;AAAkChc,wBAAE,EAAE+b,QAAQ,CAACE,UAA/C;AAA2DpK,0BAAI,EAAEkK,QAAQ,CAAClK;AAA1E,qBADhC,EAEHjS,IAFG,CAEE,UAACyG,OAAD,EAAsB;AAC1B,0BAAIA,OAAJ,EAAa;AACXb,+BAAO,CAACC,GAAR,CAAY,SAAZ;;AACA,4BAAI,OAAI,CAAC9E,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C4D,MAA3C,KAAsD,CAAtD,IAA2D,OAAI,CAACxI,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8C6D,kBAA9C,CAAiED,MAAjE,KAA4E,CAA3I,EAA8I;AAC5I3D,iCAAO,CAACC,GAAR,CAAY,gBAAZ;;AACA,iCAAI,CAAC5E,MAAL,CAAYyB,QAAZ,CAAqB,oBAAa,OAAI,CAAC3B,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8C1B,OAA3D,EAArB;AACD,yBAHD,MAGO;AACL,iCAAI,CAAChD,MAAL,CAAYyB,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACD;;AACD,+BAAI,CAACkB,cAAL,CAAoBwF,WAApB;AACD,uBATD,MASO;AACL,+BAAI,CAACxF,cAAL,CAAoBuD,QAApB,CAA6B,qBAA7B;;AACA,+BAAI,CAACvD,cAAL,CAAoBwF,WAApB;AACD;AACF,qBAhBG,CAAN;;;;;;;;AAkBA,2BAAM,KAAKxF,cAAL,CAAoBwF,WAApB,EAAN;;;;;;;;;AAEH;;;iCACK;AACJ,iBAAQ3J,MAAM,CAACqG,UAAP,GAAoB,GAA5B;AACD;;;;;;;uBA3CUgW,c,EAAc,8I,EAAA,2I,EAAA,8I,EAAA,iJ,EAAA,uH;AAAA,K;;;YAAdA,c;AAAc,gC;AAAA,e;AAAA,a;AAAA,ooB;AAAA;AAAA;ADb3B;;AACE;;AACE;;AAA+B;;AAA/B;;AACF;;AACA;;AACE;;AACE;;AAAI;;AAAU;;AACd;;AAAG;;AAAgC;;AAA4F;;AAAU;;AAAI;;AAC/I;;AACA;;AACE;;AAAkB;;AAAiB;;AACnC;;AACE;;AAKF;;AACF;;AACA;;AACE;;AAAG;;AAAmE;;AACxE;;AACF;;AACF;;AACA;;AAAsB;;AAAtB;;;;AAZa;;AAAA;;;;;;;;;sECCAA,c,EAAc;cAL1B,uDAK0B;eALhB;AACTnZ,kBAAQ,EAAE,WADD;AAETC,qBAAW,EAAE,wBAFJ;AAGTC,mBAAS,EAAE,CAAC,wBAAD;AAHF,S;AAKgB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACH3B;AAAA;;;AAAA;AAAA;AAAA;;QAAayZ,S;AAAb;AAAA;;AACI;AACS,aAAAlX,GAAA,GAAW,KAAKmX,WAAL,EAAX;AAyBZ;;;;kCAxBkB;AACX,iBAAO;AACHC,gBAAI,EAAE,SADH;AAEHnX,mBAAO,EAAE,SAFN;AAGHoX,eAAG,EAAE;AACDtN,iBAAG,EAAE,6CADJ;AAEDuN,oBAAM,EAAE;AAFP,aAHF;AAOHC,oBAAQ,EAAE,mCAPP;AAQHC,8BAAkB,EAAE;AARjB,WAAP;AAUH;;;sCACkB;AACf,iBAAO;AACHJ,gBAAI,EAAE,oBADH;AAEHnX,mBAAO,EAAE,aAFN;AAGHoX,eAAG,EAAE;AACDtN,iBAAG,EAAE,4CADJ;AAEDuN,oBAAM,EAAE;AAFP,aAHF;AAOHC,oBAAQ,EAAE,mCAPP;AAQHC,8BAAkB,EAAE;AARjB,WAAP;AAUH;;;;;;;;;;;;;;;;;;;;;ACGL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA,QAAYC,UAAZ;;AAAA,eAAYA,UAAZ,EAAsB;AACpB;AACA;AACA;AACA;AACA;AACD,KAND,EAAYA,UAAU,KAAVA,UAAU,MAAtB;;AAyDA,QAAYC,UAAZ;;AAAA,eAAYA,UAAZ,EAAsB;AACpB;AACA;AACA;AACA;AACD,KALD,EAAYA,UAAU,KAAVA,UAAU,MAAtB;;;;;;;;;;;;;;;;;AChGA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMaC,iB;;;;;;;kCACC1W,G,EAAW;AACjB,cAAI,CAACA,GAAL,EAAU;AACN,mBAAO,EAAP;AACH;;AACD,cAAM8H,KAAK,GAAG,6DAAW6O,SAAX,CAAqB,UAAA3N,CAAC;AAAA,mBAAIA,CAAC,CAAC4N,QAAF,KAAe5W,GAAnB;AAAA,WAAtB,CAAd;;AACA,cAAI8H,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,mBAAO,6DAAWA,KAAX,EAAkB+O,UAAzB;AACH,WAFD,MAEO;AACH,mBAAO7W,GAAP;AACH;AACJ;;;;;;;uBAXQ0W,iB;AAAiB,K;;;;YAAjBA,iB;AAAiB;;;;;sEAAjBA,iB,EAAiB;cAH7B,kDAG6B;eAHxB;AACF9K,cAAI,EAAE;AADJ,S;AAGwB,Q;;;;;;;;;;;;;;;;;;ACN9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAEA;;;;;;QAQakL,iB;AAHb;AAAA;;AAIE,aAAAC,UAAA,GAAa,CACX;AACEpW,aAAG,EAAE,0BADP;AAEE5G,YAAE,EAAE;AAFN,SADW,EAKX;AACE4G,aAAG,EAAE,kDADP;AAEE5G,YAAE,EAAE;AAFN,SALW,EASX;AACE4G,aAAG,EAAE,uDADP;AAEE5G,YAAE,EAAE;AAFN,SATW,EAaX;AACE4G,aAAG,EAAE,qCADP;AAEE5G,YAAE,EAAE;AAFN,SAbW,EAiBX;AACE4G,aAAG,EAAE,mCADP;AAEE5G,YAAE,EAAE;AAFN,SAjBW,EAqBX;AACE4G,aAAG,EACD,2EAFJ;AAGE5G,YAAE,EAAE;AAHN,SArBW,EA0BX;AACE4G,aAAG,EAAE,mEADP;AAEE5G,YAAE,EAAE;AAFN,SA1BW,EA8BX;AACE4G,aAAG,EAAE,mEADP;AAEE5G,YAAE,EAAE;AAFN,SA9BW,EAkCX;AACE4G,aAAG,EACD,wEAFJ;AAGE5G,YAAE,EAAE;AAHN,SAlCW,EAuCX;AACE4G,aAAG,EAAE,0CADP;AAEE5G,YAAE,EAAE;AAFN,SAvCW,EA2CX;AACE4G,aAAG,EAAE,+DADP;AAEE5G,YAAE,EAAE;AAFN,SA3CW,EA+CX;AACE4G,aAAG,EAAE,4CADP;AAEE5G,YAAE,EAAE;AAFN,SA/CW,EAmDX;AACE4G,aAAG,EAAE,iEADP;AAEE5G,YAAE,EAAE;AAFN,SAnDW,EAuDX;AACE4G,aAAG,EAAE,uCADP;AAEE5G,YAAE,EAAE;AAFN,SAvDW,EA2DX;AACE4G,aAAG,EAAE,4CADP;AAEE5G,YAAE,EAAE;AAFN,SA3DW,EA+DX;AACE4G,aAAG,EAAE,2CADP;AAEE5G,YAAE,EAAE;AAFN,SA/DW,EAmEX;AACE4G,aAAG,EAAE,gDADP;AAEE5G,YAAE,EAAE;AAFN,SAnEW,EAuEX;AACE4G,aAAG,EAAE,wCADP;AAEE5G,YAAE,EAAE;AAFN,SAvEW,EA2EX;AACE4G,aAAG,EAAE,6CADP;AAEE5G,YAAE,EAAE;AAFN,SA3EW,EA+EX;AACE4G,aAAG,EAAE,yBADP;AAEE5G,YAAE,EAAE;AAFN,SA/EW,EAmFX;AACE4G,aAAG,EAAE,6CADP;AAEE5G,YAAE,EAAE;AAFN,SAnFW,EAuFX;AACE4G,aAAG,EACD,mGAFJ;AAGE5G,YAAE,EAAE;AAHN,SAvFW,EA4FX;AACE4G,aAAG,EAAE,+DADP;AAEE5G,YAAE,EAAE;AAFN,SA5FW,EAgGX;AACE4G,aAAG,EAAE,qDADP;AAEE5G,YAAE,EAAE;AAFN,SAhGW,EAoGX;AACE4G,aAAG,EAAE,uDADP;AAEE5G,YAAE,EAAE;AAFN,SApGW,EAwGX;AACE4G,aAAG,EAAE,qDADP;AAEE5G,YAAE,EAAE;AAFN,SAxGW,EA4GX;AACE4G,aAAG,EAAE,oDADP;AAEE5G,YAAE,EAAE;AAFN,SA5GW,EAgHX;AACE4G,aAAG,EAAE,mCADP;AAEE5G,YAAE,EAAE;AAFN,SAhHW,EAoHX;AACE4G,aAAG,EAAE,mEADP;AAEE5G,YAAE,EAAE;AAFN,SApHW,EAwHX;AACE4G,aAAG,EAAE,yCADP;AAEE5G,YAAE,EAAE;AAFN,SAxHW,EA4HX;AACE4G,aAAG,EACD,uEAFJ;AAGE5G,YAAE,EAAE;AAHN,SA5HW,EAiIX;AACE4G,aAAG,EACD,uFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAjIW,EAsIX;AACE4G,aAAG,EAAE,uBADP;AAEE5G,YAAE,EAAE;AAFN,SAtIW,EA0IX;AACE4G,aAAG,EACD,qEAFJ;AAGE5G,YAAE,EAAE;AAHN,SA1IW,EA+IX;AACE4G,aAAG,EAAE,4DADP;AAEE5G,YAAE,EAAE;AAFN,SA/IW,EAmJX;AACE4G,aAAG,EACD,gGAFJ;AAGE5G,YAAE,EAAE;AAHN,SAnJW,EAwJX;AACE4G,aAAG,EAAE,kDADP;AAEE5G,YAAE,EAAE;AAFN,SAxJW,EA4JX;AACE4G,aAAG,EACD,iFAFJ;AAGE5G,YAAE,EAAE;AAHN,SA5JW,EAiKX;AACE4G,aAAG,EAAE,iEADP;AAEE5G,YAAE,EAAE;AAFN,SAjKW,EAqKX;AACE4G,aAAG,EAAE,+BADP;AAEE5G,YAAE,EAAE;AAFN,SArKW,EAyKX;AACE4G,aAAG,EAAE,mDADP;AAEE5G,YAAE,EAAE;AAFN,SAzKW,EA6KX;AACE4G,aAAG,EAAE,+DADP;AAEE5G,YAAE,EAAE;AAFN,SA7KW,EAiLX;AACE4G,aAAG,EAAE,gCADP;AAEE5G,YAAE,EAAE;AAFN,SAjLW,EAqLX;AACE4G,aAAG,EAAE,kDADP;AAEE5G,YAAE,EAAE;AAFN,SArLW,EAyLX;AACE4G,aAAG,EAAE,iCADP;AAEE5G,YAAE,EAAE;AAFN,SAzLW,EA6LX;AACE4G,aAAG,EACD,iGAFJ;AAGE5G,YAAE,EAAE;AAHN,SA7LW,EAkMX;AACE4G,aAAG,EACD,iMAFJ;AAGE5G,YAAE,EAAE;AAHN,SAlMW,EAuMX;AACE4G,aAAG,EACD,+EAFJ;AAGE5G,YAAE,EAAE;AAHN,SAvMW,EA4MX;AACE4G,aAAG,EAAE,qDADP;AAEE5G,YAAE,EAAE;AAFN,SA5MW,EAgNX;AACE4G,aAAG,EAAE,kEADP;AAEE5G,YAAE,EAAE;AAFN,SAhNW,EAoNX;AACE4G,aAAG,EAAE,wDADP;AAEE5G,YAAE,EAAE;AAFN,SApNW,EAwNX;AACE4G,aAAG,EACD,8FAFJ;AAGE5G,YAAE,EAAE;AAHN,SAxNW,EA6NX;AACE4G,aAAG,EAAE,sCADP;AAEE5G,YAAE,EAAE;AAFN,SA7NW,EAiOX;AACE4G,aAAG,EAAE,qDADP;AAEE5G,YAAE,EAAE;AAFN,SAjOW,EAqOX;AACE4G,aAAG,EAAE,4DADP;AAEE5G,YAAE,EAAE;AAFN,SArOW,EAyOX;AACE4G,aAAG,EAAE,+CADP;AAEE5G,YAAE,EAAE;AAFN,SAzOW,EA6OX;AACE4G,aAAG,EACD,yEAFJ;AAGE5G,YAAE,EAAE;AAHN,SA7OW,EAkPX;AACE4G,aAAG,EAAE,wDADP;AAEE5G,YAAE,EAAE;AAFN,SAlPW,EAsPX;AACE4G,aAAG,EAAE,6DADP;AAEE5G,YAAE,EAAE;AAFN,SAtPW,EA0PX;AACE4G,aAAG,EAAE,qBADP;AAEE5G,YAAE,EAAE;AAFN,SA1PW,EA8PX;AACE4G,aAAG,EACD,6KAFJ;AAGE5G,YAAE,EAAE;AAHN,SA9PW,EAmQX;AACE4G,aAAG,EAAE,oDADP;AAEE5G,YAAE,EAAE;AAFN,SAnQW,EAuQX;AACE4G,aAAG,EAAE,iDADP;AAEE5G,YAAE,EAAE;AAFN,SAvQW,EA2QX;AACE4G,aAAG,EACD,kGAFJ;AAGE5G,YAAE,EAAE;AAHN,SA3QW,EAgRX;AACE4G,aAAG,EAAE,8DADP;AAEE5G,YAAE,EAAE;AAFN,SAhRW,EAoRX;AACE4G,aAAG,EACD,yEAFJ;AAGE5G,YAAE,EAAE;AAHN,SApRW,EAyRX;AACE4G,aAAG,EACD,+EAFJ;AAGE5G,YAAE,EAAE;AAHN,SAzRW,EA8RX;AACE4G,aAAG,EACD,yEAFJ;AAGE5G,YAAE,EAAE;AAHN,SA9RW,EAmSX;AACE4G,aAAG,EACD,qFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAnSW,EAwSX;AACE4G,aAAG,EACD,yEAFJ;AAGE5G,YAAE,EAAE;AAHN,SAxSW,EA6SX;AACE4G,aAAG,EAAE,qCADP;AAEE5G,YAAE,EAAE;AAFN,SA7SW,EAiTX;AACE4G,aAAG,EAAE,6CADP;AAEE5G,YAAE,EAAE;AAFN,SAjTW,EAqTX;AACE4G,aAAG,EAAE,uDADP;AAEE5G,YAAE,EAAE;AAFN,SArTW,EAyTX;AACE4G,aAAG,EACD,yFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAzTW,EA8TX;AACE4G,aAAG,EAAE,iEADP;AAEE5G,YAAE,EAAE;AAFN,SA9TW,EAkUX;AACE4G,aAAG,EAAE,6DADP;AAEE5G,YAAE,EAAE;AAFN,SAlUW,EAsUX;AACE4G,aAAG,EACD,4GAFJ;AAGE5G,YAAE,EAAE;AAHN,SAtUW,EA2UX;AACE4G,aAAG,EACD,4JAFJ;AAGE5G,YAAE,EAAE;AAHN,SA3UW,EAgVX;AACE4G,aAAG,EACD,qIAFJ;AAGE5G,YAAE,EAAE;AAHN,SAhVW,EAqVX;AACE4G,aAAG,EAAE,kDADP;AAEE5G,YAAE,EAAE;AAFN,SArVW,EAyVX;AACE4G,aAAG,EACD,qEAFJ;AAGE5G,YAAE,EAAE;AAHN,SAzVW,EA8VX;AACE4G,aAAG,EACD,+FAFJ;AAGE5G,YAAE,EAAE;AAHN,SA9VW,EAmWX;AACE4G,aAAG,EAAE,qDADP;AAEE5G,YAAE,EAAE;AAFN,SAnWW,EAuWX;AACE4G,aAAG,EACD,+LAFJ;AAGE5G,YAAE,EAAE;AAHN,SAvWW,EA4WX;AACE4G,aAAG,EACD,gGAFJ;AAGE5G,YAAE,EAAE;AAHN,SA5WW,EAiXX;AACE4G,aAAG,EACD,uHAFJ;AAGE5G,YAAE,EAAE;AAHN,SAjXW,EAsXX;AACE4G,aAAG,EAAE,sDADP;AAEE5G,YAAE,EAAE;AAFN,SAtXW,EA0XX;AACE4G,aAAG,EACD,yHAFJ;AAGE5G,YAAE,EAAE;AAHN,SA1XW,EA+XX;AACE4G,aAAG,EACD,6IAFJ;AAGE5G,YAAE,EAAE;AAHN,SA/XW,EAoYX;AACE4G,aAAG,EACD,wFAFJ;AAGE5G,YAAE,EAAE;AAHN,SApYW,EAyYX;AACE4G,aAAG,EACD,0GAFJ;AAGE5G,YAAE,EAAE;AAHN,SAzYW,EA8YX;AACE4G,aAAG,EAAE,yDADP;AAEE5G,YAAE,EAAE;AAFN,SA9YW,EAkZX;AACE4G,aAAG,EAAE,0DADP;AAEE5G,YAAE,EAAE;AAFN,SAlZW,EAsZX;AACE4G,aAAG,EACD,kFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAtZW,EA2ZX;AACE4G,aAAG,EACD,kGAFJ;AAGE5G,YAAE,EAAE;AAHN,SA3ZW,EAgaX;AACE4G,aAAG,EACD,yEAFJ;AAGE5G,YAAE,EAAE;AAHN,SAhaW,EAqaX;AACE4G,aAAG,EAAE,6DADP;AAEE5G,YAAE,EAAE;AAFN,SAraW,EAyaX;AACE4G,aAAG,EAAE,sDADP;AAEE5G,YAAE,EAAE;AAFN,SAzaW,EA6aX;AACE4G,aAAG,EAAE,8CADP;AAEE5G,YAAE,EAAE;AAFN,SA7aW,EAibX;AACE4G,aAAG,EAAE,oEADP;AAEE5G,YAAE,EAAE;AAFN,SAjbW,EAqbX;AACE4G,aAAG,EAAE,oCADP;AAEE5G,YAAE,EAAE;AAFN,SArbW,EAybX;AACE4G,aAAG,EAAE,4DADP;AAEE5G,YAAE,EAAE;AAFN,SAzbW,EA6bX;AACE4G,aAAG,EAAE,wDADP;AAEE5G,YAAE,EAAE;AAFN,SA7bW,EAicX;AACE4G,aAAG,EACD,iFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAjcW,EAscX;AACE4G,aAAG,EACD,iFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAtcW,EA2cX;AACE4G,aAAG,EAAE,qDADP;AAEE5G,YAAE,EAAE;AAFN,SA3cW,EA+cX;AACE4G,aAAG,EACD,wIAFJ;AAGE5G,YAAE,EAAE;AAHN,SA/cW,EAodX;AACE4G,aAAG,EACD,mFAFJ;AAGE5G,YAAE,EAAE;AAHN,SApdW,EAydX;AACE4G,aAAG,EACD,qFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAzdW,EA8dX;AACE4G,aAAG,EAAE,8CADP;AAEE5G,YAAE,EAAE;AAFN,SA9dW,EAkeX;AACE4G,aAAG,EAAE,0DADP;AAEE5G,YAAE,EAAE;AAFN,SAleW,EAseX;AACE4G,aAAG,EACD,qGAFJ;AAGE5G,YAAE,EAAE;AAHN,SAteW,EA2eX;AACE4G,aAAG,EAAE,+CADP;AAEE5G,YAAE,EAAE;AAFN,SA3eW,EA+eX;AACE4G,aAAG,EAAE,iDADP;AAEE5G,YAAE,EAAE;AAFN,SA/eW,EAmfX;AACE4G,aAAG,EAAE,iDADP;AAEE5G,YAAE,EAAE;AAFN,SAnfW,EAufX;AACE4G,aAAG,EAAE,oCADP;AAEE5G,YAAE,EAAE;AAFN,SAvfW,EA2fX;AACE4G,aAAG,EAAE,2CADP;AAEE5G,YAAE,EAAE;AAFN,SA3fW,EA+fX;AACE4G,aAAG,EAAE,mCADP;AAEE5G,YAAE,EAAE;AAFN,SA/fW,EAmgBX;AACE4G,aAAG,EAAE,mEADP;AAEE5G,YAAE,EAAE;AAFN,SAngBW,EAugBX;AACE4G,aAAG,EAAE,6DADP;AAEE5G,YAAE,EAAE;AAFN,SAvgBW,EA2gBX;AACE4G,aAAG,EAAE,8CADP;AAEE5G,YAAE,EAAE;AAFN,SA3gBW,EA+gBX;AACE4G,aAAG,EACD,kFAFJ;AAGE5G,YAAE,EAAE;AAHN,SA/gBW,EAohBX;AACE4G,aAAG,EACD,2EAFJ;AAGE5G,YAAE,EAAE;AAHN,SAphBW,EAyhBX;AACE4G,aAAG,EACD,kFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAzhBW,EA8hBX;AACE4G,aAAG,EACD,8EAFJ;AAGE5G,YAAE,EAAE;AAHN,SA9hBW,EAmiBX;AACE4G,aAAG,EACD,2GAFJ;AAGE5G,YAAE,EAAE;AAHN,SAniBW,EAwiBX;AACE4G,aAAG,EACD,2FAFJ;AAGE5G,YAAE,EAAE;AAHN,SAxiBW,EA6iBX;AACE4G,aAAG,EACD,wEAFJ;AAGE5G,YAAE,EAAE;AAHN,SA7iBW,EAkjBX;AACE4G,aAAG,EAAE,qCADP;AAEE5G,YAAE,EAAE;AAFN,SAljBW,EAsjBX;AACE4G,aAAG,EACD,iFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAtjBW,EA2jBX;AACE4G,aAAG,EAAE,yDADP;AAEE5G,YAAE,EAAE;AAFN,SA3jBW,EA+jBX;AACE4G,aAAG,EAAE,2CADP;AAEE5G,YAAE,EAAE;AAFN,SA/jBW,EAmkBX;AACE4G,aAAG,EAAE,0DADP;AAEE5G,YAAE,EAAE;AAFN,SAnkBW,EAukBX;AACE4G,aAAG,EAAE,2DADP;AAEE5G,YAAE,EAAE;AAFN,SAvkBW,EA2kBX;AACE4G,aAAG,EAAE,sDADP;AAEE5G,YAAE,EAAE;AAFN,SA3kBW,EA+kBX;AACE4G,aAAG,EAAE,+CADP;AAEE5G,YAAE,EAAE;AAFN,SA/kBW,EAmlBX;AACE4G,aAAG,EAAE,kCADP;AAEE5G,YAAE,EAAE;AAFN,SAnlBW,EAulBX;AACE4G,aAAG,EAAE,sDADP;AAEE5G,YAAE,EAAE;AAFN,SAvlBW,EA2lBX;AACE4G,aAAG,EACD,0EAFJ;AAGE5G,YAAE,EAAE;AAHN,SA3lBW,EAgmBX;AACE4G,aAAG,EAAE,+DADP;AAEE5G,YAAE,EAAE;AAFN,SAhmBW,EAomBX;AACE4G,aAAG,EACD,qEAFJ;AAGE5G,YAAE,EAAE;AAHN,SApmBW,EAymBX;AACE4G,aAAG,EACD,uEAFJ;AAGE5G,YAAE,EAAE;AAHN,SAzmBW,EA8mBX;AACE4G,aAAG,EACD,qEAFJ;AAGE5G,YAAE,EAAE;AAHN,SA9mBW,EAmnBX;AACE4G,aAAG,EAAE,6CADP;AAEE5G,YAAE,EAAE;AAFN,SAnnBW,EAunBX;AACE4G,aAAG,EAAE,6BADP;AAEE5G,YAAE,EAAE;AAFN,SAvnBW,EA2nBX;AACE4G,aAAG,EAAE,4BADP;AAEE5G,YAAE,EAAE;AAFN,SA3nBW,EA+nBX;AACE4G,aAAG,EAAE,iDADP;AAEE5G,YAAE,EAAE;AAFN,SA/nBW,EAmoBX;AACE4G,aAAG,EAAE,2BADP;AAEE5G,YAAE,EAAE;AAFN,SAnoBW,EAuoBX;AACE4G,aAAG,EAAE,6BADP;AAEE5G,YAAE,EAAE;AAFN,SAvoBW,EA2oBX;AACE4G,aAAG,EAAE,6CADP;AAEE5G,YAAE,EAAE;AAFN,SA3oBW,EA+oBX;AACE4G,aAAG,EAAE,mEADP;AAEE5G,YAAE,EAAE;AAFN,SA/oBW,EAmpBX;AACE4G,aAAG,EAAE,yBADP;AAEE5G,YAAE,EAAE;AAFN,SAnpBW,EAupBX;AACE4G,aAAG,EAAE,mDADP;AAEE5G,YAAE,EAAE;AAFN,SAvpBW,EA2pBX;AACE4G,aAAG,EAAE,+DADP;AAEE5G,YAAE,EAAE;AAFN,SA3pBW,EA+pBX;AACE4G,aAAG,EAAE,6CADP;AAEE5G,YAAE,EAAE;AAFN,SA/pBW,EAmqBX;AACE4G,aAAG,EAAE,0BADP;AAEE5G,YAAE,EAAE;AAFN,SAnqBW,EAuqBX;AACE4G,aAAG,EAAE,wCADP;AAEE5G,YAAE,EAAE;AAFN,SAvqBW,EA2qBX;AACE4G,aAAG,EAAE,uBADP;AAEE5G,YAAE,EAAE;AAFN,SA3qBW,EA+qBX;AACE4G,aAAG,EAAE,sCADP;AAEE5G,YAAE,EAAE;AAFN,SA/qBW,EAmrBX;AACE4G,aAAG,EAAE,mCADP;AAEE5G,YAAE,EAAE;AAFN,SAnrBW,EAurBX;AACE4G,aAAG,EAAE,mCADP;AAEE5G,YAAE,EAAE;AAFN,SAvrBW,EA2rBX;AACE4G,aAAG,EAAE,mDADP;AAEE5G,YAAE,EAAE;AAFN,SA3rBW,EA+rBX;AACE4G,aAAG,EAAE,8BADP;AAEE5G,YAAE,EAAE;AAFN,SA/rBW,EAmsBX;AACE4G,aAAG,EAAE,mDADP;AAEE5G,YAAE,EAAE;AAFN,SAnsBW,EAusBX;AACE4G,aAAG,EAAE,mCADP;AAEE5G,YAAE,EAAE;AAFN,SAvsBW,EA2sBX;AACE4G,aAAG,EAAE,gEADP;AAEE5G,YAAE,EAAE;AAFN,SA3sBW,EA+sBX;AACE4G,aAAG,EACD,6GAFJ;AAGE5G,YAAE,EAAE;AAHN,SA/sBW,EAotBX;AACE4G,aAAG,EACD,2GAFJ;AAGE5G,YAAE,EAAE;AAHN,SAptBW,EAytBX;AACE4G,aAAG,EAAE,uDADP;AAEE5G,YAAE,EAAE;AAFN,SAztBW,EA6tBX;AACE4G,aAAG,EAAE,wCADP;AAEE5G,YAAE,EAAE;AAFN,SA7tBW,EAiuBX;AACE4G,aAAG,EAAE,gDADP;AAEE5G,YAAE,EAAE;AAFN,SAjuBW,EAquBX;AACE4G,aAAG,EAAE,mDADP;AAEE5G,YAAE,EAAE;AAFN,SAruBW,EAyuBX;AACE4G,aAAG,EAAE,4DADP;AAEE5G,YAAE,EAAE;AAFN,SAzuBW,EA6uBX;AACE4G,aAAG,EAAE,4CADP;AAEE5G,YAAE,EAAE;AAFN,SA7uBW,EAivBX;AACE4G,aAAG,EACD,8EAFJ;AAGE5G,YAAE,EAAE;AAHN,SAjvBW,EAsvBX;AACE4G,aAAG,EAAE,oCADP;AAEE5G,YAAE,EAAE;AAFN,SAtvBW,EA0vBX;AACE4G,aAAG,EAAE,mBADP;AAEE5G,YAAE,EAAE;AAFN,SA1vBW,EA8vBX;AACE4G,aAAG,EACD,2LAFJ;AAGE5G,YAAE,EAAE;AAHN,SA9vBW,EAmwBX;AACE4G,aAAG,EACD,4GAFJ;AAGE5G,YAAE,EAAE;AAHN,SAnwBW,EAwwBX;AACE4G,aAAG,EAAE,4DADP;AAEE5G,YAAE,EAAE;AAFN,SAxwBW,EA4wBX;AACE4G,aAAG,EACD,yEAFJ;AAGE5G,YAAE,EAAE;AAHN,SA5wBW,EAixBX;AACE4G,aAAG,EACD,mFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAjxBW,EAsxBX;AACE4G,aAAG,EAAE,yDADP;AAEE5G,YAAE,EAAE;AAFN,SAtxBW,EA0xBX;AACE4G,aAAG,EAAE,gCADP;AAEE5G,YAAE,EAAE;AAFN,SA1xBW,EA8xBX;AACE4G,aAAG,EAAE,sBADP;AAEE5G,YAAE,EAAE;AAFN,SA9xBW,EAkyBX;AACE4G,aAAG,EACD,wEAFJ;AAGE5G,YAAE,EAAE;AAHN,SAlyBW,EAuyBX;AACE4G,aAAG,EAAE,gBADP;AAEE5G,YAAE,EAAE;AAFN,SAvyBW,EA2yBX;AACE4G,aAAG,EAAE,mDADP;AAEE5G,YAAE,EAAE;AAFN,SA3yBW,EA+yBX;AACE4G,aAAG,EAAE,0DADP;AAEE5G,YAAE,EAAE;AAFN,SA/yBW,EAmzBX;AACE4G,aAAG,EAAE,6DADP;AAEE5G,YAAE,EAAE;AAFN,SAnzBW,EAuzBX;AACE4G,aAAG,EACD,sEAFJ;AAGE5G,YAAE,EAAE;AAHN,SAvzBW,EA4zBX;AACE4G,aAAG,EACD,6FAFJ;AAGE5G,YAAE,EAAE;AAHN,SA5zBW,EAi0BX;AACE4G,aAAG,EACD,+EAFJ;AAGE5G,YAAE,EAAE;AAHN,SAj0BW,EAs0BX;AACE4G,aAAG,EACD,gGAFJ;AAGE5G,YAAE,EAAE;AAHN,SAt0BW,EA20BX;AACE4G,aAAG,EACD,yGAFJ;AAGE5G,YAAE,EAAE;AAHN,SA30BW,EAg1BX;AACE4G,aAAG,EACD,wIAFJ;AAGE5G,YAAE,EAAE;AAHN,SAh1BW,EAq1BX;AACE4G,aAAG,EACD,oIAFJ;AAGE5G,YAAE,EAAE;AAHN,SAr1BW,EA01BX;AACE4G,aAAG,EACD,2IAFJ;AAGE5G,YAAE,EAAE;AAHN,SA11BW,EA+1BX;AACE4G,aAAG,EACD,mFAFJ;AAGE5G,YAAE,EAAE;AAHN,SA/1BW,EAo2BX;AACE4G,aAAG,EACD,uGAFJ;AAGE5G,YAAE,EAAE;AAHN,SAp2BW,EAy2BX;AACE4G,aAAG,EACD,qFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAz2BW,EA82BX;AACE4G,aAAG,EACD,iFAFJ;AAGE5G,YAAE,EAAE;AAHN,SA92BW,EAm3BX;AACE4G,aAAG,EACD,2EAFJ;AAGE5G,YAAE,EAAE;AAHN,SAn3BW,EAw3BX;AACE4G,aAAG,EACD,2EAFJ;AAGE5G,YAAE,EAAE;AAHN,SAx3BW,EA63BX;AACE4G,aAAG,EACD,yEAFJ;AAGE5G,YAAE,EAAE;AAHN,SA73BW,EAk4BX;AACE4G,aAAG,EAAE,kBADP;AAEE5G,YAAE,EAAE;AAFN,SAl4BW,EAs4BX;AACE4G,aAAG,EAAE,gDADP;AAEE5G,YAAE,EAAE;AAFN,SAt4BW,EA04BX;AACE4G,aAAG,EAAE,oBADP;AAEE5G,YAAE,EAAE;AAFN,SA14BW,EA84BX;AACE4G,aAAG,EAAE,2CADP;AAEE5G,YAAE,EAAE;AAFN,SA94BW,EAk5BX;AACE4G,aAAG,EAAE,6CADP;AAEE5G,YAAE,EAAE;AAFN,SAl5BW,EAs5BX;AACE4G,aAAG,EAAE,iDADP;AAEE5G,YAAE,EAAE;AAFN,SAt5BW,EA05BX;AACE4G,aAAG,EAAE,mDADP;AAEE5G,YAAE,EAAE;AAFN,SA15BW,EA85BX;AACE4G,aAAG,EAAE,mCADP;AAEE5G,YAAE,EAAE;AAFN,SA95BW,EAk6BX;AACE4G,aAAG,EAAE,0CADP;AAEE5G,YAAE,EAAE;AAFN,SAl6BW,EAs6BX;AACE4G,aAAG,EAAE,oDADP;AAEE5G,YAAE,EAAE;AAFN,SAt6BW,EA06BX;AACE4G,aAAG,EAAE,6DADP;AAEE5G,YAAE,EAAE;AAFN,SA16BW,EA86BX;AACE4G,aAAG,EACD,sEAFJ;AAGE5G,YAAE,EAAE;AAHN,SA96BW,EAm7BX;AACE4G,aAAG,EACD,2FAFJ;AAGE5G,YAAE,EAAE;AAHN,SAn7BW,EAw7BX;AACE4G,aAAG,EAAE,4CADP;AAEE5G,YAAE,EAAE;AAFN,SAx7BW,EA47BX;AACE4G,aAAG,EAAE,qCADP;AAEE5G,YAAE,EAAE;AAFN,SA57BW,EAg8BX;AACE4G,aAAG,EAAE,qBADP;AAEE5G,YAAE,EAAE;AAFN,SAh8BW,EAo8BX;AACE4G,aAAG,EAAE,gDADP;AAEE5G,YAAE,EAAE;AAFN,SAp8BW,EAw8BX;AACE4G,aAAG,EAAE,uCADP;AAEE5G,YAAE,EAAE;AAFN,SAx8BW,EA48BX;AACE4G,aAAG,EAAE,mDADP;AAEE5G,YAAE,EAAE;AAFN,SA58BW,EAg9BX;AACE4G,aAAG,EAAE,qBADP;AAEE5G,YAAE,EAAE;AAFN,SAh9BW,EAo9BX;AACE4G,aAAG,EAAE,oEADP;AAEE5G,YAAE,EAAE;AAFN,SAp9BW,EAw9BX;AACE4G,aAAG,EAAE,0BADP;AAEE5G,YAAE,EAAE;AAFN,SAx9BW,EA49BX;AACE4G,aAAG,EAAE,qCADP;AAEE5G,YAAE,EAAE;AAFN,SA59BW,EAg+BX;AACE4G,aAAG,EAAE,8CADP;AAEE5G,YAAE,EAAE;AAFN,SAh+BW,EAo+BX;AACE4G,aAAG,EAAE,0CADP;AAEE5G,YAAE,EAAE;AAFN,SAp+BW,EAw+BX;AACE4G,aAAG,EACD,+EAFJ;AAGE5G,YAAE,EAAE;AAHN,SAx+BW,EA6+BX;AACE4G,aAAG,EACD,6HAFJ;AAGE5G,YAAE,EAAE;AAHN,SA7+BW,EAk/BX;AACE4G,aAAG,EACD,yIAFJ;AAGE5G,YAAE,EAAE;AAHN,SAl/BW,EAu/BX;AACE4G,aAAG,EACD,+GAFJ;AAGE5G,YAAE,EAAE;AAHN,SAv/BW,EA4/BX;AACE4G,aAAG,EAAE,wCADP;AAEE5G,YAAE,EAAE;AAFN,SA5/BW,EAggCX;AACE4G,aAAG,EAAE,mCADP;AAEE5G,YAAE,EAAE;AAFN,SAhgCW,EAogCX;AACE4G,aAAG,EAAE,uCADP;AAEE5G,YAAE,EAAE;AAFN,SApgCW,EAwgCX;AACE4G,aAAG,EAAE,yCADP;AAEE5G,YAAE,EAAE;AAFN,SAxgCW,EA4gCX;AACE4G,aAAG,EAAE,+CADP;AAEE5G,YAAE,EAAE;AAFN,SA5gCW,EAghCX;AACE4G,aAAG,EAAE,kCADP;AAEE5G,YAAE,EAAE;AAFN,SAhhCW,EAohCX;AACE4G,aAAG,EACD,gFAFJ;AAGE5G,YAAE,EAAE;AAHN,SAphCW,EAyhCX;AACE4G,aAAG,EACD,qGAFJ;AAGE5G,YAAE,EAAE;AAHN,SAzhCW,EA8hCX;AACE4G,aAAG,EACD,0GAFJ;AAGE5G,YAAE,EAAE;AAHN,SA9hCW,EAmiCX;AACE4G,aAAG,EACD,iHAFJ;AAGE5G,YAAE,EAAE;AAHN,SAniCW,EAwiCX;AACE4G,aAAG,EACD,2GAFJ;AAGE5G,YAAE,EAAE;AAHN,SAxiCW,EA6iCX;AACE4G,aAAG,EACD,4GAFJ;AAGE5G,YAAE,EAAE;AAHN,SA7iCW,EAkjCX;AACE4G,aAAG,EAAE,qDADP;AAEE5G,YAAE,EAAE;AAFN,SAljCW,EAsjCX;AACE4G,aAAG,EAAE,8DADP;AAEE5G,YAAE,EAAE;AAFN,SAtjCW,EA0jCX;AACE4G,aAAG,EACD,2EAFJ;AAGE5G,YAAE,EAAE;AAHN,SA1jCW,EA+jCX;AACE4G,aAAG,EAAE,kDADP;AAEE5G,YAAE,EAAE;AAFN,SA/jCW,EAmkCX;AACE4G,aAAG,EACD,oHAFJ;AAGE5G,YAAE,EAAE;AAHN,SAnkCW,EAwkCX;AACE4G,aAAG,EACD,wJAFJ;AAGE5G,YAAE,EAAE;AAHN,SAxkCW,EA6kCX;AACE4G,aAAG,EACD,sGAFJ;AAGE5G,YAAE,EAAE;AAHN,SA7kCW,EAklCX;AACE4G,aAAG,EAAE,0CADP;AAEE5G,YAAE,EAAE;AAFN,SAllCW,EAslCX;AACE4G,aAAG,EAAE;AADP,SAtlCW,EAylCX;AACEA,aAAG,EAAE;AADP,SAzlCW,EA4lCX;AACEA,aAAG,EAAE;AADP,SA5lCW,EA+lCX;AACEA,aAAG,EAAE,sCADP;AAEE5G,YAAE,EAAE;AAFN,SA/lCW,EAmmCX;AACE4G,aAAG,EAAE,yDADP;AAEE5G,YAAE,EAAE;AAFN,SAnmCW,EAumCX;AACE4G,aAAG,EAAE,6DADP;AAEE5G,YAAE,EAAE;AAFN,SAvmCW,EA2mCX;AACE4G,aAAG,EAAE,qDADP;AAEE5G,YAAE,EAAE;AAFN,SA3mCW,EA+mCX;AACE4G,aAAG,EAAE,iDADP;AAEE5G,YAAE,EAAE;AAFN,SA/mCW,EAmnCX;AACE4G,aAAG,EAAE,6CADP;AAEE5G,YAAE,EAAE;AAFN,SAnnCW,EAunCX;AACE4G,aAAG,EAAE,mDADP;AAEE5G,YAAE,EAAE;AAFN,SAvnCW,EA2nCX;AACE4G,aAAG,EAAE,gDADP;AAEE5G,YAAE,EAAE;AAFN,SA3nCW,EA+nCX;AACE4G,aAAG,EAAE,4CADP;AAEE5G,YAAE,EAAE;AAFN,SA/nCW,EAmoCX;AACE4G,aAAG,EAAE,kDADP;AAEE5G,YAAE,EAAE;AAFN,SAnoCW,EAuoCX;AACE4G,aAAG,EAAE,6CADP;AAEE5G,YAAE,EAAE;AAFN,SAvoCW,EA2oCX;AACE4G,aAAG,EAAE,yCADP;AAEE5G,YAAE,EAAE;AAFN,SA3oCW,EA+oCX;AACE4G,aAAG,EAAE,+CADP;AAEE5G,YAAE,EAAE;AAFN,SA/oCW,EAmpCX;AACE4G,aAAG,EAAE,mDADP;AAEE5G,YAAE,EAAE;AAFN,SAnpCW,EAupCX;AACE4G,aAAG,EAAE,+CADP;AAEE5G,YAAE,EAAE;AAFN,SAvpCW,EA2pCX;AACE4G,aAAG,EAAE,qDADP;AAEE5G,YAAE,EAAE;AAFN,SA3pCW,EA+pCX;AACE4G,aAAG,EAAE,6CADP;AAEE5G,YAAE,EAAE;AAFN,SA/pCW,EAmqCX;AACE4G,aAAG,EAAE,yCADP;AAEE5G,YAAE,EAAE;AAFN,SAnqCW,EAuqCX;AACE4G,aAAG,EAAE,+CADP;AAEE5G,YAAE,EAAE;AAFN,SAvqCW,EA2qCX;AACE4G,aAAG,EAAE,8CADP;AAEE5G,YAAE,EAAE;AAFN,SA3qCW,EA+qCX;AACE4G,aAAG,EAAE,8CADP;AAEE5G,YAAE,EAAE;AAFN,SA/qCW,EAmrCX;AACE4G,aAAG,EAAE,iBADP;AAEE5G,YAAE,EAAE;AAFN,SAnrCW,EAurCX;AACE4G,aAAG,EAAE,iBADP;AAEE5G,YAAE,EAAE;AAFN,SAvrCW,EA2rCX;AACE4G,aAAG,EAAE,0BADP;AAEE5G,YAAE,EAAE;AAFN,SA3rCW,EA+rCX;AACE4G,aAAG,EAAE,6BADP;AAEE5G,YAAE,EAAE;AAFN,SA/rCW,EAmsCX;AACE4G,aAAG,EAAE,UADP;AAEE5G,YAAE,EAAE;AAFN,SAnsCW,EAusCX;AACE4G,aAAG,EAAE,SADP;AAEE5G,YAAE,EAAE;AAFN,SAvsCW,EA2sCX;AACE4G,aAAG,EAAE,wBADP;AAEE5G,YAAE,EAAE;AAFN,SA3sCW,CAAb;AAouCD;;;;kCApBWid,O,EAAe;AACvBA,iBAAO,GAAGA,OAAO,CAACvU,OAAR,CAAgB,cAAhB,EAAgC,OAAhC,CAAV;AACA,cAAI/B,YAAY,GAAG,EAAnB;AACA,cAAMoH,KAAK,GAAG,KAAKiP,UAAL,CAAgBJ,SAAhB,CAA0B,UAAC5N,CAAD;AAAA,mBAAOA,CAAC,CAAChP,EAAF,KAASid,OAAhB;AAAA,WAA1B,CAAd;AACAzX,iBAAO,CAACC,GAAR,CAAYsI,KAAZ;;AACA,cAAIA,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChB,mBAAO,KAAKiP,UAAL,CAAgBjP,KAAhB,EAAuBnH,GAA9B;AACD,WAFD,MAEO;AACL,gBACEqW,OAAO,CAACC,OAAR,CAAgB,wBAAhB,MAA8C,CAAC,CAA/C,IACAD,OAAO,CAACC,OAAR,CAAgB,2BAAhB,MAAiD,CAAC,CAFpD,EAGE;AACAvW,0BAAY,GACV,0JADF;AAED,aAND,MAMO;AACLA,0BAAY,GAAG,yBAAyBsW,OAAxC;AACD;AACF;;AACD,iBAAOtW,YAAP;AACD;;;;;;;uBApuCUoW,iB;AAAiB,K;;;;YAAjBA,iB;AAAiB;;;;;sEAAjBA,iB,EAAiB;cAH7B,kDAG6B;eAHxB;AACJlL,cAAI,EAAE;AADF,S;AAGwB,Q;;;;;;;;;;;;;;;;;;ACV9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,sF,CAEyD;;;QAO5CsL,W;AACT,2BACYrc,SADZ,EACuC;AAAA;;AAA3B,aAAAA,SAAA,GAAAA,SAAA;AACR;;;;kCACMsc,S,EAAiB;AACvB,cAAIjL,MAAJ;AAEA,cAAIkL,MAAM,GAAG,EAAb;AACA,cAAIC,OAAO,GAAG,EAAd;AACA,cAAIC,KAAK,GAAG,EAAZ;AACA,cAAIC,MAAM,GAAG,EAAb;AACA,cAAIC,KAAK,GAAG,EAAZ;AACA,cAAIC,MAAM,GAAG,EAAb;AACA,cAAIC,MAAM,GAAG,EAAb;AACA,cAAIC,OAAO,GAAG,EAAd;AACA,cAAIC,QAAQ,GAAG,EAAf;AACA,cAAIC,SAAS,GAAG,EAAhB;AACA,cAAIC,OAAO,GAAG,EAAd;AACA,cAAIC,QAAQ,GAAG,EAAf;AAEAX,gBAAM,GAAG,KAAKvc,SAAL,CAAe8D,OAAf,CAAuB,iBAAvB,CAAT,CAhBuB,CAiBvB;;AACA0Y,iBAAO,GAAGD,MAAV;AACAE,eAAK,GAAG,KAAKzc,SAAL,CAAe8D,OAAf,CAAuB,oBAAvB,CAAR;AACA4Y,gBAAM,GAAGD,KAAT;AACAE,eAAK,GAAG,KAAK3c,SAAL,CAAe8D,OAAf,CAAuB,kBAAvB,CAAR;AACA8Y,gBAAM,GAAG,KAAK5c,SAAL,CAAe8D,OAAf,CAAuB,mBAAvB,CAAT;AACA+Y,gBAAM,GAAG,KAAK7c,SAAL,CAAe8D,OAAf,CAAuB,iBAAvB,CAAT;AACAgZ,iBAAO,GAAG,KAAK9c,SAAL,CAAe8D,OAAf,CAAuB,kBAAvB,CAAV;AACAiZ,kBAAQ,GAAG,KAAK/c,SAAL,CAAe8D,OAAf,CAAuB,mBAAvB,CAAX;AACAkZ,mBAAS,GAAG,KAAKhd,SAAL,CAAe8D,OAAf,CAAuB,oBAAvB,CAAZ;AACAmZ,iBAAO,GAAG,KAAKjd,SAAL,CAAe8D,OAAf,CAAuB,kBAAvB,CAAV;AACAoZ,kBAAQ,GAAG,KAAKld,SAAL,CAAe8D,OAAf,CAAuB,mBAAvB,CAAX,CA5BuB,CA6BvB;AAEA;;AACA,cAAMqZ,GAAG,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAZ,CAhCuB,CAkCvB;;AACA,cAAMC,KAAK,GAAG,CAACH,GAAG,GAAGb,SAAP,IAAoB,IAAlC,CAnCuB,CAqCvB;;AACA,cAAIgB,KAAK,GAAG,EAAZ,EAAiB;AACb,mBAAO,KAAKtd,SAAL,CAAe8D,OAAf,CAAuB,qBAAvB,CAAP,CADa,CAEb;AACH,WAzCsB,CA2CvB;;;AACA,cAAIwZ,KAAK,GAAG,EAAZ,EAAgB;AAAG;AACf;AACAjM,kBAAM,GAAG6B,IAAI,CAACqK,KAAL,CAAWrK,IAAI,CAACC,KAAL,CAAWmK,KAAX,IAAoB,EAA/B,IAAqC,EAArC,GAA0C,GAA1C,GAAgDf,MAAhD,GAAyD,GAAlE;AACH,WAHD,MAGO,IAAIe,KAAK,GAAG,GAAZ,EAAiB;AAAG;AACvB;AACAjM,kBAAM,GAAG6B,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,EAAnB,IAAyB,GAAzB,GAA+Bb,KAA/B,GAAuC,GAAhD,CAFoB,CAIpB;;AACA,gBAAIvJ,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,EAAnB,MAA2B,CAA/B,EAAkC;AAC9B;AACAjM,oBAAM,GAAGA,MAAM,GAAG6B,IAAI,CAACqK,KAAL,CAAWrK,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,EAAnB,IAAyB,EAApC,IAA0C,EAAnD,GAAwD,GAAxD,GAA8Df,MAA9D,GAAuE,GAAhF;AACH;AACJ,WATM,MASA,IAAIe,KAAK,GAAG,KAAZ,EAAmB;AAAG;AACzBjM,kBAAM,GAAGmM,MAAM,CAACtK,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,IAAnB,CAAD,CAAf,CADsB,CAGtB;AACA;;AACAjM,kBAAM,GAAG6B,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,IAAnB,IAA2B,CAA3B,GAA+BjM,MAAM,GAAG,GAAT,GAAeuL,MAAf,GAAwB,GAAvD,GAA6DvL,MAAM,GAAG,GAAT,GAAesL,KAAf,GAAuB,GAA7F,CALsB,CAOtB;;AACA,gBAAIzJ,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,IAAT,GAAiB,EAA5B,MAAoC,CAAxC,EAA2C;AACvCjM,oBAAM,GAAGA,MAAM,GAAGmM,MAAM,CAACtK,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,IAAT,GAAiB,EAA5B,CAAD,CAAf,GAAmD,GAAnD,GAAyDb,KAAzD,GAAiE,GAA1E,CADuC,CAEvC;AACA;AACH;AACJ,WAbM,MAaA,IAAIa,KAAK,GAAG,OAAZ,EAAqB;AAAG;AAC3BjM,kBAAM,GAAGmM,MAAM,CAACtK,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,KAAnB,CAAD,CAAf,CADwB,CAGxB;;AACAjM,kBAAM,GAAG6B,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,KAAnB,IAA4B,CAA5B,GAAgCjM,MAAM,GAAG,GAAT,GAAeyL,OAAf,GAAyB,GAAzD,GAA+DzL,MAAM,GAAG,GAAT,GAAewL,MAAf,GAAwB,GAAhG,CAJwB,CAKxB;AAEA;;AACA,gBAAI3J,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,KAAT,GAAkB,IAA7B,MAAuC,CAA3C,EAA8C;AAC1CjM,oBAAM,GAAGA,MAAM,GAAGmM,MAAM,CAACtK,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,KAAT,GAAkB,IAA7B,CAAD,CAAxB,CAD0C,CAG1C;;AACAjM,oBAAM,GAAG6B,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,KAAT,GAAkB,IAA7B,IAAqC,CAArC,GAAyCjM,MAAM,GAAG,GAAT,GAAeuL,MAAf,GAAwB,GAAjE,GAAuEvL,MAAM,GAAG,GAAT,GAAesL,KAAf,GAAuB,GAAvG,CAJ0C,CAK1C;AACH;AACJ,WAfM,MAeA,IAAIW,KAAK,GAAG,QAAZ,EAAsB;AAAG;AAC5BjM,kBAAM,GAAGmM,MAAM,CAACtK,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,OAAnB,CAAD,CAAf,CADyB,CAGzB;;AACAjM,kBAAM,GAAG6B,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,OAAnB,IAA8B,CAA9B,GAAkCjM,MAAM,GAAG,GAAT,GAAe2L,SAAf,GAA2B,GAA7D,GAAmE3L,MAAM,GAAG,GAAT,GAAe0L,QAAf,GAA0B,GAAtG,CAJyB,CAKzB;AAEA;;AACA,gBAAI7J,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,OAAT,GAAoB,KAA/B,MAA0C,CAA9C,EAAiD;AAC7CjM,oBAAM,GAAGA,MAAM,GAAGmM,MAAM,CAACtK,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,OAAT,GAAoB,KAA/B,CAAD,CAAxB,CAD6C,CAG7C;;AACAjM,oBAAM,GAAG6B,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,OAAT,GAAoB,KAA/B,IAAwC,CAAxC,GAA4CjM,MAAM,GAAG,GAAT,GAAeyL,OAAf,GAAyB,GAArE,GAA2EzL,MAAM,GAAG,GAAT,GAAewL,MAAf,GAAwB,GAA5G,CAJ6C,CAK7C;AACH;AAEJ,WAhBM,MAgBA;AAAG;AACNxL,kBAAM,GAAGmM,MAAM,CAACtK,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,QAAnB,CAAD,CAAf,CADG,CAGH;;AACAjM,kBAAM,GAAG6B,IAAI,CAACC,KAAL,CAAWmK,KAAK,GAAG,QAAnB,IAA+B,CAA/B,GAAmCjM,MAAM,GAAG,GAAT,GAAe6L,QAAf,GAA0B,GAA7D,GAAmE7L,MAAM,GAAG,GAAT,GAAe4L,OAAf,GAAyB,GAArG,CAJG,CAKH;AAEA;;AACA,gBAAI/J,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,QAAT,GAAqB,OAAhC,MAA6C,CAAjD,EAAoD;AAChDjM,oBAAM,GAAGA,MAAM,GAAGmM,MAAM,CAACtK,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,QAAT,GAAqB,OAAhC,CAAD,CAAxB,CADgD,CAGhD;;AACAjM,oBAAM,GAAG6B,IAAI,CAACC,KAAL,CAAYmK,KAAK,GAAG,QAAT,GAAqB,OAAhC,IAA2C,CAA3C,GAA+CjM,MAAM,GAAG,GAAT,GAAe2L,SAAf,GAA2B,GAA1E,GAAgF3L,MAAM,GAAG,GAAT,GAAe0L,QAAf,GAA0B,GAAnH,CAJgD,CAKhD;AACH;AAEJ,WApHsB,CAsHvB;;;AACA,cAAMU,MAAM,GAAG,KAAKzd,SAAL,CAAe8D,OAAf,CAAuB,iBAAvB,CAAf;AAEAuN,gBAAM,GAAGA,MAAM,GAAGoM,MAAlB,CAzHuB,CA0HvB;;AACA,iBAAOpM,MAAP;AACH;;;;;;;uBAhIQgL,W,EAAW,qI;AAAA,K;;;;YAAXA,W;AAAW;;;;;sEAAXA,W,EAAW;cAJvB,kDAIuB;eAJlB;AACFtL,cAAI,EAAE,SADJ;AAEF2M,cAAI,EAAE,IAFJ,CAEU;;AAFV,S;AAIkB,Q;;;;;;;;;;;;;;;;;;;;;;ACTxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAKaC,Y;;;;;;;kCACCC,K,EAAgBC,I,EAAeC,Q,EAAkB;AACvD,cAAMC,KAAK,GAAGF,IAAI,GAAGA,IAAH,GAAU,CAA5B;AACA,cAAMG,KAAK,GAAG,KAAd;AAEA,cAAIC,YAAJ;;AAEA,cAAIH,QAAQ,IAAIF,KAAK,CAACvV,MAAN,GAAe0V,KAA/B,EAAsC;AAClC,gBAAMG,cAAc,GAAGN,KAAK,CAACxR,KAAN,CAAY,CAAC2R,KAAb,CAAvB;AACAE,wBAAY,GAAGL,KAAK,CAACpM,SAAN,CAAgB,CAAhB,EAAmBuM,KAAnB,IAA4BC,KAA5B,GAAoCE,cAAnD;AAEA,mBAAOD,YAAP;AACH,WALD,MAKO;AACH,mBAAOL,KAAK,CAACvV,MAAN,GAAe0V,KAAf,GAAuBH,KAAK,CAACpM,SAAN,CAAgB,CAAhB,EAAmBuM,KAAnB,IAA4BC,KAAnD,GAA2DJ,KAAlE;AACH;AACJ;;;;;;;uBAfQD,Y;AAAY,K;;;;YAAZA,Y;AAAY;;;;;sEAAZA,Y,EAAY;cAHxB,kDAGwB;eAHnB;AACF5M,cAAI,EAAE;AADJ,S;AAGmB,Q;;;;;;;;;;;;;;;;;;ACLzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAUaoN,e;AAEX,+BACUte,aADV,EAEUue,cAFV,EAGU1b,cAHV,EAIUE,aAJV,EAIsC;AAAA;;AAH5B,aAAA/C,aAAA,GAAAA,aAAA;AACA,aAAAue,cAAA,GAAAA,cAAA;AACA,aAAA1b,cAAA,GAAAA,cAAA;AACA,aAAAE,aAAA,GAAAA,aAAA;AALV,aAAAyb,eAAA,GAAkB,EAAlB;AAMI;;;;2CACelZ,G,EAAG;AACpB,cAAI;AACF,gBAAMhC,OAAO,GAAG,KAAKtD,aAAL,CAAmBa,MAAnB,CAA0B0C,UAA1B,CAAqC+B,GAArC,CAAhB;AACA,mBAAO,KAAKmZ,qBAAL,CAA2Bnb,OAA3B,EAAoCE,IAApC,CACL,+DAAQ,UAACiC,GAAD,EAAc;AACpB,qBAAO,gDAAGA,GAAH,CAAP;AACD,aAFD,CADK,CAAP;AAKD,WAPD,CAOE,OAAOhH,CAAP,EAAU;AACVoG,mBAAO,CAACC,GAAR,CAAYrG,CAAZ;AACD;AACF;;;8CACqB6E,O,EAAO;AAAA;;AAC3B,iBAAO,KAAKib,cAAL,CAAoBG,WAApB,CAAgCpb,OAAO,CAACJ,OAAxC,EAAiDM,IAAjD,CACL,+DAAQ,UAAC4O,OAAD,EAAa;AACnB,gBAAI9O,OAAO,CAAC+O,iBAAR,KAA8BD,OAAlC,EAA2C;AACzC,qBAAO,OAAI,CAACuM,kBAAL,CAAwBrb,OAAxB,EAAiC8O,OAAjC,CAAP;AACD,aAFD,MAEO;AACL,qBAAO,gDAAG;AACRwM,wBAAQ,EAAE;AADF,eAAH,CAAP;AAGD;AACF,WARD,CADK,CAAP;AAWD;;;2CACkBtb,O,EAAS8O,O,EAAO;AAAA;;AACjC,iBAAO,KAAKmM,cAAL,CAAoBM,aAApB,CAAkCvb,OAAO,CAACJ,OAA1C,EAAmDM,IAAnD,CACL,+DAAQ,UAACiC,GAAD,EAAS;AACf,gBAAIqZ,KAAK,CAACC,OAAN,CAActZ,GAAd,CAAJ,EAAwB;AACtB,kBAAMuZ,aAAa,GAAG1b,OAAO,CAAC2b,UAA9B;AACA3b,qBAAO,CAAC2b,UAAR,GAAqBxZ,GAArB;AACA,kBAAMyZ,oBAAoB,GAAG5b,OAAO,CAAC+O,iBAArC;AACA/O,qBAAO,CAAC+O,iBAAR,GAA4BD,OAA5B;AACAvN,qBAAO,CAACC,GAAR,CAAYoa,oBAAoB,GAAG,KAAvB,GAA+B9M,OAA3C;;AACA,qBAAI,CAACpS,aAAL,CAAmBgU,WAAnB;;AACA,kBAAIkL,oBAAoB,KAAK,CAAC,CAA9B,EAAiC;AAAE;AACjC,uBAAI,CAACC,mBAAL,CAAyB7b,OAAzB,EAAkC0b,aAAlC,EAAiDvZ,GAAjD;AACD,eAFD,MAEO;AACLZ,uBAAO,CAACC,GAAR,CAAY,gBAAgBsN,OAA5B;AACD;;AAXqB,0DAYC3M,GAZD;AAAA;;AAAA;AAYtB,uEAA4B;AAAA,sBAAjB2Z,QAAiB;;AAC1B,sBAAMC,YAAY,GAAG,OAAI,CAACtb,eAAL,CAAqBqb,QAArB,EAA+B9b,OAA/B,EAAwC,KAAxC,CAArB;;AACA,yBAAI,CAACP,aAAL,CAAmBuc,KAAnB,CAAyBD,YAAzB;AACD;AAfqB;AAAA;AAAA;AAAA;AAAA;AAgBvB,aAhBD,MAgBO;AACLxa,qBAAO,CAACC,GAAR,CAAY,GAAZ;AACAD,qBAAO,CAACC,GAAR,CAAYW,GAAZ;AACD;;AACD,mBAAO,gDAAG;AACRmZ,sBAAQ,EAAE;AADF,aAAH,CAAP;AAGD,WAxBD,CADK,CAAP;AA2BD;;;4CACmBtb,O,EAAkB0b,a,EAA2BO,a,EAA2B;AAAA;;AAAA,sDACnEA,aADmE;AAAA;;AAAA;AAAA;AAAA,kBAC/EH,QAD+E;AAExF,kBAAMhS,KAAK,GAAG4R,aAAa,CAAC/C,SAAd,CAAwB,UAACtI,CAAD;AAAA,uBAAOA,CAAC,CAACxP,IAAF,KAAWib,QAAQ,CAACjb,IAA3B;AAAA,eAAxB,CAAd;;AACA,kBAAIiJ,KAAK,KAAK,CAAC,CAAX,IAAiBA,KAAK,KAAK,CAAC,CAAX,IAAgB4R,aAAa,CAAC5R,KAAD,CAAb,CAAqBoS,MAArB,KAAgC,CAArE,EAAyE;AACvE,oBAAIJ,QAAQ,CAACzb,IAAT,KAAkB,aAAtB,EAAqC;AACnC,sBAAIL,OAAO,CAACJ,OAAR,KAAoBkc,QAAQ,CAACtb,MAAjC,EAAyC;AACvC,2BAAI,CAACjB,cAAL,CAAoBiD,UAApB,CAA+BxC,OAAO,CAAC0B,YAAR,KAAyB,SAAzB,GAAqCoa,QAAQ,CAACnR,MAAT,GAAkB,OAAvD,GAAiE,MAAhG;AACD;;AACD,sBAAI3K,OAAO,CAACJ,OAAR,KAAoBkc,QAAQ,CAACxb,WAAjC,EAA8C;AAC5C,2BAAI,CAACf,cAAL,CAAoBiD,UAApB,CAA+BxC,OAAO,CAAC0B,YAAR,KAAyB,aAAzB,GAAyCoa,QAAQ,CAACnR,MAAT,GAAkB,OAA3D,GAAqE,MAApG;AACD;AACF,iBAPD,MAOO,IAAImR,QAAQ,CAACzb,IAAT,KAAkB,YAAtB,EAAoC;AACzC,yBAAI,CAACd,cAAL,CAAoBiD,UAApB,CAA+BxC,OAAO,CAAC0B,YAAR,KAAyB,oBAAxD;AACD,iBAFM,MAEA,IAAIoa,QAAQ,CAACzb,IAAT,KAAkB,aAAtB,EAAqC;AAC1C,yBAAI,CAACd,cAAL,CAAoBiD,UAApB,CAA+BxC,OAAO,CAAC0B,YAAR,KAAyB,sBAAxD;AACD,iBAFM,MAEA,IAAIoa,QAAQ,CAACzb,IAAT,KAAkB,YAAtB,EAAoC;AACzC,yBAAI,CAACd,cAAL,CAAoBiD,UAApB,CAA+BxC,OAAO,CAAC0B,YAAR,KAAyB,qBAAxD;AACD;AACF;AAlBuF;;AAC1F,mEAAsC;AAAA;AAkBrC;AAnByF;AAAA;AAAA;AAAA;AAAA;AAoB3F;;;wCACetB,W,EAAkBJ,O,EAAmC;AAAA,cAAjBmc,UAAiB,uEAAJ,IAAI;AACnE,cAAIJ,YAAY,GAAG,EAAnB;;AACA,cAAI3b,WAAW,CAACC,IAAZ,KAAqB,YAAzB,EAAuC;AACrC,gBAAID,WAAW,CAACE,WAAhB,EAA6B;AAC3Byb,0BAAY,GAAG3b,WAAW,CAACE,WAA3B;AACD,aAFD,MAEO;AACLyb,0BAAY,GAAI,EAAhB,CADK,CACe;AACrB;AACF,WAND,MAMO,IAAI3b,WAAW,CAACC,IAAZ,KAAqB,aAAzB,EAAwC;AAC7C,gBAAIL,OAAO,CAACJ,OAAR,KAAoBQ,WAAW,CAACI,MAApC,EAA4C;AAC1Cub,0BAAY,GAAI3b,WAAW,CAACE,WAA5B,CAD0C,CACD;AAC1C,aAFD,MAEO;AACLyb,0BAAY,GAAI3b,WAAW,CAACI,MAA5B,CADK,CAC+B;AACrC;AACF,WANM,MAMA,IAAIJ,WAAW,CAACC,IAAZ,KAAqB,aAAzB,EAAwC;AAC7C,gBAAIL,OAAO,CAACJ,OAAR,KAAoBQ,WAAW,CAACI,MAApC,EAA4C;AAC1Cub,0BAAY,GAAI3b,WAAW,CAACE,WAA5B;AACD,aAFD,MAEO;AACLyb,0BAAY,GAAI3b,WAAW,CAACI,MAA5B;AACD;AACF,WANM,MAMA;AACLub,wBAAY,GAAI,EAAhB;AACD;;AACD,cAAII,UAAJ,EAAgB;AACdJ,wBAAY,GAAG,KAAKtc,aAAL,CAAmB/D,OAAnB,CAA2BqgB,YAA3B,CAAf;AACD;;AACD,iBAAOA,YAAP;AACD;;;;;;;uBA9GUf,e,EAAe,4H,EAAA,+H,EAAA,+H,EAAA,4H;AAAA,K;;;aAAfA,e;AAAe,eAAfA,eAAe;;;;;sEAAfA,e,EAAe;cAD3B;AAC2B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACV5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,yD,CAEyD;;;QAU5CoB,c;AACX,8BACUvf,SADV,EAEUH,aAFV,EAGU6C,cAHV,EAIU8c,aAJV,EAKUza,gBALV,EAK4C;AAAA;;AAJlC,aAAA/E,SAAA,GAAAA,SAAA;AACA,aAAAH,aAAA,GAAAA,aAAA;AACA,aAAA6C,cAAA,GAAAA,cAAA;AACA,aAAA8c,aAAA,GAAAA,aAAA;AACA,aAAAza,gBAAA,GAAAA,gBAAA;AACL;;;;wCAEW;AAAA,sDACQ,KAAKlF,aAAL,CAAmBa,MAAnB,CAA0B+e,WAA1B,EADR;AAAA;;AAAA;AACd,mEAA+D;AAAA,kBAApDtc,OAAoD;AAC7D,mBAAKuc,iBAAL,CAAuBvc,OAAvB;AACD;AAHa;AAAA;AAAA;AAAA;AAAA;AAIf;;;0CACiBA,O,EAAkB;AAAA;;AAClCuB,iBAAO,CAACC,GAAR,CAAY,SAASxB,OAAO,CAACJ,OAA7B;AACA,eAAKgC,gBAAL,CAAsB4a,UAAtB,CAAiCxc,OAAO,CAACJ,OAAzC,EACGlC,SADH,CACa,UAACyE,GAAD,EAAc;AACvB,gBAAIA,GAAG,CAACC,OAAR,EAAiB;AACf,qBAAI,CAACqa,oBAAL,CAA0Bzc,OAA1B,EAAmCkI,MAAM,CAAC/F,GAAG,CAACE,OAAJ,CAAY2M,OAAb,CAAzC;AACD,aAFD,MAEO;AACLzN,qBAAO,CAACC,GAAR,CAAY,oBAAoBoB,IAAI,CAACC,SAAL,CAAeV,GAAG,CAACE,OAAJ,CAAYM,GAA3B,CAAhC;AACD;AACF,WAPH;AAQD;;;6CACoB3C,O,EAAkB0c,U,EAAoB;AACzD,cAAI1c,OAAO,CAACiP,UAAR,KAAuB,IAAvB,IAA+BjP,OAAO,CAACiP,UAAR,KAAuB0N,SAAtD,IAAmED,UAAU,KAAK1c,OAAO,CAACiP,UAA9F,EAA0G;AACxGjP,mBAAO,CAACiP,UAAR,GAAqByN,UAArB;AACA,iBAAKE,kBAAL;AACA,iBAAKP,aAAL,CAAmBQ,kBAAnB;AACA,iBAAKngB,aAAL,CAAmBgU,WAAnB;AACD;AACF;;;6CACoB;AACnB,cAAI1B,OAAO,GAAG,CAAd;AACA,cAAI8N,MAAM,GAAG,KAAb;;AAFmB,sDAGG,KAAKpgB,aAAL,CAAmBa,MAAnB,CAA0B+e,WAA1B,EAHH;AAAA;;AAAA;AAGnB,mEAA+D;AAAA,kBAApDtc,OAAoD;;AAC7D,kBAAI,EAAEA,OAAO,CAACiP,UAAR,KAAuB,IAAvB,IAA+BjP,OAAO,CAACiP,UAAR,KAAuB0N,SAAxD,CAAJ,EAAwE;AACtE3N,uBAAO,GAAGA,OAAO,GAAG9G,MAAM,CAAClI,OAAO,CAACiP,UAAT,CAA1B;AACA6N,sBAAM,GAAG,IAAT;AACD;AACF;AARkB;AAAA;AAAA;AAAA;AAAA;;AASnB,cAAIA,MAAJ,EAAY;AACV,iBAAKpgB,aAAL,CAAmBa,MAAnB,CAA0Bwf,eAA1B,GAA4C/N,OAA5C;AACD;AACF;;;;;;;uBA7CUoN,c,EAAc,4H,EAAA,4H,EAAA,+H,EAAA,4H,EAAA,qI;AAAA,K;;;aAAdA,c;AAAc,eAAdA,cAAc;;;;;sEAAdA,c,EAAc;cAD1B;AAC0B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCHdY,c;AAKX;AAAA;;AAEE,aAAKlgB,SAAL,GAAiB,IAAI,oDAAJ,EAAjB;AACA,aAAKmgB,aAAL,GAAqB,KAAKngB,SAAL,CAAeiE,GAAf,CAAmBqX,GAAxC;AACA,aAAK8E,OAAL,GAAe,KAAKpgB,SAAL,CAAeiE,GAAf,CAAmBC,OAAlC;AACA,aAAKmc,QAAL,GAAgB,OAAhB;AACD;;;;6CAC0Bnb,G,EAAW;;;;;;;;AAC9Bob,0B,GAAS,Y;AACXC,yB,GAAQ,8DAAoBC,UAApB,E;AACZD,yBAAK,GAAG,8DAAoBE,SAApB,CAA8BF,KAA9B,EAAqC,sBAArC,CAAR;AACAA,yBAAK,GAAG,8DAAoBG,YAApB,CAAiCH,KAAjC,EAAwC,MAAxC,EAAgD,0DAAgBI,EAAhE,EAAoE,CAAC,aAAD,CAApE,EAAqF,KAArF,CAAR;AACAJ,yBAAK,GAAG,8DAAoBG,YAApB,CAAiCH,KAAjC,EAAwC,QAAxC,EAAkD,0DAAgBI,EAAlE,EAAsE,CAACzb,GAAD,CAAtE,EAA6E,KAA7E,CAAR;AACAqb,yBAAK,GAAG,8DAAoBG,YAApB,CAAiCH,KAAjC,EAAwC,QAAxC,EAAkD,0DAAgBI,EAAlE,EAAsE,CAAC,SAAD,CAAtE,EAAmF,KAAnF,CAAR;AACAJ,yBAAK,GAAG,8DAAoBK,WAApB,CAAgCL,KAAhC,EAAuC,aAAvC,EAAsD,+DAAqBM,IAA3E,CAAR;AACAN,yBAAK,GAAG,8DAAoBO,QAApB,CAA6BP,KAA7B,EAAoC,GAApC,CAAR;;AACgB,2BAAM,4DAAkBQ,kBAAlB,CAAqC,KAAKZ,aAA1C,EAAyD,KAAKE,QAA9D,EAAwE,KAAKD,OAA7E,EAAsFE,MAAtF,EAA8FC,KAA9F,CAAN;;;AAAVS,2B;AACAC,6B,GAAY,E;6DACGD,O;;;AAArB,gFAA8B;AAAnB5P,8BAAmB;AAC5B6P,iCAAS,CAAC5N,IAAV,CAAejC,MAAM,CAAC8P,oBAAtB;AACD;;;;;;;uDACMD,S;;;;;;;;;AACR;;;oCACWne,O,EAAe;AACzB,cAAMwd,MAAM,GAAG,UAAf;AACA,cAAIC,KAAK,GAAG,8DAAoBC,UAApB,EAAZ;AACAD,eAAK,GAAG,8DAAoBE,SAApB,CAA8BF,KAA9B,EAAqC,aAArC,CAAR;AACAA,eAAK,GAAG,8DAAoBG,YAApB,CAAiCH,KAAjC,EAAwC,YAAxC,EAAsD,0DAAgBI,EAAtE,EAA0E,CAAC7d,OAAD,CAA1E,EAAqF,KAArF,CAAR;AACAyd,eAAK,GAAG,8DAAoBO,QAApB,CAA6BP,KAA7B,EAAoC,CAApC,CAAR;AACA,iBAAO,kDAAY,4DAAkBQ,kBAAlB,CAAqC,KAAKZ,aAA1C,EAAyD,KAAKE,QAA9D,EAAwE,KAAKD,OAA7E,EAAsFE,MAAtF,EAA8FC,KAA9F,CAAZ,EAAkHnd,IAAlH,CAAuH,+DAAQ,UAACgO,MAAD,EAAY;AAChJ,gBAAIA,MAAM,CAAC,CAAD,CAAV,EAAe;AACb,qBAAO,gDAAGA,MAAM,CAAC,CAAD,CAAN,CAAU+P,WAAb,CAAP;AACD,aAFD,MAEO;AACL,qBAAO,gDAAG,CAAH,CAAP;AACD;AACF,WAN6H,CAAvH,CAAP;AAOD;;;sCACajc,G,EAAW;AAAA;;AACvB,cAAMob,MAAM,GAAG,YAAf;AACA,cAAIc,SAAS,GAAG,8DAAoBZ,UAApB,EAAhB;AACAY,mBAAS,GAAG,8DAAoBX,SAApB,CAA8BW,SAA9B,EAAyC,MAAzC,EAAiD,YAAjD,EAA+D,sBAA/D,EAAuF,WAAvF,EAAoG,sBAApG,EAA4H,QAA5H,EAAsI,aAAtI,EAAqJ,QAArJ,EAA+J,UAA/J,CAAZ;AACAA,mBAAS,GAAG,8DAAoBV,YAApB,CAAiCU,SAAjC,EAA4C,MAA5C,EAAoD,0DAAgBC,EAApE,EAAwE,CAAC,aAAD,EAAgB,aAAhB,EAA+B,YAA/B,CAAxE,EAAsH,KAAtH,CAAZ;AACAD,mBAAS,GAAG,8DAAoBV,YAApB,CAAiCU,SAAjC,EAA4C,QAA5C,EAAsD,0DAAgBT,EAAtE,EAA0E,CAACzb,GAAD,CAA1E,EAAiF,KAAjF,CAAZ;AACAkc,mBAAS,GAAG,8DAAoBV,YAApB,CAAiCU,SAAjC,EAA4C,QAA5C,EAAsD,0DAAgBT,EAAtE,EAA0E,CAAC,SAAD,CAA1E,EAAuF,KAAvF,CAAZ;AACAS,mBAAS,GAAG,8DAAoBR,WAApB,CAAgCQ,SAAhC,EAA2C,aAA3C,EAA0D,+DAAqBP,IAA/E,CAAZ;AACAO,mBAAS,GAAG,8DAAoBN,QAApB,CAA6BM,SAA7B,EAAwC,EAAxC,CAAZ;AAEA,cAAIE,YAAY,GAAG,8DAAoBd,UAApB,EAAnB;AACAc,sBAAY,GAAG,8DAAoBb,SAApB,CAA8Ba,YAA9B,EAA4C,MAA5C,EAAoD,YAApD,EAAkE,sBAAlE,EAA0F,WAA1F,EAAuG,QAAvG,EAAiH,aAAjH,EAAgI,QAAhI,CAAf;AACAA,sBAAY,GAAG,8DAAoBZ,YAApB,CAAiCY,YAAjC,EAA+C,MAA/C,EAAuD,0DAAgBD,EAAvE,EAA2E,CAAC,aAAD,EAAgB,aAAhB,CAA3E,EAA2G,KAA3G,CAAf;AACAC,sBAAY,GAAG,8DAAoBZ,YAApB,CAAiCY,YAAjC,EAA+C,aAA/C,EAA8D,0DAAgBX,EAA9E,EAAkF,CAACzb,GAAD,CAAlF,EAAyF,KAAzF,CAAf;AACAoc,sBAAY,GAAG,8DAAoBZ,YAApB,CAAiCY,YAAjC,EAA+C,QAA/C,EAAyD,0DAAgBX,EAAzE,EAA6E,CAAC,SAAD,CAA7E,EAA0F,KAA1F,CAAf;AACAW,sBAAY,GAAG,8DAAoBV,WAApB,CAAgCU,YAAhC,EAA8C,aAA9C,EAA6D,+DAAqBT,IAAlF,CAAf;AACAS,sBAAY,GAAG,8DAAoBR,QAApB,CAA6BQ,YAA7B,EAA2C,EAA3C,CAAf;AAEA,iBAAO,kDAAY,4DAAkBP,kBAAlB,CAAqC,KAAKZ,aAA1C,EAAyD,KAAKE,QAA9D,EAAwE,KAAKD,OAA7E,EAAsFE,MAAtF,EAA8Fc,SAA9F,CAAZ,EAAsHhe,IAAtH,CAA2H,+DAAQ,UAACme,UAAD,EAAgB;AACxJA,sBAAU,GAAG,OAAI,CAACC,QAAL,CAAcD,UAAd,CAAb;AACA,mBAAO,kDAAY,4DAAkBR,kBAAlB,CAAqC,OAAI,CAACZ,aAA1C,EAAyD,OAAI,CAACE,QAA9D,EAAwE,OAAI,CAACD,OAA7E,EAAsFE,MAAtF,EAA8FgB,YAA9F,CAAZ,EAAyHle,IAAzH,CAA8H,+DAAQ,UAACqe,aAAD,EAAmB;AAC9JA,2BAAa,GAAG,OAAI,CAACD,QAAL,CAAcC,aAAd,CAAhB;AACA,kBAAM7L,YAAY,GAAG2L,UAAU,CAACG,MAAX,CAAkBD,aAAlB,EAAiCnO,IAAjC,CAAsC,UAACC,CAAD,EAAIrF,CAAJ;AAAA,uBAAUA,CAAC,CAAC,WAAD,CAAD,GAAiBqF,CAAC,CAAC,WAAD,CAA5B;AAAA,eAAtC,CAArB;AACA9O,qBAAO,CAACC,GAAR,CAAY,iBAAiBQ,GAA7B;AACAT,qBAAO,CAACC,GAAR,CAAYkR,YAAZ;AACA,qBAAO,gDAAGA,YAAH,CAAP;AACD,aANoI,CAA9H,CAAP;AAOD,WATiI,CAA3H,CAAP;AAUD;;;iCACQ+L,K,EAAU;AACjB,cAAMC,MAAM,GAAG,EAAf;;AADiB,uDAEAD,KAFA;AAAA;;AAAA;AAEjB,sEAAwB;AAAA,kBAAb3J,EAAa;;AACtB,kBAAIA,EAAE,CAAC6J,IAAH,KAAY,aAAZ,IAA6B7J,EAAE,CAACnK,MAAH,GAAY,CAA7C,EAAgD;AAC9C,oBAAIrK,WAAW,GAAGwU,EAAE,CAACxU,WAArB;;AACA,oBAAIwU,EAAE,CAAC6J,IAAH,KAAY,aAAhB,EAA+B;AAC7Bre,6BAAW,GAAGwU,EAAE,CAACkJ,oBAAjB;AACD,iBAFD,MAEO,IAAIlJ,EAAE,CAAC6J,IAAH,KAAY,YAAhB,EAA8B;AACnCre,6BAAW,GAAGwU,EAAE,CAAC9M,QAAjB;AACD;;AACD0W,sBAAM,CAACvO,IAAP,CACE;AACE9P,sBAAI,EAAEyU,EAAE,CAAC6J,IADX;AAEEC,uBAAK,EAAE9J,EAAE,CAAC+J,UAFZ;AAGE3C,wBAAM,EAAE,CAHV;AAIEvR,wBAAM,EAAEmK,EAAE,CAACnK,MAJb;AAKEnK,wBAAM,EAAEsU,EAAE,CAACtU,MALb;AAMEF,6BAAW,EAAEA,WANf;AAOEO,sBAAI,EAAEiU,EAAE,CAACgK,oBAPX;AAQE3F,2BAAS,EAAErE,EAAE,CAACqE;AARhB,iBADF;AAYD;AACF;AAvBgB;AAAA;AAAA;AAAA;AAAA;;AAwBjB,iBAAOuF,MAAP;AACD;;;;;;;uBAhGU1B,c;AAAc,K;;;aAAdA,c;AAAc,eAAdA,cAAc,K;AAAA,kBAFb;;;;;sEAEDA,c,EAAc;cAH1B,wDAG0B;eAHf;AACV+B,oBAAU,EAAE;AADF,S;AAGe,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACQ3B,QAAKC,KAAL;;AAAA,eAAKA,KAAL,EAAU;AACR;AACA;AACA;AACD,KAJD,EAAKA,KAAK,KAALA,KAAK,MAAV;;QAOaC,kB;AAOX,kCACUvf,eADV,EAEU2c,aAFV,EAGU3f,aAHV,EAIUwiB,cAJV,EAKUC,eALV,EAMUvd,gBANV,EAOUwd,iBAPV,EAO8C;AAAA;;AANpC,aAAA1f,eAAA,GAAAA,eAAA;AACA,aAAA2c,aAAA,GAAAA,aAAA;AACA,aAAA3f,aAAA,GAAAA,aAAA;AACA,aAAAwiB,cAAA,GAAAA,cAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAvd,gBAAA,GAAAA,gBAAA;AACA,aAAAwd,iBAAA,GAAAA,iBAAA;AAbV,aAAAC,SAAA,GAA8B,IAAIthB,GAAJ,EAA9B,CAa8C,CAbQ;;AACtD,aAAAuhB,oBAAA,GAAuB,KAAvB,CAY8C,CAZhB;;AAC9B,aAAAC,kBAAA,GAAqB,IAArB,CAW8C,CAXnB;;AAE3B,aAAAC,iBAAA,GAAoB,MAApB,CAS8C,CATlB;AAUxB;;;;mCACO;AACT,cAAI,KAAK9iB,aAAL,CAAmBa,MAAvB,EAA+B;AAC7B,iBAAKkiB,QAAL,GAAgB,KAAK/iB,aAAL,CAAmBa,MAAnB,CAA0B+e,WAA1B,EAAhB;;AACA,iBAAK,IAAIoD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKD,QAAL,CAAcva,MAAlC,EAA0Cwa,CAAC,EAA3C,EAA+C;AAC7C,mBAAK7Q,KAAL,CAAW,KAAK4Q,QAAL,CAAcC,CAAd,EAAiB9f,OAA5B;AACD;;AACD,iBAAK+f,QAAL;AACD,WAND,MAMO;AACLpe,mBAAO,CAACC,GAAR,CAAY,iBAAZ;AACD;AACF;;;mCACU;AAAA;;AACT,cAAI,CAAC,KAAKoe,cAAV,EAA0B;AACxBre,mBAAO,CAACC,GAAR,CAAY,qBAAZ;AACA,iBAAK6a,aAAL,CAAmBwD,SAAnB;AACA,iBAAKD,cAAL,GAAsBzf,WAAW,CAC/B;AAAA,qBAAM,OAAI,CAACkc,aAAL,CAAmBwD,SAAnB,EAAN;AAAA,aAD+B,EAE/B,KAAKL,iBAF0B,CAAjC;AAID;AACF;;;8BACWxd,G,EAAa;;;;;;;;;AACvB,wBAAIA,GAAG,IAAI,CAAC,KAAKqd,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,CAAZ,EAAqC;AACnC,2BAAKyd,QAAL,GAAgB,KAAK/iB,aAAL,CAAmBa,MAAnB,CAA0B+e,WAA1B,EAAhB;AACA/a,6BAAO,CAACC,GAAR,CAAY,qBAAqB,KAAK6d,SAAL,CAAetI,IAApC,GAA2C,GAA3C,GAAiD/U,GAA7D;AACM8d,kCAH6B,GAGA;AACjC9d,2BAAG,EAAEA,GAD4B;AAEjC+d,6BAAK,EAAEf,KAAK,CAACgB,QAFoB;AAGjCC,gCAAQ,EAAE9f,WAAW,CACnB;AAAA,iCAAM,OAAI,CAAC+f,MAAL,CAAYle,GAAZ,CAAN;AAAA,yBADmB,EAEnB,KAAKsd,oBAFc,CAHY;AAOjCa,oCAAY,EAAE;AAPmB,uBAHA;AAYnC,2BAAKd,SAAL,CAAee,GAAf,CAAmBpe,GAAnB,EAAwB8d,YAAxB;AACA,2BAAKI,MAAL,CAAYle,GAAZ;AACA,2BAAKqe,iBAAL,CAAuBre,GAAvB;AACD;;;;;;;;;AACF;;;8BACWA,G,EAAmC;AAAA,cAAtBmG,QAAsB,uEAAN,IAAM;;;;;;;;;AAC7C;AACA5G,2BAAO,CAACC,GAAR,CAAY,WAAWQ,GAAvB;;yBACI,KAAKtF,aAAL,CAAmBqD,aAAnB,CAAiCiC,GAAjC,C;;;;;AACF,wBAAImG,QAAJ,EAAc;AACZ,2BAAKmY,wBAAL,CAA8Bte,GAA9B,EAAmCmG,QAAnC;AACD;;wBACI,KAAKkX,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,C;;;;;;AACH,2BAAM,KAAK6M,KAAL,CAAW7M,GAAX,CAAN;;;AAEF,wBAAI,KAAKqd,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,EAAwB+d,KAAxB,KAAkCf,KAAK,CAACuB,IAA5C,EAAkD;AAChD,2BAAKC,WAAL,CAAiBxe,GAAjB,EAAsBgd,KAAK,CAACuB,IAA5B;AACA,2BAAKL,MAAL,CAAYle,GAAZ;AACM8M,6BAH0C,GAGhC,KAAKuQ,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,EAAwBme,YAHQ;AAIhD/Z,gCAAU,CAAC,YAAM;AACf;AACA,4BACE,OAAI,CAACiZ,SAAL,IACA,OAAI,CAACA,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,EAAwBme,YAAxB,KAAyCrR,OAF3C,EAGE;AACAvN,iCAAO,CAACC,GAAR,CAAY,yBAAZ;;AACA,iCAAI,CAACgf,WAAL,CAAiBxe,GAAjB,EAAsBgd,KAAK,CAACgB,QAA5B;AACD;AACF,uBATS,EASP,MATO,CAAV;AAUD;;;;;;;;;AAEJ;;;+BACYhe,G,EAAK;;;;;;;;AAChB,yBAAKye,QAAL,CAAcze,GAAd,EAAmB,KAAKsd,oBAAxB;AACA,yBAAK5f,eAAL,CAAqBghB,kBAArB,CAAwC1e,GAAxC,EAA6CtE,SAA7C,CACE,UAACyE,GAAD,EAAc;AACZ,8BAAQ,OAAI,CAACkd,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,IAA0B,OAAI,CAACqd,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,EAAwB+d,KAAlD,GAA0D,CAAC,CAAnE;AACE,6BAAKf,KAAK,CAACgB,QAAX;AAAqB;AACnB,gCAAI,CAAC7d,GAAG,CAACmZ,QAAT,EAAmB;AACjB,qCAAI,CAACkF,WAAL,CAAiBxe,GAAjB,EAAsBgd,KAAK,CAAC2B,QAA5B;AACD;;AACD;AACD;;AACD,6BAAK3B,KAAK,CAACuB,IAAX;AAAiB;AACf,gCAAI,CAACpe,GAAG,CAACmZ,QAAT,EAAmB;AACjB,qCAAI,CAACkF,WAAL,CAAiBxe,GAAjB,EAAsBgd,KAAK,CAAC2B,QAA5B;AACD,6BAFD,MAEO;AACL,qCAAI,CAACF,QAAL,CAAcze,GAAd,EAAmB,OAAI,CAACud,kBAAxB;AACD;;AACD;AACD;;AACD,6BAAKP,KAAK,CAAC2B,QAAX;AAAqB;AACnB,gCAAIxe,GAAG,CAACmZ,QAAR,EAAkB;AAChB,qCAAI,CAACkF,WAAL,CAAiBxe,GAAjB,EAAsBgd,KAAK,CAACgB,QAA5B;AACD,6BAFD,MAEO;AACL,qCAAI,CAACS,QAAL,CAAcze,GAAd,EAAmB,OAAI,CAACud,kBAAxB;AACD;;AACD;AACD;;AACD;AAAS;AACPhe,mCAAO,CAACC,GAAR,CAAY,iBAAZ;AACA;AACD;AA1BH;;AA4BA,0BAAMof,GAAG,GAAG,OAAI,CAAClkB,aAAL,CAAmBa,MAAnB,CAA0B0C,UAA1B,CAAqC+B,GAArC,CAAZ;;AACA,0BAAI4e,GAAG,IAAIA,GAAG,CAACjF,UAAJ,CAAezW,MAA1B,EAAkC;AAChC,4BAAM2b,cAAc,GAAGD,GAAG,CAACjF,UAAJ,CAAe,CAAf,CAAvB;;AACA,4BAAIkF,cAAc,CAAC3E,MAAf,KAA0B,CAA9B,EAAiC;AAC/B,8BAAM4E,GAAG,GAAG,IAAI7G,IAAJ,GAAWC,OAAX,KAAuB,IAAID,IAAJ,CAAS4G,cAAc,CAAC1H,SAAxB,EAAmCe,OAAnC,EAAnC;;AACA,8BAAI4G,GAAG,GAAG,MAAV,EAAkB;AAChBF,+BAAG,CAACjF,UAAJ,CAAepL,KAAf;AACD;AACF;AACF;AACF,qBAxCH,EAyCE,UAAAxN,GAAG;AAAA,6BAAIxB,OAAO,CAACC,GAAR,CAAY,wBAAwBoB,IAAI,CAACC,SAAL,CAAeE,GAAf,CAApC,CAAJ;AAAA,qBAzCL,EA0CE,YAAM;AACJxB,6BAAO,CAACC,GAAR,mBAAuB,OAAI,CAACie,QAAL,CAAc9G,SAAd,CAAwB,UAACtI,CAAD;AAAA,+BAAOA,CAAC,CAACzQ,OAAF,KAAcoC,GAArB;AAAA,uBAAxB,CAAvB,eACE,OAAO,OAAI,CAACqd,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,EAAwB+d,KAA/B,KAAyC,WAAzC,GAAuD,OAAI,CAACV,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,EAAwB+d,KAA/E,GAAuF,GADzF;AAED,qBA7CH;;;;;;;;;AA+CD;;;oCACW/d,G,EAAa+e,Q,EAAiB;AAAA;;AACxC,cAAMjB,YAAY,GAAiB,KAAKT,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,CAAnC;AACA8d,sBAAY,CAACC,KAAb,GAAqBgB,QAArB;;AACA,cAAIA,QAAQ,KAAK/B,KAAK,CAACgB,QAAnB,IAA+Be,QAAQ,KAAK/B,KAAK,CAAC2B,QAAtD,EAAgE;AAC9D,iBAAKN,iBAAL,CAAuBre,GAAvB;AACD;;AACD,cAAI+e,QAAQ,KAAK/B,KAAK,CAACuB,IAAnB,IAA2BQ,QAAQ,KAAK/B,KAAK,CAAC2B,QAAlD,EAA4D;AAC1DK,yBAAa,CAAClB,YAAY,CAACG,QAAd,CAAb;AACAH,wBAAY,CAACG,QAAb,GAAwB9f,WAAW,CACjC;AAAA,qBAAM,OAAI,CAAC+f,MAAL,CAAYle,GAAZ,CAAN;AAAA,aADiC,EAEjC,KAAKud,kBAF4B,CAAnC;AAID;;AACDO,sBAAY,CAACK,YAAb;AACA,eAAKd,SAAL,CAAee,GAAf,CAAmBpe,GAAnB,EAAwB8d,YAAxB;AACD;;;iCACQ9d,G,EAAaif,I,EAAc;AAAA;;AAClC,cAAMnB,YAAY,GAAiB,KAAKT,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,CAAnC;;AACA,cAAI8d,YAAY,CAACG,QAAjB,EAA2B;AACzBe,yBAAa,CAAClB,YAAY,CAACG,QAAd,CAAb;AACD;;AACDH,sBAAY,CAACG,QAAb,GAAwB9f,WAAW,CAAC;AAAA,mBAAM,OAAI,CAAC+f,MAAL,CAAYle,GAAZ,CAAN;AAAA,WAAD,EAAyBif,IAAzB,CAAnC;AACA,eAAK5B,SAAL,CAAee,GAAf,CAAmBpe,GAAnB,EAAwB8d,YAAxB;AACD;;;kCACS;AACR,cAAI,KAAKpjB,aAAL,CAAmBa,MAAvB,EAA+B;AAC7BgE,mBAAO,CAACC,GAAR,CAAY,qBAAZ;;AACA,iBACE,IAAIke,CAAC,GAAG,CADV,EAEEA,CAAC,GAAG,KAAKD,QAAL,CAAcva,MAFpB,EAGEwa,CAAC,EAHH,EAIE;AACA,mBAAKwB,IAAL,CAAU,KAAKzB,QAAL,CAAcC,CAAd,EAAiB9f,OAA3B;AACD;;AACDohB,yBAAa,CAAC,KAAKpB,cAAN,CAAb;AACA,iBAAKA,cAAL,GAAsB,IAAtB;AACD;AACF;;;6BACU5d,G,EAAK;;;;;;AACdT,2BAAO,CAACC,GAAR,CACE,oBAAoB,KAAKie,QAAL,CAAc9G,SAAd,CAAwB,UAACtI,CAAD;AAAA,6BAAOA,CAAC,CAACzQ,OAAF,KAAcoC,GAArB;AAAA,qBAAxB,CADtB;AAGAgf,iCAAa,CAAC,KAAK3B,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,EAAwBie,QAAzB,CAAb;AACA,yBAAKZ,SAAL,CAAephB,GAAf,CAAmB+D,GAAnB,EAAwBie,QAAxB,GAAmC,IAAnC;AACA,yBAAKZ,SAAL,WAAsBrd,GAAtB;;;;;;;;;AACD;;;0CACiBA,G,EAAa;AAAA;;AAC7B;AACAT,iBAAO,CAACC,GAAR,CAAY,6BAA6BQ,GAAzC;AACA,eAAKJ,gBAAL,CAAsB3B,UAAtB,CAAiC+B,GAAjC,EAAsCtE,SAAtC,CAAgD,UAACyE,GAAD,EAAc;AAC5D,gBAAIA,GAAG,CAACC,OAAR,EAAiB;AACf,qBAAI,CAAC8c,cAAL,CAAoBzC,oBAApB,CACE,OAAI,CAAC/f,aAAL,CAAmBa,MAAnB,CAA0B0C,UAA1B,CAAqC+B,GAArC,CADF,EAEEkG,MAAM,CAAC/F,GAAG,CAACE,OAAJ,CAAY2M,OAAb,CAFR;;AAIA,kBAAM4R,GAAG,GAAG,OAAI,CAAClkB,aAAL,CAAmBa,MAAnB,CAA0B0C,UAA1B,CAAqC+B,GAArC,CAAZ;;AACA,qBAAI,CAACmd,eAAL,CAAqBgC,sBAArB,CAA4CP,GAA5C,EAAiDze,GAAG,CAACE,OAAJ,CAAY2F,QAA7D;AACD,aAPD,MAOO;AACLzG,qBAAO,CAACC,GAAR,CAAY,yCAAZ,EAAuDW,GAAG,CAACE,OAAJ,CAAYM,GAAnE;AACD;AACF,WAXD;AAYD;;;iDACwBye,I,EAAcjZ,Q,EAAe;AACpD,cAAIA,QAAQ,CAACuK,YAAb,EAA2B;AACzBnR,mBAAO,CAACC,GAAR,CAAY,2BAAZ;AACAD,mBAAO,CAACC,GAAR,CAAY2G,QAAQ,CAACuK,YAArB;;AAFyB,yDAGRvK,QAAQ,CAACuK,YAHD;AAAA;;AAAA;AAGzB,wEAAwC;AAAA,oBAA7BpK,EAA6B;AACtC,oBAAMlI,WAAW,GAAG;AAClBC,sBAAI,EAAE,aADY;AAElB6b,wBAAM,EAAE,CAFU;AAGlBvR,wBAAM,EAAE,8CAAIrC,EAAE,CAACqC,MAAP,EAAe0W,KAAf,CAAqB,OAArB,EAA8Bzd,QAA9B,EAHU;AAIlB8C,qBAAG,EAAE,IAJa;AAKlBlG,wBAAM,EAAE4gB,IALU;AAMlB9gB,6BAAW,EAAEgI,EAAE,CAAC8L,EANE;AAOlBvT,sBAAI,EAAEsH,QAAQ,CAAC7F,MAPG;AAQlBsc,uBAAK,EAAE,IARW;AASlBzF,2BAAS,EAAE,IAAIc,IAAJ,GAAWC,OAAX;AATO,iBAApB;AAWA,oBAAIla,OAAO,GAAG,KAAKtD,aAAL,CAAmBa,MAAnB,CAA0B0C,UAA1B,CAAqCmhB,IAArC,CAAd;AACAphB,uBAAO,CAAC2b,UAAR,CAAmB2F,OAAnB,CAA2BlhB,WAA3B;AACAJ,uBAAO,GAAG,KAAKtD,aAAL,CAAmBa,MAAnB,CAA0B0C,UAA1B,CAAqCqI,EAAE,CAAC8L,EAAxC,CAAV;;AACA,oBAAIpU,OAAJ,EAAa;AACXA,yBAAO,CAAC2b,UAAR,CAAmB2F,OAAnB,CAA2BlhB,WAA3B;AACD;AACF;AArBwB;AAAA;AAAA;AAAA;AAAA;AAsB1B,WAtBD,MAsBO,IAAI+H,QAAQ,CAACH,QAAT,KAAsB2U,SAA1B,EAAqC;AAC1C,gBAAM4E,UAAU,GAAG;AACjBlhB,kBAAI,EAAE,YADW;AAEjB6b,oBAAM,EAAE,CAFS;AAGjBvR,oBAAM,EAAE,IAHS;AAIjBjE,iBAAG,EAAE,IAJY;AAKjBlG,oBAAM,EAAE4gB,IALS;AAMjB9gB,yBAAW,EAAE6H,QAAQ,CAACH,QANL;AAOjBnH,kBAAI,EAAEsH,QAAQ,CAAC7F,MAPE;AAQjBsc,mBAAK,EAAE,IARU;AASjBzF,uBAAS,EAAE,IAAIc,IAAJ,GAAWC,OAAX;AATM,aAAnB;;AAWA,gBAAMla,QAAO,GAAG,KAAKtD,aAAL,CAAmBa,MAAnB,CAA0B0C,UAA1B,CAAqCmhB,IAArC,CAAhB;;AACAphB,oBAAO,CAAC2b,UAAR,CAAmB2F,OAAnB,CAA2BC,UAA3B;AACD,WAdM,MAcA;AACLhgB,mBAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,mBAAO,CAACC,GAAR,CAAY2G,QAAZ;AACD;AACF;;;;;;;uBA3OU8W,kB,EAAkB,kI,EAAA,4H,EAAA,4H,EAAA,+H,EAAA,kI,EAAA,qI,EAAA,oI;AAAA,K;;;aAAlBA,kB;AAAkB,eAAlBA,kBAAkB;;;;;sEAAlBA,kB,EAAkB;cAD9B;AAC8B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxB/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMauC,e;AACX,+BACU9kB,aADV,EAEUkF,gBAFV,EAE4C;AAAA;;AADlC,aAAAlF,aAAA,GAAAA,aAAA;AACA,aAAAkF,gBAAA,GAAAA,gBAAA;AACN;;;;uCACW;AACb,cACE,KAAKlF,aAAL,CAAmBa,MAAnB,IACA,KAAKb,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAF5B,EAGE;AAAA,yDACsB,KAAK5E,aAAL,CAAmBa,MAAnB,CAA0B+e,WAA1B,EADtB;AAAA;;AAAA;AACA,wEAA+D;AAAA,oBAApDtc,OAAoD;AAC7D,qBAAKiI,WAAL,CAAiBjI,OAAjB;AACD;AAHD;AAAA;AAAA;AAAA;AAAA;AAID;AACF;;;oCACWA,O,EAAkB;AAAA;;AAC5B,eAAK4B,gBAAL,CAAsBqG,WAAtB,CAAkCjI,OAAO,CAACJ,OAA1C,EAAmDlC,SAAnD,CACE,UAACvB,IAAD,EAAe;AACb,gBAAIA,IAAI,CAACiG,OAAT,EAAkB;AAChB,qBAAI,CAAC+e,sBAAL,CAA4BnhB,OAA5B,EAAqC7D,IAAI,CAACkG,OAAL,CAAa2F,QAAlD;AACD;AACF,WALH,EAME,UAACjF,GAAD;AAAA,mBAASxB,OAAO,CAACC,GAAR,CAAYoB,IAAI,CAACC,SAAL,CAAeE,GAAf,CAAZ,CAAT;AAAA,WANF;AAQD;;;+CACsB/C,O,EAAkB7D,I,EAAW;AAClD,cAAIA,IAAJ,EAAU;AACR,gBAAI6D,OAAO,CAACgI,QAAR,KAAqB7L,IAAzB,EAA+B;AAC7B6D,qBAAO,CAACgI,QAAR,GAAmB7L,IAAnB;AACA,mBAAKO,aAAL,CAAmBgU,WAAnB;AACD,aAHD,MAGO;AACLnP,qBAAO,CAACC,GAAR,CAAY,kBAAkBxB,OAAO,CAACJ,OAA1B,GAAoC,aAAhD;AACD;AACF,WAPD,MAOO;AACL,gBAAII,OAAO,CAACgI,QAAR,KAAqB,EAAzB,EAA6B;AAC3BhI,qBAAO,CAACgI,QAAR,GAAmB,EAAnB;AACA,mBAAKtL,aAAL,CAAmBgU,WAAnB;AACD;AACF;AACF;;;;;;;uBAvCU8Q,e,EAAe,4H,EAAA,qI;AAAA,K;;;aAAfA,e;AAAe,eAAfA,eAAe;;;;;sEAAfA,e,EAAe;cAD3B;AAC2B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCGfC,iB;AACX,qCAAc;AAAA;AAAG;;;;kCACHC,S,EAAgBxa,Q,EAAkBgG,O,EAAoC;AAAA,gBAAnByU,IAAmB,uEAAJ,IAAI;;;;;;4BAC9EzU,OAAO,KAAK,C;;;;;4BACR,IAAItR,KAAJ,CAAU,wCAAV,C;;;4BACGsR,OAAO,KAAK,C;;;;;yDACd,KAAK0U,UAAL,CAAgBF,SAAhB,EAA2Bxa,QAA3B,C;;;4BACEgG,OAAO,KAAK,C;;;;;yDACd,KAAK0U,UAAL,CAAgBF,SAAhB,EAA2Bxa,QAA3B,EAAqCya,IAArC,C;;;4BAED,IAAI/lB,KAAJ,CAAU,gCAAV,C;;;;;;;;;AAET;;;kCACaimB,W,EAAqB3a,Q,EAAkBya,I,EAAczU,O,EAAe;;;;;;4BAC5EA,OAAO,KAAK,C;;;;;yDACP,KAAK4U,UAAL,CAAgBD,WAAhB,EAA6B3a,QAA7B,EAAuCya,IAAvC,C;;;4BACEzU,OAAO,KAAK,CAAZ,IAAiBA,OAAO,KAAK,C;;;;;yDAC/B,KAAK6U,UAAL,CAAgBF,WAAhB,EAA6B3a,QAA7B,EAAuCya,IAAvC,C;;;4BAED,IAAI/lB,KAAJ,CAAU,gCAAV,C;;;;;;;;;AAET,W,CACD;;;;qCACiB8lB,S,EAAgBxa,Q,EAAkBya,I,EAAY;;;;;;yDACtD,IAAIlmB,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,4BAAI;AACF,8BAAI,CAACwL,QAAD,IAAa,CAACya,IAAlB,EAAwB;AACtB,kCAAM,IAAI/lB,KAAJ,CAAU,0BAAV,CAAN;AACD;;AACD,wEAAcsL,QAAd,EAAwBya,IAAxB,EAA8B,KAA9B,EAAqC,EAArC,EAAyC,QAAzC,EAAmD,UAAC5e,GAAD,EAAMK,GAAN,EAAc;AAC/D,gCAAIL,GAAJ,EAAS;AACP,oCAAOA,GAAP;AACD;;AACD,gCAAMif,MAAM,GAAG,IAAI,uDAAoBC,GAAxB,CAA4B7e,GAA5B,CAAf;AACA,gCAAIye,WAAW,GAAGG,MAAM,CAACE,OAAP,CAAeR,SAAf,CAAlB;AACAG,uCAAW,GAAG,6CAAUM,GAAV,CAAcC,SAAd,CAAwBP,WAAxB,CAAd;AACAnmB,mCAAO,CAACmmB,WAAD,CAAP;AACD,2BARD;AASD,yBAbD,CAaE,OAAO1mB,CAAP,EAAU;AACVoG,iCAAO,CAAC8gB,IAAR,CAAalnB,CAAb;AACAO,iCAAO,CAAC,EAAD,CAAP;AACD;AACF,uBAlBM,C;;;;;;;;;AAmBR;;;qCACgBmmB,W,EAAqB3a,Q,EAAkBya,I,EAAY;;;;;;yDAC3D,IAAIlmB,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,4BAAI;AACF,8BAAI,CAACwL,QAAD,IAAa,CAACya,IAAlB,EAAwB;AACtB,kCAAM,IAAI/lB,KAAJ,CAAU,0BAAV,CAAN;AACD;;AACD,wEAAcsL,QAAd,EAAwBya,IAAxB,EAA8B,KAA9B,EAAqC,EAArC,EAAyC,QAAzC,EAAmD,UAAC5e,GAAD,EAAMK,GAAN,EAAc;AAC/D,gCAAIL,GAAJ,EAAS;AACP,oCAAOA,GAAP;AACD;;AACD8e,uCAAW,GAAG,6CAAUM,GAAV,CAAcG,OAAd,CAAsBT,WAAtB,CAAd;AACA,gCAAMG,MAAM,GAAG,IAAI,uDAAoBC,GAAxB,CAA4B7e,GAA5B,CAAf;AACA,gCAAMse,SAAS,GAAGM,MAAM,CAACO,OAAP,CAAeV,WAAf,CAAlB;AACAnmB,mCAAO,CAACgmB,SAAD,CAAP;AACD,2BARD;AASD,yBAbD,CAaE,OAAOvmB,CAAP,EAAU;AACVO,iCAAO,CAAC,EAAD,CAAP;AACD;AACF,uBAjBM,C;;;;;;;;;AAkBR,W,CACD;;;;qCACiBgmB,S,EAAmBxa,Q,EAAkBya,I,EAAa;;;;;;;0BAC5Dza,Q;;;;;4BACG,IAAItL,KAAJ,CAAU,kBAAV,C;;;AAGR,0BAAI+lB,IAAJ,EAAU;AACRa,6BAAK,GAAG,IAAIC,MAAJ,CAAWd,IAAX,EAAiB,KAAjB,CAAR;AACD,uBAFD,MAEO;AACLa,6BAAK,GAAG,8DAAoB,EAApB,CAAR;AACD;;;AACW,6BAAM,+CAAatb,QAAb,EAAuBsb,KAAvB,EAA8B,KAA9B,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,EAA3C,CAAN;;;AAANpf,yB;AACAsf,4B,GAAc,kDAAaC,YAAb,CAA0B,SAA1B,EAAqCvf,GAAG,CAACQ,QAAJ,CAAa,QAAb,CAArC,C;AACpB8e,4BAAM,CAAC7T,KAAP,CAAa;AACXxB,0BAAE,EAAEmV;AADO,uBAAb;AAGMI,sC,GAAmB,gDAAWC,YAAX,CAAwBnB,SAAS,CAAC9d,QAAV,CAAmB,QAAnB,CAAxB,EAAsD,OAAtD,C;AACzB8e,4BAAM,CAACxC,MAAP,CAAc0C,gBAAd;AACAF,4BAAM,CAACI,MAAP;AACMjB,iC,GAAca,MAAM,CAAChE,MAAP,CAAcqE,KAAd,KAAwB,IAAxB,GAA+BL,MAAM,CAACM,IAAP,CAAYC,GAAZ,CAAgBF,KAAhB,E;yDAC5C;AAAElB,mCAAW,EAAEA,WAAf;AAA4BxU,0BAAE,EAAEmV,KAAK,CAAC5e,QAAN,CAAe,KAAf;AAAhC,uB;;;;;;;;;AACR;;;qCACgBsf,O,EAAiBhc,Q,EAAkBya,I,EAAY;;;;;;;;;4BAExD,CAACza,QAAD,IAAa,CAACya,I;;;;;4BACV,IAAI/lB,KAAJ,CAAU,0BAAV,C;;;AAEF4X,2B,GAAQ0P,OAAO,CAACvT,KAAR,CAAc,IAAd,C;AACRkS,iC,GAAcrO,KAAK,CAAC,CAAD,C;AACnByP,yB,GAAMzP,KAAK,CAAC,CAAD,C;;AACL,6BAAM,+CAAatM,QAAb,EAAuB,IAAIub,MAAJ,CAAWd,IAAX,EAAiB,KAAjB,CAAvB,EAAgD,KAAhD,EAAuD,CAAvD,EAA0D,CAA1D,EAA6D,EAA7D,CAAN;;;AAANve,yB;AACA+f,8B,GAAgB,kDAAaC,cAAb,CAA4B,SAA5B,EAAuChgB,GAAG,CAACQ,QAAJ,CAAa,QAAb,CAAvC,C;AACtBuf,8BAAQ,CAACtU,KAAT,CAAe;AACbxB,0BAAE,EAAE,IAAIoV,MAAJ,CAAWd,IAAX,EAAiB,KAAjB,CADS;AAEbsB,2BAAG,EAAE,gDAAWJ,YAAX,CAAyB,IAAIJ,MAAJ,CAAWQ,GAAX,EAAgB,KAAhB,CAAD,CAAyBrf,QAAzB,CAAkC,QAAlC,CAAxB,EAAqE,OAArE;AAFQ,uBAAf;AAIAuf,8BAAQ,CAACjD,MAAT,CAAgB,gDAAW2C,YAAX,CAAyB,IAAIJ,MAAJ,CAAWZ,WAAX,EAAwB,KAAxB,CAAD,CAAiCje,QAAjC,CAA0C,QAA1C,CAAxB,EAA6E,OAA7E,CAAhB;AACMyf,0B,GAAOF,QAAQ,CAACL,MAAT,E;;2BACTO,I;;;;;yDACK,IAAIZ,MAAJ,CAAWU,QAAQ,CAACzE,MAAT,CAAgBqE,KAAhB,EAAX,EAAoC,KAApC,C;;;yDAEA,I;;;;;;;;;yDAGF,I;;;;;;;;;AAEV;;;iCACMpB,I,EAAc2B,K,EAAe;AAClC,gBAAIA,KAAK,GAAG,GAAZ,EAAiB;AACf,oBAAM,IAAI1nB,KAAJ,CAAU,sBAAV,CAAN;AACD;;AACD,gBAAM2nB,GAAG,GAAG,IAAId,MAAJ,CAAWd,IAAX,EAAiB,KAAjB,CAAZ;AACA4B,eAAG,CAAC,EAAD,CAAH,GAAU,CAACA,GAAG,CAAC,EAAD,CAAH,GAAU,CAAX,IAAgB,GAA1B;AACA,mBAAOA,GAAG,CAAC3f,QAAJ,CAAa,KAAb,CAAP;AACD;;;;;;;yBAtHU6d,iB;AAAiB,O;;;eAAjBA,iB;AAAiB,iBAAjBA,iBAAiB;;;;;wEAAjBA,iB,EAAiB;gBAD7B;AAC6B,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACD9B,QAAM+B,WAAW,GAAG;AAAEC,aAAO,EAAE;AAAE,wBAAgB;AAAlB;AAAX,KAApB;AACA,QAAMC,YAAY,GAAG,MAArB;AACA,QAAMC,gBAAgB,GAAG,KAAzB;;QAEaC,e;AAWX,+BACUhlB,IADV,EAEUgD,gBAFV,EAE4C;AAAA;;AADlC,aAAAhD,IAAA,GAAAA,IAAA;AACA,aAAAgD,gBAAA,GAAAA,gBAAA;AAZV,aAAAiiB,KAAA,GAAQ,EAAR;AACA,aAAA/mB,SAAA,GAAY,KAAK8E,gBAAL,CAAsB9E,SAAlC;AACA,aAAAgnB,cAAA,GAAiB,KAAjB;AACA,aAAAC,OAAA,GAAU,KAAKjnB,SAAL,CAAeiE,GAAf,CAAmBuX,QAA7B;AAUK;;;;6BACAzX,I,EAAcmjB,O,EAAiBlV,O,EAAiBmV,O,EAAiBpf,E,EAAY7C,G,EAAa;AAC7F,eAAKnB,IAAL,GAAYA,IAAZ;AACA,eAAKmjB,OAAL,GAAeA,OAAf;AACA,eAAKlV,OAAL,GAAeA,OAAf;AACA,eAAKmV,OAAL,GAAeA,OAAf;AACA,eAAKpf,EAAL,GAAUA,EAAV;AACA,eAAK7C,GAAL,GAAWA,GAAX;AACD;;;oCACiBA,G,EAAa6C,E,EAAY;;;;;;;;AACzC,yBAAK7C,GAAL,GAAWA,GAAX;AACA,yBAAK6C,EAAL,GAAUA,EAAV;;AACA,2BAAMpJ,OAAO,CAACyoB,GAAR,CAAY,CAAC,KAAKtiB,gBAAL,CAAsBuiB,SAAtB,GAAkCC,SAAlC,EAAD,EAAgD,KAAKC,UAAL,CAAgBriB,GAAhB,CAAhD,EAAsE,KAAKsiB,UAAL,CAAgBtiB,GAAhB,CAAtE,CAAZ,EAAyGrG,IAAzG,CAA8G,UAAAH,GAAG,EAAI;AACzH,0BAAIA,GAAG,CAAC,CAAD,CAAH,IAAUA,GAAG,CAAC,CAAD,CAAb,IAAqBA,GAAG,CAAC,CAAD,CAAxB,IAAgCA,GAAG,CAAC,CAAD,CAAH,KAAW,IAA/C,EAAqD;AACnD,+BAAI,CAACwK,IAAL,CAAUxK,GAAG,CAAC,CAAD,CAAH,CAAOqF,IAAjB,EAAuBrF,GAAG,CAAC,CAAD,CAAH,CAAO+oB,QAA9B,EAAwC/oB,GAAG,CAAC,CAAD,CAA3C,EAAgDA,GAAG,CAAC,CAAD,CAAnD,EAAwDqJ,EAAxD,EAA4D7C,GAA5D;AACD;AACF,qBAJK,CAAN;;;;;;;;;AAKD;;;iCACc0Q,Y,EAAmB0O,I,EAAc9L,Q,EAAU;;;;;;;;;;AACxD,yBAAKuO,KAAL,CAAW1T,IAAX,CAAgB;AAAEuC,kCAAY,EAAZA,YAAF;AAAgB0O,0BAAI,EAAJA,IAAhB;AAAsB9L,8BAAQ,EAARA;AAAtB,qBAAhB;;0BACI,KAAKuO,KAAL,CAAW3e,MAAX,KAAsB,C;;;;;;;;;;;AAEtB,qCAAO,OAAI,CAAC2e,KAAL,CAAW3e,MAAX,GAAoB,CAA3B,EAA8B;AAC5B,uCAAI,CAAC2e,KAAL,CAAW,CAAX,EAAcvO,QAAd,CAAuB,IAAvB;;AACA,uCAAI,CAACuO,KAAL,CAAWtT,KAAX;AACD;;AACGiU,mC,GAAQ,K;AACH9E,+B,GAAI,C;;;oCAAGA,CAAC,GAAG,CAAJ,IAAS8E,KAAK,IAAI9E,CAAC,GAAG,C;;;;;;AACpC,qCAAM,OAAI,CAAC+E,SAAL,CAAe,OAAI,CAACZ,KAAL,CAAW,CAAX,EAAcnR,YAA7B,EAA2C,OAAI,CAACmR,KAAL,CAAW,CAAX,EAAczC,IAAzD,EAA+DzlB,IAA/D,CAAoE,UAAC4G,GAAD,EAAS;AACjF,uCAAI,CAACshB,KAAL,CAAW,CAAX,EAAcvO,QAAd,CAAuB/S,GAAvB;AACD,+BAFK,WAEG,UAAOsG,KAAP;AAAA,uCAAiB;AAAA;AAAA;AAAA;AAAA;AAAA,gDACpBA,KAAK,CAACqB,OAAN,IAAiBrB,KAAK,CAACqB,OAAN,KAAkB,qDAAnC,IAA4F,CAACsa,KADzE;AAAA;AAAA;AAAA;;AAEtBjjB,iDAAO,CAACC,GAAR,CAAY,gBAAZ;AAFsB;AAGtB,iDAAM,KAAKuR,WAAL,CAAiB,KAAK/Q,GAAtB,EAA2B,KAAK6C,EAAhC,CAAN;;AAHsB;AAItB2f,+CAAK,GAAG,IAAR;AAJsB;AAAA;;AAAA;AAMtB,+CAAKX,KAAL,CAAW,CAAX,EAAcvO,QAAd,CAAuB;AAAEzM,iDAAK,EAALA;AAAF,2CAAvB;;AANsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAjB;AAAA,+BAFH,CAAN;;;AADuC6W,+BAAC,E;;;;;AAa1C,qCAAI,CAACmE,KAAL,CAAWtT,KAAX;;;;;;;;;;;0BAnBK,KAAKsT,KAAL,CAAW3e,MAAX,GAAoB,C;;;;;;;;;;;;;;;;;;AAsB9B;;;kCACewN,Y,EAAmB0O,I,EAAY;;;;;;;;;;AACvCsD,4B,GAAW,E;;wBACZ,KAAK7jB,I;;;;;uDAAe,I;;;AACnB8jB,8B,GAAa;AACjBje,yBAAG,EAAE,CADY;AAEjBuN,8BAAQ,EAAEyP,YAFO;AAGjBxP,kCAAY,EAAEyP;AAHG,qB;6DAKFjR,Y;;;AAAjB,gFAA+B;AAApBoC,0BAAoB;;AAC7B,4BAAI,CAACA,EAAE,CAACnK,MAAR,EAAgB;AACdmK,4BAAE,CAACnK,MAAH,GAAY,CAAZ;AACD;;AACD,4BAAImK,EAAE,CAACV,EAAH,CAAMnL,KAAN,CAAY,CAAZ,EAAe,CAAf,MAAsB,KAA1B,EAAiC;AAC/B6L,4BAAE,CAACnK,MAAH,GAAY,QAAZ;AACD;;AACDmK,0BAAE,CAACb,QAAH,GAAc0Q,UAAU,CAAC1Q,QAAzB;AACAa,0BAAE,CAACZ,YAAH,GAAkByQ,UAAU,CAACzQ,YAA7B;AACD;;;;;;;0BACG,KAAKrT,IAAL,IAAa,KAAKiO,OAAlB,KAA8B,KAAKmV,OAAL,IAAgB,KAAKA,OAAL,KAAiB,IAA/D,C;;;;;AACI3b,sB,GAAK,KAAK1G,gBAAL,CAAsBgjB,uBAAtB,CAA8C,KAAK/jB,IAAnD,EAAyD,KAAKiO,OAA9D,EAAuE,KAAKmV,OAA5E,EAAqFvR,YAArF,EACT,KAAK1Q,GADI,EACC,KAAK6C,EADN,EACUuc,IADV,EACgBuD,UAAU,CAACje,GAD3B,C;;AAEI,2BAAM,KAAKme,QAAL,CAAcvc,EAAd,EAAkB8b,SAAlB,YACnB,UAAAjpB,CAAC,EAAI;AACHoG,6BAAO,CAAC8gB,IAAR,CAAalnB,CAAb;AACA,6BAAO,IAAP;AACD,qBAJkB,CAAN;;;AAAT+S,0B;;0BAMFA,MAAM,IAAIA,MAAM,CAAC4W,Q;;;;;AACfhP,0B,GAAS,K;AACPiP,0B,GAAS,E;6DACO7W,MAAM,CAAC4W,Q;;;;;;;;;;;AAAlBE,2B;;0BACLA,OAAO,CAACrG,IAAR,KAAiB,Q;;;;;AACnB7I,0BAAM,GAAG,IAAT;;;;;0BAEIkP,OAAO,CAACrG,IAAR,KAAiB,aAAjB,IAAkCqG,OAAO,CAAC7c,QAAR,CAAiB8c,gBAAjB,CAAkC/I,MAAlC,KAA6C,S;;;;;uCAC9C,KAAKgJ,UAAL,CAAgBF,OAAhB,C,EAA3BG,Q,oBAAAA,Q,EAAUC,Y,oBAAAA,Y;AAClBL,0BAAM,CAAC5U,IAAP,CAAY;AAAE8D,8BAAQ,EAAEkR,QAAQ,GAAGT,QAAvB;AAAiCxQ,kCAAY,EAAEkR;AAA/C,qBAAZ;;;;;uDAEO,I;;;;;;;;;;;;;;;;;;;;;;;;;AAIN,2BAAM,KAAKxjB,gBAAL,CAAsByjB,UAAtB,CAAiC/c,EAAjC,EAAqCpI,IAArC,CAA0C,+DAAQ,UAAAolB,GAAG,EAAI;AACpE,0BAAMC,KAAK,GAAID,GAAG,CAACpgB,MAAJ,GAAa,CAAd,GAAmB,EAAjC;;AACA,0BAAMoM,GAAG,GAAG,OAAI,CAACkU,eAAL,CAAqBT,MAArB,CAAZ;;AACA,0BAAMxT,OAAO,GAAG,OAAI,CAACkU,mBAAL,CAAyBV,MAAzB,CAAhB;;AACA,0BAAMW,GAAG,GAA6B;AAAE/P,oCAAY,EAAEoP,MAAhB;AAAwBre,2BAAG,EAAE,OAAI,CAACif,YAAL,CAAkBZ,MAAlB,EAA0BjP,MAA1B,EAAkCyP,KAAlC,CAA7B;AAAuE/T,4BAAI,EAAE,OAAI,CAACW,OAAL,CAAa4S,MAAb,CAA7E;AAAmGzT,2BAAG,EAAHA,GAAnG;AAAwGC,+BAAO,EAAPA,OAAxG;AAAiHuE,8BAAM,EAANA;AAAjH,uBAAtC;AACAvU,6BAAO,CAACC,GAAR,CAAYoB,IAAI,CAACC,SAAL,CAAe6iB,GAAf,CAAZ;AACA,6BAAO,gDAAGA,GAAH,CAAP;AACD,qBAPsD,CAA1C,EAOTtB,SAPS,EAAN;;;;;;0BAQE,OAAOlW,MAAM,CAAC9L,OAAd,KAA0B,SAA1B,IAAuC8L,MAAM,CAAC9L,OAAP,KAAmB,K;;;;;AACnEb,2BAAO,CAACC,GAAR,CAAY0M,MAAZ;0BACM,IAAItS,KAAJ,CAAUsS,MAAM,CAAC7L,OAAP,CAAeM,GAAzB,C;;;uDAGH,I;;;;;;;;;AACR;;;mCACUqiB,O,EAAY;AACrB,cAAIG,QAAQ,GAAG,CAAf;AACA,cAAI3T,IAAI,GAAG,8CAAI,CAAJ,CAAX;;AACA,cAAIwT,OAAO,CAACxkB,MAAR,IAAkBwkB,OAAO,CAACxkB,MAAR,KAAmB,KAAKwB,GAA9C,EAAmD;AACjDwP,gBAAI,GAAGA,IAAI,CAACuC,KAAL,CAAWiR,OAAO,CAACra,MAAR,GAAiBqa,OAAO,CAACra,MAAzB,GAAkC,GAA7C,CAAP;AACA6G,gBAAI,GAAGA,IAAI,CAACuC,KAAL,CAAWiR,OAAO,CAACte,GAAR,GAAcse,OAAO,CAACte,GAAtB,GAA4B,GAAvC,CAAP;AACD;;AACD,cAAIse,OAAO,CAAC1kB,WAAR,IAAuB0kB,OAAO,CAAC1kB,WAAR,KAAwB,KAAK0B,GAAxD,EAA6D;AAC3DwP,gBAAI,GAAGA,IAAI,CAACqD,IAAL,CAAUmQ,OAAO,CAACra,MAAR,GAAiBqa,OAAO,CAACra,MAAzB,GAAkC,GAA5C,CAAP;AACD;;AACD,cAAIqa,OAAO,CAAC7c,QAAR,CAAiB8c,gBAAjB,CAAkCW,eAAtC,EAAuD;AAAA,yDACzBZ,OAAO,CAAC7c,QAAR,CAAiB8c,gBAAjB,CAAkCW,eADT;AAAA;;AAAA;AACrD,wEAA+E;AAAA,oBAApEC,aAAoE;;AAC7E,oBAAIA,aAAa,CAACC,QAAd,KAA2B,KAAK9jB,GAApC,EAAyC;AACvCwP,sBAAI,GAAGA,IAAI,CAACuC,KAAL,CAAW8R,aAAa,CAAC/I,MAAzB,CAAP;AACD;AACF;AALoD;AAAA;AAAA;AAAA;AAAA;AAMtD;;AACD,cAAIkI,OAAO,CAAC7c,QAAR,CAAiByd,eAArB,EAAsC;AAAA,yDACRZ,OAAO,CAAC7c,QAAR,CAAiByd,eADT;AAAA;;AAAA;AACpC,wEAA8D;AAAA,oBAAnDC,cAAmD;;AAC5D,oBAAIA,cAAa,CAACC,QAAd,KAA2B,KAAK9jB,GAApC,EAAyC;AACvCwP,sBAAI,GAAGA,IAAI,CAACuC,KAAL,CAAW8R,cAAa,CAAC/I,MAAzB,CAAP;AACD;AACF;AALmC;AAAA;AAAA;AAAA;AAAA;AAMrC;;AACDqI,kBAAQ,IAAIH,OAAO,CAAC7c,QAAR,CAAiB8c,gBAAjB,CAAkCc,YAAlC,GAAiD7d,MAAM,CAAC8c,OAAO,CAAC7c,QAAR,CAAiB8c,gBAAjB,CAAkCc,YAAnC,CAAvD,GAA0G,CAAtH;;AACA,cAAIf,OAAO,CAAC7c,QAAR,CAAiB6d,0BAArB,EAAiD;AAAA,yDAClBhB,OAAO,CAAC7c,QAAR,CAAiB6d,0BADC;AAAA;;AAAA;AAC/C,wEAA0E;AAAA,oBAA/DC,cAA+D;;AACxE,oBAAIA,cAAc,CAAC/X,MAAnB,EAA2B;AACzB,sBAAI+X,cAAc,CAAC/X,MAAf,CAAsB6X,YAA1B,EAAwC;AACtCZ,4BAAQ,IAAIc,cAAc,CAAC/X,MAAf,IAAyB+X,cAAc,CAAC/X,MAAf,CAAsB6X,YAA/C,GAA8D7d,MAAM,CAAC+d,cAAc,CAAC/X,MAAf,CAAsB6X,YAAvB,CAApE,GAA2G,CAAvH;AACD;;AAAC,sBAAIE,cAAc,CAAC/X,MAAf,CAAsB0X,eAA1B,EAA2C;AAAA,iEACfK,cAAc,CAAC/X,MAAf,CAAsB0X,eADP;AAAA;;AAAA;AAC3C,gFAAmE;AAAA,4BAAxDC,eAAwD;;AACjE,4BAAIA,eAAa,CAACC,QAAd,KAA2B,KAAK9jB,GAAhC,IAAuC6jB,eAAa,CAAC/I,MAAd,CAAqB7T,KAArB,CAA2B,CAA3B,EAA8B,CAA9B,MAAqC,GAAhF,EAAqF;AACnFuI,8BAAI,GAAGA,IAAI,CAACuC,KAAL,CAAW8R,eAAa,CAAC/I,MAAzB,CAAP;AACD;AACF;AAL0C;AAAA;AAAA;AAAA;AAAA;AAM5C;AACF;AACF;AAb8C;AAAA;AAAA;AAAA;AAAA;AAchD;;AACD,cAAMsI,YAAY,GAAGrV,IAAI,CAACqK,KAAL,CAAW5I,IAAI,GAAG,IAAlB,CAArB;;AACA,cAAI2T,QAAQ,GAAG,CAAX,IAAgBA,QAAQ,GAAGzB,YAA3B,IAA2C0B,YAAY,GAAG,CAA1D,IAA+DA,YAAY,GAAGzB,gBAAlF,EAAoG;AAClG,kBAAM,IAAI/nB,KAAJ,CAAU,yBAAV,CAAN;AACD;;AACD,iBAAO;AAAEupB,oBAAQ,EAARA,QAAF;AAAYC,wBAAY,EAAZA;AAAZ,WAAP;AACD;AACD;;;;;;qCAGaL,M,EAAajP,M,EAAiByP,K,EAAa;AACtD,cAAMW,UAAU,GAAG,GAAnB;AACA,cAAMC,UAAU,GAAG,CAAnB;AACA,cAAMC,aAAa,GAAG,GAAtB;AACA,cAAIC,QAAQ,GAAG,CAAf;AACA,cAAIC,kBAAkB,GAAG,CAAzB;;AACA,cAAIxQ,MAAJ,EAAY;AACVuQ,oBAAQ,IAAI,KAAKvC,cAAjB;AACAwC,8BAAkB;AACnB;;AATqD,uDAUnCvB,MAVmC;AAAA;;AAAA;AAUtD,sEAA2B;AAAA,kBAAhB5oB,IAAgB;AACzBkqB,sBAAQ,IAAIlqB,IAAI,CAAC8X,QAAjB;AACAqS,gCAAkB;AACnB;AAbqD;AAAA;AAAA;AAAA;AAAA;;AActDf,eAAK,IAAI,KAAKe,kBAAd,CAdsD,CAcpB;;AAClC,iBAAOpe,MAAM,CAAC,8CAAI6H,IAAI,CAACwW,IAAL,CAAUL,UAAU,GAAIC,UAAU,GAAGZ,KAA3B,GAAqCa,aAAa,GAAGC,QAA/D,CAAJ,EAA+EhT,GAA/E,CAAmF,OAAnF,CAAD,CAAb;AACD;;;wCACe0R,M,EAAa;AAC3B,cAAIyB,aAAa,GAAG,CAApB;;AAD2B,uDAERzB,MAFQ;AAAA;;AAAA;AAE3B,sEAA2B;AAAA,kBAAhB5oB,IAAgB;AACzBqqB,2BAAa,IAAIrqB,IAAI,CAAC8X,QAAtB;AACD;AAJ0B;AAAA;AAAA;AAAA;AAAA;;AAK3B,iBAAOlE,IAAI,CAACwW,IAAL,CAAUC,aAAa,GAAGzB,MAAM,CAAC7f,MAAjC,CAAP;AACD;;;4CACmB6f,M,EAAa;AAC/B,cAAI0B,iBAAiB,GAAG,CAAxB;;AAD+B,uDAEZ1B,MAFY;AAAA;;AAAA;AAE/B,sEAA2B;AAAA,kBAAhB5oB,IAAgB;AACzBsqB,+BAAiB,IAAItqB,IAAI,CAAC+X,YAA1B;AACD;AAJ8B;AAAA;AAAA;AAAA;AAAA;;AAK/B,iBAAOnE,IAAI,CAACwW,IAAL,CAAUE,iBAAiB,GAAG1B,MAAM,CAAC7f,MAArC,CAAP;AACD;;;gCACO6f,M,EAAa;AACnB,cAAI0B,iBAAiB,GAAG,CAAxB;;AADmB,uDAEA1B,MAFA;AAAA;;AAAA;AAEnB,sEAA2B;AAAA,kBAAhB5oB,IAAgB;AACzBsqB,+BAAiB,IAAItqB,IAAI,CAAC+X,YAA1B;AACD;AAJkB;AAAA;AAAA;AAAA;AAAA;;AAKnB,iBAAOuS,iBAAiB,GAAG,KAA3B;AACD;;;iCACQne,E,EAAO;AAAA;;AACdA,YAAE,CAACG,SAAH,GAAe,qGAAf;AACA,iBAAO,KAAK7J,IAAL,CAAU8nB,IAAV,CAAe,KAAK3C,OAAL,GAAe,wDAA9B,EACL;AAAE4C,qBAAS,EAAEre,EAAb;AAAiBic,oBAAQ,EAAE,KAAKP;AAAhC,WADK,EACsCR,WADtC,EACmDtjB,IADnD,CACwD,+DAAQ,UAAAqC,GAAG,EAAI;AAC1EhB,mBAAO,CAACC,GAAR,CAAYoB,IAAI,CAACC,SAAL,CAAeN,GAAf,CAAZ;;AACA,mBAAI,CAACX,gBAAL,CAAsBglB,YAAtB,CAAmC,CAACrkB,GAAD,CAAnC;;AACA,mBAAO,gDAAGA,GAAH,CAAP;AACD,WAJ4D,CADxD,EAKDrC,IALC,CAKI,kEAAW,UAAA6C,GAAG;AAAA,mBAAI,OAAI,CAACnB,gBAAL,CAAsBilB,UAAtB,CAAiC9jB,GAAjC,CAAJ;AAAA,WAAd,CALJ,CAAP;AAMD;;;mCACwBf,G,EAAW;;;;;;uDAC3B8kB,KAAK,CAAC,KAAK/C,OAAL,GAAe,6CAAf,GAA+D/hB,GAA/D,GAAqE,UAAtE,EAAkF,EAAlF,CAAL,CAA2FrG,IAA3F,CAAgG,UAAAorB,QAAQ,EAAI;AACjH,6BAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,qBAFM,C;;;;;;;;;AAGR;;;mCACwBhlB,G,EAAW;;;;;;uDAC3B8kB,KAAK,CAAC,KAAK/C,OAAL,GAAe,6CAAf,GAA+D/hB,GAA/D,GAAqE,cAAtE,EAAsF,EAAtF,CAAL,CAA+FrG,IAA/F,CAAoG,UAAAorB,QAAQ,EAAI;AACrH,6BAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,qBAFM,C;;;;;;;;;AAGR;;;;;;;uBA5NUpD,e,EAAe,uH,EAAA,qI;AAAA,K;;;aAAfA,e;AAAe,eAAfA,eAAe;;;;;sEAAfA,e,EAAe;cAD3B;AAC2B,Q;;;;;;;;;;;;;;;;;;;;;;;;ACZ5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;;QAIaqD,a;AAEX;AAAA;AACK;;;;uCACU9qB,I,EAAW;AACxB,cAAM+qB,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACvkB,IAAI,CAACC,SAAL,CAAe1G,IAAf,EAAqB,IAArB,EAA2B,CAA3B,CAAD,CAAT,EAA0C;AAAEkE,gBAAI,EAAE;AAAR,WAA1C,CAAb;AACA,cAAI+mB,QAAQ,GAAG,YAAf;;AACA,cAAIjrB,IAAI,CAACgR,UAAL,KAAoB,CAAxB,EAA2B;AACzBia,oBAAQ,GAAG,sBAAX;AACD,WAFD,MAEO,IAAIjrB,IAAI,CAACgR,UAAL,KAAoB,CAAxB,EAA2B;AAChCia,oBAAQ,GAAG,qBAAX;AACD,WAFM,MAEA,IAAIjrB,IAAI,CAACgR,UAAL,KAAoB,CAAxB,EAA2B;AAChCia,oBAAQ,GAAG,mBAAX;AACD,WAFM,MAEA,IAAIjrB,IAAI,CAACgR,UAAL,KAAoB,CAAxB,EAA2B;AAChCia,oBAAQ,GAAG,eAAX;AACD;;AACD,oEAAOF,IAAP,EAAaE,QAAb;AACD;;;8CAEqBjF,G,EAAakF,M,EAAiB;AAClD,cAAMlrB,IAAI,GAAG;AACXgmB,eAAG,EAAEA,GADM;AAEXkF,kBAAM,EAAEA;AAFG,WAAb;AAIA,cAAID,QAAJ;;AACA,cAAIC,MAAJ,EAAY;AACVD,oBAAQ,GAAG,aAAX;AACD,WAFD,MAEO;AACLA,oBAAQ,GAAG,eAAX;AACD;;AACD,cAAMF,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACvkB,IAAI,CAACC,SAAL,CAAe1G,IAAf,EAAqB,IAArB,EAA2B,CAA3B,CAAD,CAAT,EAA0C;AAAEkE,gBAAI,EAAE;AAAR,WAA1C,CAAb;AACA,oEAAO6mB,IAAP,EAAaE,QAAb;AACD;;;;;;;uBAhCUH,a;AAAa,K;;;aAAbA,a;AAAa,eAAbA,aAAa;;;;;sEAAbA,a,EAAa;cADzB;AACyB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCcbK,a;AACX,6BACU5qB,aADV,EAEUC,kBAFV,EAGUse,cAHV,EAIUsM,iBAJV,EAKU3d,YALV,EAKoC;AAAA;;AAJ1B,aAAAlN,aAAA,GAAAA,aAAA;AACA,aAAAC,kBAAA,GAAAA,kBAAA;AACA,aAAAse,cAAA,GAAAA,cAAA;AACA,aAAAsM,iBAAA,GAAAA,iBAAA;AACA,aAAA3d,YAAA,GAAAA,YAAA;AACL;;;;oCACOod,I,EAAc;AACxB,cAAMQ,UAAU,GAAG5kB,IAAI,CAACoK,KAAL,CAAWga,IAAX,CAAnB;;AACA,cAAIQ,UAAU,CAACva,QAAX,KAAwB,OAA5B,EAAqC;AACnC,kBAAM,IAAIrR,KAAJ,6BAAN;AACD;;AACD,cAAI4rB,UAAU,CAACra,UAAX,KAA0B,CAA1B,IAA+Bqa,UAAU,CAACra,UAAX,KAA0B,CAA7D,EAAgE;AAC9D,mBAAO,IAAP;AACD,WAFD,MAEO;AACL,mBAAO,KAAP;AACD;AACF;;;6CAC0B6Z,I,EAAW/f,G,EAAW;;;;;;;;AAK7CugB,8BAAU,GAAG5kB,IAAI,CAACoK,KAAL,CAAWga,IAAX,CAAb;;0BACIQ,UAAU,CAACra,UAAX,KAA0B,CAA1B,IAA+Bqa,UAAU,CAACta,OAAX,KAAuB,C;;;;;;AAEjD,2BAAM,KAAKqa,iBAAL,CAAuBhF,OAAvB,CACXiF,UAAU,CAACpa,aADA,EAEXnG,GAFW,EAGXugB,UAAU,CAACna,EAHA,EAIX,CAJW,CAAN;;;AAAPX,wB;;;;;0BAMS8a,UAAU,CAACra,UAAX,KAA0B,C;;;;;0BAC/Bqa,UAAU,CAACta,OAAX,KAAuB,C;;;;;AACzB3L,2BAAO,CAACC,GAAR,CAAY,IAAZ;;AACO,2BAAM,KAAK+lB,iBAAL,CAAuBhF,OAAvB,CACXiF,UAAU,CAACpa,aADA,EAEXnG,GAFW,EAGXugB,UAAU,CAACxlB,GAAX,CAAeiH,KAAf,CAAqB,CAArB,EAAwB,EAAxB,CAHW,EAIX,CAJW,CAAN;;;AAAPyD,wB;;AAMA,wBAAI,qEAAMR,aAAN,CAAoBQ,IAApB,EAA0B1K,GAA1B,KAAkCwlB,UAAU,CAACxlB,GAAjD,EAAsD;AACpD0K,0BAAI,GAAG,EAAP;AACD;;;;;;0BACQ8a,UAAU,CAACta,OAAX,KAAuB,CAAvB,IAA4Bsa,UAAU,CAACta,OAAX,KAAuB,C;;;;;;AACrD,2BAAM,KAAKqa,iBAAL,CAAuBhF,OAAvB,CACXiF,UAAU,CAACpa,aADA,EAEXnG,GAFW,EAGXugB,UAAU,CAACna,EAHA,EAIXma,UAAU,CAACta,OAJA,CAAN;;;AAAPR,wB;;;;;;;;;AASJnL,2BAAO,CAACsH,KAAR;0BACM,IAAIjN,KAAJ,CAAU,iCAAV,C;;;yBAEJ8Q,I;;;;;uDACK,KAAKD,sBAAL,CAA4B+a,UAA5B,EAAwC9a,IAAxC,EAA8C/Q,IAA9C,CACL,UAACwG,GAAD,EAAS;AACP,6BAAOA,GAAP;AACD,qBAHI,EAIL,UAAChH,CAAD,EAAO;AACLoG,6BAAO,CAACsH,KAAR,CAAc1N,CAAd;AACA,4BAAM,IAAIS,KAAJ,CAAU,2DAAV,CAAN;AACD,qBAPI,C;;;0BAUD,IAAIA,KAAJ,CAAU,gBAAV,C;;;;;;;;;AAET;;;+CAC4BO,I,EAAWuQ,I,EAAS;;;;;;;AAC/C,yBAAK/P,kBAAL,CAAwBwB,OAAxB;;0BACIhC,IAAI,CAACgR,UAAL,KAAoB,CAApB,IAAyBhR,IAAI,CAAC+Q,OAAL,KAAiB,C;;;;;AAC5C;AACA,yBAAKxQ,aAAL,CAAmBa,MAAnB,GAA4B,IAAI,uDAAJ,CAC1BpB,IAAI,CAACkR,EADqB,EAE1BlR,IAAI,CAACiR,aAFqB,EAG1BjR,IAAI,CAACmR,gBAHqB,CAA5B;;;;;0BAKSnR,IAAI,CAACgR,UAAL,KAAoB,C;;;;;0BACzBhR,IAAI,CAAC+Q,OAAL,KAAiB,C;;;;;AACnB,yBAAKxQ,aAAL,CAAmBa,MAAnB,GAA4B,IAAI,6DAAJ,CAC1BpB,IAAI,CAACkR,EADqB,EAE1BlR,IAAI,CAACiR,aAFqB,EAG1BjR,IAAI,CAACmR,gBAHqB,CAA5B;;;;;0BAKSnR,IAAI,CAAC+Q,OAAL,KAAiB,C;;;;;AAC1B,yBAAKxQ,aAAL,CAAmBa,MAAnB,GAA4B,IAAI,6DAAJ,CAC1BpB,IAAI,CAACkR,EADqB,EAE1BlR,IAAI,CAACiR,aAFqB,CAA5B;;;;;0BAISjR,IAAI,CAAC+Q,OAAL,KAAiB,C;;;;;AAC1B,yBAAKxQ,aAAL,CAAmBa,MAAnB,GAA4B,IAAI,6DAAJ,CAC1BpB,IAAI,CAAC6F,GAAL,CAASiH,KAAT,CAAe,CAAf,EAAkB,EAAlB,CAD0B,EAE1B9M,IAAI,CAACiR,aAFqB,CAA5B;;;;;0BAKM,IAAIxR,KAAJ,CAAU,yBAAV,C;;;;;;;0BAGF,IAAIA,KAAJ,CAAU,yBAAV,C;;;0BAGJ8Q,IAAI,CAACxH,MAAL,KAAgB,E;;;;;AAClBpJ,wBAAI,GAAG,qEAAMoQ,aAAN,CAAoBQ,IAApB,CAAP;;;;;0BACSA,IAAI,CAACxH,MAAL,KAAgB,E;;;;;AACzBpJ,wBAAI,GAAG,kEAAGkQ,uBAAH,CAA2BU,IAA3B,EAAiC,CAAjC,CAAP;;;;;0BAEM,IAAI9Q,KAAJ,CAAU,qBAAV,C;;;AAER,yBAAKc,aAAL,CAAmB+qB,WAAnB;;0BACI,KAAK/qB,aAAL,CAAmBa,MAAnB,YAAqC,uD;;;;;AACnCuM,yB,GAAQ,C;AACRgF,2B,GAAU,C;;;yBACPA,O;;;;;AACLhT,wBAAI,GAAG,kEAAGkQ,uBAAH,CAA2BU,IAA3B,EAAiC5C,KAAjC,CAAP;;AACU,2BAAM,KAAKmR,cAAL,CACbG,WADa,CACDtf,IAAI,CAACkG,GADJ,EAEboiB,SAFa,EAAN;;;AAAVtV,2B;;0BAGIA,OAAO,IAAIhF,KAAK,KAAK,C;;;;;AACvB,yBAAKpN,aAAL,CAAmBgrB,kBAAnB,CACE5rB,IAAI,CAAC+I,EADP,EAEEiF,KAAK,EAFP;;AAIA,2BAAM,KAAK6d,aAAL,CAAmB7rB,IAAI,CAACkG,GAAxB,CAAN;;;;;;;AAGJ,yBAAKtF,aAAL,CAAmBa,MAAnB,CAA0BuM,KAA1B,GAAkCA,KAAlC;;;;;AAEA,yBAAKpN,aAAL,CAAmBgrB,kBAAnB,CAAsC5rB,IAAI,CAAC+I,EAA3C;;AACA,2BAAM,KAAK8iB,aAAL,CAAmB7rB,IAAI,CAACkG,GAAxB,EAA6B,IAA7B,CAAN;;;uDAEK,I;;;;;;;;;AACR;;;2CAEwB6C,E,EAAYH,c,EAAmD;AAAA,cAA3BkjB,eAA2B,uEAAJ,IAAI;;;;;;AACtF,yBAAKjrB,kBAAL,CAAwBwB,OAAxB;;yBACIuG,c;;;;;uDACK,KAAKmjB,YAAL,CAAkBhjB,EAAlB,EAAsBH,cAAtB,C;;;yBACEkjB,e;;;;;uDACF,KAAKE,WAAL,CAAiBjjB,EAAjB,EAAqB+iB,eAArB,C;;;;;;;;;AAEV;;;qCACkB/iB,E,EAAYH,c,EAAwB;;;;;;;AAEnD,yBAAKhI,aAAL,CAAmB+qB,WAAnB;AACA,yBAAK/qB,aAAL,CAAmBa,MAAnB,GAA4B,IAAI,2DAAJ,EAA5B;AACA,yBAAKb,aAAL,CAAmBgrB,kBAAnB,CAAsC7iB,EAAtC,EAA0CH,cAA1C;;AACA,2BAAM,KAAKijB,aAAL,CAAmB,KAAKjrB,aAAL,CAAmBa,MAAnB,CAA0B+D,gBAA1B,CAA2C,CAA3C,EAA8CU,GAAjE,CAAN;;;uDACO,I;;;;;AAEPT,2BAAO,CAAC8gB,IAAR;AACA,yBAAK3lB,aAAL,CAAmB0B,WAAnB;uDACO,K;;;;;;;;;AAEV;;;oCACiByG,E,EAAY+iB,e,EAAsB;;;;;;;AAEhD,yBAAKlrB,aAAL,CAAmB+qB,WAAnB;AACA,yBAAK/qB,aAAL,CAAmBa,MAAnB,GAA4B,IAAI,0DAAJ,CAAgBqqB,eAAe,CAACne,QAAhC,EAA0Cme,eAAe,CAAC7rB,EAA1D,EAA8D6rB,eAAe,CAACha,IAA9E,CAA5B;;AACA,wBAAIga,eAAe,CAACne,QAAhB,KAA6B,SAAjC,EAA4C;AAC1C,2BAAKse,iBAAL,CAAuBH,eAAe,CAAC7rB,EAAvC;AACD;;AACD,yBAAKW,aAAL,CAAmBgrB,kBAAnB,CAAsC7iB,EAAtC;uDACO,I;;;;;AAEPtD,2BAAO,CAAC8gB,IAAR;AACA,yBAAK3lB,aAAL,CAAmB0B,WAAnB;uDACO,K;;;;;;;;;AAEV;;;0CACuB4Z,U,EAAoB;;;;;;;;AACpCzN,6B,GAAYyN,UAAU,CAACrI,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,C;;AACG,2BAAM,KAAK/F,YAAL,CAAkBoe,aAAlB,CAAgCrL,SAAhC,EAA2CpS,SAA3C,CAAN;;;;AAAbF,4B,0BAAAA,Q;;AACR,wBAAIA,QAAQ,IAAI,KAAK3N,aAAL,CAAmBa,MAAnB,YAAqC,0DAArD,EAAkE;AAChE,2BAAKb,aAAL,CAAmBa,MAAnB,CAA0BqQ,IAA1B,GAAiC,MAAMvD,QAAvC;AACD;;;;;;;;;AACF;;;sCACmBrI,G,EAA2D;AAAA,cAA9CimB,aAA8C,uEAA9B,KAA8B;AAAA,cAAvBroB,OAAuB,uEAALoC,GAAK;;;;;;;;;AAC3D,2BAAM,KAAKiZ,cAAL,CAAoBiN,oBAApB,CAAyCtoB,OAAzC,CAAN;;;AAAZme,6B;6DACWA,S;;;AAAjB,gFAA4B;AAAjBoK,2BAAiB;AAC1B5mB,+BAAO,CAACC,GAAR,CAAY,eAAe2mB,GAA3B;AACA,6BAAKzrB,aAAL,CAAmB0rB,oBAAnB,CAAwCD,GAAxC,EAA4CnmB,GAA5C;AACD;;;;;;;AACD,yBAAKtF,aAAL,CAAmBgU,WAAnB;;0BACIuX,aAAa,IAAIlK,SAAS,CAAC7Y,M;;;;;6DACZ6Y,S;;;;;;;;;;;AAANoK,sB;;AACT,2BAAM,KAAKR,aAAL,CAAmB3lB,GAAnB,EAAwB,IAAxB,EAA8BmmB,EAA9B,CAAN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGL;;;;;;;uBAhMUb,a,EAAa,4H,EAAA,2I,EAAA,+H,EAAA,wI,EAAA,yH;AAAA,K;;;aAAbA,a;AAAa,eAAbA,aAAa;;;;;sEAAbA,a,EAAa;cADzB;AACyB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClB1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAQae,sB;AAEX,sCACUzmB,gBADV,EAEU/E,SAFV,EAEqC;AAAA;;AAD3B,aAAA+E,gBAAA,GAAAA,gBAAA;AACA,aAAA/E,SAAA,GAAAA,SAAA;AACL;AACL;;;;;;;kCAGUkP,U,EAAiB;AACzB,iBAAO,KAAKnK,gBAAL,CAAsB0mB,aAAtB,CAAoCvc,UAApC,CAAP;AACD;;;iCACQ7E,S,EAAgB;AACvB,iBAAQ,mCAAM,CAACA,SAAD,CAAN,CAAiBqhB,KAAjB,KAA2B,CAAnC;AACD;;;gDACuBrhB,Q,EAAgB;AACtC,cAAI,CAACA,QAAL,EAAe;AACb,mBAAO,EAAP;AACD;;AACD,kBAAQ,mCAAM,CAACA,QAAD,CAAN,CAAiBqhB,KAAzB;AACE,iBAAK,CAAL;AAAQ;AACN,uBAAO,KAAK1rB,SAAL,CAAe8D,OAAf,CAAuB,uCAAvB,CAAP,CADM,CACmE;AAC1E;;AAAC,iBAAK,CAAL;AAAQ;AACR,uBAAO,KAAK9D,SAAL,CAAe8D,OAAf,CAAuB,mCAAvB,CAAP,CADQ,CAC6D;AACtE;;AAAC,iBAAK,CAAL;AAAQ;AACR,uBAAO,KAAK9D,SAAL,CAAe8D,OAAf,CAAuB,+BAAvB,CAAP,CADQ,CACyD;AAClE;;AAAC,iBAAK,CAAL;AAAQ;AACR,uBAAO,KAAK9D,SAAL,CAAe8D,OAAf,CAAuB,+BAAvB,CAAP,CADQ,CACyD;AAClE;;AAAC,iBAAK,CAAL;AAAQ;AACR,uBAAO,KAAK9D,SAAL,CAAe8D,OAAf,CAAuB,iCAAvB,CAAP,CADQ,CAC2D;AACpE;;AAAC;AAAS;AACT,uBAAO,EAAP;AACD;AAbH;AAeD;;;gCACOf,Q,EAAe;AACrB,iBAAO,KAAKgC,gBAAL,CAAsB4mB,YAAtB,CAAmC5oB,QAAnC,CAAP;AACD;;;qCACYoY,U,EAAoByQ,S,EAAiB;AAChD,kBAAQA,SAAR;AACE,iBAAK,QAAL;AACE,qBAAO,KAAKte,KAAL,CAAW6N,UAAX,CAAP;;AACF,iBAAK,QAAL;AACE,qBAAO,KAAK0Q,aAAL,CAAmB1Q,UAAnB,CAAP;;AACF,iBAAK,SAAL;AACE,qBAAO,KAAK2Q,cAAL,CAAoB3Q,UAApB,CAAP;;AACF;AACE,qBAAO,KAAP;AARJ;AAWD;;;sCACa3N,Q,EAAkB;AAC9B;AACA;AACA,cAAMue,EAAE,GAAG,yBAAX;AACA,iBAAOA,EAAE,CAACC,IAAH,CAAQxe,QAAR,CAAP;AACD;;;8BACKF,M,EAAa;AACjB,cAAMye,EAAE,GAAG,2JAAX;AACA,iBAAOA,EAAE,CAACC,IAAH,CAAQ1e,MAAR,CAAP;AACD;;;uCACcE,Q,EAAkB;AAC/B;AACA,cAAMue,EAAE,GAAG,4BAAX;AACA,iBAAOA,EAAE,CAACC,IAAH,CAAQxe,QAAR,CAAP;AACD;;;kCACStO,E,EAAY;AACpB,cAAM6sB,EAAE,GAAG,UAAX;AACA,iBAAOA,EAAE,CAACC,IAAH,CAAQ9sB,EAAR,CAAP;AACD;;;mCACU+P,W,EAAkB;AAC3B,iBAAO,IAAP;AACD;;;+BACMnB,Q,EAAc;AACnBpJ,iBAAO,CAACC,GAAR,CAAYmJ,QAAZ;;AACA,cAAIA,QAAM,KAAK,EAAX,IAAiBA,QAAM,KAAK,GAAhC,EAAqC;AAAE;AACrC,mBAAO,IAAP;AACD,WAFD,MAEO,IAAIzC,MAAM,CAACyC,QAAD,CAAN,IAAkBA,QAAM,CAACme,KAAP,CAAa,2CAAb,CAAtB,EAAiF;AAAE;AACxF,mBAAO,IAAP;AACD;;AACD,iBAAO,KAAP;AACD;;;4BACGpiB,I,EAAW;AACb,iBAAO,KAAKiE,MAAL,CAAYjE,IAAZ,CAAP,CADa,CACY;AAC1B;;;4BACGiE,M,EAAc;AAChB,cAAIA,MAAM,KAAK,EAAX,IAAiBA,MAAM,KAAK,GAAhC,EAAqC;AAAE;AACrC,mBAAO,IAAP;AACD,WAFD,MAEO,IAAIzC,MAAM,CAACyC,MAAD,CAAN,IAAkB,IAAIzC,MAAM,CAACyC,MAAD,CAA5B,IAAwCzC,MAAM,CAACyC,MAAD,CAAN,GAAiB,CAAjB,KAAuB,CAAnE,EAAsE;AAAE;AAC7E,mBAAO,IAAP;AACD,WAFM,MAEA;AACL,mBAAO,KAAP;AACD;AACF;;;gCACOA,M,EAAgB;AACtB,iBAAO,KAAK2G,GAAL,CAAS3G,MAAT,CAAP;AACD;;;6BACI9O,K,EAAY;AACf,cAAIA,KAAI,IAAIA,KAAI,CAACqJ,MAAL,KAAgB,EAAxB,IAA8BrJ,KAAI,CAACitB,KAAL,CAAW,cAAX,CAAlC,EAA8D;AAAE;AAC9D,mBAAO,IAAP;AACD,WAFD,MAEO;AACL,mBAAO,KAAP;AACD;AACF;;;uCACc7sB,I,EAAY;AACzB,cAAM8sB,CAAC,GAAG9sB,IAAI,CAAC6sB,KAAL,CAAW,8BAAX,CAAV;;AACA,cAAIC,CAAC,IAAI9sB,IAAI,KAAK,aAAlB,EAAiC;AAC/B,mBAAO,IAAP;AACD;;AACD,iBAAO,KAAP;AACD;;;qCACYkmB,G,EAAW;AACtB,cAAIA,GAAG,IAAIA,GAAG,CAAC2G,KAAJ,CAAU,aAAV,CAAX,EAAqC;AACnC,mBAAO,IAAP;AACD,WAFD,MAEO;AACL,mBAAO,KAAP;AACD;AACF;;;;;;;uBArHUT,sB,EAAsB,qI,EAAA,4H;AAAA,K;;;aAAtBA,sB;AAAsB,eAAtBA,sBAAsB;;;;;sEAAtBA,sB,EAAsB;cADlC;AACkC,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCAtBW,a;AAIX,6BACUpnB,gBADV,EAEUrC,cAFV,EAEwC;AAAA;;AAD9B,aAAAqC,gBAAA,GAAAA,gBAAA;AACA,aAAArC,cAAA,GAAAA,cAAA;AAJV,aAAAmD,YAAA,GAAe,wEACb,gFADF;AAKI;;;;uCACiB;;;;;;wBACd,KAAKumB,S;;;;;AACR1nB,2BAAO,CAACC,GAAR,CAAY,oCAAZ;;;AAEmB,2BAAM,mEAAa0nB,MAAb,EAAN;;;AAAjB,yBAAKD,S;AACL1nB,2BAAO,CAACC,GAAR,CAAY,kCAAZ;;;;;;;AAEAD,2BAAO,CAACC,GAAR,CAAY,kCAAZ;;;;;;;;;AAGL;;;yCACsB;;;;;;wBAChB,KAAKynB,S;;;;;;AACR,2BAAM,KAAKE,YAAL,EAAN;;;AAEF,wBAAI,CAAC,KAAKF,SAAV,EAAqB;AACnB,2BAAK1pB,cAAL,CAAoBuD,QAApB,CAA6B,KAAKJ,YAAlC;AACD;;;;;;;;;AACF;;;yCACsBzG,I,EAAc;;;;;;;;;;AACnC,2BAAM,KAAKmtB,cAAL,EAAN;;;AACMC,uB,GAAM,IAAI,kEAAJ,CAAU,KAAKJ,SAAf,C;AACZ1nB,2BAAO,CAACC,GAAR,CAAYvF,IAAZ;;AACe,2BAAMotB,GAAG,CAACC,UAAJ,CAAertB,IAAf,EAAqB,IAArB,WACZ,UAAAd,CAAC,EAAI;AACV,0BAAIA,CAAC,CAAC+O,OAAN,EAAe;AACb,+BAAI,CAAC3K,cAAL,CAAoBuD,QAApB,CAA6B3H,CAAC,CAAC+O,OAA/B;AACD,uBAFD,MAEO;AACL,+BAAI,CAAC3K,cAAL,CAAoBuD,QAApB,CAA6B3H,CAA7B;AACD;;AACD,4BAAMA,CAAN;AACD,qBARkB,CAAN;;;AAAT+S,0B;AASArJ,sB,GAAK,KAAKjD,gBAAL,CAAsB2nB,MAAtB,CAA6Brb,MAAM,CAACsb,SAApC,C;uDACJ3kB,E;;;;;;;;;AACR;;;sCACmByD,E,EAAYrM,I,EAAc;;;;;;;;;;AAC5C,2BAAM,KAAKmtB,cAAL,EAAN;;;AACMC,uB,GAAM,IAAI,kEAAJ,CAAU,KAAKJ,SAAf,C;AACZ1nB,2BAAO,CAACC,GAAR,CAAYvF,IAAZ;AACMwtB,0B,GAAS,OAAOnhB,E;;0BAClBmhB,MAAM,CAACvkB,MAAP,GAAgB,G;;;;;AAClB,yBAAK3F,cAAL,CAAoBuD,QAApB,CAA6B,8CAA8C2mB,MAAM,CAACvkB,MAAP,GAAgB,CAA9D,GAAkE,eAA/F,EAAgH,CAAhH;0BACM,IAAItJ,KAAJ,CAAU,iBAAV,C;;;;AAEO,2BAAMytB,GAAG,CAAC7gB,aAAJ,CAAkBvM,IAAlB,EAAwBwtB,MAAxB,WACZ,UAAAtuB,CAAC,EAAI;AACV,6BAAI,CAACoE,cAAL,CAAoBuD,QAApB,CAA6B3H,CAA7B,EAAgC,CAAhC;AACD,qBAHkB,CAAN;;;AAAT+S,0B;AAIN3M,2BAAO,CAACC,GAAR,CAAYoB,IAAI,CAACC,SAAL,CAAeqL,MAAf,CAAZ;;0BACIA,MAAM,IAAIA,MAAM,CAACzF,S;;;;;uDACZyF,MAAM,CAACzF,S;;;uDAET,I;;;;;;;;;AACR;;;;;;;uBA7DUugB,a,EAAa,qI,EAAA,+H;AAAA,K;;;aAAbA,a;AAAa,eAAbA,aAAa;;;;;sEAAbA,a,EAAa;cADzB;AACyB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACF1B,QAAKU,UAAL;;AAAA,eAAKA,UAAL,EAAe;AACb;AACA;AACA;AACA;AACA;AACD,KAND,EAAKA,UAAU,KAAVA,UAAU,MAAf;;QAWaC,a;AAGX,6BACU/nB,gBADV,EAEUgI,YAFV,EAGUlN,aAHV,EAIUmF,sBAJV,EAIwD;AAAA;;AAH9C,aAAAD,gBAAA,GAAAA,gBAAA;AACA,aAAAgI,YAAA,GAAAA,YAAA;AACA,aAAAlN,aAAA,GAAAA,aAAA;AACA,aAAAmF,sBAAA,GAAAA,sBAAA;AANH,aAAA+nB,OAAA,GAAkF,EAAlF;AACC,aAAAC,cAAA,GAA0C,EAA1C;AAON,aAAKC,SAAL;AACD;;;;oCACW;AACV,cAAI,CAAC,KAAKF,OAAL,CAAa1kB,MAAd,IACF,KAAKxI,aAAL,CAAmBa,MADjB,IAEF,KAAKb,aAAL,CAAmBa,MAAnB,CAA0BwsB,OAA1B,CAAkC7kB,MAFpC,EAE4C;AACxC3D,mBAAO,CAACC,GAAR,CAAY,iCAAZ;AACA,iBAAKooB,OAAL,GAAe,KAAKltB,aAAL,CAAmBa,MAAnB,CAA0BwsB,OAAzC;AACD;AACJ;;;4BACGnqB,O,EAAiBgO,I,EAAcoc,U,EAAwB;AACzDzoB,iBAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBoM,IAArB;;AADyD,4BAExC,KAAK9D,KAAL,CAAWlK,OAAX,EAAoBoqB,UAApB,CAFwC;AAAA,cAEjDzW,CAFiD,eAEjDA,CAFiD;AAAA,cAE9C0W,CAF8C,eAE9CA,CAF8C;;AAGzD,cAAI1W,CAAC,KAAK,CAAC,CAAX,EAAc;AACZ,gBAAI0W,CAAC,KAAK,CAAC,CAAX,EAAc;AACZ,mBAAKL,OAAL,CAAarW,CAAb,EAAgBpX,IAAhB,CAAqBgU,IAArB,CAA0B;AAAEvC,oBAAI,EAAJA,IAAF;AAAQoc,0BAAU,EAAVA;AAAR,eAA1B;AACD;AACF,WAJD,MAIO;AACL,iBAAKJ,OAAL,CAAazZ,IAAb,CAAkB;AAAEvQ,qBAAO,EAAPA,OAAF;AAAWzD,kBAAI,EAAE,CAAC;AAAEyR,oBAAI,EAAJA,IAAF;AAAQoc,0BAAU,EAAVA;AAAR,eAAD;AAAjB,aAAlB;AACD;;AACD,eAAKttB,aAAL,CAAmBa,MAAnB,CAA0BwsB,OAA1B,GAAoC,KAAKH,OAAzC;AACA,eAAKltB,aAAL,CAAmBgU,WAAnB;AACD;;;gCACO;AACN,eAAKkZ,OAAL,GAAe,EAAf;AACA,eAAKC,cAAL,GAAsB,EAAtB;AACD;;;6BACIjqB,O,EAAiB;AAAA,+BACH,KAAKsqB,QAAL,CAActqB,OAAd,CADG;AAAA,cACZ2T,CADY,kBACZA,CADY;AAAA,cACT0W,CADS,kBACTA,CADS;;AAEpB,cAAI1W,CAAC,KAAK,CAAC,CAAX,EAAc;AACZ,iBAAKqW,OAAL,CAAazZ,IAAb,CAAkB;AAAEvQ,qBAAO,EAAPA,OAAF;AAAWzD,kBAAI,EAAE;AAAjB,aAAlB;AACD;;AACD,eAAKO,aAAL,CAAmBgU,WAAnB;AACD;;;8BACW9Q,O,EAAiB;;;;;;;;;;AAC3B,yBAAKkqB,SAAL;;AACA,wBAAIlqB,OAAO,IAAIA,OAAO,CAACqJ,KAAR,CAAc,CAAd,EAAiB,CAAjB,MAAwB,KAAvC,EAA8C;AAAA,qCAC9B,KAAKa,KAAL,CAAWlK,OAAX,EAAoB,CAApB,CAD8B,EACpC2T,CADoC,gBACpCA,CADoC;;AAE5C,0BAAI,CAAC,KAAKsW,cAAL,CAAoBjqB,OAApB,CAAD,IAAiC2T,CAAC,KAAK,CAAC,CAA5C,EAA+C;AAC7C,6BAAKsW,cAAL,CAAoBjqB,OAApB,IAA+B,IAA/B;AACA,6BAAKgC,gBAAL,CAAsBuoB,cAAtB,CAAqCvqB,OAArC,EAA8ClC,SAA9C,CAAwD,UAAOyE,GAAP;AAAA,iCAAoB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,yCACtEA,GADsE;AAAA;AAAA;AAAA;;AAAA,0CAGxEA,GAAG,CAAC+L,MAAJ,IACA/L,GAAG,CAAC+L,MAAJ,CAAWkc,SAJ6D;AAAA;AAAA;AAAA;;AAMlEtuB,wCANkE,GAM3DuuB,MAAM,CAACvuB,IAAP,CAAYqG,GAAG,CAAC+L,MAAJ,CAAWkc,SAAvB,CAN2D;AAOlEE,+CAPkE,GAOpD,KAAK1gB,YAAL,CAAkB0gB,WAPkC;AAAA,oDAQtDxuB,IARsD;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQ7DsH,uCAR6D;;AAAA,0CASlEA,GAAG,KAAKknB,WAAW,CAAC,QAAD,CAAX,CAAsB7gB,QAToC;AAAA;AAAA;AAAA;;AAUpE,yCAAK7I,GAAL,CAAShB,OAAT,EAAkBuC,GAAG,CAAC+L,MAAJ,CAAWkc,SAAX,CAAqBE,WAAW,CAAC,QAAD,CAAX,CAAsB7gB,QAA3C,EAAqD,CAArD,CAAlB,EAA2EigB,UAAU,CAACa,MAAtF;AAVoE;AAAA;;AAAA;AAAA,0CAW3DnnB,GAAG,KAAKknB,WAAW,CAAC,QAAD,CAAX,CAAsB7gB,QAX6B;AAAA;AAAA;AAAA;;AAYpE,yCAAK7I,GAAL,CAAShB,OAAT,EAAkBuC,GAAG,CAAC+L,MAAJ,CAAWkc,SAAX,CAAqBE,WAAW,CAAC,QAAD,CAAX,CAAsB7gB,QAA3C,EAAqD,CAArD,CAAlB,EAA2EigB,UAAU,CAACc,MAAtF;AAZoE;AAAA;;AAAA;AAAA,0CAa3DpnB,GAAG,KAAKknB,WAAW,CAAC,SAAD,CAAX,CAAuB7gB,QAb4B;AAAA;AAAA;AAAA;;AAc9DuO,8CAd8D,GAcjD7V,GAAG,CAAC+L,MAAJ,CAAWkc,SAAX,CAAqBE,WAAW,CAAC,SAAD,CAAX,CAAuB7gB,QAA5C,EAAsD,CAAtD,CAdiD;AAe9DghB,iDAf8D,GAe9CzS,UAAU,CAACrI,KAAX,CAAiB,GAAjB,CAf8C;;AAAA,0CAgBhE8a,aAAa,CAAC,CAAD,CAAb,KAAqB,SAArB,IAAkC,KAAK5oB,sBAAL,CAA4B0I,SAA5B,CAAsCkgB,aAAa,CAAC,CAAD,CAAnD,CAhB8B;AAAA;AAAA;AAAA;;AAiB5DlgB,6CAjB4D,GAiBhDkgB,aAAa,CAAC,CAAD,CAjBmC;AAAA;AAkB7C,2CAAM,KAAK7gB,YAAL,CAAkBoe,aAAlB,CAAgCrL,SAAhC,EAA2CpS,SAA3C,CAAN;;AAlB6C;AAAA;AAkB1DF,4CAlB0D,0BAkB1DA,QAlB0D;;AAmBlE,wCAAIA,QAAJ,EAAc;AACZ,2CAAKzJ,GAAL,CAAShB,OAAT,EAAkB,MAAMyK,QAAxB,EAAkCqf,UAAU,CAACgB,OAA7C;AACD;;AArBiE;AAAA;AAAA;;AAAA;AAwBpEnpB,2CAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCW,GAAzC;;AAxBoE;AAAA;AAAA;AAAA;;AAAA;AA2BxE,yCAAK0nB,cAAL,CAAoBjqB,OAApB,IAA+B,KAA/B;AA3BwE;AAAA;;AAAA;AA4BnE,wCAAI,CAACuC,GAAG,CAACwoB,QAAT,EAAmB;AACxB,2CAAKC,IAAL,CAAUhrB,OAAV;AACD;;AA9ByE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAApB;AAAA,yBAAxD;AAkCD;AACF;;;;;;;;;AACF;;;wCACeA,O,EAAe;AAC7B,cAAMirB,MAAM,GAAG,KAAKjB,OAAL,CAAahqB,OAAb,CAAf;;AACA,cAAIirB,MAAJ,EAAY;AAAA,yDACUA,MADV;AAAA;;AAAA;AACV,wEAA4B;AAAA,oBAAjBC,KAAiB;;AAC1B,oBAAIA,KAAK,CAACd,UAAN,GAAmB,CAAvB,EAA0B;AACxB,yBAAO,IAAP;AACD;AACF;AALS;AAAA;AAAA;AAAA;AAAA;AAMX;;AACD,iBAAO,KAAP;AACD;;;8BACKpqB,O,EAAiBoqB,U,EAAwB;AAAA,4BAChCxO,KAAK,CAAC,CAAD,CAAL,CAASuP,IAAT,CAAc,CAAC,CAAf,CADgC;AAAA;AAAA,cACxCxX,CADwC;AAAA,cACrC0W,CADqC;;AAE7C,eAAK,IAAIvK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKkK,OAAL,CAAa1kB,MAAjC,EAAyCwa,CAAC,EAA1C,EAA8C;AAC5C,gBAAI,KAAKkK,OAAL,CAAalK,CAAb,EAAgB9f,OAAhB,KAA4BA,OAAhC,EAAyC;AACvC2T,eAAC,GAAGmM,CAAJ;;AACA,mBAAK,IAAIsL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKpB,OAAL,CAAalK,CAAb,EAAgBvjB,IAAhB,CAAqB+I,MAAzC,EAAiD8lB,CAAC,EAAlD,EAAsD;AACpD,oBAAI,KAAKpB,OAAL,CAAalK,CAAb,EAAgBvjB,IAAhB,CAAqB6uB,CAArB,EAAwBhB,UAAxB,KAAuCA,UAA3C,EAAuD;AACrDC,mBAAC,GAAGe,CAAJ;AACD;AACF;AACF;AACF;;AACD,iBAAO;AAAEzX,aAAC,EAADA,CAAF;AAAK0W,aAAC,EAADA;AAAL,WAAP;AACD;;;iCACQrqB,O,EAAiB;AAAA,6BACX4b,KAAK,CAAC,CAAD,CAAL,CAASuP,IAAT,CAAc,CAAC,CAAf,CADW;AAAA;AAAA,cACnBxX,CADmB;AAAA,cAChB0W,CADgB;;AAExB,eAAK,IAAIvK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKkK,OAAL,CAAa1kB,MAAjC,EAAyCwa,CAAC,EAA1C,EAA8C;AAC5C,gBAAI,KAAKkK,OAAL,CAAalK,CAAb,EAAgB9f,OAAhB,KAA4BA,OAAhC,EAAyC;AACvC2T,eAAC,GAAGmM,CAAJ;;AACA,mBAAK,IAAIsL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKpB,OAAL,CAAalK,CAAb,EAAgBvjB,IAAhB,CAAqB+I,MAAzC,EAAiD8lB,CAAC,EAAlD,EAAsD;AACpD,oBAAI,KAAKpB,OAAL,CAAalK,CAAb,EAAgBvjB,IAAhB,CAAqB6uB,CAArB,EAAwBhB,UAAxB,GAAqCC,CAArC,IAA0CA,CAAC,KAAK,CAAC,CAArD,EAAwD;AACtDA,mBAAC,GAAGe,CAAJ;AACD;AACF;AACF;AACF;;AACD,iBAAO;AAAEzX,aAAC,EAADA,CAAF;AAAK0W,aAAC,EAADA;AAAL,WAAP;AACD;;;gCACOrqB,O,EAAe;AACrB,eAAKkqB,SAAL;;AADqB,gCAEJ,KAAKI,QAAL,CAActqB,OAAd,CAFI;AAAA,cAEb2T,CAFa,mBAEbA,CAFa;AAAA,cAEV0W,CAFU,mBAEVA,CAFU;;AAGrB,cAAI1W,CAAC,KAAK,CAAC,CAAP,IAAY0W,CAAC,KAAK,CAAC,CAAvB,EAA0B;AACxB,mBAAO;AAAErc,kBAAI,EAAE,KAAKgc,OAAL,CAAarW,CAAb,EAAgBpX,IAAhB,CAAqB8tB,CAArB,EAAwBrc,IAAhC;AAAsCoc,wBAAU,EAAE,KAAKJ,OAAL,CAAarW,CAAb,EAAgBpX,IAAhB,CAAqB8tB,CAArB,EAAwBD,UAA1E;AAAsFpqB,qBAAO,EAAPA;AAAtF,aAAP;AACD;;AACD,iBAAO;AAAEA,mBAAO,EAAPA;AAAF,WAAP;AACD;;;;;;;uBApIU+pB,a,EAAa,8I,EAAA,kI,EAAA,qI,EAAA,kK;AAAA,K;;;aAAbA,a;AAAa,eAAbA,aAAa,K;AAAA,kBAFZ;;;;;sEAEDA,a,EAAa;cAHzB,wDAGyB;eAHd;AACV5K,oBAAU,EAAE;AADF,S;AAGc,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCdbkM,c;AADb;AAAA;;AAEE,aAAAC,SAAA,GAAY,KAAZ;AACA,aAAAC,WAAA,GAAc,EAAd;AACA,aAAAphB,QAAA,GAAkB,EAAlB;AACA,aAAAqhB,WAAA,GAAc,EAAd;AAkFD;;;;4BAjFKlhB,O,EAAqD;AAAA,cAApCmhB,OAAoC,uEAAlB,KAAKD,WAAa;AACvD,cAAM/qB,IAAI,GAAG,MAAb;AACAkB,iBAAO,CAACC,GAAR,CAAYnB,IAAI,GAAG,IAAP,GAAc6J,OAA1B;AACA,eAAKH,QAAL,CAAcoG,IAAd,CAAmB;AACjB9P,gBAAI,EAAEA,IADW;AAEjBsC,eAAG,EAAEuH,OAFY;AAGjBohB,mBAAO,EAAED,OAAO,GAAG;AAHF,WAAnB;AAKD;;;iCACQnhB,O,EAAqD;AAAA,cAApCmhB,OAAoC,uEAAlB,KAAKD,WAAa;AAC5D,cAAM/qB,IAAI,GAAG,QAAb;AACAkB,iBAAO,CAACC,GAAR,CAAYnB,IAAI,GAAG,IAAP,GAAc6J,OAA1B;AACA,eAAKH,QAAL,CAAcoG,IAAd,CAAmB;AACjB9P,gBAAI,EAAEA,IADW;AAEjBsC,eAAG,EAAEuH,OAFY;AAGjBohB,mBAAO,EAAED,OAAO,GAAG;AAHF,WAAnB;AAKD;;;mCACUnhB,O,EAAqD;AAAA,cAApCmhB,OAAoC,uEAAlB,KAAKD,WAAa;AAC9D,cAAM/qB,IAAI,GAAG,SAAb;AACAkB,iBAAO,CAACC,GAAR,CAAYnB,IAAI,GAAG,IAAP,GAAc6J,OAA1B;AACA,eAAKH,QAAL,CAAcoG,IAAd,CAAmB;AACjB9P,gBAAI,EAAEA,IADW;AAEjBsC,eAAG,EAAEuH,OAFY;AAGjBohB,mBAAO,EAAED,OAAO,GAAG;AAHF,WAAnB;AAKD;;;mCACUnhB,O,EAAqD;AAAA,cAApCmhB,OAAoC,uEAAlB,KAAKD,WAAa;AAC9D,cAAM/qB,IAAI,GAAG,SAAb;AACAkB,iBAAO,CAACC,GAAR,CAAYnB,IAAI,GAAG,IAAP,GAAc6J,OAA1B;AACA,eAAKH,QAAL,CAAcoG,IAAd,CAAmB;AACjB9P,gBAAI,EAAEA,IADW;AAEjBsC,eAAG,EAAEuH,OAFY;AAGjBohB,mBAAO,EAAED,OAAO,GAAG;AAHF,WAAnB;AAKD;;;oCACWlhB,K,EAAeQ,M,EAAgB;AACzCpJ,iBAAO,CAACC,GAAR,CAAY2I,KAAZ;AACA,cAAM9J,IAAI,GAAG,SAAb;AACA,eAAK0J,QAAL,CAAcoG,IAAd,CAAmB;AACjB9P,gBAAI,EAAEA,IADW;AAEjBirB,mBAAO,EAAE,CAFQ;AAGjB3oB,eAAG,EAAE,OAHY;AAIjBwH,iBAAK,EAALA,KAJiB;AAKjBQ,kBAAM,EAANA;AALiB,WAAnB;AAOD;;;qCACYN,Q,EAAkBM,M,EAAgB;AAC7CpJ,iBAAO,CAACC,GAAR,CAAY6I,QAAZ;AACA,cAAMhK,IAAI,GAAG,SAAb;AACA,eAAK0J,QAAL,CAAcoG,IAAd,CAAmB;AACjB9P,gBAAI,EAAEA,IADW;AAEjBirB,mBAAO,EAAE,CAFQ;AAGjB3oB,eAAG,EAAE,QAHY;AAIjB0H,oBAAQ,EAARA,QAJiB;AAKjBM,kBAAM,EAANA;AALiB,WAAnB;AAOD;;;sCACaJ,S,EAAmBW,O,EAAiBP,M,EAAgB;AAChEpJ,iBAAO,CAACC,GAAR,CAAY+I,SAAZ;AACA,cAAMlK,IAAI,GAAG,SAAb;AACA,eAAK0J,QAAL,CAAcoG,IAAd,CAAmB;AACjB9P,gBAAI,EAAEA,IADW;AAEjBirB,mBAAO,EAAE,CAFQ;AAGjB3oB,eAAG,EAAE,SAHY;AAIjB4H,qBAAS,EAATA,SAJiB;AAKjBW,mBAAO,EAAPA,OALiB;AAMjBP,kBAAM,EAANA;AANiB,WAAnB;AAQD;;;gCACO;AACN,eAAKZ,QAAL,GAAgB,EAAhB;AACD;;;uCACqC;AAAA,cAAnBwhB,IAAmB,uEAAJ,EAAI;;;;;;AACpC,yBAAKJ,WAAL,GAAmBI,IAAnB;AACA,yBAAKL,SAAL,GAAiB,IAAjB;;;;;;;;;AACD;;;sCACmB;;;;;;AAClB,yBAAKC,WAAL,GAAmB,EAAnB;AACA,yBAAKD,SAAL,GAAiB,KAAjB;;;;;;;;;AACD;;;;;;;uBArFUD,c;AAAc,K;;;aAAdA,c;AAAc,eAAdA,cAAc;;;;;sEAAdA,c,EAAc;cAD1B;AAC0B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACa3B,QAAMzH,WAAW,GAAG;AAAEC,aAAO,EAAE;AAAE,wBAAgB;AAAlB;AAAX,KAApB;;QAQa+H,gB;AAqBX,gCACU5sB,IADV,EAEU/B,SAFV,EAGUuiB,iBAHV,EAG8C;AAAA;;AAFpC,aAAAxgB,IAAA,GAAAA,IAAA;AACA,aAAA/B,SAAA,GAAAA,SAAA;AACA,aAAAuiB,iBAAA,GAAAA,iBAAA;AAvBV,aAAAtiB,SAAA,GAAY,IAAI,qDAAJ,EAAZ;AACA,aAAAinB,OAAA,GAAU,KAAKjnB,SAAL,CAAeiE,GAAf,CAAmBuX,QAA7B;AACA,aAAAmT,MAAA,GAAS;AACPC,aAAG,EAAE,IAAIC,UAAJ,CAAe,CAAC,CAAD,EAAI,GAAJ,EAAS,GAAT,CAAf,CADE;AAEPC,aAAG,EAAE,IAAID,UAAJ,CAAe,CAAC,CAAD,EAAI,GAAJ,EAAS,GAAT,CAAf,CAFE;AAGPE,aAAG,EAAE,IAAIF,UAAJ,CAAe,CAAC,CAAD,EAAI,GAAJ,EAAS,GAAT,CAAf,CAHE;AAIPG,cAAI,EAAE,IAAIH,UAAJ,CAAe,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,GAAb,CAAf,CAJC;AAKPI,cAAI,EAAE,IAAIJ,UAAJ,CAAe,CAAC,CAAD,EAAI,GAAJ,EAAS,GAAT,EAAc,EAAd,CAAf,CALC;AAMPK,cAAI,EAAE,IAAIL,UAAJ,CAAe,CAAC,EAAD,EAAK,GAAL,EAAU,EAAV,EAAc,CAAd,CAAf,CANC;AAOPM,cAAI,EAAE,IAAIN,UAAJ,CAAe,CAAC,EAAD,EAAK,GAAL,EAAU,GAAV,EAAe,GAAf,CAAf,CAPC;AAQPO,eAAK,EAAE,IAAIP,UAAJ,CAAe,CAAC,CAAD,EAAI,GAAJ,EAAS,GAAT,EAAc,GAAd,EAAmB,EAAnB,CAAf,CARA;AASPQ,eAAK,EAAE,IAAIR,UAAJ,CAAe,CAAC,EAAD,EAAK,GAAL,EAAU,GAAV,EAAe,EAAf,EAAmB,EAAnB,CAAf,CATA;AAUPS,aAAG,EAAE,IAAIT,UAAJ,CAAe,CAAC,CAAD,EAAI,GAAJ,EAAS,EAAT,CAAf,CAVE;AAWPU,WAAC,EAAE,IAAIV,UAAJ,CAAe,CAAC,CAAD,EAAI,GAAJ,CAAf,CAXI;AAYPW,WAAC,EAAE,IAAIX,UAAJ,CAAe,CAAC,CAAD,EAAI,EAAJ,CAAf,CAZI;AAaPY,YAAE,EAAE,IAAIZ,UAAJ,CAAe,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAAf,CAbG;AAcPxD,YAAE,EAAE,IAAIwD,UAAJ,CAAe,CAAC,CAAD,EAAI,EAAJ,EAAQ,GAAR,CAAf;AAdG,SAAT;AAgBA,aAAAa,QAAA,GAAW,IAAI,6CAAJ,CAAQ,OAAR,CAAX;AACA,aAAAC,UAAA,GAAa,EAAb,CAI8C,CAJ7B;AAKZ;AACL;;;;;;;iCAGSzqB,G,EAAaC,M,EAAc;AAAA;;AAClC,iBAAO,KAAKkiB,SAAL,GACJjkB,IADI,CACC,+DAAQ,UAACwsB,MAAD,EAAiB;AAC7B,gBAAMpH,GAAG,GAAQ;AACfqH,oBAAM,EAAED,MAAM,CAAC7rB,IADA;AAEfikB,sBAAQ,EAAE,CAAC;AACTnG,oBAAI,EAAE,kBADG;AAET3c,mBAAG,EAAEA,GAFI;AAGTC,sBAAM,EAAEA;AAHC,eAAD;AAFK,aAAjB;AAQA,mBAAO,OAAI,CAACrD,IAAL,CAAU8nB,IAAV,CAAe,OAAI,CAAC3C,OAAL,GAAe,mDAA9B,EAAmFuB,GAAnF,EACJplB,IADI,CACC,+DAAQ,UAAC0sB,OAAD,EAAkB;AAC9B,kBAAMC,QAAQ,GAAWD,OAAO,GAAGpR,KAAK,CAAC,GAAD,CAAL,CAAW/H,IAAX,CAAgB,GAAhB,CAAnC;AACA6R,iBAAG,CAACwH,QAAJ,GAAeJ,MAAM,CAACI,QAAtB;AACAxH,iBAAG,CAAC7c,SAAJ,GAAgB,qGAAhB;AACA,qBAAO,OAAI,CAAC7J,IAAL,CAAU8nB,IAAV,CAAe,OAAI,CAAC3C,OAAL,GAAe,sDAA9B,EAAsF,CAACuB,GAAD,CAAtF,EACJplB,IADI,CACC,+DAAQ,UAAC6sB,cAAD,EAAyB;AACrCxrB,uBAAO,CAACC,GAAR,CAAYoB,IAAI,CAACC,SAAL,CAAekqB,cAAf,CAAZ;AACA,uBAAO,OAAI,CAACnuB,IAAL,CAAU8nB,IAAV,CAAe,OAAI,CAAC3C,OAAL,GAAe,sBAA9B,EACLnhB,IAAI,CAACC,SAAL,CAAegqB,QAAf,CADK,EACqBrJ,WADrB,EAEJtjB,IAFI,CAEC,+DAAQ,UAAC8sB,MAAD,EAAgB;AAC5B,yBAAO,OAAI,CAACC,OAAL,CAAaD,MAAb,CAAP;AACD,iBAFK,CAFD,CAAP;AAKD,eAPK,CADD,CAAP;AASD,aAbK,CADD,CAAP;AAeD,WAxBK,CADD,EAyBD9sB,IAzBC,CAyBI,kEAAW,UAAA6C,GAAG;AAAA,mBAAI,OAAI,CAAC8jB,UAAL,CAAgB9jB,GAAhB,CAAJ;AAAA,WAAd,CAzBJ,CAAP;AA0BD;;;gCACOiqB,O,EAAiC;AAAA,cAArBE,MAAqB,uEAAJ,IAAI;;AACvC,cAAI,OAAQF,OAAR,KAAmB,QAAnB,IAA+BA,OAAK,CAAC9nB,MAAN,KAAiB,EAApD,EAAwD;AACtD,mBAAO,gDACL;AACE9C,qBAAO,EAAE,IADX;AAEEC,qBAAO,EAAE;AACPC,sBAAM,EAAE0qB,OADD;AAEPE,sBAAM,EAAEA;AAFD;AAFX,aADK,CAAP;AAQD,WATD,MASO;AACL,mBAAO,gDACL;AACE9qB,qBAAO,EAAE,KADX;AAEEC,qBAAO,EAAE;AACPC,sBAAM,EAAE,IADD;AAEPK,mBAAG,EAAEqqB;AAFE;AAFX,aADK,CAAP;AAQD;AACF;AACD;;;;;;kCAGUhrB,G,EAAa2I,M,EAA8C;AAAA;;AAAA,cAA9BjE,GAA8B,uEAAhB,CAAgB;AAAA,cAAb5K,IAAa;AACnE,iBAAO,KAAKqoB,SAAL,GACJjkB,IADI,CACC,+DAAQ,UAACwsB,MAAD,EAAiB;AAC7B,mBAAO,OAAI,CAAC9tB,IAAL,CAAUX,GAAV,CAAc,OAAI,CAAC8lB,OAAL,GAAe,6CAAf,GAA+DjoB,IAAI,CAACkG,GAApE,GAA0E,UAAxF,EAAoG,EAApG,EACJ9B,IADI,CACC,+DAAQ,UAACitB,OAAD,EAAqB;AACjC,qBAAO,OAAI,CAACvuB,IAAL,CAAUX,GAAV,CAAc,OAAI,CAAC8lB,OAAL,GAAe,6CAAf,GAA+DjoB,IAAI,CAACkG,GAApE,GAA0E,cAAxF,EAAwG,EAAxG,EACJ9B,IADI,CACC,+DAAQ,UAAC+jB,OAAD,EAAkB;AAC9B,oBAAIvd,GAAG,IAAI,OAAI,CAAC+lB,UAAhB,EAA4B;AAC1B,wBAAM,IAAI7wB,KAAJ,CAAU,YAAV,CAAN;AACD;;AACD,oBAAIkT,OAAO,GAAW5G,MAAM,CAACilB,OAAD,CAA5B;;AACA,oBAAMC,MAAM,GAAG,OAAI,CAACC,gBAAL,CAAsBvxB,IAAI,CAACkG,GAA3B,CAAf;;AACA,oBAAMsjB,GAAG,GAAQ;AACfqH,wBAAM,EAAED,MAAM,CAAC7rB,IADA;AAEfikB,0BAAQ,EAAE,CACR;AACEnG,wBAAI,EAAE,aADR;AAEEne,0BAAM,EAAE1E,IAAI,CAACkG,GAFf;AAGE0E,uBAAG,EAAE,OAAI,CAAC8lB,QAAL,CAAcnL,KAAd,CAAoB3a,GAApB,EAAyB9C,QAAzB,EAHP;AAIEkL,2BAAO,EAAE,CAAC,EAAEA,OAAH,EAAYlL,QAAZ,EAJX;AAKE0pB,6BAAS,EAAE,OALb;AAMEC,iCAAa,EAAE,KANjB;AAOEve,2BAAO,EAAE,OAAI,CAACwd,QAAL,CAAcnL,KAAd,CAAoB1W,MAApB,EAA4B/G,QAA5B,EAPX;AAQEwpB,0BAAM,EAAEA;AARV,mBADQ;AAFK,iBAAjB;;AAeA,oBAAInJ,OAAO,KAAK,IAAhB,EAAsB;AACpBqB,qBAAG,CAACR,QAAJ,CAAa,CAAb,IAAkBQ,GAAG,CAACR,QAAJ,CAAa,CAAb,CAAlB;AACAQ,qBAAG,CAACR,QAAJ,CAAa,CAAb,IAAkB;AAChBnG,wBAAI,EAAE,QADU;AAEhBne,0BAAM,EAAE1E,IAAI,CAACkG,GAFG;AAGhB0E,uBAAG,EAAE,GAHW;AAIhBoI,2BAAO,EAAGA,OAAD,CAAUlL,QAAV,EAJO;AAKhB0pB,6BAAS,EAAE,OALK;AAMhBC,iCAAa,EAAE,GANC;AAOhBC,8BAAU,EAAE1xB,IAAI,CAAC+I;AAPD,mBAAlB;AASAygB,qBAAG,CAACR,QAAJ,CAAa,CAAb,EAAgBhW,OAAhB,GAA0B,CAAC5G,MAAM,CAACod,GAAG,CAACR,QAAJ,CAAa,CAAb,EAAgBhW,OAAjB,CAAN,GAAkC,CAAnC,EAAsClL,QAAtC,EAA1B;AACD;;AACD,uBAAO,OAAI,CAAC+iB,SAAL,CAAerB,GAAf,EAAoBoH,MAApB,EAA4B5wB,IAA5B,EAAkC,IAAlC,CAAP;AACD,eAnCK,CADD,CAAP;AAqCD,aAtCK,CADD,CAAP;AAwCD,WAzCK,CADD,EA0CDoE,IA1CC,CA0CI,kEAAW,UAAA6C,GAAG;AAAA,mBAAI,OAAI,CAAC8jB,UAAL,CAAgB9jB,GAAhB,CAAJ;AAAA,WAAd,CA1CJ,CAAP;AA2CD;AACD;;;;;;iCAGSqe,I,EAAc1O,Y,EAAmBhM,G,EAAa5K,I,EAAa;AAAA;;AAClE,iBAAO,KAAKqoB,SAAL,GACJjkB,IADI,CACC,+DAAQ,UAACwsB,MAAD,EAAiB;AAC7B,mBAAO,OAAI,CAAC9tB,IAAL,CAAUX,GAAV,CAAc,OAAI,CAAC8lB,OAAL,GAAe,6CAAf,GAA+DjoB,IAAI,CAACkG,GAApE,GAA0E,UAAxF,EAAoG,EAApG,EACJ9B,IADI,CACC,+DAAQ,UAACitB,OAAD,EAAkB;AAC9B,qBAAO,OAAI,CAACvuB,IAAL,CAAUX,GAAV,CAAc,OAAI,CAAC8lB,OAAL,GAAe,6CAAf,GAA+DjoB,IAAI,CAACkG,GAApE,GAA0E,cAAxF,EAAwG,EAAxG,EACJ9B,IADI,CACC,+DAAQ,UAAC+jB,OAAD,EAAkB;AAC9B,oBAAIvd,GAAG,IAAI,OAAI,CAAC+lB,UAAhB,EAA4B;AAC1B,wBAAM,IAAI7wB,KAAJ,CAAU,YAAV,CAAN;AACD;;AACD,oBAAMkT,OAAO,GAAW5G,MAAM,CAACilB,OAAD,CAA9B;;AACA,oBAAM7H,GAAG,GAAG,OAAI,CAACV,uBAAL,CAA6B8H,MAAM,CAAC7rB,IAApC,EAA0CiO,OAA1C,EAAmDmV,OAAnD,EAA4DvR,YAA5D,EAA0E5W,IAAI,CAACkG,GAA/E,EAAoFlG,IAAI,CAAC+I,EAAzF,EAA6Fuc,IAA7F,EAAmG1a,GAAnG,CAAZ;;AACA,uBAAO,OAAI,CAACigB,SAAL,CAAerB,GAAf,EAAoBoH,MAApB,EAA4B5wB,IAA5B,CAAP;AACD,eAPK,CADD,CAAP;AASD,aAVK,CADD,CAAP;AAYD,WAbK,CADD,EAcDoE,IAdC,CAcI,kEAAW,UAAA6C,GAAG;AAAA,mBAAI,OAAI,CAAC8jB,UAAL,CAAgB9jB,GAAhB,CAAJ;AAAA,WAAd,CAdJ,CAAP;AAeD;;;gDACuBlC,I,EAAciO,O,EAAiBmV,O,EAAiBvR,Y,EACtE1Q,G,EAAa6C,E,EAAYuc,I,EAAc1a,G,EAAW;AAClD,cAAM4e,GAAG,GAAQ;AACfqH,kBAAM,EAAE9rB,IADO;AAEfikB,oBAAQ,EAAE;AAFK,WAAjB;;AAIA,cAAIb,OAAO,KAAK,IAAhB,EAAsB;AAAE;AACtBqB,eAAG,CAACR,QAAJ,CAAa3U,IAAb,CAAkB;AAChBwO,kBAAI,EAAE,QADU;AAEhBne,oBAAM,EAAEwB,GAFQ;AAGhB0E,iBAAG,EAAE,GAHW;AAIhBoI,qBAAO,EAAE,CAAC,EAAEA,OAAH,EAAYlL,QAAZ,EAJO;AAKhB0pB,uBAAS,EAAE,OALK;AAMhBC,2BAAa,EAAE,GANC;AAOhBC,wBAAU,EAAE3oB;AAPI,aAAlB;AASD;;AACD,eAAK,IAAI6a,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhN,YAAY,CAACxN,MAAjC,EAAyCwa,CAAC,EAA1C,EAA8C;AAC5C,gBAAM+N,UAAU,GAAG/N,CAAC,KAAKhN,YAAY,CAACxN,MAAb,GAAsB,CAA5B,GAAgC,KAAKsnB,QAAL,CAAcnL,KAAd,CAAoB3a,GAApB,EAAyB9C,QAAzB,EAAhC,GAAsE,GAAzF;AACA,gBAAMqQ,QAAQ,GAAGvB,YAAY,CAACgN,CAAD,CAAZ,CAAgBzL,QAAhB,CAAyBrQ,QAAzB,EAAjB;AACA,gBAAMsQ,YAAY,GAAGxB,YAAY,CAACgN,CAAD,CAAZ,CAAgBxL,YAAhB,CAA6BtQ,QAA7B,EAArB;;AACA,gBAAIwd,IAAI,CAACnY,KAAL,CAAW,CAAX,EAAc,CAAd,MAAqB,IAAzB,EAA+B;AAC7B,kBAAMykB,aAAa,GAAQ;AACzB/O,oBAAI,EAAE,aADmB;AAEzBne,sBAAM,EAAE4gB,IAFiB;AAGzB1a,mBAAG,EAAE+mB,UAHoB;AAIzB3e,uBAAO,EAAE,CAAC,EAAEA,OAAH,EAAYlL,QAAZ,EAJgB;AAKzB0pB,yBAAS,EAAErZ,QALc;AAMzBsZ,6BAAa,EAAErZ,YANU;AAOzBvJ,sBAAM,EAAE,KAAK6hB,QAAL,CAAcnL,KAAd,CAAoB3O,YAAY,CAACgN,CAAD,CAAZ,CAAgB/U,MAApC,EAA4C/G,QAA5C,EAPiB;AAQzBtD,2BAAW,EAAEoS,YAAY,CAACgN,CAAD,CAAZ,CAAgBtL;AARJ,eAA3B;AAUAkR,iBAAG,CAACR,QAAJ,CAAa3U,IAAb,CAAkBud,aAAlB;AACD,aAZD,MAYO,IAAItM,IAAI,CAACnY,KAAL,CAAW,CAAX,EAAc,CAAd,MAAqB,IAAzB,EAA+B;AACpC,kBAAIyJ,YAAY,CAACgN,CAAD,CAAZ,CAAgBtL,EAAhB,CAAmBnL,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,MAAmC,IAAvC,EAA6C;AAC3C,oBAAM0kB,kBAAkB,GAAG,KAAKC,yBAAL,CAA+Blb,YAAY,CAACgN,CAAD,CAAZ,CAAgBtL,EAA/C,EAAmD,KAAKoY,QAAL,CAAcnL,KAAd,CAAoB3O,YAAY,CAACgN,CAAD,CAAZ,CAAgB/U,MAApC,EAA4C/G,QAA5C,EAAnD,CAA3B;AACA0hB,mBAAG,CAACR,QAAJ,CAAa3U,IAAb,CAAkB;AAChBwO,sBAAI,EAAE,aADU;AAEhBne,wBAAM,EAAEwB,GAFQ;AAGhB0E,qBAAG,EAAE+mB,UAHW;AAIhB3e,yBAAO,EAAE,CAAC,EAAEA,OAAH,EAAYlL,QAAZ,EAJO;AAKhB0pB,2BAAS,EAAErZ,QALK;AAMhBsZ,+BAAa,EAAErZ,YANC;AAOhBvJ,wBAAM,EAAE,GAPQ;AAQhBrK,6BAAW,EAAE8gB,IARG;AAShByM,4BAAU,EAAEF;AATI,iBAAlB;AAWD,eAbD,MAaO,IAAIjb,YAAY,CAACgN,CAAD,CAAZ,CAAgBtL,EAAhB,CAAmBnL,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,MAAmC,IAAvC,EAA6C;AAClD,oBAAM0kB,mBAAkB,GAAG,KAAKG,wBAAL,CAA8Bpb,YAAY,CAACgN,CAAD,CAAZ,CAAgBtL,EAA9C,EAAkD,KAAKoY,QAAL,CAAcnL,KAAd,CAAoB3O,YAAY,CAACgN,CAAD,CAAZ,CAAgB/U,MAApC,EAA4C/G,QAA5C,EAAlD,CAA3B;;AACA0hB,mBAAG,CAACR,QAAJ,CAAa3U,IAAb,CAAkB;AAChBwO,sBAAI,EAAE,aADU;AAEhBne,wBAAM,EAAEwB,GAFQ;AAGhB0E,qBAAG,EAAE+mB,UAHW;AAIhB3e,yBAAO,EAAE,CAAC,EAAEA,OAAH,EAAYlL,QAAZ,EAJO;AAKhB0pB,2BAAS,EAAErZ,QALK;AAMhBsZ,+BAAa,EAAErZ,YANC;AAOhBvJ,wBAAM,EAAE,GAPQ;AAQhBrK,6BAAW,EAAE8gB,IARG;AAShByM,4BAAU,EAAEF;AATI,iBAAlB;AAWD;AACF;AACF;;AACD,iBAAOrI,GAAP;AACD;AACD;;;;;;iCAGSlE,I,EAAchN,E,EAA0C;AAAA;;AAAA,cAA9B1N,GAA8B,uEAAhB,CAAgB;AAAA,cAAb5K,IAAa;AAC/D,iBAAO,KAAKqoB,SAAL,GACJjkB,IADI,CACC,+DAAQ,UAACwsB,MAAD,EAAiB;AAC7B,mBAAO,OAAI,CAAC9tB,IAAL,CAAUX,GAAV,CAAc,OAAI,CAAC8lB,OAAL,GAAe,6CAAf,GAA+DjoB,IAAI,CAACkG,GAApE,GAA0E,UAAxF,EAAoG,EAApG,EACJ9B,IADI,CACC,+DAAQ,UAACitB,OAAD,EAAkB;AAC9B,qBAAO,OAAI,CAACvuB,IAAL,CAAUX,GAAV,CAAc,OAAI,CAAC8lB,OAAL,GAAe,6CAAf,GAA+DjoB,IAAI,CAACkG,GAApE,GAA0E,cAAxF,EAAwG,EAAxG,EACJ9B,IADI,CACC,+DAAQ,UAAC+jB,OAAD,EAAkB;AAC9B,oBAAIvd,GAAG,IAAI,OAAI,CAAC+lB,UAAhB,EAA4B;AAC1B,wBAAM,IAAI7wB,KAAJ,CAAU,YAAV,CAAN;AACD;;AACD,oBAAIkT,OAAO,GAAW5G,MAAM,CAACilB,OAAD,CAA5B;AACA,oBAAIY,YAAJ;;AACA,oBAAI3M,IAAI,CAACnY,KAAL,CAAW,CAAX,EAAc,CAAd,MAAqB,IAAzB,EAA+B;AAC7B8kB,8BAAY,GAAG;AACbpP,wBAAI,EAAE,YADO;AAEbne,0BAAM,EAAE4gB,IAFK;AAGb1a,uBAAG,EAAE,OAAI,CAAC8lB,QAAL,CAAcnL,KAAd,CAAoB3a,GAApB,EAAyB9C,QAAzB,EAHQ;AAIbkL,2BAAO,EAAE,CAAC,EAAEA,OAAH,EAAYlL,QAAZ,EAJI;AAKb0pB,6BAAS,EAAE,OALE;AAMbC,iCAAa,EAAE;AANF,mBAAf;;AAQA,sBAAInZ,EAAE,KAAK,EAAX,EAAe;AACb2Z,gCAAY,CAAC/lB,QAAb,GAAwBoM,EAAxB;AACD;AACF,iBAZD,MAYO,IAAIgN,IAAI,CAACnY,KAAL,CAAW,CAAX,EAAc,CAAd,MAAqB,IAAzB,EAA+B;AACpC8kB,8BAAY,GAAG;AACbpP,wBAAI,EAAE,aADO;AAEbne,0BAAM,EAAE1E,IAAI,CAACkG,GAFA;AAGb0E,uBAAG,EAAE,OAAI,CAAC8lB,QAAL,CAAcnL,KAAd,CAAoB3a,GAApB,EAAyB9C,QAAzB,EAHQ;AAIbkL,2BAAO,EAAE,CAAC,EAAEA,OAAH,EAAYlL,QAAZ,EAJI;AAKb0pB,6BAAS,EAAE,OALE;AAMbC,iCAAa,EAAE,GANF;AAOb5iB,0BAAM,EAAE,GAPK;AAQbrK,+BAAW,EAAE8gB,IARA;AASbyM,8BAAU,EAAGzZ,EAAE,KAAK,EAAR,GAAc,OAAI,CAAC4Z,qBAAL,CAA2B5Z,EAA3B,CAAd,GAA+C,OAAI,CAAC6Z,uBAAL;AAT9C,mBAAf;AAWD;;AACD,oBAAM3I,GAAG,GAAQ;AACfqH,wBAAM,EAAED,MAAM,CAAC7rB,IADA;AAEfikB,0BAAQ,EAAE,CACRiJ,YADQ;AAFK,iBAAjB;;AAMA,oBAAI9J,OAAO,KAAK,IAAhB,EAAsB;AACpBqB,qBAAG,CAACR,QAAJ,CAAa,CAAb,IAAkBQ,GAAG,CAACR,QAAJ,CAAa,CAAb,CAAlB;AACAQ,qBAAG,CAACR,QAAJ,CAAa,CAAb,IAAkB;AAChBnG,wBAAI,EAAE,QADU;AAEhBne,0BAAM,EAAE1E,IAAI,CAACkG,GAFG;AAGhB0E,uBAAG,EAAE,GAHW;AAIhBoI,2BAAO,EAAGA,OAAD,CAAUlL,QAAV,EAJO;AAKhB0pB,6BAAS,EAAE,OALK;AAMhBC,iCAAa,EAAE,GANC;AAOhBC,8BAAU,EAAE1xB,IAAI,CAAC+I;AAPD,mBAAlB;AASAygB,qBAAG,CAACR,QAAJ,CAAa,CAAb,EAAgBhW,OAAhB,GAA0B,CAAC5G,MAAM,CAACod,GAAG,CAACR,QAAJ,CAAa,CAAb,EAAgBhW,OAAjB,CAAN,GAAkC,CAAnC,EAAsClL,QAAtC,EAA1B;AACD;;AACD,uBAAO,OAAI,CAAC+iB,SAAL,CAAerB,GAAf,EAAoBoH,MAApB,EAA4B5wB,IAA5B,CAAP;AACD,eAnDK,CADD,CAAP;AAqDD,aAtDK,CADD,CAAP;AAwDD,WAzDK,CADD,EA0DDoE,IA1DC,CA0DI,kEAAW,UAAA6C,GAAG;AAAA,mBAAI,OAAI,CAAC8jB,UAAL,CAAgB9jB,GAAhB,CAAJ;AAAA,WAAd,CA1DJ,CAAP;AA2DD;AACD;;;;;;kCAGUuiB,G,EAAUoH,M,EAAa5wB,I,EAA2C;AAAA;;AAAA,cAA5BoyB,WAA4B,uEAAL,KAAK;AAC1E3sB,iBAAO,CAACC,GAAR,CAAY,kBAAkBoB,IAAI,CAACC,SAAL,CAAeyiB,GAAf,CAA9B;AACA,iBAAO,KAAK1mB,IAAL,CAAU8nB,IAAV,CAAe,KAAK3C,OAAL,GAAe,mDAA9B,EAAmFuB,GAAnF,EACJplB,IADI,CACC,+DAAQ,UAAC0sB,OAAD,EAAkB;AAC9B,mBAAO,OAAI,CAACvH,UAAL,CAAgBC,GAAhB,EACJplB,IADI,CACC,+DAAQ,UAACiuB,YAAD,EAA0B;AACtC,kBAAIvB,OAAO,KAAKuB,YAAhB,EAA8B;AAC5B,sBAAM,IAAIvyB,KAAJ,CAAU,iBAAV,CAAN;AACD;;AACD,kBAAI,CAACE,IAAI,CAACsyB,EAAV,EAAc;AACZ9I,mBAAG,CAAC7c,SAAJ,GAAgB,qGAAhB;AACA,uBAAO,OAAI,CAAC7J,IAAL,CAAU8nB,IAAV,CAAe,OAAI,CAAC3C,OAAL,GAAe,wDAA9B,EAAwF;AAAE4C,2BAAS,EAAErB,GAAb;AAAkBf,0BAAQ,EAAEmI,MAAM,CAACnI;AAAnC,iBAAxF,EACJrkB,IADI,CACC,+DAAQ,UAACmuB,OAAD,EAAkB;AAC9B9sB,yBAAO,CAACC,GAAR,CAAY,cAAcoB,IAAI,CAACC,SAAL,CAAewrB,OAAf,CAA1B;;AACA,yBAAI,CAACzH,YAAL,CAAkB,CAACyH,OAAD,CAAlB;;AACA,yBAAO,gDACL;AACEjsB,2BAAO,EAAE,IADX;AAEEC,2BAAO,EAAE;AACPkG,uCAAiB,EAAEqkB;AADZ;AAFX,mBADK,CAAP;AAOD,iBAVK,CADD,CAAP;AAYD,eAdD,MAcO;AACLtH,mBAAG,CAACwH,QAAJ,GAAeJ,MAAM,CAACI,QAAtB;;AACA,oBAAMzF,MAAM,GAAG,OAAI,CAACiH,IAAL,CAAU1B,OAAV,EAAmB9wB,IAAI,CAACsyB,EAAxB,CAAf;;AACA,oBAAMvB,QAAQ,GAAGxF,MAAM,CAACkH,MAAxB;AACAjJ,mBAAG,CAAC7c,SAAJ,GAAgB4e,MAAM,CAAC6E,KAAvB;AACA,uBAAO,OAAI,CAACttB,IAAL,CAAU8nB,IAAV,CAAe,OAAI,CAAC3C,OAAL,GAAe,sDAA9B,EAAsF,CAACuB,GAAD,CAAtF,EACJplB,IADI,CACC,+DAAQ,UAACmuB,OAAD,EAAkB;AAC9B9sB,yBAAO,CAACC,GAAR,CAAY,cAAcoB,IAAI,CAACC,SAAL,CAAewrB,OAAf,CAA1B;;AACA,yBAAI,CAACzH,YAAL,CAAkByH,OAAlB;;AACA9sB,yBAAO,CAACC,GAAR,CAAY,UAAUqrB,QAAtB;AACA,yBAAO,OAAI,CAACjuB,IAAL,CAAU8nB,IAAV,CAAe,OAAI,CAAC3C,OAAL,GAAe,sBAA9B,EAAsDnhB,IAAI,CAACC,SAAL,CAAegqB,QAAf,CAAtD,EAAgFrJ,WAAhF,EACJtjB,IADI,CACC,+DAAQ,UAAC8sB,OAAD,EAAgB;AAC5B,wBAAIE,MAAM,GAAG,IAAb;;AACA,wBAAIgB,WAAJ,EAAiB;AACfhB,4BAAM,GAAGmB,OAAO,CAAC,CAAD,CAAP,CAAWvJ,QAAX,CAAoBQ,GAAG,CAACR,QAAJ,CAAa5f,MAAb,GAAsB,CAA1C,EACPiD,QADO,CACE8c,gBADF,CACmBjH,oBADnB,CACwC,CADxC,CAAT;AAED;;AACD,2BAAO,OAAI,CAACiP,OAAL,CAAaD,OAAb,EAAoBE,MAApB,CAAP;AACD,mBAPK,CADD,CAAP;AASD,iBAbK,CADD,CAAP;AAeD;AACF,aAvCK,CADD,CAAP;AAyCD,WA1CK,CADD,CAAP;AA4CD;AACD;;;;;;kCAGUL,Q,EAAgB;AAAA;;AACxB,cAAIvH,GAAJ;;AACA,cAAI;AACF,gBAAMsH,OAAO,GAAGC,QAAQ,CAAC5jB,KAAT,CAAe,CAAf,EAAkB4jB,QAAQ,CAAC3nB,MAAT,GAAkB,GAApC,CAAhB;AACA,gBAAMgnB,KAAK,GAAG,KAAKsC,SAAL,CAAe3B,QAAQ,CAAC5jB,KAAT,CAAe4jB,QAAQ,CAAC3nB,MAAT,GAAkB,GAAjC,CAAf,CAAd;AACAogB,eAAG,GAAG,KAAKmJ,aAAL,CAAmB7B,OAAnB,CAAN;AACAtH,eAAG,CAAC7c,SAAJ,GAAgByjB,KAAhB;AACD,WALD,CAKE,OAAO/wB,CAAP,EAAU;AACV,mBAAO,KAAK0rB,UAAL,CAAgB,eAAhB,CAAP;AACD;;AACD,iBAAO,KAAK1C,SAAL,GAAiBjkB,IAAjB,CAAsB,+DAAQ,UAACwsB,MAAD,EAAiB;AACpDpH,eAAG,CAACwH,QAAJ,GAAeJ,MAAM,CAACI,QAAtB;AACA,mBAAO,OAAI,CAACluB,IAAL,CAAU8nB,IAAV,CAAe,OAAI,CAAC3C,OAAL,GAAe,sDAA9B,EAAsF,CAACuB,GAAD,CAAtF,EACJplB,IADI,CACC,+DAAQ,UAACwuB,MAAD,EAAiB;AAC7B,kBAAIxB,MAAM,GAAG,IAAb;;AACA,mBAAK,IAAIxN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgP,MAAM,CAAC,CAAD,CAAN,CAAU5J,QAAV,CAAmB5f,MAAvC,EAA+Cwa,CAAC,EAAhD,EAAoD;AAClD,oBAAIgP,MAAM,CAAC,CAAD,CAAN,CAAU5J,QAAV,CAAmBpF,CAAnB,EAAsBf,IAAtB,KAA+B,aAAnC,EAAkD;AAChDuO,wBAAM,GAAGwB,MAAM,CAAC,CAAD,CAAN,CAAU5J,QAAV,CAAmBpF,CAAnB,EAAsBvX,QAAtB,CAA+B8c,gBAA/B,CAAgDjH,oBAAhD,CAAqE,CAArE,CAAT;AACD;AACF;;AACD,qBAAO,OAAI,CAACpf,IAAL,CAAU8nB,IAAV,CAAe,OAAI,CAAC3C,OAAL,GAAe,sBAA9B,EAAsDnhB,IAAI,CAACC,SAAL,CAAegqB,QAAf,CAAtD,EAAgFrJ,WAAhF,EACJtjB,IADI,CACC,+DAAQ,UAAC8sB,OAAD,EAAgB;AAC5B,uBAAO,OAAI,CAACC,OAAL,CAAaD,OAAb,EAAoBE,MAApB,CAAP;AACD,eAFK,CADD,CAAP;AAID,aAXK,CADD,CAAP;AAaD,WAf4B,CAAtB,EAeHhtB,IAfG,CAeE,kEAAW,UAAA6C,GAAG;AAAA,mBAAI,OAAI,CAAC8jB,UAAL,CAAgB9jB,GAAhB,CAAJ;AAAA,WAAd,CAfF,CAAP;AAgBD;;;uCACc4rB,U,EAAkB;AAAA;;AAC/B;AACA;AACA,cAAIA,UAAU,CAACzpB,MAAX,KAAsB,EAAtB,IAA4BypB,UAAU,CAAC1lB,KAAX,CAAiB,CAAjB,EAAoB,CAApB,MAA2B,KAA3D,EAAkE;AAChE,kBAAM,IAAIrN,KAAJ,CAAU,qBAAV,CAAN;AACD;;AACD,iBAAO,KAAKgD,IAAL,CAAUX,GAAV,CAAc,KAAK8lB,OAAL,wDAA6D4K,UAA7D,iBAAd,EAAqG,EAArG,EACJzuB,IADI,CACC,+DAAQ,UAAC+jB,OAAD,EAAkB;AAC9B,gBAAIA,OAAO,KAAK,IAAhB,EAAsB;AACpB,qBAAO,gDAAG;AAAC0G,wBAAQ,EAAE;AAAX,eAAH,CAAP;AACD,aAFD,MAEO;AACL,qBAAO,kDAAY,OAAI,CAACiE,UAAL,CAAgB3K,OAAhB,CAAZ,EAAsC/jB,IAAtC,CAA2C,+DAAQ,UAAC2E,EAAD,EAAa;AACrE,oBAAMgqB,QAAQ,GAAG;AACfC,yBAAO,EAAE,KADM;AAEfC,wBAAM,EAAE,kBAFO;AAGfhzB,oBAAE,EAAE,EAHW;AAIfizB,wBAAM,EAAE;AACNC,6BAAS,EAAEpqB,EAAE,CAACqqB,CADR;AAENC,6BAAS,EAAEtqB,EAAE,CAACuqB;AAFR;AAJO,iBAAjB;AASA,oBAAMtkB,GAAG,GAAG,OAAI,CAAChO,SAAL,CAAeiE,GAAf,CAAmBC,OAAnB,KAA+B,SAA/B,GAA2C,qCAA3C,GAAmF,sCAA/F;AACA,uBAAO,OAAI,CAACpC,IAAL,CAAU8nB,IAAV,CAAe5b,GAAf,EAAoBlI,IAAI,CAACC,SAAL,CAAegsB,QAAf,CAApB,EAA8CrL,WAA9C,EACNtjB,IADM,CACD,+DAAQ,UAACiC,GAAD,EAAc;AAC1B,sBAAI;AACF,wBAAIA,GAAG,CAAC+L,MAAJ,CAAWmhB,SAAX,CAAqBH,CAArB,KAA2BrqB,EAAE,CAACqqB,CAA9B,IACA/sB,GAAG,CAAC+L,MAAJ,CAAWmhB,SAAX,CAAqBD,CAArB,KAA2BvqB,EAAE,CAACuqB,CADlC,EACqC;AACjC,6BAAO,gDAAGjtB,GAAH,CAAP;AACD,qBAHH,MAGS;AACL,6BAAO,gDAAG,IAAH,CAAP;AACD;AACJ,mBAPD,CAOE,WAAM;AACN,2BAAO,gDAAG,IAAH,CAAP;AACD;AACF,iBAXK,CADC,CAAP;AAaD,eAxBiD,CAA3C,CAAP;AAyBD;AACF,WA9BK,CADD,CAAP;AAgCD;;;qCACYksB,O,EAAc;AACzB,eAAK,IAAI3O,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2O,OAAO,CAAC,CAAD,CAAP,CAAWvJ,QAAX,CAAoB5f,MAAxC,EAAgDwa,CAAC,EAAjD,EAAqD;AACnD,gBAAI2O,OAAO,CAAC,CAAD,CAAP,CAAWvJ,QAAX,CAAoBpF,CAApB,EAAuBvX,QAAvB,CAAgC8c,gBAAhC,CAAiD/I,MAAjD,KAA4D,SAAhE,EAA2E;AACzE3a,qBAAO,CAACC,GAAR,CAAY,gBAAZ;;AACA,kBAAI6sB,OAAO,CAAC,CAAD,CAAP,CAAWvJ,QAAX,CAAoBpF,CAApB,EAAuBvX,QAAvB,CAAgC8c,gBAAhC,CAAiDqK,MAArD,EAA6D;AAC3D,sBAAM,IAAI1zB,KAAJ,CAAUyyB,OAAO,CAAC,CAAD,CAAP,CAAWvJ,QAAX,CAAoBpF,CAApB,EAAuBvX,QAAvB,CAAgC8c,gBAAhC,CAAiDqK,MAAjD,CAAwD,CAAxD,EAA2DvzB,EAArE,CAAN,CAD2D,CACqB;AACjF,eAFD,MAEO,IAAIsyB,OAAO,CAAC,CAAD,CAAP,CAAWvJ,QAAX,CAAoBpF,CAApB,EAAuBvX,QAAvB,CAAgC6d,0BAAhC,IACTqI,OAAO,CAAC,CAAD,CAAP,CAAWvJ,QAAX,CAAoBpF,CAApB,EAAuBvX,QAAvB,CAAgC6d,0BAAhC,CAA2D,CAA3D,EAA8D9X,MAA9D,CAAqEohB,MADhE,EACwE;AAC7E,sBAAM,IAAI1zB,KAAJ,CAAUyyB,OAAO,CAAC,CAAD,CAAP,CAAWvJ,QAAX,CAAoBpF,CAApB,EAAuBvX,QAAvB,CAAgC6d,0BAAhC,CAA2D,CAA3D,EAA8D9X,MAA9D,CAAqEohB,MAArE,CAA4E,CAA5E,EAA+EvzB,EAAzF,CAAN;AACD,eAHM,MAGA;AACL,sBAAM,IAAIH,KAAJ,CAAU,6BAAV,CAAN;AACD;AACF;AACF;AACF;;;mCACUiN,K,EAAU;AACnBtH,iBAAO,CAACC,GAAR,CAAYoB,IAAI,CAACC,SAAL,CAAegG,KAAf,CAAZ;;AACA,cAAIA,KAAK,CAACA,KAAN,IAAeA,KAAK,CAACA,KAAN,CAAY,CAAZ,CAAf,IAAiCA,KAAK,CAACA,KAAN,CAAY,CAAZ,EAAe9M,EAApD,EAAwD;AACtD,gBAAIid,OAAO,GAAGnQ,KAAK,CAACA,KAAN,CAAY,CAAZ,EAAe9M,EAA7B;;AACA,gBAAIid,OAAO,KAAK,SAAZ,IAAyBnQ,KAAK,CAACA,KAAN,CAAY,CAAZ,EAAelG,GAA5C,EAAiD;AAC/CqW,qBAAO,GAAGnQ,KAAK,CAACA,KAAN,CAAY,CAAZ,EAAelG,GAAzB;AACD;;AACD,gBAAM8L,QAAQ,GAAG,KAAK2Q,iBAAL,CAAuBmQ,SAAvB,CAAiCvW,OAAjC,CAAjB;AACAnQ,iBAAK,GAAG4F,QAAR;AACD,WAPD,MAOO,IAAI5F,KAAK,CAACA,KAAN,IAAeA,KAAK,CAACA,KAAN,CAAY,CAAZ,CAAf,IAAiCA,KAAK,CAACA,KAAN,CAAY,CAAZ,EAAeA,KAApD,EAA2D;AAChEA,iBAAK,GAAGA,KAAK,CAACA,KAAN,CAAY,CAAZ,EAAeA,KAAvB;AACD,WAFM,MAEA,IAAIA,KAAK,CAAC2mB,UAAV,EAAsB;AAC3B3mB,iBAAK,GAAGA,KAAK,CAAC2mB,UAAd;AACD;;AAAC,cAAI3mB,KAAK,CAACqB,OAAV,EAAmB;AACnBrB,iBAAK,GAAG,KAAKuW,iBAAL,CAAuBmQ,SAAvB,CAAiC1mB,KAAK,CAACqB,OAAvC,CAAR;AACD,WAFC,MAEK;AACL3I,mBAAO,CAACC,GAAR,CAAY,uBAAZ;AACD;;AACD,iBAAO,gDACL;AACEY,mBAAO,EAAE,KADX;AAEEC,mBAAO,EAAE;AACPM,iBAAG,EAAEkG;AADE;AAFX,WADK,CAAP;AAQD,S,CACD;;;;mCACW8d,S,EAAc;AACvB,iBAAO,kDAAY,oEAAY8I,KAAZ,CAAkB9I,SAAlB,CAAZ,EAA0CzmB,IAA1C,CAA+C,+DAAQ,UAACwvB,gBAAD,EAA8B;AAC1F,mBAAO,gDAAGA,gBAAH,CAAP;AACD,WAFqD,CAA/C,CAAP;AAGD;;;oCACQ;AACP,iBAAO,KAAK9wB,IAAL,CAAUX,GAAV,CAAc,KAAK8lB,OAAL,GAAe,iCAA7B,CAAP;AACD;;;mCACU/hB,G,EAAW;AAAA;;AACpB,iBAAO,KAAKpD,IAAL,CAAUX,GAAV,CAAc,KAAK8lB,OAAL,GAAe,6CAAf,GAA+D/hB,GAA/D,GAAqE,UAAnF,EACJ9B,IADI,CACC,+DAAQ,UAAC8O,OAAD,EAAkB;AAC9B,mBAAO,gDACL;AACE5M,qBAAO,EAAE,IADX;AAEEC,qBAAO,EAAE;AACP2M,uBAAO,EAAEA;AADF;AAFX,aADK,CAAP;AAQD,WATK,CADD,EAUD9O,IAVC,CAUI,kEAAW,UAAA6C,GAAG;AAAA,mBAAI,OAAI,CAAC8jB,UAAL,CAAgB9jB,GAAhB,CAAJ;AAAA,WAAd,CAVJ,CAAP;AAWD;;;oCACWf,G,EAAW;AAAA;;AACrB,iBAAO,KAAKpD,IAAL,CAAUX,GAAV,CAAc,KAAK8lB,OAAL,GAAe,6CAAf,GAA+D/hB,GAA7E,EACJ9B,IADI,CACC,+DAAQ,UAAC4lB,QAAD,EAAmB;AAC/B,gBAAI9d,QAAQ,GAAG,EAAf;;AACA,gBAAI8d,QAAQ,CAAC9d,QAAb,EAAuB;AACrBA,sBAAQ,GAAG8d,QAAQ,CAAC9d,QAApB;AACD;;AACD,mBAAO,gDACL;AACE5F,qBAAO,EAAE,IADX;AAEEC,qBAAO,EAAE;AACP2F,wBAAQ,EAAEA;AADH;AAFX,aADK,CAAP;AAQD,WAbK,CADD,EAcD9H,IAdC,CAcI,kEAAW,UAAA6C,GAAG;AAAA,mBAAI,OAAI,CAAC8jB,UAAL,CAAgB9jB,GAAhB,CAAJ;AAAA,WAAd,CAdJ,CAAP;AAeD;;;0CACc;AAAA;;AACb,iBAAO,KAAKnE,IAAL,CAAUX,GAAV,CAAc,KAAK8lB,OAAL,GAAe,yCAA7B,EACJ7jB,IADI,CACC,+DAAQ,UAACyvB,QAAD,EAAmB;AAC/B,mBAAO,gDACL;AACEvtB,qBAAO,EAAE,IADX;AAEEC,qBAAO,EAAEstB;AAFX,aADK,CAAP;AAMD,WAPK,CADD,EAQDzvB,IARC,CAQI,kEAAW,UAAA6C,GAAG;AAAA,mBAAI,OAAI,CAAC8jB,UAAL,CAAgB9jB,GAAhB,CAAJ;AAAA,WAAd,CARJ,CAAP;AASD;;;mCACUf,G,EAAW;AACpB,iBAAO,KAAKpD,IAAL,CAAUX,GAAV,CAAc,KAAK8lB,OAAL,GAAe,6CAAf,GAA+D/hB,GAA/D,GAAqE,cAAnF,EAAmG,EAAnG,EACJ9B,IADI,CACC,+DAAQ,UAAC+jB,OAAD,EAAkB;AAC9B,gBAAIA,OAAO,KAAK,IAAhB,EAAsB;AACpB,qBAAO,gDAAG,KAAH,CAAP;AACD,aAFD,MAEO;AACL,qBAAO,gDAAG,IAAH,CAAP;AACD;AACF,WANK,CADD,EAQF/jB,IARE,CAQG,kEAAW,UAAA6C,GAAG,EAAI;AACxB,mBAAO,gDAAG,IAAH,CAAP;AACD,WAFO,CARH,CAAP,CADoB,CAWb;AACR;;;mCACUf,G,EAAW;AAAA;;AACpB,iBAAO,KAAKpD,IAAL,CAAUX,GAAV,CAAc,KAAK8lB,OAAL,GAAe,6CAAf,GAA+D/hB,GAA7E,EACJ9B,IADI,CACC,+DAAQ,UAAC4lB,QAAD,EAAmB;AAC/B,gBAAI9d,QAAQ,GAAG,EAAf;;AACA,gBAAI8d,QAAQ,CAAC9d,QAAb,EAAuB;AACrBA,sBAAQ,GAAG8d,QAAQ,CAAC9d,QAApB;AACD;;AACD,mBAAO,gDACL;AACE5F,qBAAO,EAAE,IADX;AAEEC,qBAAO,EAAE;AACP2M,uBAAO,EAAE8W,QAAQ,CAAC9W,OADX;AAEPiV,uBAAO,EAAE6B,QAAQ,CAAC7B,OAFX;AAGPjc,wBAAQ,EAAEA,QAHH;AAIP8G,uBAAO,EAAEgX,QAAQ,CAAChX;AAJX;AAFX,aADK,CAAP;AAWD,WAhBK,CADD,EAiBD5O,IAjBC,CAiBI,kEAAW,UAAA6C,GAAG;AAAA,mBAAI,OAAI,CAAC8jB,UAAL,CAAgB9jB,GAAhB,CAAJ;AAAA,WAAd,CAjBJ,CAAP;AAkBD;;;2CACkB6sB,c,EAAgBC,a,EAAe7tB,G,EAAK6C,E,EAAE;AAAA;;AACvD,iBAAO,KAAKjG,IAAL,CAAUX,GAAV,CAAc,KAAK8lB,OAAL,GAAe,sBAAf,GAAwC6L,cAAxC,GAAyD,mBAAvE,EAA4F,EAA5F,EACJ1vB,IADI,CACC,+DAAQ,UAAC4vB,QAAD,EAAmB;AAC/B,gBAAMC,OAAO,GAAGD,QAAQ,CAAC,CAAD,CAAR,CAAYnX,SAAZ,CAAsB,UAAAtI,CAAC;AAAA,qBAAIA,CAAC,KAAKwf,aAAV;AAAA,aAAvB,CAAhB;AACA,mBAAO,OAAI,CAACjxB,IAAL,CAAUX,GAAV,CAAc,OAAI,CAAC8lB,OAAL,GAAe,sBAAf,GAAwC6L,cAAxC,GAAyD,aAAvE,EAAsF,EAAtF,EACJ1vB,IADI,CACC,+DAAQ,UAACoI,EAAD,EAAa;AACzB,kBAAInG,GAAG,GAAG,EAAV;AACAmG,gBAAE,GAAGA,EAAE,CAAC,CAAD,CAAF,CAAMynB,OAAN,CAAL;AACA,kBAAM3D,GAAG,GAAG9jB,EAAE,CAACG,SAAf;AACA,qBAAOH,EAAE,CAACic,QAAV;AACA,qBAAOjc,EAAE,CAACG,SAAV;AACA,qBAAOH,EAAE,CAACzH,IAAV;AACA,qBAAOyH,EAAE,CAACwkB,QAAV;;AACA,mBAAK,IAAIpN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpX,EAAE,CAACwc,QAAH,CAAY5f,MAAhC,EAAwCwa,CAAC,EAAzC,EAA6C;AAC3C,uBAAOpX,EAAE,CAACwc,QAAH,CAAYpF,CAAZ,EAAevX,QAAtB;;AACA,oBAAIG,EAAE,CAACwc,QAAH,CAAYpF,CAAZ,EAAesQ,aAAnB,EAAkC;AAAE;AAClC1nB,oBAAE,CAACwc,QAAH,CAAYpF,CAAZ,EAAeuQ,cAAf,GAAgC3nB,EAAE,CAACwc,QAAH,CAAYpF,CAAZ,EAAesQ,aAA/C;AACA,yBAAO1nB,EAAE,CAACwc,QAAH,CAAYpF,CAAZ,EAAesQ,aAAtB;AACD;AACF;;AACD,qBAAO,OAAI,CAACpxB,IAAL,CAAU8nB,IAAV,CAAe,OAAI,CAAC3C,OAAL,GAAe,mDAA9B,EAAmFzb,EAAnF,EACJpI,IADI,CACC,+DAAQ,UAACgwB,OAAD,EAAkB;AAC9B,oBAAI,OAAI,CAACC,MAAL,CAAYtrB,EAAZ,MAAoB7C,GAAxB,EAA6B;AAC3B,sBAAI,OAAI,CAAC4N,MAAL,CAAYsgB,OAAZ,EAAqB9D,GAArB,EAA0BvnB,EAA1B,CAAJ,EAAmC;AACjC1C,uBAAG,GAAG+tB,OAAO,GAAG,OAAI,CAACE,OAAL,CAAa,OAAI,CAACC,UAAL,CAAgBjE,GAAhB,EAAqB,OAAI,CAACX,MAAL,CAAYW,GAAjC,CAAb,CAAhB;AACD,mBAFD,MAEO;AACL,0BAAM,IAAIxwB,KAAJ,CAAU,kBAAV,CAAN;AACD;AACF,iBAND,MAMO;AACL,wBAAM,IAAIA,KAAJ,CAAU,kBAAV,CAAN;AACD;;AACD,uBAAO,gDAAGuG,GAAH,CAAP;AACD,eAXK,CADD,CAAP;AAaD,aA5BK,CADD,CAAP;AA8BD,WAhCK,CADD,CAAP;AAkCD;;;wCACemuB,Q,EAAgB;AAC9B,cAAMzvB,IAAI,GAAG,sEAAwB,EAAxB,EAA4B,KAAK0vB,OAAL,CAAaD,QAAb,CAA5B,CAAb;AACA,cAAMxmB,KAAK,GAAG,IAAI6hB,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAf,CAAd;AACA,cAAM6E,KAAK,GAAG,sEAAwB,EAAxB,EAA4B,KAAKC,QAAL,CAAc3mB,KAAd,EAAqBjJ,IAArB,CAA5B,CAAd;AACA,iBAAO,KAAK6vB,UAAL,CAAgBF,KAAhB,EAAuB,KAAK/E,MAAL,CAAYtD,EAAnC,CAAP;AACD;;;uCACW;AACV,iBAAO,KAAKvpB,IAAL,CAAUX,GAAV,CAAc,KAAK8lB,OAAL,GAAe,4CAA7B,CAAP;AACD;;;qCACYrX,I,EAAY;AACvB,cAAI,CAACA,IAAL,EAAW;AACT,kBAAM,IAAI9Q,KAAJ,CAAU,UAAV,CAAN;AACD;;AACD,cAAMic,OAAO,GAAG,4EAA8BnL,IAA9B,CAAhB;AACA,iBAAO;AACL0hB,cAAE,EAAE,KAAKsC,UAAL,CAAgB7Y,OAAO,CAAC8Y,UAAxB,EAAoC,KAAKlF,MAAL,CAAYO,IAAhD,CADC;AAELnnB,cAAE,EAAE,KAAK6rB,UAAL,CAAgB7Y,OAAO,CAAC2R,SAAxB,EAAmC,KAAKiC,MAAL,CAAYK,IAA/C,CAFC;AAGL9pB,eAAG,EAAE,KAAK0uB,UAAL,CAAgB,sEAAwB,EAAxB,EAA4B7Y,OAAO,CAAC2R,SAApC,CAAhB,EAAgE,KAAKiC,MAAL,CAAYC,GAA5E;AAHA,WAAP;AAKD;;;sCACa/f,Q,EAA2C;AAAA,cAAzBG,UAAyB,uEAAJ,EAAI;;AACvD,cAAI,CAAC,KAAKwc,aAAL,CAAmB3c,QAAnB,CAAL,EAAmC;AACjC,kBAAM,IAAI/P,KAAJ,CAAU,iBAAV,CAAN;AACD;;AACD,iBAAQ,yDAAyB+P,QAAzB,EAAmCG,UAAnC,CAAD,CAAiD7C,KAAjD,CAAuD,CAAvD,EAA0D,EAA1D,CAAP;AACD;;;yCACgB0C,Q,EAA2C;AAAA,cAAzBG,UAAyB,uEAAJ,EAAI;;AAC1D,cAAI,CAAC,KAAKwc,aAAL,CAAmB3c,QAAnB,CAAL,EAAmC;AACjC,kBAAM,IAAI/P,KAAJ,CAAU,iBAAV,CAAN;AACD;;AACD,iBAAO,wDAAwB+P,QAAxB,CAAP;AACD;;;sCACaA,Q,EAAkB;AAC9B,iBAAO,uDAAuBA,QAAvB,CAAP;AACD;;;qCACY/L,O,EAAiB;AAC5B,cAAI;AACF,iBAAKywB,UAAL,CAAgBzwB,OAAhB,EAAyB,KAAK6rB,MAAL,CAAYC,GAArC;AACA,mBAAO,IAAP;AACD,WAHD,CAGE,OAAOvwB,CAAP,EAAU;AACV,mBAAO,KAAP;AACD;AACF;;;+BACM0J,E,EAAU;AACf,cAAIA,EAAE,CAACK,MAAH,KAAc,EAAd,IAAoBL,EAAE,CAACoE,KAAH,CAAS,CAAT,EAAY,CAAZ,MAAmB,MAA3C,EAAmD;AACjD,gBAAM2nB,SAAS,GAAG,KAAKP,UAAL,CAAgBxrB,EAAhB,EAAoB,KAAK4mB,MAAL,CAAYK,IAAhC,CAAlB;AACA,mBAAO,KAAK4E,UAAL,CAAgB,sEAAwB,EAAxB,EAA4BE,SAA5B,CAAhB,EAAwD,KAAKnF,MAAL,CAAYC,GAApE,CAAP;AACD,WAHD,MAGO,IAAI7mB,EAAE,CAACK,MAAH,KAAc,EAAd,IAAoBL,EAAE,CAACoE,KAAH,CAAS,CAAT,EAAY,CAAZ,MAAmB,MAA3C,EAAmD;AACxD,gBAAM2nB,UAAS,GAAG,KAAKP,UAAL,CAAgBxrB,EAAhB,EAAoB,KAAK4mB,MAAL,CAAYK,IAAhC,CAAlB;;AACA,mBAAO,KAAK4E,UAAL,CAAgB,sEAAwB,EAAxB,EAA4BE,UAA5B,CAAhB,EAAwD,KAAKnF,MAAL,CAAYG,GAApE,CAAP;AACD;;AACD,gBAAM,IAAIhwB,KAAJ,CAAU,oBAAV,CAAN;AACD;;;2CACkBi1B,S,EAAmB;AACpC,cAAIzC,EAAJ;;AACA,cAAIyC,SAAS,CAAC/H,KAAV,CAAgB,iBAAhB,CAAJ,EAAwC;AACtCsF,cAAE,GAAG,KAAKsC,UAAL,CAAgB,KAAKH,OAAL,CAAaM,SAAb,CAAhB,EAAyC,KAAKpF,MAAL,CAAYQ,IAArD,CAAL;AACD,WAFD,MAEO,IAAI4E,SAAS,CAAC/H,KAAV,CAAgB,iCAAhB,CAAJ,EAAwD;AAC7DsF,cAAE,GAAGyC,SAAL;AACD,WAFM,MAEA;AACL,kBAAM,IAAIj1B,KAAJ,CAAU,qBAAV,CAAN;AACD;;AACD,cAAMic,OAAO,GAAI,IAAI,4CAAJ,CAAgB,WAAhB,CAAD,CAA+BiZ,cAA/B,CACd,IAAInF,UAAJ,CAAe,KAAK0E,UAAL,CAAgBjC,EAAhB,EAAoB,KAAK3C,MAAL,CAAYQ,IAAhC,CAAf,CADc,CAAhB;AAGA,cAAM8E,SAAS,GAAGlZ,OAAO,CAACmZ,SAAR,GAAoBC,IAApB,GAA2BC,OAA3B,GAAqC,EAArC,IAA2C,CAA3C,GAA+C,CAA/C,GAAmD,CAArE,CAZoC,CAYoC;;AACxE,cAAMC,GAAG,GAAG,IAAI3V,KAAJ,CAAU,EAAV,EAAcuP,IAAd,CAAmB,CAAnB,CAAZ,CAboC,CAaD;;AACnC,cAAMvB,SAAS,GAAG,IAAImC,UAAJ,CAChB,CAACoF,SAAD,EAAYvS,MAAZ,CAAmB2S,GAAG,CAAC3S,MAAJ,CAAW3G,OAAO,CAACmZ,SAAR,GAAoBI,IAApB,GAA2BF,OAA3B,EAAX,EAAiDjoB,KAAjD,CAAuD,CAAC,EAAxD,CAAnB,CADgB,CAAlB;AAGA,cAAMpE,EAAE,GAAG,KAAK6rB,UAAL,CAAgBlH,SAAhB,EAA2B,KAAKiC,MAAL,CAAYM,IAAvC,CAAX;AACA,cAAM/pB,GAAG,GAAG,KAAKmuB,MAAL,CAAYtrB,EAAZ,CAAZ;AACA,iBAAO;AAAEupB,cAAE,EAAFA,EAAF;AAAMvpB,cAAE,EAAFA,EAAN;AAAU7C,eAAG,EAAHA;AAAV,WAAP;AACD;;;sCACaqvB,I,EAAcC,I,EAAY;AACtC,cAAMluB,GAAG,GAAI,IAAI,4CAAJ,CAAgB,WAAhB,CAAD,CAA+BmuB,aAA/B,CAA6C;AAAEhe,aAAC,EAAE8d,IAAL;AAAWpH,aAAC,EAAEqH;AAAd,WAA7C,CAAZ;AACA,cAAMP,SAAS,GAAG3tB,GAAG,CAAC4tB,SAAJ,GAAgBC,IAAhB,GAAuBC,OAAvB,GAAiC,EAAjC,IAAuC,CAAvC,GAA2C,CAA3C,GAA+C,CAAjE;AACA,cAAMC,GAAG,GAAG,IAAI3V,KAAJ,CAAU,EAAV,EAAcuP,IAAd,CAAmB,CAAnB,CAAZ;AACA,cAAMvB,SAAS,GAAG,IAAImC,UAAJ,CAChB,CAACoF,SAAD,EAAYvS,MAAZ,CAAmB2S,GAAG,CAAC3S,MAAJ,CAAWpb,GAAG,CAAC4tB,SAAJ,GAAgBI,IAAhB,GAAuBF,OAAvB,EAAX,EAA6CjoB,KAA7C,CAAmD,CAAC,EAApD,CAAnB,CADgB,CAAlB;AAGA,cAAMpE,EAAE,GAAG,KAAK6rB,UAAL,CAAgBlH,SAAhB,EAA2B,KAAKiC,MAAL,CAAYM,IAAvC,CAAX;AACA,cAAM/pB,GAAG,GAAG,KAAKmuB,MAAL,CAAYtrB,EAAZ,CAAZ;AACA,iBAAO7C,GAAP;AACD;;;mCACgB6C,E,EAAU;;;;;;;AACnB2sB,6B,GAAY,KAAKnB,UAAL,CAAgBxrB,EAAhB,EAAoB,KAAK4mB,MAAL,CAAYM,IAAhC,C;AACZ0F,yB,GAAQ,KAAKrB,OAAL,CAAaoB,SAAb,C;;AACI,2BAAM,gFAAN;;;AAAZE,6B;AACAC,8B,GAAa,mEAASF,KAAT,C;AACbG,gC,GAAeF,SAAS,CAACG,mBAAV,CAA8BF,UAA9B,C;AACfG,sB,GAAK,mEAASF,YAAT,EAAuB3oB,KAAvB,CAA6B,CAA7B,C;uDACJ;AAACimB,uBAAC,EAAE4C,EAAE,CAAC7oB,KAAH,CAAS,CAAT,EAAY,EAAZ,CAAJ;AAAqBmmB,uBAAC,EAAE0C,EAAE,CAAC7oB,KAAH,CAAS,EAAT,EAAa,GAAb;AAAxB,qB;;;;;;;;;AACR;;;+BACMkZ,G,EAAW;AAChB,iBAAO,KAAKuO,UAAL,CAAgB,KAAKH,OAAL,CAAapO,GAAG,CAAClZ,KAAJ,CAAU,CAAV,EAAa,EAAb,CAAb,CAAhB,EAAgD,KAAKwiB,MAAL,CAAYK,IAA5D,CAAP;AACD;;;gCACO3J,G,EAAK;AACX,iBAAO,IAAIwJ,UAAJ,CAAexJ,GAAG,CAAC2G,KAAJ,CAAU,cAAV,EAA0BhrB,GAA1B,CAA8B,UAAUi0B,CAAV,EAAa;AAC/D,mBAAOC,QAAQ,CAACD,CAAD,EAAI,EAAJ,CAAf;AACD,WAFqB,CAAf,CAAP;AAGD;;;gCACOE,M,EAAQ;AACd,cAAMC,SAAS,GAAG,IAAIvG,UAAJ,CAAesG,MAAf,CAAlB;AAAA,cAA0CE,QAAQ,GAAG,EAArD;;AACA,eAAK,IAAIzS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwS,SAAS,CAAChtB,MAA9B,EAAsCwa,CAAC,EAAvC,EAA2C;AACzC,gBAAMyC,GAAG,GAAG+P,SAAS,CAACxS,CAAD,CAAT,CAAa9b,QAAb,CAAsB,EAAtB,CAAZ;AACA,gBAAMwuB,SAAS,GAAG,CAAC,OAAOjQ,GAAR,EAAalZ,KAAb,CAAmB,CAAC,CAApB,CAAlB;AACAkpB,oBAAQ,CAAChiB,IAAT,CAAciiB,SAAd;AACD;;AACD,iBAAOD,QAAQ,CAAC1e,IAAT,CAAc,EAAd,CAAP;AACD;;;mCACUpR,O,EAAcgwB,O,EAAsB;AAC7C,cAAMC,CAAC,GAAG,IAAI3G,UAAJ,CAAe0G,OAAO,CAACntB,MAAR,GAAiB7C,OAAO,CAAC6C,MAAxC,CAAV;AACAotB,WAAC,CAAClS,GAAF,CAAMiS,OAAN;AACAC,WAAC,CAAClS,GAAF,CAAM/d,OAAN,EAAegwB,OAAO,CAACntB,MAAvB;AACA,iBAAO,iDAAiB,8CAAOkc,IAAP,CAAY,KAAKgP,OAAL,CAAakC,CAAb,CAAZ,EAA6B,KAA7B,CAAjB,CAAP;AACD;;;mCACUC,G,EAAKF,O,EAAS;AACvB,cAAIC,CAAC,GAAG,iDAAiBC,GAAjB,CAAR;AACAD,WAAC,GAAGA,CAAC,CAACrpB,KAAF,CAAQopB,OAAO,CAACntB,MAAhB,CAAJ;AACA,iBAAOotB,CAAP;AACD;;;iCACQtnB,C,EAA6B;AAAA,cAA1BwnB,EAA0B,uEAArB,IAAI7G,UAAJ,CAAe,CAAC,CAAD,CAAf,CAAqB;AACpC,cAAM8G,CAAC,GAAG,IAAI9G,UAAJ,CAAe6G,EAAE,CAACttB,MAAH,GAAY8F,CAAC,CAAC9F,MAA7B,CAAV;AACAutB,WAAC,CAACrS,GAAF,CAAMoS,EAAN;AACAC,WAAC,CAACrS,GAAF,CAAMpV,CAAN,EAASwnB,EAAE,CAACttB,MAAZ;AACA,iBAAOutB,CAAP;AACD;;;6BACIlN,K,EAAO6I,E,EAAE;AACZ7sB,iBAAO,CAACC,GAAR,CAAY4sB,EAAZ;;AACA,cAAIA,EAAE,CAACnlB,KAAH,CAAS,CAAT,EAAY,CAAZ,MAAmB,MAAvB,EAA+B;AAC7B,gBAAMpI,IAAI,GAAG,sEAAwB,EAAxB,EAA4B,KAAK4vB,QAAL,CAAc,KAAKF,OAAL,CAAahL,KAAb,CAAd,CAA5B,CAAb;AACA,gBAAMniB,GAAG,GAAI,IAAI,4CAAJ,CAAgB,WAAhB,CAAD,CAA+B0tB,cAA/B,CAA8C,IAAInF,UAAJ,CAAe,KAAK0E,UAAL,CAAgBjC,EAAhB,EAAoB,KAAK3C,MAAL,CAAYQ,IAAhC,CAAf,CAA9C,CAAZ;AACA,gBAAIG,GAAG,GAAGhpB,GAAG,CAACkrB,IAAJ,CAASztB,IAAT,EAAe;AAAC6xB,uBAAS,EAAE;AAAZ,aAAf,CAAV;AACAtG,eAAG,GAAG,IAAIT,UAAJ,CAAeS,GAAG,CAACqG,CAAJ,CAAMvB,OAAN,GAAgB1S,MAAhB,CAAuB4N,GAAG,CAACrhB,CAAJ,CAAMmmB,OAAN,EAAvB,CAAf,CAAN;AACA,gBAAM/E,KAAK,GAAG,KAAKuE,UAAL,CAAgBtE,GAAhB,EAAqB,KAAKX,MAAL,CAAYU,KAAjC,CAAd;AACA,gBAAMoC,MAAM,GAAGhJ,KAAK,GAAG,KAAK6K,OAAL,CAAahE,GAAb,CAAvB;AACA,mBAAO;AACL7G,mBAAK,EAAEA,KADF;AAEL6G,iBAAG,EAAEA,GAFA;AAGLF,mBAAK,EAAEC,KAHF;AAILoC,oBAAM,EAAEA;AAJH,aAAP;AAMD,WAbD,MAaO;AACL,gBAAM1tB,KAAI,GAAG,sEAAwB,EAAxB,EAA4B,KAAK4vB,QAAL,CAAc,KAAKF,OAAL,CAAahL,KAAb,CAAd,CAA5B,CAAb;;AACA,gBAAM6G,IAAG,GAAG,wEAA0BvrB,KAA1B,EAAgC,KAAKwvB,UAAL,CAAgBjC,EAAhB,EAAoB,KAAK3C,MAAL,CAAYO,IAAhC,CAAhC,EAAuE,YAAvE,CAAZ;;AACA,gBAAME,KAAK,GAAG,KAAKwE,UAAL,CAAgBtE,IAAhB,EAAqB,KAAKX,MAAL,CAAYS,KAAjC,CAAd;;AACA,gBAAMqC,OAAM,GAAGhJ,KAAK,GAAG,KAAK6K,OAAL,CAAahE,IAAb,CAAvB;;AACA,mBAAO;AACL7G,mBAAK,EAAEA,KADF;AAEL6G,iBAAG,EAAEA,IAFA;AAGLF,mBAAK,EAAEA,KAHF;AAILqC,oBAAM,EAAEA;AAJH,aAAP;AAMD;AACF;;;+BACMhJ,K,EAAe6G,G,EAAavnB,E,EAAU;AAC3C,cAAMhE,IAAI,GAAG,sEAAwB,EAAxB,EAA4B,KAAK4vB,QAAL,CAAc,KAAKF,OAAL,CAAahL,KAAb,CAAd,CAA5B,CAAb;AACA,cAAM9c,SAAS,GAAG,KAAK4nB,UAAL,CAAgBjE,GAAhB,EAAqB,KAAKX,MAAL,CAAYW,GAAjC,CAAlB;AACA,cAAM5C,SAAS,GAAG,KAAK6G,UAAL,CAAgBxrB,EAAhB,EAAoB,KAAK4mB,MAAL,CAAYK,IAAhC,CAAlB;AACA,iBAAO,+EAAiCrjB,SAAjC,EAA4C5H,IAA5C,EAAkD2oB,SAAlD,CAAP;AACD;;;kCACS4C,G,EAAW;AACnB,iBAAO,KAAKsE,UAAL,CAAgB,KAAKH,OAAL,CAAanE,GAAb,CAAhB,EAAmC,KAAKX,MAAL,CAAYS,KAA/C,CAAP;AACD;AACD;;;;;;sCAGcU,O,EAAiB;AAC7B;AACA,cAAMD,MAAM,GAAG,KAAK+D,UAAL,CAAgB,KAAKH,OAAL,CAAa3D,OAAO,CAAC3jB,KAAR,CAAc,CAAd,EAAiB,EAAjB,CAAb,CAAhB,EAAoD,KAAKwiB,MAAL,CAAYa,CAAhE,CAAf;AACA,cAAMxH,QAAQ,GAAG,KAAK6N,cAAL,CAAoB/F,OAAO,CAAC3jB,KAAR,CAAc,EAAd,CAApB,CAAjB;AACA,iBAAO;AACL0jB,kBAAM,EAAEA,MADH;AAEL7H,oBAAQ,EAAEA;AAFL,WAAP;AAID;;;uCACcE,O,EAAe;AAC5B;AACA,cAAM/B,GAAG,GAAG/a,MAAM,CAAC,KAAKqoB,OAAL,CAAavL,OAAO,CAAC/b,KAAR,CAAc,CAAd,EAAiB,CAAjB,CAAb,CAAD,CAAlB;;AACA,kBAAQga,GAAR;AACE,iBAAK,CAAL;AAAQ;AACN,uBAAO,KAAK2P,qBAAL,CAA2B5N,OAAO,CAAC/b,KAAR,CAAc,CAAd,CAA3B,CAAP;AACD;;AAAC,iBAAK,GAAL;AAAU;AACV,uBAAO,KAAK4pB,YAAL,CAAkB7N,OAAO,CAAC/b,KAAR,CAAc,CAAd,CAAlB,CAAP;AACD;;AAAC,iBAAK,GAAL;AAAU;AACV,uBAAO,KAAK6pB,iBAAL,CAAuB9N,OAAO,CAAC/b,KAAR,CAAc,CAAd,CAAvB,CAAP;AACD;;AAAC,iBAAK,GAAL;AAAU;AACV,uBAAO,KAAK8pB,iBAAL,CAAuB/N,OAAO,CAAC/b,KAAR,CAAc,CAAd,CAAvB,CAAP;AACD;;AAAC,iBAAK,GAAL;AAAU;AACV,uBAAO,KAAK+pB,gBAAL,CAAsBhO,OAAO,CAAC/b,KAAR,CAAc,CAAd,CAAtB,CAAP;AACD;;AAAC;AAAS;AACT,sBAAM,IAAIrN,KAAJ,CAAU,aAAV,CAAN;AACD;AAbH;AAeD;;;8CACqBopB,O,EAAY;AAChC,cAAM7oB,IAAI,GAAQ;AAAEwiB,gBAAI,EAAE;AAAR,WAAlB;AACAxiB,cAAI,CAAC6F,GAAL,GAAW,KAAK0uB,UAAL,CAAgB,KAAKH,OAAL,CAAavL,OAAO,CAAC/b,KAAR,CAAc,CAAd,EAAiB,EAAjB,CAAb,CAAhB,EAAoD,KAAKwiB,MAAL,CAAYC,GAAhE,CAAX;AACAvvB,cAAI,CAAC8F,MAAL,GAAc+iB,OAAO,CAAC/b,KAAR,CAAc,EAAd,EAAkB,EAAlB,CAAd;AACA,iBAAO9M,IAAP;AACD;;;qCACY6oB,O,EAAY;AACvB,cAAIlb,KAAK,GAAG,CAAZ;AACA,cAAMxB,EAAE,GAAG,KAAK2qB,YAAL,CAAkB;AAAEtU,gBAAI,EAAE;AAAR,WAAlB,EAAsCqG,OAAtC,CAAX;;AACA,cAAI1c,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI,CAA9B,MAAqC,IAAzC,EAA+C;AAC7C,kBAAM,IAAIlO,KAAJ,CAAU,YAAV,CAAN;AACD;;AACD0M,YAAE,CAACnM,IAAH,CAAQqxB,UAAR,GAAqB,KAAKkD,UAAL,CAAgB,KAAKH,OAAL,CAAajoB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI,EAA9B,CAAb,CAAhB,EAAiE,KAAK2hB,MAAL,CAAYK,IAA7E,CAArB;;AACA,cAAIxjB,EAAE,CAAC4qB,IAAH,CAAQhuB,MAAR,KAAmB4E,KAAvB,EAA8B;AAC5B,mBAAO,CAACxB,EAAE,CAACnM,IAAJ,CAAP;AACD,WAFD,MAEO;AACL,mBAAO,CAACmM,EAAE,CAACnM,IAAJ,EAAUqiB,MAAV,CAAiB,KAAKmU,cAAL,CAAoBrqB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,CAApB,CAAjB,CAAP;AACD;AACF;;;0CACiBkb,O,EAAY;AAC5B,cAAIlb,KAAK,GAAG,CAAZ;AACA,cAAMxB,EAAE,GAAG,KAAK2qB,YAAL,CAAkB;AAAEtU,gBAAI,EAAE;AAAR,WAAlB,EAA2CqG,OAA3C,CAAX;AACA,cAAMra,MAAM,GAAG,KAAKwoB,YAAL,CAAkB7qB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,CAAlB,CAAf;AACAxB,YAAE,CAACnM,IAAH,CAAQwO,MAAR,GAAiBA,MAAM,CAAC8P,KAAP,CAAa7W,QAAb,EAAjB;AACA0E,YAAE,CAACnM,IAAH,CAAQmE,WAAR,GAAsB,KAAK8yB,gBAAL,CAAsB9qB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAK,IAAIa,MAAM,CAAC0oB,KAAP,GAAe,CAAtC,EAAyCvpB,KAAK,IAAI,EAAlD,CAAtB,CAAtB;;AACA,cAAIxB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI,CAA9B,MAAqC,IAAzC,EAA+C;AAAE;AAC/C,gBAAIxB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI,CAA9B,MAAqC,UAAzC,EAAqD;AACnD,oBAAM,IAAIlO,KAAJ,CAAU,kBAAV,CAAN;AACD;;AACD,gBAAMmb,IAAI,GAAG7O,MAAM,CAAC,OAAOI,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI,CAA9B,CAAR,CAAnB;AACA,gBAAMwpB,QAAQ,GAAGhrB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAIiN,IAAI,GAAG,CAArC,CAAjB;;AACA,gBAAIuc,QAAQ,CAACrqB,KAAT,CAAe,CAAf,EAAkB,EAAlB,MAA0B,aAAa,CAAC8N,IAAI,GAAG,CAAR,EAAWnT,QAAX,CAAoB,EAApB,CAAb,GAAuC,gCAArE,EAAuG;AACrG,kBAAM5B,IAAG,GAAG,KAAKuxB,YAAL,CAAkBD,QAAQ,CAACrqB,KAAT,CAAe,EAAf,EAAmB,GAAnB,CAAlB,CAAZ;;AACA,kBAAIqqB,QAAQ,CAACrqB,KAAT,CAAe,GAAf,EAAoB,GAApB,MAA6B,cAAjC,EAAiD;AAAE;AACjDX,kBAAE,CAACnM,IAAH,CAAQ0xB,UAAR,GAAqB,KAAKG,qBAAL,CAA2BhsB,IAA3B,CAArB;AACD,eAFD,MAEO,IAAIsxB,QAAQ,CAACrqB,KAAT,CAAe,GAAf,EAAoB,GAApB,MAA6B,gBAAjC,EAAmD;AAAE;AAC1D,oBAAMuqB,OAAO,GAAG,KAAKC,eAAL,CAAqBH,QAAQ,CAACrqB,KAAT,CAAe,GAAf,EAAoBqqB,QAAQ,CAACpuB,MAAT,GAAkB,EAAtC,CAArB,CAAhB;;AACA,oBAAIouB,QAAQ,CAACrqB,KAAT,CAAeqqB,QAAQ,CAACpuB,MAAT,GAAkB,EAAjC,EAAqCouB,QAAQ,CAACpuB,MAA9C,MAA0D,cAA9D,EAA8E;AAC5E,wBAAM,IAAItJ,KAAJ,CAAU,kBAAV,CAAN;AACD;;AACD2F,uBAAO,CAACC,GAAR,CAAY,WAAWgyB,OAAO,CAAC/Y,KAA/B;AACAnS,kBAAE,CAACnM,IAAH,CAAQ0xB,UAAR,GAAqB,KAAKD,yBAAL,CAA+B5rB,IAA/B,EAAoCwxB,OAAO,CAAC/Y,KAAR,CAAc7W,QAAd,EAApC,CAArB;AACD,eAPM,MAOA;AACL,sBAAM,IAAIhI,KAAJ,CAAU,kBAAV,CAAN;AACD;AACF,aAdD,MAcO,IAAI03B,QAAQ,CAACrqB,KAAT,CAAe,CAAf,EAAkB,EAAlB,MAA0B,aAAa,CAAC8N,IAAI,GAAG,CAAR,EAAWnT,QAAX,CAAoB,EAApB,CAAb,GAAuC,gCAArE,EAAuG;AAAE;AAC9G,kBAAM8vB,EAAE,GAAG,KAAKH,YAAL,CAAkBD,QAAQ,CAACrqB,KAAT,CAAe,EAAf,EAAmB,GAAnB,CAAlB,CAAX;;AACA,kBAAIqqB,QAAQ,CAACrqB,KAAT,CAAe,GAAf,EAAoB,GAApB,MAA6B,wEAAjC,EAA2G,CAC1G;;AACD,kBAAMuqB,QAAO,GAAG,KAAKC,eAAL,CAAqBH,QAAQ,CAACrqB,KAAT,CAAe,GAAf,CAArB,CAAhB;;AACA,kBAAIqqB,QAAQ,CAACrqB,KAAT,CAAe,MAAMuqB,QAAO,CAACH,KAAR,GAAgB,CAArC,EAAwC,MAAMG,QAAO,CAACH,KAAR,GAAgB,CAA9D,MAAqE,YAAzE,EAAuF;AACrF,sBAAM,IAAIz3B,KAAJ,CAAU,kBAAV,CAAN;AACD;;AACD0M,gBAAE,CAACnM,IAAH,CAAQ0xB,UAAR,GAAqB,KAAKC,wBAAL,CAA8B4F,EAA9B,EAAkCF,QAAO,CAAC/Y,KAAR,CAAc7W,QAAd,EAAlC,CAArB;AACD,aATM,MASA;AACL,oBAAM,IAAIhI,KAAJ,CAAU,kBAAV,CAAN;AACD;AACF;;AACD,cAAI0M,EAAE,CAAC4qB,IAAH,CAAQhuB,MAAR,KAAmB4E,KAAvB,EAA8B;AAC5B,mBAAO,CAACxB,EAAE,CAACnM,IAAJ,CAAP;AACD,WAFD,MAEO;AACL,mBAAO,CAACmM,EAAE,CAACnM,IAAJ,EAAUqiB,MAAV,CAAiB,KAAKmU,cAAL,CAAoBrqB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,CAApB,CAAjB,CAAP;AACD;AACF;;;0CACiBkb,O,EAAY;AAC5B,cAAIlb,KAAK,GAAG,CAAZ;AACA,cAAMxB,EAAE,GAAG,KAAK2qB,YAAL,CAAkB;AAAEtU,gBAAI,EAAE;AAAR,WAAlB,EAA2CqG,OAA3C,CAAX;AACA,cAAMhW,OAAO,GAAG,KAAKmkB,YAAL,CAAkB7qB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,CAAlB,CAAhB;AACAxB,YAAE,CAACnM,IAAH,CAAQ6S,OAAR,GAAkBA,OAAO,CAACyL,KAAR,CAAc7W,QAAd,EAAlB;AACAkG,eAAK,IAAIkF,OAAO,CAACqkB,KAAR,GAAgB,CAAzB;;AACA,cAAI/qB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI,CAA9B,MAAqC,IAAzC,EAA+C;AAAE;AAC/C,kBAAM,IAAIlO,KAAJ,CAAU,kBAAV,CAAN;AACD;;AACD,cAAM+3B,aAAa,GAAG,sZAAtB,CAT4B,CASkZ;;AAC9a,cAAIrrB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI6pB,aAAa,CAACzuB,MAA5C,MAAwDyuB,aAA5D,EAA2E;AACzE,kBAAM,IAAI/3B,KAAJ,CAAU,sBAAV,CAAN;AACD;;AACD,cAAMg4B,iBAAiB,GAAG,oBAA1B;;AACA,cAAItrB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI8pB,iBAAiB,CAAC1uB,MAAhD,MAA4D0uB,iBAAhE,EAAmF;AACjF,kBAAM,IAAIh4B,KAAJ,CAAU,0BAAV,CAAN;AACD;;AACD0M,YAAE,CAACnM,IAAH,CAAQixB,MAAR,GAAiB,KAAKC,gBAAL,CAAsB/kB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI,EAA9B,CAAtB,CAAjB;;AACA,cAAIxB,EAAE,CAAC4qB,IAAH,CAAQhuB,MAAR,KAAmB4E,KAAvB,EAA8B;AAC5B,mBAAO,CAACxB,EAAE,CAACnM,IAAJ,CAAP;AACD,WAFD,MAEO;AACL,mBAAO,CAACmM,EAAE,CAACnM,IAAJ,EAAUqiB,MAAV,CAAiB,KAAKmU,cAAL,CAAoBrqB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,CAApB,CAAjB,CAAP;AACD;AACF;;;yCACgBkb,O,EAAY;AAC3B,cAAIlb,KAAK,GAAG,CAAZ;AACA,cAAMxB,EAAE,GAAG,KAAK2qB,YAAL,CAAkB;AAAEtU,gBAAI,EAAE;AAAR,WAAlB,EAA0CqG,OAA1C,CAAX;;AACA,cAAI1c,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI,CAA9B,MAAqC,IAAzC,EAA+C;AAC7CxB,cAAE,CAACnM,IAAH,CAAQ6L,QAAR,GAAmB,KAAK6rB,SAAL,CAAevrB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI,EAA9B,CAAf,CAAnB;AACD,WAFD,MAEO,IAAIxB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAK,GAAG,CAAtB,EAAyBA,KAAzB,MAAoC,IAAxC,EAA8C;AACnD,kBAAM,IAAIlO,KAAJ,CAAU,YAAV,CAAN;AACD;;AACD,cAAI0M,EAAE,CAAC4qB,IAAH,CAAQhuB,MAAR,KAAmB4E,KAAvB,EAA8B;AAC5B,mBAAO,CAACxB,EAAE,CAACnM,IAAJ,CAAP;AACD,WAFD,MAEO;AACL,mBAAO,CAACmM,EAAE,CAACnM,IAAJ,EAAUqiB,MAAV,CAAiB,KAAKmU,cAAL,CAAoBrqB,EAAE,CAAC4qB,IAAH,CAAQjqB,KAAR,CAAca,KAAd,CAApB,CAAjB,CAAP;AACD;AACF;;;qCACY3N,I,EAAW6oB,O,EAAY;AAClC,cAAIlb,KAAK,GAAG,CAAZ;AACA3N,cAAI,CAACqE,MAAL,GAAc,KAAKqzB,SAAL,CAAe7O,OAAO,CAAC/b,KAAR,CAAca,KAAd,EAAqBA,KAAK,IAAI,EAA9B,CAAf,CAAd,CAFkC,CAGlC;;AACA,cAAMpD,GAAG,GAAG,KAAKysB,YAAL,CAAkBnO,OAAO,CAAC/b,KAAR,CAAca,KAAd,CAAlB,CAAZ;AACA3N,cAAI,CAACuK,GAAL,GAAWA,GAAG,CAAC+T,KAAJ,CAAU7W,QAAV,EAAX;AACA,cAAMkL,OAAO,GAAG,KAAKqkB,YAAL,CAAkBnO,OAAO,CAAC/b,KAAR,CAAca,KAAK,IAAIpD,GAAG,CAAC2sB,KAAJ,GAAY,CAAnC,CAAlB,CAAhB;AACAl3B,cAAI,CAAC2S,OAAL,GAAeA,OAAO,CAAC2L,KAAR,CAAc7W,QAAd,EAAf;AACA,cAAM0pB,SAAS,GAAG,KAAK6F,YAAL,CAAkBnO,OAAO,CAAC/b,KAAR,CAAca,KAAK,IAAIgF,OAAO,CAACukB,KAAR,GAAgB,CAAvC,CAAlB,CAAlB;AACAl3B,cAAI,CAACmxB,SAAL,GAAiBA,SAAS,CAAC7S,KAAV,CAAgB7W,QAAhB,EAAjB;AACA,cAAM2pB,aAAa,GAAG,KAAK4F,YAAL,CAAkBnO,OAAO,CAAC/b,KAAR,CAAca,KAAK,IAAIwjB,SAAS,CAAC+F,KAAV,GAAkB,CAAzC,CAAlB,CAAtB;AACAl3B,cAAI,CAACoxB,aAAL,GAAqBA,aAAa,CAAC9S,KAAd,CAAoB7W,QAApB,EAArB;AACA,cAAMsvB,IAAI,GAAGlO,OAAO,CAAC/b,KAAR,CAAca,KAAK,IAAIyjB,aAAa,CAAC8F,KAAd,GAAsB,CAA7C,CAAb;AACA,iBAAO;AACLl3B,gBAAI,EAAEA,IADD;AAEL+2B,gBAAI,EAAEA;AAFD,WAAP;AAID;;;kCACS3N,K,EAAa;AACrB,cAAIA,KAAK,CAACtc,KAAN,CAAY,CAAZ,EAAe,CAAf,MAAsB,IAA1B,EAAgC;AAC9B,mBAAO,KAAKynB,UAAL,CAAgB,KAAKH,OAAL,CAAahL,KAAK,CAACtc,KAAN,CAAY,CAAZ,EAAe,EAAf,CAAb,CAAhB,EAAkD,KAAKwiB,MAAL,CAAYC,GAA9D,CAAP;AACD,WAFD,MAEO,IAAInG,KAAK,CAACtc,KAAN,CAAY,CAAZ,EAAe,CAAf,MAAsB,IAA1B,EAAgC;AACrC,mBAAO,KAAKynB,UAAL,CAAgB,KAAKH,OAAL,CAAahL,KAAK,CAACtc,KAAN,CAAY,CAAZ,EAAe,EAAf,CAAb,CAAhB,EAAkD,KAAKwiB,MAAL,CAAYG,GAA9D,CAAP;AACD,WAFM,MAEA,IAAIrG,KAAK,CAACtc,KAAN,CAAY,CAAZ,EAAe,CAAf,MAAsB,IAA1B,EAAgC;AACrC,mBAAO,KAAKynB,UAAL,CAAgB,KAAKH,OAAL,CAAahL,KAAK,CAACtc,KAAN,CAAY,CAAZ,EAAe,EAAf,CAAb,CAAhB,EAAkD,KAAKwiB,MAAL,CAAYI,GAA9D,CAAP;AACD,WAFM,MAEA;AACL,kBAAM,IAAIjwB,KAAJ,CAAU,aAAV,CAAN;AACD;AACF;;;mCACU;AACT,iBAAO,IAAP;AACD;;;qCACY2pB,K,EAAa;AACxB,iBAAO,8CAAOnE,IAAP,CAAY,KAAKmP,OAAL,CAAahL,KAAb,CAAZ,EAAiC3hB,QAAjC,CAA0C,OAA1C,CAAP;AACD;;;qCACYue,G,EAAW;AACtB,cAAIkR,KAAK,GAAG,CAAZ;AACA,cAAI5Y,KAAK,GAAG,CAAZ;;AACA,iBAAO,CAAP,EAAU;AACR,gBAAMqZ,KAAI,GAAG5rB,MAAM,CAAC,OAAOia,GAAG,CAAClZ,KAAJ,CAAU,IAAIoqB,KAAK,GAAG,CAAtB,EAAyB,IAAIA,KAAK,GAAG,CAArC,CAAR,CAAnB;;AACA5Y,iBAAK,IAAK,CAACqZ,KAAI,GAAG,GAAR,IAAgB,cAAOT,KAAP,CAA1B;AACAA,iBAAK;;AACL,gBAAI,CAACS,KAAI,GAAG,GAAR,MAAiB,GAArB,EAA0B;AACxB;AACD;AACF;;AACD,iBAAO;AACLrZ,iBAAK,EAAEA,KADF;AAEL4Y,iBAAK,EAAEA;AAFF,WAAP;AAID;;;wCACelR,G,EAAW;AACzB,cAAIkR,KAAK,GAAG,CAAZ;AACA,cAAI5Y,KAAK,GAAG,8CAAI,CAAJ,CAAZ;;AACA,iBAAO,CAAP,EAAU;AACR,gBAAMqZ,MAAI,GAAG5rB,MAAM,CAAC,OAAOia,GAAG,CAAClZ,KAAJ,CAAU,IAAIoqB,KAAK,GAAG,CAAtB,EAAyB,IAAIA,KAAK,GAAG,CAArC,CAAR,CAAnB;;AACA,gBAAIA,KAAK,KAAK,CAAd,EAAiB;AACf5Y,mBAAK,GAAG,8CAAK,CAACqZ,MAAI,GAAG,EAAR,IAAe,cAAOT,KAAP,CAApB,EAAoCzyB,GAApC,CAAwC6Z,KAAxC,CAAR;AACD,aAFD,MAEO;AACLA,mBAAK,GAAG,8CAAK,CAACqZ,MAAI,GAAG,GAAR,IAAe,CAAhB,IAAsB,CAA1B,EAA6BzS,KAA7B,CAAmC,KAAK,cAAQgS,KAAK,GAAG,CAAhB,CAAxC,EAA4DzyB,GAA5D,CAAgE6Z,KAAhE,CAAR;AACD;;AACD4Y,iBAAK;;AACL,gBAAI,CAACS,MAAI,GAAG,GAAR,MAAiB,GAArB,EAA0B;AACxB;AACD;AACF;;AACD,iBAAO;AACLrZ,iBAAK,EAAEA,KADF;AAEL4Y,iBAAK,EAAEA;AAFF,WAAP;AAID;;;yCACgBlR,G,EAAW;AAC1B,cAAIA,GAAG,CAAClZ,KAAJ,CAAU,CAAV,EAAa,CAAb,MAAoB,IAAxB,EAA8B;AAC5B,mBAAO,KAAK4qB,SAAL,CAAe1R,GAAG,CAAClZ,KAAJ,CAAU,CAAV,EAAa,EAAb,CAAf,CAAP;AACD,WAFD,MAEO,IAAIkZ,GAAG,CAAClZ,KAAJ,CAAU,CAAV,EAAa,CAAb,MAAoB,IAAxB,EAA8B;AACnC,mBAAO,KAAKynB,UAAL,CAAgB,KAAKH,OAAL,CAAapO,GAAG,CAAClZ,KAAJ,CAAU,CAAV,EAAa,EAAb,CAAb,CAAhB,EAAgD,KAAKwiB,MAAL,CAAYtD,EAA5D,CAAP;AACD,WAFM,MAEA;AACL,kBAAM,IAAIvsB,KAAJ,CAAU,UAAV,CAAN;AACD;AACF;AACD;;;;;;oCAGY0pB,G,EAAQ;AAClB,cAAM5G,MAAM,GAAa,EAAzB;;AACA,eAAK,IAAIgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4F,GAAG,CAACR,QAAJ,CAAa5f,MAAjC,EAAyCwa,CAAC,EAA1C,EAA8C;AAC5C,gBAAI4F,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgBf,IAAhB,KAAyB,QAA7B,EAAuC;AACrC,kBAAIoV,OAAO,GAAG,EAAd;AACA,kBAAIC,SAAS,GAAG,EAAhB;AACAD,qBAAO,GAAG,KAAKl3B,SAAL,CAAe8D,OAAf,CAAuB,uBAAvB,CAAV;AACAqzB,uBAAS,GAAG,KAAKn3B,SAAL,CAAe8D,OAAf,CAAuB,yBAAvB,CAAZ;AACA+d,oBAAM,CAACvO,IAAP,CAAY4jB,OAAO,GAAG,GAAV,GAAgBzO,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgBf,IAA5C;AACAD,oBAAM,CAACvO,IAAP,CAAY6jB,SAAS,GAAG,GAAZ,GAAkB1O,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgBlf,MAA9C;;AACA,kBAAI8kB,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgBf,IAAhB,KAAyB,aAA7B,EAA4C;AAC1C,oBAAIsV,cAAc,GAAG,EAArB;AACA,oBAAIC,SAAS,GAAG,EAAhB;AACAD,8BAAc,GAAG,KAAKp3B,SAAL,CAAe8D,OAAf,CAAuB,8BAAvB,CAAjB;AACAuzB,yBAAS,GAAG,KAAKr3B,SAAL,CAAe8D,OAAf,CAAuB,yBAAvB,CAAZ;AACA+d,sBAAM,CAACvO,IAAP,CAAY8jB,cAAc,GAAG,GAAjB,GAAuB3O,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgBpf,WAAnD;AACAoe,sBAAM,CAACvO,IAAP,CAAY+jB,SAAS,GAAG,GAAZ,GAAkB,8CAAIhsB,MAAM,CAACod,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgB/U,MAAjB,CAAV,EAAoC0I,GAApC,CAAwC,KAAKmZ,QAA7C,EAAuD5oB,QAAvD,EAAlB,GAAsF,MAAlG;AACD,eAPD,MAOO,IAAI0hB,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgBf,IAAhB,KAAyB,aAA7B,EAA4C;AACjD,oBAAIwV,UAAU,GAAG,EAAjB;AACA,oBAAIC,UAAU,GAAG,EAAjB;AACAD,0BAAU,GAAG,KAAKt3B,SAAL,CAAe8D,OAAf,CAAuB,0BAAvB,CAAb;AACAyzB,0BAAU,GAAG,KAAKv3B,SAAL,CAAe8D,OAAf,CAAuB,0BAAvB,CAAb,CAJiD,CAKjD;;AACA+d,sBAAM,CAACvO,IAAP,CAAYgkB,UAAU,GAAG,GAAb,GAAmB7O,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgBuQ,cAA/C,EANiD,CAMgB;;AACjEvR,sBAAM,CAACvO,IAAP,CAAYikB,UAAU,GAAG,GAAb,GAAmB,8CAAIlsB,MAAM,CAACod,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgB1Q,OAAjB,CAAV,EAAqCqE,GAArC,CAAyC,KAAKmZ,QAA9C,EAAwD5oB,QAAxD,EAAnB,GAAwF,MAApG;AACD,eARM,MAQA,IAAI0hB,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgBf,IAAhB,KAAyB,YAA7B,EAA2C;AAChD,oBAAI0V,WAAW,GAAG,EAAlB;AACAA,2BAAW,GAAG,KAAKx3B,SAAL,CAAe8D,OAAf,CAAuB,2BAAvB,CAAd;AACA+d,sBAAM,CAACvO,IAAP,CAAYkkB,WAAW,GAAG,GAAd,GAAoB/O,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgB1X,QAAhD,EAHgD,CAIhD;AACD,eALM,MAKA;AACL,oBAAIssB,kBAAkB,GAAG,EAAzB;AACAA,kCAAkB,GAAG,KAAKz3B,SAAL,CAAe8D,OAAf,CAAuB,kCAAvB,CAArB;AACA,sBAAM,IAAI/E,KAAJ,CAAU04B,kBAAV,CAAN;AACD;;AAED,kBAAIC,MAAM,GAAG,EAAb;AACAA,oBAAM,GAAG,KAAK13B,SAAL,CAAe8D,OAAf,CAAuB,sBAAvB,CAAT;AACA+d,oBAAM,CAACvO,IAAP,CAAYokB,MAAM,GAAG,GAAT,GAAe,8CAAIrsB,MAAM,CAACod,GAAG,CAACR,QAAJ,CAAapF,CAAb,EAAgBhZ,GAAjB,CAAV,EAAiC2M,GAAjC,CAAqC,KAAKmZ,QAA1C,EAAoD5oB,QAApD,EAAf,GAAgF,MAA5F;;AACA,kBAAI8b,CAAC,GAAG,CAAJ,GAAQ4F,GAAG,CAACR,QAAJ,CAAa5f,MAAzB,EAAiC;AAC/BwZ,sBAAM,CAACvO,IAAP,CAAY,EAAZ;AACD;AACF;AACF;;AACD,iBAAOuO,MAAP;AACD;;;8CACqB1c,G,EAAa;AACjC,iBAAO;AACLwyB,sBAAU,EAAE,IADP;AAEL/Z,iBAAK,EACH,CAAC;AAAEga,kBAAI,EAAE;AAAR,aAAD,EACA;AACEA,kBAAI,EAAE,KADR;AAEE/Z,kBAAI,EAAE,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD;AAFR,aADA,EAKA;AACEA,kBAAI,EAAE,MADR;AAEE/Z,kBAAI,EACF,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD,EACA;AACEhlB,sBAAM,EAAEzN;AADV,eADA;AAHJ,aALA,EAaA;AAAEyyB,kBAAI,EAAE;AAAR,aAbA,EAakB;AAAEA,kBAAI,EAAE;AAAR,aAblB,EAcA;AAAEA,kBAAI,EAAE;AAAR,aAdA;AAHG,WAAP;AAmBD;;;kDACyB;AACxB,iBAAO;AACLD,sBAAU,EAAE,IADP;AAEL/Z,iBAAK,EACH,CAAC;AAAEga,kBAAI,EAAE;AAAR,aAAD,EACA;AACEA,kBAAI,EAAE,KADR;AAEE/Z,kBAAI,EAAE,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD;AAFR,aADA,EAIG;AACDA,kBAAI,EAAE,MADL;AAED/Z,kBAAI,EAAE,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD;AAFL,aAJH,EAQA;AAAEA,kBAAI,EAAE;AAAR,aARA,EASA;AAAEA,kBAAI,EAAE;AAAR,aATA;AAHG,WAAP;AAcD;;;kDACyBrgB,E,EAAYzJ,M,EAAgB;AACpD,iBAAO;AACL6pB,sBAAU,EAAE,IADP;AAEL/Z,iBAAK,EACH,CAAC;AAAEga,kBAAI,EAAE;AAAR,aAAD,EACA;AAAEA,kBAAI,EAAE,KAAR;AAAe/Z,kBAAI,EAAE,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD;AAArB,aADA,EAEA;AACEA,kBAAI,EAAE,MADR;AAEE/Z,kBAAI,EACF,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD,EACA;AACEhlB,sBAAM,EAAE2E;AADV,eADA;AAHJ,aAFA,EAUA;AAAEqgB,kBAAI,EAAE;AAAR,aAVA,EAWA;AACEA,kBAAI,EAAE,MADR;AAEE/Z,kBAAI,EACF,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD,EAAoB;AAAE,uBAAO9pB;AAAT,eAApB;AAHJ,aAXA,EAgBA;AAAE8pB,kBAAI,EAAE;AAAR,aAhBA,EAgBkB;AAAEA,kBAAI,EAAE;AAAR,aAhBlB,EAiBA;AAAEA,kBAAI,EAAE;AAAR,aAjBA;AAHG,WAAP;AAsBD;;;iDACwBrgB,E,EAAYzJ,M,EAAgB;AACnD,iBAAO;AACL6pB,sBAAU,EAAE,IADP;AAEL/Z,iBAAK,EAAE,CAAC;AAAEga,kBAAI,EAAE;AAAR,aAAD,EACP;AAAEA,kBAAI,EAAE,KAAR;AAAe/Z,kBAAI,EAAE,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD;AAArB,aADO,EAEP;AACEA,kBAAI,EAAE,MADR;AAEE/Z,kBAAI,EACF,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD,EACA;AAAEhlB,sBAAM,EAAE2E;AAAV,eADA;AAHJ,aAFO,EAQP;AAAEqgB,kBAAI,EAAE,UAAR;AAAoB/Z,kBAAI,EAAE,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD;AAA1B,aARO,EASP,CAAC;AACCA,kBAAI,EAAE,SADP;AAEC/Z,kBAAI,EACF,CAAC,CAAC,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD,EAAmB;AAAEA,oBAAI,EAAE;AAAR,eAAnB,CAAD,CAAD,EACA,EADA;AAHH,aAAD,CATO,EAeP;AACEA,kBAAI,EAAE,MADR;AAEE/Z,kBAAI,EAAE,CAAC;AAAE+Z,oBAAI,EAAE;AAAR,eAAD,EAAoB;AAAE,uBAAO9pB;AAAT,eAApB;AAFR,aAfO,EAmBP;AAAE8pB,kBAAI,EAAE;AAAR,aAnBO,EAmBW;AAAEA,kBAAI,EAAE;AAAR,aAnBX,EAoBP;AAAEA,kBAAI,EAAE;AAAR,aApBO;AAFF,WAAP;AAwBD;;;yCACgBzyB,G,EAAa;AAC5B,cAAI0yB,KAAJ;;AACA,cAAI1yB,GAAG,CAACiH,KAAJ,CAAU,CAAV,EAAa,CAAb,MAAoB,IAAxB,EAA8B;AAC5ByrB,iBAAK,GAAG,OAAO,KAAKtE,OAAL,CAAa,KAAKC,UAAL,CAAgBruB,GAAhB,EAAqB,KAAKypB,MAAL,CAAYC,GAAjC,CAAb,CAAf;AACD,WAFD,MAEO;AACLgJ,iBAAK,GAAG1yB,GAAR;AACD;;AACD,iBAAO;AACLnG,gBAAI,EAAE,CACJ;AACE44B,kBAAI,EAAE,WADR;AAEE/Z,kBAAI,EAAE,CACJ;AACE+Z,oBAAI,EAAE,IADR;AAEE/Z,oBAAI,EAAE,CACJ;AACE+Z,sBAAI,EAAE,QADR;AAEE/Z,sBAAI,EAAE,CACJ;AACE+Z,wBAAI,EAAE;AADR,mBADI,EAIJ;AACEA,wBAAI,EAAE,MADR;AAEE/Z,wBAAI,EAAE,CACJ;AACE+Z,0BAAI,EAAE;AADR,qBADI;AAFR,mBAJI,CAFR;AAeEE,wBAAM,EAAE,CACN,KADM;AAfV,iBADI,EAoBJ;AACEF,sBAAI,EAAE,MADR;AAEEE,wBAAM,EAAE,CACN,UADM;AAFV,iBApBI;AAFR,eADI;AAFR,aADI,EAoCJ;AACEF,kBAAI,EAAE,SADR;AAEE/Z,kBAAI,EAAE,CACJ;AACE+Z,oBAAI,EAAE;AADR,eADI;AAFR,aApCI,EA4CJ;AACEA,kBAAI,EAAE,MADR;AAEE/Z,kBAAI,EAAE,CACJ,CACE,CACE,CACE;AACE+Z,oBAAI,EAAE;AADR,eADF,EAIE;AACEA,oBAAI,EAAE;AADR,eAJF,EAOE;AACEA,oBAAI,EAAE,KADR;AAEE/Z,oBAAI,EAAE,CACJ,CACE;AACE+Z,sBAAI,EAAE;AADR,iBADF,CADI;AAFR,eAPF,CADF,CADF,EAqBE;AACEA,oBAAI,EAAE,SADR;AAEE/Z,oBAAI,EAAE,CACJ,CACE;AACE+Z,sBAAI,EAAE,MADR;AAEE/Z,sBAAI,EAAE,CACJ;AACE+Z,wBAAI,EAAE;AADR,mBADI,EAIJ;AACE,2BAAO;AADT,mBAJI;AAFR,iBADF,EAYE;AACEA,sBAAI,EAAE;AADR,iBAZF,EAeE,CACE,CACE;AACEA,sBAAI,EAAE;AADR,iBADF,EAIE;AACEA,sBAAI,EAAE;AADR,iBAJF,CADF,EASE;AACEA,sBAAI,EAAE,IADR;AAEE/Z,sBAAI,EAAE,CACJ,EADI,EAIJ,CACE,CACE;AACE+Z,wBAAI,EAAE;AADR,mBADF,EAIE;AACEA,wBAAI,EAAE;AADR,mBAJF,CADF,CAJI;AAFR,iBATF,CAfF,EA2CE,CACE;AACEA,sBAAI,EAAE,KADR;AAEE/Z,sBAAI,EAAE,CACJ,CACE;AACE+Z,wBAAI,EAAE;AADR,mBADF,CADI;AAFR,iBADF,EAWE;AACEA,sBAAI,EAAE;AADR,iBAXF,CA3CF,EA0DE;AACEA,sBAAI,EAAE;AADR,iBA1DF,EA6DE;AACEA,sBAAI,EAAE;AADR,iBA7DF,EAgEE;AACEA,sBAAI,EAAE;AADR,iBAhEF,EAmEE,CACE,CACE;AACEA,sBAAI,EAAE;AADR,iBADF,EAIE;AACEA,sBAAI,EAAE;AADR,iBAJF,CADF,EASE;AACEA,sBAAI,EAAE,IADR;AAEE/Z,sBAAI,EAAE,CACJ,EADI,EAIJ,CACE,CACE;AACE+Z,wBAAI,EAAE;AADR,mBADF,EAIE;AACEA,wBAAI,EAAE;AADR,mBAJF,CADF,CAJI;AAFR,iBATF,CAnEF,EA+FE;AACEA,sBAAI,EAAE;AADR,iBA/FF,EAkGE;AACEA,sBAAI,EAAE;AADR,iBAlGF,EAqGE;AACEA,sBAAI,EAAE;AADR,iBArGF,CADI,EA0GJ,CACE;AACEA,sBAAI,EAAE;AADR,iBADF,EAIE;AACEA,sBAAI,EAAE,KADR;AAEE/Z,sBAAI,EAAE,CACJ;AACE+Z,wBAAI,EAAE;AADR,mBADI;AAFR,iBAJF,EAYE;AACEA,sBAAI,EAAE;AADR,iBAZF,CA1GI;AAFR,eArBF,CADI;AAFR,aA5CI,CADD;AAuMLljB,mBAAO,EACL;AAAEgU,mBAAK,EAAEmP;AAAT;AAxMG,WAAP;AA0MD;;;;;;;uBA9vCUlJ,gB,EAAgB,uH,EAAA,6H,EAAA,qI;AAAA,K;;;aAAhBA,gB;AAAgB,eAAhBA,gBAAgB;;;;;sEAAhBA,gB,EAAgB;cAD5B;AAC4B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChB7B,QAAMoJ,MAAM,GAAG,QAAf;AACA,QAAMC,MAAM,GAAG,QAAf;AACA,QAAMC,OAAO,GAAG,SAAhB;AACA,QAAMC,WAAW,GAAG,mCAApB;;QAIaC,Y;AAuDX,4BACUpzB,gBADV,EAEUC,sBAFV,EAEwD;AAAA;;AAAA;;AAD9C,aAAAD,gBAAA,GAAAA,gBAAA;AACA,aAAAC,sBAAA,GAAAA,sBAAA;AAxDV,aAAA/E,SAAA,GAAY,IAAI,oDAAJ,EAAZ;AACA,aAAAm4B,KAAA,GAAa,IAAb;AACA,aAAAC,WAAA,GAAqE,IAArE;AAGA,aAAAC,YAAA,GAAe;AACbC,iBAAO,4CACJR,MADI,EACK;AACRhnB,gBAAI,EAAE,QADE;AAERmK,uBAAW,EAAE,QAFL;AAGRsd,oBAAQ,EAAE,0EAHF;AAIR5rB,oBAAQ,EAAE,cAJF;AAKR6rB,mCAAuB,EAAE;AALjB,WADL,6BAQJT,MARI,EAQK;AACRjnB,gBAAI,EAAE,QADE;AAERmK,uBAAW,EAAE,QAFL;AAGRsd,oBAAQ,EAAE,gBAHF;AAIR5rB,oBAAQ,EAAE,sBAJF;AAKR6rB,mCAAuB,EAAE;AALjB,WARL,6BAeJR,OAfI,EAeM;AACTlnB,gBAAI,EAAE,SADG;AAETmK,uBAAW,EAAE,SAFJ;AAGTsd,oBAAQ,EAAE,kCAHD;AAIT5rB,oBAAQ,EAAE,oBAJD;AAKT6rB,mCAAuB,EAAE;AALhB,WAfN,YADM;AAwBbC,iBAAO,4CACJX,MADI,EACK;AACRhnB,gBAAI,EAAE,QADE;AAERmK,uBAAW,EAAE,QAFL;AAGRsd,oBAAQ,EAAE,0EAHF;AAIR5rB,oBAAQ,EAAE,cAJF;AAKR6rB,mCAAuB,EAAE;AALjB,WADL,6BAQJT,MARI,EAQK;AACRjnB,gBAAI,EAAE,QADE;AAERmK,uBAAW,EAAE,QAFL;AAGRsd,oBAAQ,EAAE,gBAHF;AAIR5rB,oBAAQ,EAAE,cAJF;AAKR6rB,mCAAuB,EAAE;AALjB,WARL,6BAeJR,OAfI,EAeM;AACTlnB,gBAAI,EAAE,SADG;AAETmK,uBAAW,EAAE,SAFJ;AAGTsd,oBAAQ,EAAE,kCAHD;AAIT5rB,oBAAQ,EAAE,eAJD;AAKT6rB,mCAAuB,EAAE;AALhB,WAfN;AAxBM,SAAf;;AAwJA,aAAAE,qBAAA,GAAwB,YAAM;AAC5B,qCACGV,OADH,EACa;AACTW,kBAAM,EAAEV;AADC,WADb;AAKD,SAND;;AAnGE,YAAI,KAAKj4B,SAAL,CAAeiE,GAAf,CAAmBC,OAAnB,KAA+B,SAAnC,EAA8C;AAC5C,eAAKspB,WAAL,GAAmB,KAAK6K,YAAL,CAAkBI,OAArC;AACA,eAAKG,KAAL,GAAa;AAAE91B,mBAAO,EAAE,4CAAX;AAAyDsd,mBAAO,EAAE;AAAlE,WAAb;AACD,SAHD,MAGO,IAAI,KAAKpgB,SAAL,CAAeiE,GAAf,CAAmBC,OAAvB,EAAgC;AACrC,eAAKspB,WAAL,GAAmB,KAAK6K,YAAL,CAAkBC,OAArC;AACA,eAAKM,KAAL,GAAa;AAAE91B,mBAAO,EAAE,4CAAX;AAAyDsd,mBAAO,EAAE;AAAlE,WAAb;AACD;;AACD,aAAKnH,eAAL,GAAuBsU,MAAM,CAACvuB,IAAP,CAAY,KAAKwuB,WAAjB,CAAvB;AACD;;;;oCACiB;;;;;;;wBACX,KAAK2K,K;;;;;;AAEAU,kC,GAAiB,IAAI,sEAAJ,CAAiB;AACtCC,6BAAO,YAAK1yB,QAAQ,CAAC2yB,MAAd,mBAD+B;AAEtCC,mCAAa,EAAE,EAAE,KAAKJ,KAAL,CAAWxY,OAAX,KAAuB,SAAzB,CAFuB;AAGtC6Y,0CAAoB,EAAE,KAAKL,KAAL,CAAW91B,OAHK;AAItCsd,6BAAO,EAAG,KAAKwY,KAAL,CAAWxY,OAAX,KAAuB,SAAxB,GAAqC,KAAKwY,KAAL,CAAWxY,OAAhD,GAA0D;AAJ7B,qBAAjB,C;;AAMvB,2BAAMyY,cAAc,CAAC3vB,IAAf,CAAoB;AAAEgwB,4BAAM,EAAE;AAAV,qBAApB,CAAN;;;AACA,yBAAKf,KAAL,GAAaU,cAAb;;;;;;;AAEAp0B,2BAAO,CAACsH,KAAR,gBAAqB,eAArB;;;;;;;;;AAGL;;;kCACeotB,gB,EAA0Bje,U,EAAkB;;;;;;;;AACpDke,oC,GAAmB,IAAI,oEAAJ,CAAqB;AAAEhZ,6BAAO,EAAE,KAAKwY,KAAL,CAAWxY,OAAtB;AAA+BiZ,kCAAY,EAAE,KAAKT,KAAL,CAAW91B;AAAxD,qBAArB,C;AACnBq1B,yB,GAAQ,IAAI,0DAAJ,E;AACRxrB,4B,GAAW,KAAK6gB,WAAL,CAAiB2L,gBAAjB,EAAmCxsB,Q;;wBAC/C,KAAKyrB,W;;;;;;AACmD,2BAAMgB,gBAAgB,CAACE,cAAjB,EAAN;;;;AAAnDC,sC,yBAAAA,kB;AAAoBC,gC,yBAAAA,Y;AAAcC,gC,yBAAAA,Y;AAC1C,yBAAKrB,WAAL,GAAmB;AAAEmB,wCAAkB,EAAlBA,kBAAF;AAAsBC,kCAAY,EAAZA;AAAtB,qBAAnB,C,CAAyD;;;AAEvDE,uC,GAAsBxe,U;;AAC1B,wBAAI,CAAC,KAAKsS,WAAL,CAAiB2L,gBAAjB,EAAmCX,uBAAxC,EAAiE;AAC/DkB,yCAAmB,GAAGA,mBAAmB,CAACC,iBAApB,EAAtB;AACD;;AACGlsB,6B,GAAY,E;;0BACZ0rB,gBAAgB,KAAK,S;;;;;AACjB5rB,4B,GAAWmsB,mBAAmB,CAAC/xB,OAApB,CAA4B,GAA5B,EAAiC,EAAjC,C;;AACF,2BAAM,KAAKujB,aAAL,CAAmB3d,QAAnB,CAAN;;;;AAAPtO,sB,yBAAAA,E;;yBACJ,KAAK8F,sBAAL,CAA4B0I,SAA5B,CAAsCxO,EAAtC,C;;;;;AACFy6B,uCAAmB,qBAAcz6B,EAAd,CAAnB;AACAwO,6BAAS,GAAGxO,EAAZ;;;;;0BAEM,IAAIH,KAAJ,CAAU,0BAAV,C;;;;AAGM,2BAAMq5B,KAAK,CAACrwB,gBAAN,CAAuB,KAAKswB,WAAL,CAAiBmB,kBAAxC,EAA4D,KAAKnB,WAAL,CAAiBoB,YAA7E,EAA2F;AAAE7sB,8BAAQ,EAARA,QAAF;AAAYuO,gCAAU,EAAEwe;AAAxB,qBAA3F,EAA0I,IAA1I,CAAN;;;AAAV3xB,sB;AACA7C,uB,GAAM,KAAKJ,gBAAL,CAAsB80B,aAAtB,CAAoC7xB,EAAE,CAACqqB,CAAvC,EAA0CrqB,EAAE,CAACuqB,CAA7C,C;uDACL;AAAEptB,yBAAG,EAAHA,GAAF;AAAOuI,+BAAS,EAATA;AAAP,qB;;;;;;;;;AACR;;;sCACmBF,Q,EAAmBtO,E,EAAa;;;;;;;AAC9CP,uB,GAAM,E;;0BACLO,EAAE,IAAIsO,QAAP,IAAqB,CAACtO,EAAD,IAAO,CAACsO,Q;;;;;AAC/B9I,2BAAO,CAACC,GAAR,CAAY;AAAE6I,8BAAQ,EAARA,QAAF;AAAYtO,wBAAE,EAAFA;AAAZ,qBAAZ;0BACM,IAAIH,KAAJ,CAAU,eAAV,C;;;AACD,wBAAIG,EAAJ,EAAQ;AACbP,yBAAG,GAAG;AAAEO,0BAAE,EAAFA;AAAF,uBAAN;AACD,qBAFM,MAEA;AACLP,yBAAG,GAAG;AAAE6O,gCAAQ,EAAEA,QAAQ,CAAC5F,OAAT,CAAiB,GAAjB,EAAsB,EAAtB;AAAZ,uBAAN;AACD;;;;AACM,2BAAMqiB,KAAK,2CAA2C;AAC3DiI,4BAAM,EAAE,MADmD;AAE3DtL,6BAAO,EAAE;AAAE,wCAAgB;AAAlB,uBAFkD;AAG3DkT,oCAAc,EAAE,aAH2C;AAI3DnzB,0BAAI,EAAEZ,IAAI,CAACC,SAAL,CAAerH,GAAf;AAJqD,qBAA3C,CAAL,CAKVG,IALU,CAMX,UAACwG,GAAD,EAAS;AACP,6BAAOA,GAAG,CAAC6kB,IAAJ,EAAP;AACD,qBARU,CAAN;;;;;;;;;;;;AAUR;;;mCACgBiP,gB,EAAyC;AAAA,cAAfje,UAAe,uEAAF,EAAE;;;;;;;;;AAEhD4e,6B,GAAiB,KAAKpB,qBAAL,GAA6BS,gBAA7B,KAAkD,E;;AACzE,wBAAIje,UAAU,IAAIie,gBAAgB,KAAKrB,MAAvC,EAA+C;AAC7CgC,+BAAS,CAACC,UAAV,GAAuB7e,UAAvB;AACAzW,6BAAO,CAACC,GAAR,CAAY,iBAAiBwW,UAA7B;AACD;;4CAC2C,KAAKsS,WAAL,CAAiB2L,gBAAjB,C,EAApCle,W,yBAAAA,W,EAAasd,Q,yBAAAA,Q,EAAU5rB,Q,yBAAAA,Q;;AACV,2BAAM,KAAKwrB,KAAL,CAAW6B,YAAX,CAAwB;AACjDrtB,8BAAQ,EAARA,QADiD;AAEjDsO,iCAAW,EAAXA,WAFiD;AAGjDsd,8BAAQ,EAARA,QAHiD;AAIjDuB,+BAAS,EAATA;AAJiD,qBAAxB,CAAN;;;AAAfG,gC;AAMAlf,2B,GAAU,KAAKjW,gBAAL,CAAsBo1B,kBAAtB,CAAyCD,YAAY,CAACpG,UAAtD,C;AAChBpvB,2BAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCqW,OAAlC;uDACO;AAAEA,6BAAO,EAAPA,OAAF;AAAWC,8BAAQ,EAAEif,YAAY,CAACjf;AAAlC,qB;;;;;AAEPvW,2BAAO,CAACsH,KAAR,gBAAiB,cAAjB;uDACO;AAAEgP,6BAAO,EAAE,IAAX;AAAiBC,8BAAQ,EAAE;AAA3B,qB;;;;;;;;;AAEV;;;wCACqBme,gB,EAA0Bje,U,EAAkB;;;;;;;;;AAC5C,2BAAM,KAAKJ,UAAL,CAAgBqe,gBAAhB,EAAkCje,UAAlC,CAAN;;;;AAAZH,2B,yBAAAA,O;uDACDA,O;;;;;;;;;AACR;;;;;;;uBA7JUmd,Y,EAAY,8I,EAAA,kK;AAAA,K;;;aAAZA,Y;AAAY,eAAZA,YAAY,K;AAAA,kBAFX;;;;;sEAEDA,Y,EAAY;cAHxB,wDAGwB;eAHb;AACVjW,oBAAU,EAAE;AADF,S;AAGa,Q;;;;;;;;;;;;;;;;;;;;;;;;ACfzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMakY,a;AAGX,6BAAoBr4B,IAApB,EACUlC,aADV,EACwC;AAAA;;AADpB,aAAAkC,IAAA,GAAAA,IAAA;AACV,aAAAlC,aAAA,GAAAA,aAAA;AAHH,aAAAw6B,MAAA,GAAS,2EAAT;AACC,aAAAp6B,SAAA,GAAY,IAAI,oDAAJ,EAAZ;AAGP;;;;oCAEW;AAAA;;AACV,cAAI,KAAKA,SAAL,CAAeiE,GAAf,CAAmBC,OAAnB,KAA+B,SAAnC,EAA8C;AAC5C,iBAAKpC,IAAL,CAAUX,GAAV,CAAc,KAAKi5B,MAAnB,EAA2Bx5B,SAA3B,CACE,UAACy5B,KAAD,EAAgB;AACd,qBAAI,CAACz6B,aAAL,CAAmBa,MAAnB,CAA0BqV,OAA1B,GAAoCukB,KAAK,CAACC,KAAN,CAAYC,GAAhD;;AACA,qBAAI,CAACxa,kBAAL;AACD,aAJH,EAKE,UAAA9Z,GAAG;AAAA,qBAAIxB,OAAO,CAACC,GAAR,CAAY,8BAA8BoB,IAAI,CAACC,SAAL,CAAeE,GAAf,CAA1C,CAAJ;AAAA,aALL;AAOD,WARD,MAQO;AACL,iBAAKrG,aAAL,CAAmBa,MAAnB,CAA0BqV,OAA1B,GAAoC,CAApC;AACA,iBAAKiK,kBAAL;AACD;AACF;;;6CACoB;AACnB,cAAM4C,QAAQ,GAAG,KAAK/iB,aAAL,CAAmBa,MAAnB,CAA0B+e,WAA1B,EAAjB;AACA,cAAIgb,GAAG,GAAG,CAAV;AACA,cAAIxa,MAAM,GAAG,KAAb;;AAHmB,uDAIG2C,QAJH;AAAA;;AAAA;AAInB,sEAAgC;AAAA,kBAArBzf,OAAqB;;AAC9B,kBAAIA,OAAO,CAACiP,UAAR,KAAuB,IAA3B,EAAiC;AAC/BjP,uBAAO,CAACu3B,UAAR,GACErvB,MAAM,CAAClI,OAAO,CAACiP,UAAR,GAAqB,OAArB,GAA+B,KAAKvS,aAAL,CAAmBa,MAAnB,CAA0BqV,OAA1D,CADR;AAEA0kB,mBAAG,IAAIt3B,OAAO,CAACu3B,UAAf;AACAza,sBAAM,GAAG,IAAT;AACD;AACF;AAXkB;AAAA;AAAA;AAAA;AAAA;;AAYnB,cAAIA,MAAJ,EAAY;AACV,iBAAKpgB,aAAL,CAAmBa,MAAnB,CAA0Bi6B,eAA1B,GAA4CtvB,MAAM,CAACovB,GAAD,CAAlD;AACA,iBAAK56B,aAAL,CAAmBgU,WAAnB;AACD;AACF;;;;;;;uBArCUumB,a,EAAa,uH,EAAA,4H;AAAA,K;;;aAAbA,a;AAAa,eAAbA,aAAa;;;;;sEAAbA,a,EAAa;cADzB;AACyB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCabQ,a;AAKX,+BACUlQ,iBADV,EAEU3lB,gBAFV,EAGUgI,YAHV,EAGoC;AAAA;;AAF1B,eAAA2d,iBAAA,GAAAA,iBAAA;AACA,eAAA3lB,gBAAA,GAAAA,gBAAA;AACA,eAAAgI,YAAA,GAAAA,YAAA;AAPV,eAAA8tB,QAAA;AACA,eAAAC,SAAA,GAAY,CAAZ;AAOI;AACJ;;;;;;;4CAGe;AACb,mBAAO,qEAAMC,gBAAN,CAAuB,EAAvB,CAAP;AACD;;;gDAECjsB,Q,EACAzE,Q,EAEe;AAAA,gBADf4E,UACe,uEADM,EACN;AAAA,gBAAf+rB,MAAe;;;;;;;AAETnrB,0B,GAAO,qEAAMT,cAAN,CAAqBN,QAArB,EAA+BG,UAA/B,EAA2C+rB,MAA3C,C;AACPC,6B,GAAkBrV,MAAM,CAACrB,IAAP,CAAY,qEAAM2W,iBAAN,CAAwBpsB,QAAxB,CAAZ,C;;AAExB,0BAAI,CAACksB,MAAL,EAAa;AACXhgB,+BAAO,GAAG,KAAKjW,gBAAL,CAAsBo2B,YAAtB,CAAmCtrB,IAAnC,CAAV;AACD,uBAFD,MAEO;AACLmL,+BAAO,GAAG,kEAAG7L,uBAAH,CAA2BU,IAA3B,EAAiC,CAAjC,CAAV;AACD;;;AACiB,6BAAM,KAAK6a,iBAAL,CAAuBrF,OAAvB,CAA+BxV,IAA/B,EAAqCxF,QAArC,EAA+C,CAA/C,CAAN;;;AAAZ+wB,+B;AACA7qB,mC,GAAwB6qB,SAAS,CAACpW,W;AAClCxU,wB,GAAa4qB,SAAS,CAAC5qB,E;AACvB6qB,yB,GAAc,KAAK3Q,iBAAL,CAAuB4Q,MAAvB,CAA8B9qB,EAA9B,EAAkC,CAAlC,C;;AACc,6BAAM,KAAKka,iBAAL,CAAuBrF,OAAvB,CACtC4V,OADsC,EAEtC5wB,QAFsC,EAGtC,CAHsC,EAItCgxB,GAJsC,CAAN;;;AAA5B5qB,sC,mBAKHuU,W;yDACI;AACL1lB,4BAAI,EAAE,KAAKi8B,kBAAL,CACJP,MAAM,GAAG,uDAAWQ,QAAd,GAAyB,uDAAWC,UADtC,EAEJlrB,aAFI,EAGJE,gBAHI,EAIJD,EAJI,CADD;AAOLrL,2BAAG,EAAE6V,OAAO,CAAC7V,GAPR;AAQL6C,0BAAE,EAAEgT,OAAO,CAAChT,EARP;AASL6H,4BAAI,EAAEA;AATD,uB;;;;;;;;;AAWR;;;kCACazF,G,EAAajF,G,EAAY;;;;;;;;4BAEjC,KAAKzE,MAAL,YAAuB,sD;;;;;AACzBgE,6BAAO,CAACC,GAAR,CAAY,IAAZ;;AACO,6BAAM,KAAK+lB,iBAAL,CAAuBhF,OAAvB,CACX,KAAKhlB,MAAL,CAAY6P,aADD,EAEXnG,GAFW,EAGX,KAAK1J,MAAL,CAAYokB,IAHD,EAIX,CAJW,CAAN;;;AAAPjV,0B;AAMAnL,6BAAO,CAACC,GAAR,CAAY,MAAZ;;;;;4BACS,KAAKjE,MAAL,YAAuB,sD;;;;;;AACzB,6BAAM,KAAKgqB,iBAAL,CAAuBhF,OAAvB,CACX,KAAKhlB,MAAL,CAAY6P,aADD,EAEXnG,GAFW,EAGX,KAAK1J,MAAL,CAAYg7B,EAHD,EAIX,CAJW,CAAN;;;AAAP7rB,0B;;;;;4BAOA,KAAKnP,MAAL,YAAuB,sDAAvB,IACA,KAAKA,MAAL,YAAuB,gD;;;;;;AAEhB,6BAAM,KAAKgqB,iBAAL,CAAuBhF,OAAvB,CACX,KAAKhlB,MAAL,CAAY6P,aADD,EAEXnG,GAFW,EAGX,KAAK1J,MAAL,CAAYg7B,EAHD,EAIX,CAJW,CAAN;;;AAAP7rB,0B;;;;;4BAMS,KAAKnP,MAAL,YAAuB,oD;;;;;AAChCgE,6BAAO,CAACC,GAAR,CAAY,KAAKjE,MAAjB;AACMsa,6B,GAAmB;AACvBuW,0BAAE,EAAE,IADmB;AAEvBvpB,0BAAE,EAAE,KAAKtH,MAAL,CAAY+D,gBAAZ,CAA6B,CAA7B,EAAgCuD,EAFb;AAGvB7C,2BAAG,EAAE,KAAKzE,MAAL,CAAY+D,gBAAZ,CAA6B,CAA7B,EAAgCU;AAHd,uB;yDAKlB6V,O;;;4BACE,KAAKta,MAAL,YAAuB,mD;;;;;AAChCgE,6BAAO,CAACC,GAAR,CAAY,cAAc,KAAKjE,MAAL,CAAYxB,EAAtC;;AACgB,6BAAM,KAAK6N,YAAL,CAAkB4uB,eAAlB,CAAkC,KAAKj7B,MAAL,CAAYkM,QAA9C,EAAwD,KAAKlM,MAAL,CAAYxB,EAApE,CAAN;;;AAAV8b,8B;AACNtW,6BAAO,CAACC,GAAR,CAAYqW,QAAZ;;2BACI,KAAKta,MAAL,CAAY2L,kBAAZ,CAA+B2O,QAAO,CAAC7V,GAAvC,C;;;;;yDACK6V,Q;;;4BAED,IAAIjc,KAAJ,CAAU,2BAAV,C;;;yDAED,I;;;yDAEA,I;;;0BAEJ8Q,I;;;;;yDACI,I;;;4BAEL,KAAKnP,MAAL,YAAuB,gD;;;;;0BACpByE,G;;;;;4BACG,IAAIpG,KAAJ,CAAU,iBAAV,C;;;AAEFoE,6B,GAAU,KAAKzC,MAAL,CAAY2L,kBAAZ,CAA+BlH,GAA/B,C;;0BACXhC,OAAO,CAAC0E,c;;;;;4BACL,IAAI9I,KAAJ,CAAU,yBAAV,C;;;yDAED,kEAAGsQ,aAAH,CAAiBQ,IAAjB,EAAuB1M,OAAO,CAAC0E,cAA/B,C;;;4BACE,KAAKnH,MAAL,YAAuB,sD;;;;;AAC1Bsa,+B,GAAU,KAAKjW,gBAAL,CAAsBo2B,YAAtB,CAAmCtrB,IAAnC,C;;4BACZ,CAACmL,SAAO,CAAC7V,GAAT,IAAgB,CAACA,GAAjB,IAAwB6V,SAAO,CAAC7V,GAAR,KAAgBA,G;;;;;yDACnC,I;;;yDAEA6V,S;;;;;;;yDAGF,KAAKjW,gBAAL,CAAsBo2B,YAAtB,CAAmCtrB,IAAnC,C;;;;;;;;;AAEV;;;+CAC0BzF,G,EAAW;;;;;;;4BAElC,KAAK1J,MAAL,KACC,KAAKA,MAAL,YAAuB,gDAAvB,IAAmC,KAAKA,MAAL,YAAuB,sDAD3D,C;;;;;AAGM8P,wB,GAAK,KAAKka,iBAAL,CAAuB4Q,MAAvB,CAA8B,KAAK56B,MAAL,CAAYg7B,EAA1C,EAA8C,CAA9C,C;;AACK,6BAAM,KAAKhR,iBAAL,CAAuBhF,OAAvB,CACpB,KAAKhlB,MAAL,CAAY+P,gBADQ,EAEpBrG,GAFoB,EAGpBoG,EAHoB,EAIpB,CAJoB,CAAN;;;AAAVyqB,6B;;2BAMFA,O;;;;;yDACK,qEAAMW,iBAAN,CAAwBX,OAAxB,C;;;AAEPv2B,6BAAO,CAACC,GAAR,CAAY,kBAAZ;;;yDAGG,E;;;;;;;;;AACR;;;6CACkBqD,E,EAAYH,c,EAAkC;AAC/D,gBAAI1C,GAAJ;AACAT,mBAAO,CAACC,GAAR,CAAYqD,EAAZ;;AACA,gBAAIA,EAAE,IAAIA,EAAE,CAACoE,KAAH,CAAS,CAAT,EAAY,CAAZ,MAAmB,MAA7B,EAAqC;AACnCjH,iBAAG,GAAG,KAAKJ,gBAAL,CAAsBuuB,MAAtB,CAA6BtrB,EAA7B,CAAN;AACD,aAFD,MAEO;AACL7C,iBAAG,GAAG,qEAAM02B,OAAN,CAAc7zB,EAAd,CAAN;AACD;;AACD,gBAAI7C,GAAJ,EAAS;AACP,mBAAKzE,MAAL,CAAY+D,gBAAZ,CAA6B6O,IAA7B,CACE,IAAI,uDAAJ,CAAoBnO,GAApB,EAAyB6C,EAAzB,EAA6B,OAAOH,cAAP,KAA0B,QAA1B,uBAAkDA,cAAlD,YAAyEA,cAAtG,CADF;AAGAnD,qBAAO,CAACC,GAAR,CAAY,gCAAZ;AACAD,qBAAO,CAACC,GAAR,CACE,KAAKjE,MAAL,CAAY+D,gBAAZ,CAA6B,KAAK/D,MAAL,CAAY+D,gBAAZ,CAA6B4D,MAA7B,GAAsC,CAAnE,CADF;AAGA,mBAAKwL,WAAL;AACD;AACF;;;+CACoBgjB,E,EAAYzP,O,EAAiB;AAChD,gBAAM0U,eAAe,GAAG,KAAKp7B,MAAL,CAAY2L,kBAAZ,CAA+B+a,OAA/B,CAAxB;;AACA,gBAAI0U,eAAJ,EAAqB;AACnB,kBAAMC,OAAO,GAAG,IAAI,yDAAJ,CACdlF,EADc,EAEdiF,eAAe,CAAC32B,GAFF,EAGd22B,eAAe,CAAC9zB,EAHF,CAAhB;AAKA8zB,6BAAe,CAACxzB,kBAAhB,CAAmCgL,IAAnC,CAAwCyoB,OAAxC;AACA,mBAAKloB,WAAL;AACD,aARD,MAQO;AACLnP,qBAAO,CAAC8gB,IAAR;AACD;AACF;AACD;;;;;;;;wCAKcziB,O,EAAe;AAC3B,mBACE,KAAKrC,MAAL,CAAY+e,WAAZ,GAA0B3D,SAA1B,CAAoC,UAACtI,CAAD;AAAA,qBAAOA,CAAC,CAACzQ,OAAF,KAAcA,OAArB;AAAA,aAApC,MAAsE,CAAC,CADzE;AAGD;;;gDAC2BsH,Q,EAAgB;;;;;;;4BACtC,KAAK3J,MAAL,YAAuB,gD;;;;;;AACZ,6BAAM,KAAKgqB,iBAAL,CAAuBhF,OAAvB,CACjB,KAAKhlB,MAAL,CAAY6P,aADK,EAEjBlG,QAFiB,EAGjB,KAAK3J,MAAL,CAAYg7B,EAHK,EAIjB,CAJiB,CAAN;;;AAAP7rB,0B;;2BAMFA,I;;;;;AACImL,6B,GAAmB,kEAAG3L,aAAH,CAAiBQ,IAAjB,sBAAoC,KAAKnP,MAAL,CAAYuM,KAAhD,U;AACzB,2BAAK4d,kBAAL,CAAwB7P,OAAO,CAAChT,EAAhC,EAAoC,KAAKtH,MAAL,CAAYuM,KAAhD;AACA,2BAAKvM,MAAL,CAAYuM,KAAZ;AACA,2BAAK4G,WAAL;yDACOmH,OAAO,CAAC7V,G;;;yDAER,E;;;;;;;;;AAGZ;AACD;;;;;;wCAGc;AACZ,iBAAKzE,MAAL,GAAc,IAAd;AACA,iBAAKo6B,SAAL,GAAiB,CAAjB;AACA16B,wBAAY,CAAC47B,UAAb,CAAwB,KAAKnB,QAA7B;AACD;AACD;;;;;;yCAGY;AACV,mBAAO,KAAKn6B,MAAL,YAAuB,kDAA9B;AACD;;;6CACe;AACd,mBAAO,KAAP;AACD;;;6CACe;AACd,mBAAO,KAAP;AACD;;;2CACa;AACZ,mBAAO,KAAKA,MAAL,YAAuB,oDAA9B;AACD;;;uCACS;AACR,mBAAO,KAAKA,MAAL,YAAuB,gDAA9B;AACD;;;0CACY;AACX,mBAAO,KAAKA,MAAL,YAAuB,mDAA9B;AACD;;;6CAEC8C,I,EACA+M,a,EACAE,gB,EACAD,E,EAAU;AAEV,gBAAMlR,IAAI,GAAQ;AAChB8Q,sBAAQ,EAAE,OADM;AAEhBC,qBAAO,EAAE,GAFO;AAGhBC,wBAAU,EAAE9M,IAHI;AAIhB+M,2BAAa,EAAbA,aAJgB;AAKhBE,8BAAgB,EAAhBA,gBALgB;AAMhBD,gBAAE,EAAFA;AANgB,aAAlB;AAQA,mBAAOlR,IAAP;AACD;AACD;;;;;;wCAGc;AACZ,iBAAKw7B,SAAL,GAAiB1d,IAAI,CAACD,GAAL,EAAjB;AACA/c,wBAAY,CAACiB,OAAb,CACE,KAAKw5B,QADP,EAEE90B,IAAI,CAACC,SAAL,CAAe;AAAEi2B,4BAAc,EAAE,KAAKnB;AAAvB,aAAf,CAFF;AAID;;;wCACa;AACZ,gBAAMmB,cAAc,GAAG,KAAKC,iBAAL,EAAvB;;AACA,gBAAI,KAAKpB,SAAL,IAAkBmB,cAAlB,IAAoC,KAAKnB,SAAL,KAAmBmB,cAA3D,EAA2E;AACzE,kBAAIz4B,IAAI,GAAG,SAAX;;AACA,kBAAI,KAAK9C,MAAL,YAAuB,gDAA3B,EAAqC;AACnC8C,oBAAI,GAAG,UAAP;AACD,eAFD,MAEO,IAAI,KAAK9C,MAAL,YAAuB,sDAA3B,EAA2C;AAChD8C,oBAAI,GAAG,gBAAP;AACD,eAFM,MAEA,IAAI,KAAK9C,MAAL,YAAuB,sDAA3B,EAA2C;AAChD8C,oBAAI,GAAG,gBAAP;AACD,eAFM,MAEA,IAAI,KAAK9C,MAAL,YAAuB,sDAA3B,EAA2C;AAChD8C,oBAAI,GAAG,gBAAP;AACD,eAFM,MAEA,IAAI,KAAK9C,MAAL,YAAuB,oDAA3B,EAAyC;AAC9C8C,oBAAI,GAAG,cAAP;AACD,eAFM,MAEA,IAAI,KAAK9C,MAAL,YAAuB,mDAA3B,EAAwC;AAC7C8C,oBAAI,GAAG,aAAP;AACD;;AACDkB,qBAAO,CAACC,GAAR,CAAY,aAAanB,IAAzB;AACApD,0BAAY,CAACiB,OAAb,CACE,KAAKw5B,QADP,EAEE90B,IAAI,CAACC,SAAL,CAAe;AAAExC,oBAAI,EAAJA,IAAF;AAAQy4B,8BAAc,EAAE,KAAKnB,SAA7B;AAAwCx7B,oBAAI,EAAE,KAAKoB;AAAnD,eAAf,CAFF;AAID,aApBD,MAoBO;AACLgE,qBAAO,CAACC,GAAR,CAAY,qBAAZ;AACD;AACF;;;8CACmB;AAClB,gBAAMgmB,UAAU,GAAGvqB,YAAY,CAACC,OAAb,CAAqB,KAAKw6B,QAA1B,CAAnB;;AACA,gBAAIlQ,UAAJ,EAAgB;AACd,kBAAMkH,MAAM,GAAG9rB,IAAI,CAACoK,KAAL,CAAWwa,UAAX,CAAf;;AACA,kBAAIkH,MAAM,IAAIA,MAAM,CAACoK,cAArB,EAAqC;AACnC,uBAAOpK,MAAM,CAACoK,cAAd;AACD;AACF;;AACD,mBAAO,CAAP;AACD;;;6CAEkB;AACjB,gBAAMtR,UAAU,GAAGvqB,YAAY,CAACC,OAAb,CAAqB,KAAKw6B,QAA1B,CAAnB;;AACA,gBAAIlQ,UAAU,IAAIA,UAAU,KAAK,WAAjC,EAA8C;AAC5C,kBAAMwR,gBAAgB,GAAGp2B,IAAI,CAACoK,KAAL,CAAWwa,UAAX,CAAzB;AACAjmB,qBAAO,CAACC,GAAR,CAAYw3B,gBAAZ;;AACA,kBAAIA,gBAAgB,CAAC34B,IAAjB,IAAyB24B,gBAAgB,CAAC78B,IAA1C,IAAkD68B,gBAAgB,CAACF,cAAvE,EAAuF;AACrF,qBAAKnB,SAAL,GAAiBqB,gBAAgB,CAACF,cAAlC;AACA,oBAAMG,EAAE,GAAGD,gBAAgB,CAAC78B,IAA5B;AACA,qBAAK+8B,uBAAL,CAA6BD,EAA7B,EAAiCD,gBAAgB,CAAC34B,IAAlD;AACAkB,uBAAO,CAACC,GAAR,CAAY,KAAKjE,MAAjB;AACD,eALD,MAKO;AACLgE,uBAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,qBAAKpD,WAAL;AACD;AACF,aAZD,MAYO;AACLmD,qBAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,mBAAKpD,WAAL;AACD;AACF;;;kDACuB66B,E,EAAS54B,I,EAAc;AAC7C,oBAAQA,IAAR;AACE,mBAAK,UAAL;AACE,qBAAK9C,MAAL,GAAc,IAAI,gDAAJ,CACZ07B,EAAE,CAACV,EADS,EAEZU,EAAE,CAAC7rB,aAFS,EAGZ6rB,EAAE,CAAC3rB,gBAHS,CAAd;;AAKA,oBAAI,KAAK/P,MAAL,YAAuB,gDAA3B,EAAqC;AACnC,uBAAKA,MAAL,CAAYuM,KAAZ,GAAoBmvB,EAAE,CAACnvB,KAAvB;AACD;;AACD;;AACF,mBAAK,gBAAL;AACE,qBAAKvM,MAAL,GAAc,IAAI,sDAAJ,CAAmB07B,EAAE,CAACtX,IAAtB,EAA4BsX,EAAE,CAAC7rB,aAA/B,CAAd;AACA;;AACF,mBAAK,gBAAL;AACE,qBAAK7P,MAAL,GAAc,IAAI,sDAAJ,CAAmB07B,EAAE,CAACV,EAAtB,EAA0BU,EAAE,CAAC7rB,aAA7B,CAAd;AACA;;AACF,mBAAK,gBAAL;AACE,qBAAK7P,MAAL,GAAc,IAAI,sDAAJ,CACZ07B,EAAE,CAACV,EADS,EAEZU,EAAE,CAAC7rB,aAFS,EAGZ6rB,EAAE,CAAC3rB,gBAHS,CAAd;AAKA;;AACF,mBAAK,cAAL;AACE,qBAAK/P,MAAL,GAAc,IAAI,oDAAJ,EAAd;AACA;;AACF,mBAAK,aAAL;AACE,qBAAKA,MAAL,GAAc,IAAI,mDAAJ,CAAgB07B,EAAE,CAACxvB,QAAnB,EAA6BwvB,EAAE,CAACl9B,EAAhC,EAAoCk9B,EAAE,CAACrrB,IAAvC,CAAd;AACA,qBAAKhE,YAAL,CAAkB+N,SAAlB;AACA;;AACF;AA/BF;;AAiCA,iBAAKpa,MAAL,CAAYqV,OAAZ,GAAsBqmB,EAAE,CAACrmB,OAAzB;AACA,iBAAKrV,MAAL,CAAYi6B,eAAZ,GAA8ByB,EAAE,CAACzB,eAAjC;AACA,iBAAKj6B,MAAL,CAAYwf,eAAZ,GAA8Bkc,EAAE,CAAClc,eAAjC;;AACA,gBAAIkc,EAAE,CAAClP,OAAP,EAAgB;AACdxoB,qBAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBy3B,EAAE,CAAClP,OAAxB;AACA,mBAAKxsB,MAAL,CAAYwsB,OAAZ,GAAsBkP,EAAE,CAAClP,OAAzB;AACD;;AAxC4C,yDAyCtBkP,EAAE,CAAC33B,gBAzCmB;AAAA;;AAAA;AAyC7C,wEAA4C;AAAA,oBAAjC63B,QAAiC;AAC1C,oBAAMC,MAAM,GAAoB,IAAI,uDAAJ,CAC9BD,QAAQ,CAACn3B,GADqB,EAE9Bm3B,QAAQ,CAACt0B,EAFqB,EAG9Bs0B,QAAQ,CAACz0B,cAAT,GAA0By0B,QAAQ,CAACz0B,cAAnC,GAAoD,IAHtB,CAAhC;AAKA00B,sBAAM,CAAC7B,UAAP,GAAoB4B,QAAQ,CAAC5B,UAA7B;AACA6B,sBAAM,CAACnqB,UAAP,GAAoBkqB,QAAQ,CAAClqB,UAA7B;AACAmqB,sBAAM,CAACpxB,QAAP,GAAkBmxB,QAAQ,CAACnxB,QAA3B;AACAoxB,sBAAM,CAACrqB,iBAAP,GAA2BoqB,QAAQ,CAACpqB,iBAApC;AACAqqB,sBAAM,CAACzd,UAAP,GAAoBwd,QAAQ,CAACxd,UAA7B;;AAV0C,6DAWjBwd,QAAQ,CAACh0B,kBAXQ;AAAA;;AAAA;AAW1C,4EAAsD;AAAA,wBAA3Ck0B,UAA2C;AACpD,wBAAMT,OAAO,GAAG,IAAI,yDAAJ,CACdS,UAAU,CAACz5B,OADG,EAEdw5B,MAAM,CAACp3B,GAFO,EAGdo3B,MAAM,CAACv0B,EAHO,CAAhB;AAKA+zB,2BAAO,CAACrB,UAAR,GAAqB8B,UAAU,CAAC9B,UAAhC;AACAqB,2BAAO,CAAC3pB,UAAR,GAAqBoqB,UAAU,CAACpqB,UAAhC;AACA2pB,2BAAO,CAAC5wB,QAAR,GAAmBqxB,UAAU,CAACrxB,QAA9B;AACA4wB,2BAAO,CAAC7pB,iBAAR,GAA4BsqB,UAAU,CAACtqB,iBAAvC;AACA6pB,2BAAO,CAACjd,UAAR,GAAqB0d,UAAU,CAAC1d,UAAhC;AACAyd,0BAAM,CAACj0B,kBAAP,CAA0BgL,IAA1B,CAA+ByoB,OAA/B;AACD;AAvByC;AAAA;AAAA;AAAA;AAAA;;AAwB1C,qBAAKr7B,MAAL,CAAY+D,gBAAZ,CAA6B6O,IAA7B,CAAkCipB,MAAlC;AACD;AAlE4C;AAAA;AAAA;AAAA;AAAA;AAmE9C;;;;;;;yBAhYU3B,a,EAAa,wI,EAAA,qI,EAAA,yH;AAAA,O;;;eAAbA,a;AAAa,iBAAbA,aAAa;;;;;wEAAbA,a,EAAa;gBADzB;AACyB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACX1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAAa6B,M;AAMX,wBAAc;AAAA;;AACZ,aAAKvc,eAAL,GAAuB,IAAvB;AACA,aAAKya,eAAL,GAAuB,IAAvB;AACA,aAAK5kB,OAAL,GAAe,IAAf;AACA,aAAKtR,gBAAL,GAAwB,EAAxB;AACA,aAAKyoB,OAAL,GAAe,EAAf;AACD;;;;sCACU;AACT,cAAMtK,QAAQ,GAAc,EAA5B;;AACA,cAAI,KAAKne,gBAAL,CAAsB4D,MAA1B,EAAkC;AAAA,yDACF,KAAK5D,gBADH;AAAA;;AAAA;AAChC,wEAAqD;AAAA,oBAA1Cq3B,eAA0C;AACnDlZ,wBAAQ,CAACtP,IAAT,CAAcwoB,eAAd;;AACA,oBAAIA,eAAe,CAACxzB,kBAAhB,CAAmCD,MAAvC,EAA+C;AAAA,+DACbyzB,eAAe,CAACxzB,kBADH;AAAA;;AAAA;AAC7C,8EAAoE;AAAA,0BAAzDo0B,iBAAyD;AAClE9Z,8BAAQ,CAACtP,IAAT,CAAcopB,iBAAd;AACD;AAH4C;AAAA;AAAA;AAAA;AAAA;AAI9C;AACF;AAR+B;AAAA;AAAA;AAAA;AAAA;AASjC;;AACD,iBAAO9Z,QAAP;AACD;;;8CACkB;AACjB,iBAAO,KAAKne,gBAAZ;AACD;;;mCACU1B,O,EAAe;AACxB,cAAI,KAAK0B,gBAAL,CAAsB4D,MAA1B,EAAkC;AAAA,yDACF,KAAK5D,gBADH;AAAA;;AAAA;AAChC,wEAAqD;AAAA,oBAA1Cq3B,eAA0C;;AACnD,oBAAIA,eAAe,CAAC/4B,OAAhB,KAA4BA,OAAhC,EAAyC;AACvC,yBAAO+4B,eAAP;AACD;;AACD,oBAAIA,eAAe,CAACxzB,kBAAhB,CAAmCD,MAAvC,EAA+C;AAAA,+DACbyzB,eAAe,CAACxzB,kBADH;AAAA;;AAAA;AAC7C,8EAAoE;AAAA,0BAAzDo0B,iBAAyD;;AAClE,0BAAIA,iBAAiB,CAAC35B,OAAlB,KAA8BA,OAAlC,EAA2C;AACzC,+BAAO25B,iBAAP;AACD;AACF;AAL4C;AAAA;AAAA;AAAA;AAAA;AAM9C;AACF;AAZ+B;AAAA;AAAA;AAAA;AAAA;AAajC;;AACD,iBAAO,IAAP;AACD;;;2CACkBv3B,G,EAAW;AAC5B,cAAI,KAAKV,gBAAL,CAAsB4D,MAA1B,EAAkC;AAAA,yDACF,KAAK5D,gBADH;AAAA;;AAAA;AAChC,wEAAqD;AAAA,oBAA1Cq3B,eAA0C;;AACnD,oBAAIA,eAAe,CAAC32B,GAAhB,KAAwBA,GAA5B,EAAiC;AAC/B,yBAAO22B,eAAP;AACD;AACF;AAL+B;AAAA;AAAA;AAAA;AAAA;AAMjC;;AACD,iBAAO,IAAP;AACD;;;;;;QAGUL,U;;;;;AAEX,0BAAYlrB,aAAZ,EAAmC;AAAA;;AAAA;;AACjC;AACA,gBAAKA,aAAL,GAAqBA,aAArB;AAFiC;AAGlC;;;MAL6BksB,M;;QAQnBE,c;;;;;AAEX,8BAAY7X,IAAZ,EAA0B8X,YAA1B,EAAgD;AAAA;;AAAA;;AAC9C,qCAAMA,YAAN;AACA,gBAAK9X,IAAL,GAAYA,IAAZ;AAF8C;AAG/C;;;MALiC2W,U;;QAQvBoB,c;;;;;AAEX,8BAAYnB,EAAZ,EAAwBnrB,aAAxB,EAA+C;AAAA;;AAAA;;AAC7C,qCAAMA,aAAN;AACA,gBAAKmrB,EAAL,GAAUA,EAAV;AAF6C;AAG9C;;;MALiCD,U;;QAQvBqB,c;;;;;AAGX,8BAAYpB,EAAZ,EAAwBnrB,aAAxB,EAA+CE,gBAA/C,EAAyE;AAAA;;AAAA;;AACvE,qCAAMF,aAAN;AACA,gBAAKmrB,EAAL,GAAUA,EAAV;AACA,gBAAKjrB,gBAAL,GAAwBA,gBAAxB;AAHuE;AAIxE;;;MAPiCgrB,U;;QAUvBD,Q;;;;;AAIX,wBAAYE,EAAZ,EAAwBnrB,aAAxB,EAA+CE,gBAA/C,EAAyE;AAAA;;AAAA;;AACvE,qCAAMF,aAAN;AACA,gBAAKE,gBAAL,GAAwBA,gBAAxB;AACA,gBAAKirB,EAAL,GAAUA,EAAV;AACA,gBAAKzuB,KAAL,GAAa,CAAb;AAJuE;AAKxE;;;MAT2BwuB,U;;QAYjBsB,W;;;;;AAIX,2BAAYnwB,QAAZ,EAA8B1N,EAA9B,EAA0C6R,IAA1C,EAAwD;AAAA;;AAAA;;AACtD;AACA,gBAAKnE,QAAL,GAAgBA,QAAhB;AACA,gBAAK1N,EAAL,GAAUA,EAAV;AACA,gBAAK6R,IAAL,GAAYA,IAAZ;AAJsD;AAKvD;;;;sCACa;AACZ,cAAI,KAAKnE,QAAL,KAAkB,SAAtB,EAAiC;AAC/B,mBAAO,KAAKmE,IAAZ;AACD;;AACD,iBAAO,KAAK7R,EAAZ;AACD;;;;MAf8Bu9B,M;;QAiBpBO,Y;;;;;AACX,8BAAc;AAAA;;AAAA;AAEb;;;MAH+BP,M,GAMlC;;;QAEsBQ,O;AASpB,uBAAY93B,GAAZ,EAAyB6C,EAAzB,EAAqCjF,OAArC,EAAsD;AAAA;;AACpD,aAAKqP,UAAL,GAAkB,IAAlB;AACA,aAAKsoB,UAAL,GAAkB,IAAlB;AACA,aAAKvvB,QAAL,GAAgB,EAAhB;AACA,aAAK+G,iBAAL,GAAyB,CAAC,CAA1B;AACA,aAAK4M,UAAL,GAAkB,EAAlB;AACA,aAAK3Z,GAAL,GAAWA,GAAX;AACA,aAAK6C,EAAL,GAAUA,EAAV;AACA,aAAKjF,OAAL,GAAeA,OAAf;AACD;;;;uCAEW;AACV,iBAAO,KAAKA,OAAL,CAAaqJ,KAAb,CAAmB,CAAnB,EAAsB,CAAtB,IAA2B,KAA3B,GAAmC,KAAKrJ,OAAL,CAAaqJ,KAAb,CAAmB,CAAC,CAApB,CAA1C;AACD;;;;;;QAGU8wB,e;;;;;AAGX,+BAAY/3B,GAAZ,EAAyB6C,EAAzB,EAAqCH,cAArC,EAA8D;AAAA;;AAAA;;AAC5D,qCAAM1C,GAAN,EAAW6C,EAAX,EAAe7C,GAAf;AACA,gBAAKmD,kBAAL,GAA0B,EAA1B;;AACA,YAAIT,cAAJ,EAAoB;AAClB,kBAAKA,cAAL,GAAsBA,cAAtB;AACD;;AAL2D;AAM7D;;;;qCACS;AACR,iBAAO,IAAP;AACD;;;;MAZkCo1B,O;;QAexBE,iB;;;;;AACX,iCAAYC,SAAZ,EAA+BC,UAA/B,EAAmDC,SAAnD,EAAsE;AAAA;;AAAA,kCAC9DD,UAD8D,EAClDC,SADkD,EACvCF,SADuC;AAErE;;;;qCACS;AACR,iBAAO,KAAP;AACD;;;;MANoCH,O;;QAS1BM,Q;;;;;;;;;;;;;;;;;;;AC3Lb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMaC,a,GAEX,yBAAc;AAAA;AAAG,K;;;uBAFNA,a;AAAa,K;;;YAAbA,a;AAAa,mC;AAAA,e;AAAA,a;AAAA,wU;AAAA;AAAA;ACN1B;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AAAsC;;AAAG;;AACzC;;AAAiB;;AAAkB;;AACnC;;AAAG;;AAA2C;;AAChD;;AACF;;AACF;;AACF;;AACF;;;;;;;;;sEDXaA,a,EAAa;cAJzB,uDAIyB;eAJf;AACT97B,qBAAW,EAAE,oBADJ;AAETC,mBAAS,EAAE,CAAC,cAAD;AAFF,S;AAIe,Q;;;;;;;;;;;;;;;;;;;;AEN1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMa87B,a,GAEX,yBAAc;AAAA;AAAG,K;;;uBAFNA,a;AAAa,K;;;YAAbA,a;AAAa,mC;AAAA,e;AAAA,a;AAAA,8V;AAAA;AAAA;ACN1B;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AAAsC;;AAAG;;AACzC;;AAAiB;;AAA2B;;AAC5C;;AAAG;;AAAwD;;AAC7D;;AACF;;AACF;;AACF;;AACF;;;;;;;;;sEDXaA,a,EAAa;cAJzB,uDAIyB;eAJf;AACT/7B,qBAAW,EAAE,oBADJ;AAETC,mBAAS,EAAE,CAAC,cAAD;AAFF,S;AAIe,Q;;;;;;;;;;;;;;;;;;;;AEN1B;AAAA;;;AAAA;AAAA;AAAA;;AAAO,QAAM+7B,UAAU,GAAQ,CAC1B;AACG1hB,gBAAU,EAAE,SADf;AAEGD,cAAQ,EAAE,sCAFb;AAGG4hB,WAAK,EAAE;AAHV,KAD0B,EAM1B;AACG3hB,gBAAU,EAAE,QADf;AAEGD,cAAQ,EAAE,sCAFb;AAGG4hB,WAAK,EAAE;AAHV,KAN0B,EAW1B;AACG3hB,gBAAU,EAAE,SADf;AAEGD,cAAQ,EAAE,sCAFb;AAGG4hB,WAAK,EAAE;AAHV,KAX0B,EAgB1B;AACG3hB,gBAAU,EAAE,UADf;AAEGD,cAAQ,EAAE,sCAFb;AAGG4hB,WAAK,EAAE;AAHV,KAhB0B,EAqB1B;AACG3hB,gBAAU,EAAE,SADf;AAEGD,cAAQ,EAAE,sCAFb;AAGG4hB,WAAK,EAAE;AAHV,KArB0B,EA0B1B;AACG3hB,gBAAU,EAAE,eADf;AAEGD,cAAQ,EAAE,sCAFb;AAGG4hB,WAAK,EAAE;AAHV,KA1B0B,EA+B1B;AACG3hB,gBAAU,EAAE,gBADf;AAEGD,cAAQ,EAAE,sCAFb;AAGG4hB,WAAK,EAAE;AAHV,KA/B0B,EAoC1B;AACG3hB,gBAAU,EAAE,aADf;AAEGD,cAAQ,EAAE,sCAFb;AAGG4hB,WAAK,EAAE;AAHV,KApC0B,EAyC1B;AACG3hB,gBAAU,EAAE,SADf;AAEGD,cAAQ,EAAE,sCAFb;AAGG4hB,WAAK,EAAE;AAHV,KAzC0B,EA8C1B;AACG3hB,gBAAU,EAAE,aADf;AAEGD,cAAQ,EAAE,sCAFb;AAGG4hB,WAAK,EAAE;AAHV,KA9C0B;AAmD3B;;;;;;;;;;;;AAYA;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA/D2B,EAoE3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KApE2B;AAyE3B;;;;;AAKA;AACI3hB,gBAAU,EAAE,MADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA9E2B,EAmF3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAnF2B,EAwF3B;AACI3hB,gBAAU,EAAE,UADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAxF2B,EA6F3B;AACI3hB,gBAAU,EAAE,SADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA7F2B,EAkG3B;AACI3hB,gBAAU,EAAE,eADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAlG2B,EAuG3B;AACI3hB,gBAAU,EAAE,iBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAvG2B,EA4G3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA5G2B,EAiH3B;AACI3hB,gBAAU,EAAE,mBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAjH2B,EAsH3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAtH2B,EA2H3B;AACI3hB,gBAAU,EAAE,KADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA3H2B,EAgI3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAhI2B,EAqI3B;AACI3hB,gBAAU,EAAE,SADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KArI2B,EA0I3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA1I2B,EA+I3B;AACI3hB,gBAAU,EAAE,iBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA/I2B,EAoJ3B;AACI3hB,gBAAU,EAAE,oBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KApJ2B,EAyJ3B;AACI3hB,gBAAU,EAAE,oBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAzJ2B,EA8J3B;AACI3hB,gBAAU,EAAE,oBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA9J2B,EAmK3B;AACI3hB,gBAAU,EAAE,oBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAnK2B,EAwK3B;AACI3hB,gBAAU,EAAE,oBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAxK2B,EA6K3B;AACI3hB,gBAAU,EAAE,oBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA7K2B,EAkL3B;AACI3hB,gBAAU,EAAE,oBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAlL2B,EAuL3B;AACI3hB,gBAAU,EAAE,oBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAvL2B,EA4L3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA5L2B,EAiM3B;AACI3hB,gBAAU,EAAE,SADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAjM2B,EAsM3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAtM2B,EA2M3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA3M2B,EAgN3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAhN2B,EAqN3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KArN2B,EA0N3B;AACI3hB,gBAAU,EAAE,kBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA1N2B;AA+N3B;;;;;;;AAOA;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAtO2B,EA2O3B;AACI3hB,gBAAU,EAAE,iBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA3O2B,EAgP3B;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAhP2B,EAqP3B;AACI3hB,gBAAU,EAAE,UADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KArP2B,EA0P3B;AACI3hB,gBAAU,EAAE,UADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA1P2B,EA+P3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA/P2B,EAoQ3B;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KApQ2B,EAyQ3B;AACI3hB,gBAAU,EAAE,iBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAzQ2B,EA8Q3B;AACI3hB,gBAAU,EAAE,eADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA9Q2B,EAmR3B;AACI3hB,gBAAU,EAAE,eADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAnR2B,EAwR3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAxR2B,EA6R3B;AACI3hB,gBAAU,EAAE,eADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA7R2B,EAkS3B;AACI3hB,gBAAU,EAAE,UADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAlS2B,EAuS3B;AACI3hB,gBAAU,EAAE,gBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAvS2B,EA4S3B;AACI3hB,gBAAU,EAAE,gBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA5S2B,EAiT3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAjT2B,EAsT3B;AACI3hB,gBAAU,EAAE,gBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAtT2B,EA2T3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA3T2B,EAgU3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAhU2B,EAqU3B;AACI3hB,gBAAU,EAAE,QADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KArU2B,EA0U3B;AACI3hB,gBAAU,EAAE,SADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA1U2B,EA+U3B;AACI3hB,gBAAU,EAAE,oBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA/U2B,EAoV3B;AACI3hB,gBAAU,EAAE,eADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KApV2B,EAyV3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAzV2B,EA8V3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA9V2B,EAmW3B;AACI3hB,gBAAU,EAAE,UADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAnW2B,EAwW3B;AACI3hB,gBAAU,EAAE,gBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAxW2B,EA6W3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA7W2B,EAkX3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAlX2B,EAuX3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAvX2B,EA4X3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA5X2B,EAiY3B;AACI3hB,gBAAU,EAAE,UADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAjY2B,EAsY3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAtY2B,EA2Y3B;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA3Y2B,EAgZ3B;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAhZ2B,EAqZ3B;AACI3hB,gBAAU,EAAE,eADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KArZ2B,EA0Z3B;AACI3hB,gBAAU,EAAE,sBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA1Z2B,EA+Z3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA/Z2B,EAoa3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KApa2B,EAya3B;AACI3hB,gBAAU,EAAE,mBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAza2B,EA8a3B;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA9a2B,EAmb3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAnb2B,EAwb3B;AACI3hB,gBAAU,EAAE,kBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAxb2B,EA6b3B;AACI3hB,gBAAU,EAAE,gBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA7b2B,EAkc3B;AACI3hB,gBAAU,EAAE,eADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAlc2B,EAuc3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAvc2B,EA4c3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA5c2B,EAid3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAjd2B,EAsd3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAtd2B,EA2d3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA3d2B;AAge3B;;;;;;;AAOA;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAve2B,EA4e3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA5e2B,EAif3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAjf2B,EAsf3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAtf2B,EA2f3B;AACI3hB,gBAAU,EAAE,SADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA3f2B,EAggB3B;AACI3hB,gBAAU,EAAE,SADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAhgB2B,EAqgB3B;AACI3hB,gBAAU,EAAE,UADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KArgB2B,EA0gB3B;AACI3hB,gBAAU,EAAE,aADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA1gB2B,EA+gB3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA/gB2B,EAohB3B;AACI3hB,gBAAU,EAAE,OADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAphB2B,EAyhB3B;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAzhB2B,EA8hB3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA9hB2B,EAmiB3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAniB2B,EAwiB3B;AACI3hB,gBAAU,EAAE,kBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAxiB2B,EA6iB3B;AACI3hB,gBAAU,EAAE,mBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA7iB2B,EAkjB3B;AACI3hB,gBAAU,EAAE,SADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAljB2B,EAujB3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAvjB2B,EA4jB3B;AACI3hB,gBAAU,EAAE,SADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA5jB2B,EAikB3B;AACI3hB,gBAAU,EAAE,UADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAjkB2B,EAskB3B;AACI3hB,gBAAU,EAAE,UADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAtkB2B,EA2kB3B;AACI3hB,gBAAU,EAAE,SADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA3kB2B,EAglB3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAhlB2B,EAqlB3B;AACI3hB,gBAAU,EAAE,QADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KArlB2B,EA0lB3B;AACI3hB,gBAAU,EAAE,gBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA1lB2B,EA+lB3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA/lB2B,EAomB3B;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KApmB2B,EAymB3B;AACI3hB,gBAAU,EAAE,eADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAzmB2B,EA8mB3B;AACI3hB,gBAAU,EAAE,WADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA9mB2B,EAmnB3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAnnB2B,EAwnB3B;AACI3hB,gBAAU,EAAE,cADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAxnB2B,EA6nB3B;AACI3hB,gBAAU,EAAE,UADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA7nB2B,EAkoB3B;AACI3hB,gBAAU,EAAE,YADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAloB2B,EAuoB3B;AACI3hB,gBAAU,EAAE,kBADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KAvoB2B,EA4oB3B;AACI3hB,gBAAU,EAAE,SADhB;AAEID,cAAQ,EAAE,sCAFd;AAGI4hB,WAAK,EAAE;AAHX,KA5oB2B,CAAxB;;;;;;;;;;;;;;;;ACAP;AAAA;;;AAAA;AAAA;AAAA,O,CAAA;AACA;AACA;AACA;;;AAEO,QAAMC,WAAW,GAAG;AACzBC,gBAAU,EAAE;AADa,KAApB;;;;;;;;;;;;;;;;ACLP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,QAAI,sEAAYA,UAAhB,EAA4B;AAC1B;;AACAt/B,YAAM,CAACmG,OAAP,CAAeC,GAAf,GAAqB,aAAa,CAAlC;AACD;;AAED,gFAAyBm5B,eAAzB,CAAyC,yDAAzC,WACS,UAAA53B,GAAG;AAAA,aAAIxB,OAAO,CAACC,GAAR,CAAYuB,GAAZ,CAAJ;AAAA,KADZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA","file":"main-es5.js","sourcesContent":["var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { StartComponent } from './components/start/start.component';\r\nimport { NewWalletComponent } from './components/new-wallet/new-wallet.component';\r\nimport { MnemonicImportComponent } from './components/mnemonic-import/mnemonic-import.component';\r\nimport { ActivateComponent } from './components/activate/activate.component';\r\nimport { ConnectLedgerComponent } from './components/connect-ledger/connect-ledger.component';\r\nimport { AccountsComponent } from './components/accounts/accounts.component';\r\nimport { P404Component } from './views/error/404.component';\r\nimport { P500Component } from './views/error/500.component';\r\nimport { AccountViewComponent } from './components/account-view/account-view.component';\r\nimport { PrivacyPolicyComponent } from './components/agreement/privacy-policy/privacy-policy.component';\r\nimport { TermsOfUseComponent } from './components/agreement/terms-of-use/terms-of-use.component';\r\nimport { TorusComponent } from './components/torus/torus.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: StartComponent },  // Content Centre position\r\n  { path: 'new-wallet', component: NewWalletComponent },  // Content Centre position\r\n  { path: 'import', component: MnemonicImportComponent },\r\n  { path: 'activate', component: ActivateComponent },\r\n  { path: 'connect-ledger', component: ConnectLedgerComponent },\r\n  { path: 'direct-auth', component: TorusComponent },\r\n  { path: 'accounts', component: AccountsComponent },\r\n  { path: 'account/:address', component: AccountViewComponent },\r\n  { path: 'privacy-policy', component: PrivacyPolicyComponent },\r\n  { path: 'terms-of-use', component: TermsOfUseComponent },\r\n  { path: 'serviceworker', component: TermsOfUseComponent },\r\n  { path: '404', component: P404Component, data: { title: 'Page 404' } },\r\n  { path: '500', component: P500Component, data: { title: 'Page 500' } },\r\n  { path: '**', redirectTo: '404'},\r\n];\r\n\r\n@NgModule({\r\n  imports: [ RouterModule.forRoot(routes) ],\r\n  exports: [ RouterModule ]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\n\r\nimport { WalletService } from './services/wallet/wallet.service';\r\nimport { CoordinatorService } from './services/coordinator/coordinator.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Constants } from './constants';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n  // // tslint:disable-next-line\r\n  // selector: 'body',\r\n  // template: '<router-outlet></router-outlet>'\r\n})\r\nexport class AppComponent implements OnInit {\r\n\r\n  CONSTANTS = new Constants();\r\n  constructor(\r\n    private walletService: WalletService,\r\n    private coordinatorService: CoordinatorService,\r\n    private router: Router,\r\n    public translate: TranslateService\r\n  ) {\r\n\r\n      // this language will be used as a fallback when a translation isn't found in the current language\r\n      translate.setDefaultLang('en');\r\n\r\n      // the lang to use, if the lang isn't available, it will use the current loader to get them\r\n      const languagePreference = window.localStorage.getItem('languagePreference');\r\n      const browserLang = translate.getBrowserLang();\r\n      translate.use('en');\r\n      /*if (languagePreference) {\r\n        translate.use(languagePreference.match(/en|fr|ru|jp|kor|por/) ? languagePreference : 'en');\r\n      } else {\r\n        translate.use(browserLang.match(/en|fr|ru|jp|kor|por/) ? browserLang : 'en');\r\n      }*/\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.walletService.loadStoredWallet();\r\n    if (this.walletService.wallet) {\r\n      this.coordinatorService.startAll();\r\n      //this.router.navigate(['/accounts']);\r\n    }\r\n    this.router.events.subscribe((evt) => {\r\n      if (!(evt instanceof NavigationEnd)) {\r\n        return;\r\n      }\r\n      window.scrollTo(0, 0);\r\n    });\r\n  }\r\n\r\n  returnLanguage(lang: string) {\r\n\r\n    // this.translate.use(lang);\r\n    // console.log('lang ', lang);\r\n\r\n    const map: Map<string, string> = new Map([\r\n        ['en', 'English'],\r\n        ['cn', '中国'],\r\n        ['es', 'Español'],\r\n        ['fr', 'Français'],\r\n        ['ru', 'Pусский'],\r\n        ['jp', '日本語'],\r\n        ['kor', '한국어'],\r\n        ['por', 'Português'],\r\n        ['swe', 'Svenska']\r\n    ]);\r\n\r\n    const language = map.get(lang);\r\n\r\n    return language;\r\n  }\r\n  setLanguage(lang) {\r\n    window.localStorage.setItem('languagePreference', lang);\r\n    this.translate.use(lang);\r\n  }\r\n\r\n  logout() {\r\n    this.coordinatorService.stopAll();\r\n    this.walletService.clearWallet();\r\n    this.router.navigate(['']);\r\n  }\r\n}\r\n","<router-outlet></router-outlet>\r\n<app-messages></app-messages>\r\n<app-spinner></app-spinner>\r\n<app-agreement></app-agreement>\r\n<app-footer></app-footer>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { LocationStrategy, HashLocationStrategy } from '@angular/common';\r\nimport { HttpClientModule, HttpClient } from '@angular/common/http';\r\nimport { AppRoutingModule } from './app-routing.module';\r\n\r\n// From Angular Material\r\nimport { MatSortModule } from '@angular/material/sort';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\n// For translation\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nimport {TranslateHttpLoader} from '@ngx-translate/http-loader';\r\n\r\n// External libraries\r\nimport { ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\r\nimport { ModalModule, AlertModule, ProgressbarModule, ButtonsModule, BsDropdownModule, TabsModule } from 'ngx-bootstrap';\r\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\r\nimport { AppComponent } from './app.component';\r\n\r\nimport { PerfectScrollbarModule } from 'ngx-perfect-scrollbar';\r\nimport { PERFECT_SCROLLBAR_CONFIG } from 'ngx-perfect-scrollbar';\r\nimport { PerfectScrollbarConfigInterface } from 'ngx-perfect-scrollbar';\r\n\r\n\r\nconst DEFAULT_PERFECT_SCROLLBAR_CONFIG: PerfectScrollbarConfigInterface = {\r\n  suppressScrollX: true\r\n};\r\n\r\n// Services\r\nimport { MessageService } from './services/message/message.service';\r\nimport { WalletService } from './services/wallet/wallet.service';\r\nimport { ActivityService } from './services/activity/activity.service';\r\nimport { BalanceService } from './services/balance/balance.service';\r\nimport { EncryptionService } from './services/encryption/encryption.service';\r\nimport { ImportService } from './services/import/import.service';\r\nimport { TzrateService } from './services/tzrate/tzrate.service';\r\nimport { ExportService } from './services/export/export.service';\r\nimport { DelegateService } from './services/delegate/delegate.service';\r\nimport { InputValidationService } from './services/input-validation/input-validation.service';\r\nimport { LedgerService } from './services/ledger/ledger.service';\r\nimport { EstimateService } from './services/estimate/estimate.service';\r\n\r\n// View components\r\nimport { StartComponent } from './components/start/start.component';\r\nimport { SendComponent } from './components/send/send.component';\r\nimport { NewWalletComponent } from './components/new-wallet/new-wallet.component';\r\nimport { ReceiveComponent } from './components/receive/receive.component';\r\nimport { DelegateComponent } from './components/delegate/delegate.component';\r\nimport { PositioningService } from 'ngx-bootstrap/positioning';\r\nimport { MnemonicImportComponent } from './components/mnemonic-import/mnemonic-import.component';\r\nimport { CoordinatorService } from './services/coordinator/coordinator.service';\r\nimport { OperationService } from './services/operation/operation.service';\r\nimport { ActivateComponent } from './components/activate/activate.component';\r\nimport { MessagesComponent } from './components/messages/messages.component';\r\nimport { HeaderComponent } from './components/header/header.component';\r\nimport { P404Component } from './views/error/404.component';\r\nimport { P500Component } from './views/error/500.component';\r\n\r\n// Pipes\r\nimport { ErrorHandlingPipe } from './pipes/error-handling.pipe';\r\nimport { DelegatorNamePipe } from './pipes/delegator-name.pipe';\r\nimport { TruncatePipe } from './pipes/truncate.pipe';\r\nimport { TimeAgoPipe } from './pipes/time-ago.pipe';\r\nimport { ConnectLedgerComponent } from './components/connect-ledger/connect-ledger.component';\r\nimport { FooterComponent } from './components/footer/footer.component';\r\nimport { AccountsComponent } from './components/accounts/accounts.component';\r\nimport { AccountViewComponent } from './components/account-view/account-view.component';\r\nimport { NewImplicitComponent } from './components/new-implicit/new-implicit.component';\r\nimport { SpinnerComponent } from './components/spinner/spinner.component';\r\nimport { AgreementComponent } from './components/agreement/agreement.component';\r\nimport { TermsOfUseComponent } from './components/agreement/terms-of-use/terms-of-use.component';\r\nimport { PrivacyPolicyComponent } from './components/agreement/privacy-policy/privacy-policy.component';\r\nimport { TorusComponent } from './components/torus/torus.component';\r\nimport { TorusService } from './services/torus/torus.service';\r\n\r\n// AoT requires an exported function for factories\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\r\n}\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n\r\n    // View components\r\n    NewWalletComponent,\r\n    StartComponent,\r\n    SendComponent,\r\n    ReceiveComponent,\r\n    DelegateComponent,\r\n    MnemonicImportComponent,\r\n    ActivateComponent,\r\n    MessagesComponent,\r\n    HeaderComponent,\r\n    P404Component,\r\n    P500Component,\r\n\r\n    // Pipes\r\n    ErrorHandlingPipe,\r\n    DelegatorNamePipe,\r\n    TruncatePipe,\r\n    TimeAgoPipe,\r\n    ConnectLedgerComponent,\r\n    FooterComponent,\r\n    AccountsComponent,\r\n    AccountViewComponent,\r\n    NewImplicitComponent,\r\n    SpinnerComponent,\r\n    AgreementComponent,\r\n    TermsOfUseComponent,\r\n    PrivacyPolicyComponent,\r\n    TorusComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    MatTabsModule,\r\n    MatSortModule,\r\n    FormsModule,\r\n    AppRoutingModule,\r\n    HttpClientModule,\r\n    CollapseModule.forRoot(),\r\n    ModalModule.forRoot(),\r\n    AlertModule.forRoot(),\r\n    PerfectScrollbarModule,\r\n    ProgressbarModule.forRoot(),\r\n    ButtonsModule.forRoot(),\r\n    BsDropdownModule.forRoot(),\r\n    TabsModule.forRoot(),\r\n    TranslateModule.forRoot({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: HttpLoaderFactory,\r\n        deps: [HttpClient]\r\n      }\r\n    })  // lazy loading will need TranslateModule.forChild() in the lazy loaded modules\r\n  ],\r\n  providers: [\r\n    // Services\r\n    MessageService,\r\n    WalletService,\r\n    ActivityService,\r\n    EncryptionService,\r\n    BalanceService,\r\n    ImportService,\r\n    ComponentLoaderFactory,\r\n    PositioningService,\r\n    TzrateService,\r\n    CoordinatorService,\r\n    OperationService,\r\n    ExportService,\r\n    DelegateService,\r\n    InputValidationService,\r\n    LedgerService,\r\n    EstimateService,\r\n\r\n    // Pipes\r\n    ErrorHandlingPipe,\r\n    DelegatorNamePipe,\r\n    TruncatePipe,\r\n    TimeAgoPipe\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router, NavigationEnd } from '@angular/router';\r\nimport { Account } from '../../services/wallet/wallet';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { TimeAgoPipe } from '../../pipes/time-ago.pipe';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport * as copy from 'copy-to-clipboard';\r\nimport { filter } from 'rxjs/internal/operators/filter';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport { Constants } from '../../constants';\r\nimport { LookupService } from '../../services/lookup/lookup.service';\r\nimport { ActivityService } from '../../services/activity/activity.service';\r\n\r\n@Component({\r\n  selector: 'app-account-view',\r\n  templateUrl: './account-view.component.html',\r\n  styleUrls: ['./account-view.component.scss'],\r\n})\r\nexport class AccountViewComponent implements OnInit {\r\n  account: Account;\r\n  CONSTANTS = new Constants();\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private walletService: WalletService,\r\n    public translate: TranslateService,\r\n    public messageService: MessageService,\r\n    public timeAgoPipe: TimeAgoPipe,\r\n    private router: Router,\r\n    private coordinatorService: CoordinatorService,\r\n    private lookupService: LookupService,\r\n    private activityService: ActivityService\r\n  ) {}\r\n    trigger = true;\r\n    @Input() activity: any;\r\n  ngOnInit(): void {\r\n    if (!this.walletService.wallet) {\r\n      this.router.navigate(['']);\r\n    } else {\r\n      this.coordinatorService.startAll();\r\n      let address = this.route.snapshot.paramMap.get('address');\r\n      if (this.walletService.addressExists(address)) {\r\n        this.account = this.walletService.wallet.getAccount(address);\r\n      }\r\n      this.router.events\r\n        .pipe(filter((evt) => evt instanceof NavigationEnd))\r\n        .subscribe(() => {\r\n          address = this.route.snapshot.paramMap.get('address');\r\n          if (this.walletService.wallet && this.walletService.addressExists(address)) {\r\n            this.account = this.walletService.wallet.getAccount(address);\r\n          }\r\n        });\r\n        setInterval(() => this.trigger = !this.trigger, 10 * 1000);\r\n    }\r\n  }\r\n  getType(transaction: any): string {\r\n    if (transaction.type !== 'transaction') {\r\n      if (transaction.type === 'delegation') {\r\n        if (transaction.destination) {\r\n          return 'delegated';\r\n        } else {\r\n          return 'undelegated';\r\n        }\r\n      } else {\r\n        return transaction.type;\r\n      }\r\n    } else {\r\n      let operationType = '';\r\n      if (transaction.source === this.account.address) {\r\n        operationType = 'sent';\r\n      } else {\r\n        operationType = 'received';\r\n      }\r\n      return operationType;\r\n    }\r\n  }\r\n\r\n  getCounterparty(transaction: any): string {\r\n    return this.activityService.getCounterparty(transaction, this.account);\r\n  }\r\n  copy(account: Account) {\r\n    copy(account.address);\r\n    const copyToClipboard = this.translate.instant(\r\n      'OVERVIEWCOMPONENT.COPIEDTOCLIPBOARD'\r\n    );\r\n    this.messageService.add(account.address + ' ' + copyToClipboard, 5);\r\n  }\r\n  explorerURL(hash: string) {\r\n    const baseURL = this.CONSTANTS.NET.NETWORK === 'mainnet' ? 'https://tzkt.io/' : 'https://carthage.tzkt.io/';\r\n    return baseURL + hash;\r\n  }\r\n}\r\n\r\n","<app-header [activeAccount]=\"account\"></app-header>\r\n<div id=\"wrapper\" *ngIf=\"account\">\r\n  <div class=\"left-container\">\r\n    <div class=\"main-container small\">\r\n      <div class=\"top-container\">\r\n        <H1>Account Information</H1>\r\n      </div>\r\n      <div id=\"account-container\">\r\n        <div class=\"mid-container\">\r\n          <div class=\"address-container\">\r\n            <H2 style=\"margin-top: 0\">Address</H2>\r\n            <div class=\"icons\">\r\n              <img class=\"copy-icon\" src=\"../../../assets/img/copy-icon.svg\" (click)=\"copy(account)\">\r\n              <app-receive [activeAddress]=\"account.address\"></app-receive>\r\n            </div>\r\n          </div>\r\n          <span style=\"width: auto; font-size: 0.8125rem\">{{ account.address }}</span>\r\n          <H2>Balance</H2>\r\n          <div style=\"margin-top: 0\"><span>{{ account.balanceXTZ / 1000000 | number: \"1.0-6\" }} tez</span><span\r\n              class=\"mark\">—</span><span class=\"grey\"\r\n              style=\"font-size: 0.75rem\">{{ account.balanceUSD | number: \"1.0-0\" }} USD</span></div>\r\n          <H2>Delegate</H2>\r\n          <app-delegate [activeAccount]=\"account\"></app-delegate>\r\n        </div>\r\n        <div class=\"bottom-container\">\r\n          <app-send [activeAccount]=\"account\"></app-send>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"main-container large\">\r\n    <div class=\"top-container\">\r\n      <H1 style=\"float:left\">Recent Activity</H1>\r\n      <a class=\"view-all\" href=\"{{ explorerURL(account.address) }}\" target=\"_blank\">View in explorer</a>\r\n    </div>\r\n    <div id=\"operations-container\" *ngIf=\"this.translate.store.translations.en\">\r\n      <ng-container *ngIf=\"!account.activities.length\">\r\n        <div class=\"line\"><span>No transactions yet</span></div>\r\n      </ng-container>\r\n      <ng-container *ngFor=\"let activity of account.activities | slice:0:5\">\r\n        <ng-container [ngSwitch]=\"getType(activity)\">\r\n          <ng-template #CounterpartyRef let-myactivity>\r\n            <span class=\"grey truncate-overflow\">\r\n              <ng-container *ngIf=\"myactivity.name; else elseBlock\">\r\n                <ng-container [ngSwitch]=\"myactivity.lookupType\">\r\n                  <img *ngSwitchCase=\"2\" height=\"12\" src=\"../../../assets/img/google-logo.svg\">\r\n                  <img *ngSwitchCase=\"3\" height=\"12\" src=\"../../../assets/img/reddit-logo.svg\">\r\n                  <img *ngSwitchCase=\"4\" height=\"12\" src=\"../../../assets/img/twitter-logo.svg\">\r\n                </ng-container>\r\n                &nbsp;{{ myactivity.name }}</ng-container>\r\n              <ng-template #elseBlock>{{ myactivity.address }}</ng-template>\r\n            </span>\r\n          </ng-template>\r\n          <div *ngSwitchCase=\"'sent'\" class=\"sent\">\r\n            <img src=\"../../../assets/img/sent.svg\">\r\n            <div>\r\n              <div class=\"line\"><span class=\"red\">Sent {{ activity.amount / 1000000 | number:'1.0-6' }} tez</span><a\r\n                  href=\"{{ explorerURL(activity.hash) }}\" target=\"_blank\">\r\n                  <ng-container *ngIf=\"activity.status > 0\">{{ activity.timestamp | timeAgo:trigger }}</ng-container>\r\n                  <ng-container *ngIf=\"activity.status === 0\">Unconfirmed</ng-container>\r\n                </a></div>\r\n              <div class=\"line\"><span class=\"grey\">To —</span>\r\n              <ng-template [ngTemplateOutlet]=\"CounterpartyRef\" [ngTemplateOutletContext]=\"{ $implicit: getCounterparty(activity) }\"></ng-template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div *ngSwitchCase=\"'received'\" class=\"received\">\r\n            <img src=\"../../../assets/img/received.svg\">\r\n            <div>\r\n              <div class=\"line\"><span class=\"green\">Received {{ activity.amount / 1000000 | number:'1.0-6' }}\r\n                  tez</span><a href=\"{{ explorerURL(activity.hash) }}\" target=\"_blank\">\r\n                  <ng-container *ngIf=\"activity.status > 0\">{{ activity.timestamp | timeAgo:trigger }}</ng-container>\r\n                  <ng-container *ngIf=\"activity.status === 0\">Unconfirmed</ng-container>\r\n                </a></div>\r\n              <div class=\"line\"><span class=\"grey\">From —</span>\r\n                <ng-template [ngTemplateOutlet]=\"CounterpartyRef\" [ngTemplateOutletContext]=\"{ $implicit: getCounterparty(activity) }\"></ng-template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div *ngSwitchCase=\"'delegated'\" class=\"delegated\">\r\n            <img src=\"../../../assets/img/delegated.svg\">\r\n            <div>\r\n              <div class=\"line\"><span class=\"blue\">Delegated</span><a href=\"{{ explorerURL(activity.hash) }}\"\r\n                  target=\"_blank\">\r\n                  <ng-container *ngIf=\"activity.status > 0\">{{ activity.timestamp | timeAgo:trigger }}</ng-container>\r\n                  <ng-container *ngIf=\"activity.status === 0\">Unconfirmed</ng-container>\r\n                </a></div>\r\n              <div class=\"line\"><span class=\"grey\">To —</span>\r\n                <ng-template [ngTemplateOutlet]=\"CounterpartyRef\" [ngTemplateOutletContext]=\"{ $implicit: getCounterparty(activity) }\"></ng-template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div *ngSwitchCase=\"'undelegated'\" class=\"delegated\">\r\n            <img src=\"../../../assets/img/delegated.svg\">\r\n            <div>\r\n              <div class=\"line\"><span class=\"blue\">Undelegated</span><a href=\"{{ explorerURL(activity.hash) }}\"\r\n                  target=\"_blank\">\r\n                  <ng-container *ngIf=\"activity.status > 0\">{{ activity.timestamp | timeAgo:trigger }}</ng-container>\r\n                  <ng-container *ngIf=\"activity.status === 0\">Unconfirmed</ng-container>\r\n                </a></div>\r\n              <div class=\"line\"><span class=\"grey\">To —</span>\r\n                <ng-template [ngTemplateOutlet]=\"CounterpartyRef\" [ngTemplateOutletContext]=\"{ $implicit: getCounterparty(activity) }\"></ng-template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div *ngSwitchDefault>\r\n            <div style=\"padding-left: 0.75rem\">\r\n              <div class=\"line\"><span class=\"black\">{{ getType(activity) | titlecase }}</span><a\r\n                  href=\"{{ explorerURL(activity.hash) }}\" target=\"_blank\">\r\n                  <ng-container *ngIf=\"activity.status > 0\">{{ activity.timestamp | timeAgo:trigger }}</ng-container>\r\n                  <ng-container *ngIf=\"activity.status === 0\">Unconfirmed</ng-container>\r\n                </a></div>\r\n              <div class=\"line\"><span class=\"grey\">Counterparty —</span>\r\n                <ng-template [ngTemplateOutlet]=\"CounterpartyRef\" [ngTemplateOutletContext]=\"{ $implicit: getCounterparty(activity) }\"></ng-template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, HostListener, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport * as copy from 'copy-to-clipboard';\r\nimport { TranslateService } from '@ngx-translate/core'; // Multiple instances created ?\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport {\r\n  ImplicitAccount,\r\n  OriginatedAccount,\r\n  Account,\r\n  HdWallet,\r\n} from '../../services/wallet/wallet';\r\n\r\n@Component({\r\n  selector: 'app-accounts',\r\n  templateUrl: './accounts.component.html',\r\n  styleUrls: ['./accounts.component.scss']\r\n})\r\nexport class AccountsComponent implements OnInit {\r\n  wideAccounts = false;\r\n  implicitAccounts: ImplicitAccount[];\r\n  constructor(\r\n    public walletService: WalletService,\r\n    private router: Router,\r\n    private translate: TranslateService,\r\n    private messageService: MessageService,\r\n    private coordinatorService: CoordinatorService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (!this.walletService.wallet) {\r\n      this.router.navigate(['']);\r\n    } else {\r\n      this.onResize();\r\n      this.coordinatorService.startAll();\r\n      this.implicitAccounts = this.walletService.wallet.implicitAccounts;\r\n    }\r\n  }\r\n  copy(account: Account) {\r\n    copy(account.address);\r\n    const copyToClipboard = this.translate.instant(\r\n      'OVERVIEWCOMPONENT.COPIEDTOCLIPBOARD'\r\n    );\r\n    this.messageService.add(account.address + ' ' + copyToClipboard, 5);\r\n  }\r\n  select(account: Account) {\r\n    console.log('Selected: ' + account.address);\r\n    this.router.navigate(['account', account.address]);\r\n  }\r\n  @HostListener('window:resize')\r\n  onResize() {\r\n    this.wideAccounts = (window.innerWidth > 640);\r\n  }\r\n  formatAddress(account: Account) {\r\n    if (this.wideAccounts) {\r\n      return account.address;\r\n    } else {\r\n      return account.shortAddress();\r\n    }\r\n  }\r\n}\r\n","<app-header></app-header>\r\n<div id=\"wrapper\" *ngIf=\"walletService.wallet\">\r\n    <div class=\"main-container\">\r\n        <div id=\"top-container\">\r\n            <span id=\"title\">Accounts</span>\r\n            <app-new-implicit></app-new-implicit>\r\n        </div>\r\n        <div id=\"accounts-container\">\r\n            <ng-container *ngFor=\"let impAcc of implicitAccounts\">\r\n                <div class=\"account-container account-row\" (click)=\"select(impAcc)\">\r\n                    <div>\r\n                        <img class=\"account-icon\" src=\"../../../assets/img/account-icon.svg\">\r\n                        <span class=\"account-address\">{{ formatAddress(impAcc) }}</span>\r\n                        <img class=\"copy-icon\" src=\"../../../assets/img/copy-icon.svg\" (click)=\"$event.stopPropagation() ; copy(impAcc)\">\r\n                    </div>\r\n                    <div class=\"value-container\">\r\n                        <div class=\"values\">\r\n                            <span class=\"account-xtz\">{{ impAcc.balanceXTZ / 1000000 | number: \"1.0-6\"}} tez</span>\r\n                            <span *ngIf=\"impAcc.balanceXTZ\" class=\"account-usd\">{{ impAcc.balanceUSD | number: \"1.0-0\" }} USD</span>\r\n                        </div>\r\n                        <div>\r\n                        <!-- Todo: Add menu\r\n                            <img class=\"menu-icon\" src=\"../../../assets/img/menu-icon.svg\" (click)=\"$event.stopPropagation()\">\r\n                        -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"seperator\"></div>\r\n                <ng-container *ngFor=\"let origAcc of impAcc.originatedAccounts\">\r\n                    <div class=\"account-container account-row\" (click)=\"select(origAcc)\">\r\n                        <div>\r\n                            <img class=\"account-icon\" src=\"../../../assets/img/account-icon.svg\">\r\n                            <span class=\"account-address\">{{ formatAddress(origAcc) }}</span>\r\n                            <img class=\"copy-icon\" src=\"../../../assets/img/copy-icon.svg\" (click)=\"$event.stopPropagation() ; copy(origAcc)\">\r\n                        </div>\r\n                        <div class=\"value-container\">\r\n                            <div class=\"values\">\r\n                                <span class=\"account-xtz\">{{ origAcc.balanceXTZ / 1000000 | number: \"1.0-6\"}} tez</span>\r\n                                <span *ngIf=\"origAcc.balanceXTZ\" class=\"account-usd\">{{ origAcc.balanceUSD | number: \"1.0-0\" }} USD</span>\r\n                            </div>\r\n                            <div>\r\n                            <!--\r\n                                <img class=\"menu-icon\" src=\"../../../assets/img/menu-icon.svg\" (click)=\"$event.stopPropagation()\">  \r\n                            -->\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"seperator\"></div>\r\n                </ng-container>\r\n            </ng-container>\r\n            <div class=\"account-container value-total\">\r\n                <div class=\"value-container\">\r\n                    <div class=\"values\">\r\n                        <span class=\"account-xtz\">{{ walletService.wallet.totalBalanceXTZ / 1000000 | number: \"1.0-6\"}} tez</span>\r\n                        <span class=\"account-usd\">{{ walletService.wallet.totalBalanceUSD | number: \"1.0-0\" }} USD</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { OperationService } from '../../services/operation/operation.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Component({\r\n  selector: 'app-activate',\r\n  templateUrl: './activate.component.html',\r\n  styleUrls: ['./activate.component.scss']\r\n})\r\nexport class ActivateComponent implements OnInit {\r\n  pkh: string;\r\n  secret: string;\r\n  formInvalid = '';\r\n  constructor(\r\n    private messageService: MessageService,\r\n    private operationService: OperationService,\r\n    private inputValidationService: InputValidationService,\r\n    private translate: TranslateService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  activate() {\r\n    this.formInvalid = this.checkInput();\r\n    if (!this.formInvalid) {\r\n      const pkh = this.pkh;\r\n      const secret = this.secret;\r\n      this.pkh = '';\r\n      this.secret = '';\r\n      this.operationService.activate(pkh, secret).subscribe(\r\n        (ans: any) => {\r\n          if (ans.success) {\r\n            if (ans.payload.opHash) {\r\n              this.translate.get('ACTIVATECOMPONENT.ACTIVATESUCCESS').subscribe(\r\n                (res: string) => this.messageService.addSuccess(res)  // 'Activation successfully broadcasted to the blockchain!'\r\n              );\r\n            } else {\r\n              this.translate.get('ACTIVATECOMPONENT.RETRIEVEFAIL').subscribe(\r\n                (res: string) => this.messageService.addWarning(res)  // Could not retrieve an operation hash\r\n              );\r\n            }\r\n          } else {\r\n            let errorMessage = '';\r\n            if (typeof ans.payload.msg === 'string') {\r\n              errorMessage = 'NodeError ' + ans.payload.msg;\r\n            } else {\r\n              errorMessage = 'NodeError ' + JSON.stringify(ans.payload.msg);\r\n            }\r\n            this.messageService.addError(errorMessage);\r\n            console.log(JSON.stringify(ans.payload.msg));\r\n          }\r\n        },\r\n        err => {\r\n          this.translate.get('ACTIVATECOMPONENT.ACTIVATEFAIL').subscribe(\r\n            (res: string) => {\r\n              let errorMessage = '';\r\n              const activateFailed = res;\r\n              if (typeof err.payload.msg === 'string') {\r\n                errorMessage = activateFailed + ' ' + err.payload.msg;\r\n              } else {\r\n                errorMessage = activateFailed;\r\n              }\r\n              this.messageService.addError(errorMessage);\r\n            }  // 'Failed to activate wallet!'\r\n          );\r\n          console.log(JSON.stringify(err));\r\n        }\r\n      );\r\n    }\r\n  }\r\n  checkInput(): string {\r\n    if (!this.inputValidationService.address(this.pkh)) {\r\n      return 'Invalid public key hash!';\r\n    } else if (!this.inputValidationService.code(this.secret)) {\r\n      return 'Invalid activation code!';\r\n    }\r\n    return '';\r\n  }\r\n}\r\n","<div class=\"kukai-card\">\r\n    <H1>\r\n        Activate your ICO wallet\r\n    </H1>\r\n    <p class=\"description\">Wallets created during the fundraiser need to be activated. No private key is required for the activation process.</p>\r\n    <div class=\"grey-card\">\r\n      <small class=\"\">Your public key hash</small>\r\n      <input type=\"text\" class=\"text\" [(ngModel)]=\"pkh\" [placeholder]=\"'tz1...'\">\r\n      <small class=\"\">Your activation code</small>\r\n      <input type=\"text\" class=\"text\" [(ngModel)]=\"secret\" [placeholder]=\"'Code'\">\r\n      <div class=\"buttons\"><a routerLink=\"/import\"><button class=\"button back\">Back</button></a><button class=\"button next\" (click)=\"activate()\">Activate</button></div>\r\n      <span *ngIf=\"formInvalid\" class=\"text-danger\">\r\n          {{ formInvalid }}\r\n      </span>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-agreement',\r\n  templateUrl: './agreement.component.html',\r\n  styleUrls: ['./agreement.component.scss']\r\n})\r\nexport class AgreementComponent implements OnInit {\r\n  displayAgreement = false;\r\n  key = 'accepted-terms';\r\n  constructor(\r\n    private location: Location\r\n    ) { }\r\n  ngOnInit(): void {\r\n    // localStorage.removeItem(this.key);\r\n    const accepted = localStorage.getItem(this.key);\r\n    const path = this.location.path();\r\n    console.log(path);\r\n    if (!accepted && path !== '/terms-of-use' && path !== '/privacy-policy') {\r\n      this.displayAgreement = true;\r\n      const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n      document.body.style.marginRight = scrollBarWidth.toString();\r\n      document.body.style.overflowY = 'hidden';\r\n    }\r\n  }\r\n  accept() {\r\n    localStorage.setItem(this.key, '1');\r\n    this.displayAgreement = false;\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflowY = '';\r\n  }\r\n  reject() {\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflowY = '';\r\n    window.open('', '_self');\r\n  }\r\n}\r\n","<div *ngIf=\"displayAgreement\" class=\"agreement-wrapper fade-in\">\r\n  <div class=\"agreement-body\">\r\n    <div class=\"agreement-footer fade-in\">\r\n      <p>By Accessing, Continuing to Use & Browse this Website including its Services provided therein (“Kukai Wallet”), you agree that you have read and reviewed our <a href=\"./terms-of-use\" target=\"_blank\">Terms of Use</a> and <a href=\"./privacy-policy\" target=\"_blank\">Privacy Policy</a>.</p>\r\n      <div><div class=\"accept\">\r\n        <button (click)=\"accept()\">Accept</button>\r\n        <p>I have reviewed the Terms of Use and Privacy Policy, I hereby Accept and Agree to the Terms of Use and Privacy Policy.</p>\r\n      </div>\r\n      <div>\r\n        <a href=\"about:blank\"><button>Decline</button></a>\r\n        <p>I have reviewed the Terms of Use and Privacy Policy, I hereby DO NOT Accept and Agree to the Terms of Use and Privacy Policy.</p>\r\n      </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-privacy-policy',\r\n  templateUrl: './privacy-policy.component.html',\r\n  styleUrls: ['./privacy-policy.component.scss']\r\n})\r\nexport class PrivacyPolicyComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"legal\">\r\n  <H1>Privacy Policy</H1>\r\n  <H5>Introduction</H5>\r\n  <p>Kukai Wallet (“hereinafter Kukai” “we” “our” “us”) is committed to ensuring the privacy of all our users. We take\r\n    our duty to process your personal data very seriously. This policy represents our commitment to your right to\r\n    privacy, giving you a clear explanation about how we use your information and your rights over that information. We\r\n    strive to be complaint with any data or privacy laws and regulations such as the California Consumer Privacy Act\r\n    (“CCPA”) and General Data Protection and Regulation (“GDPR”).</p>\r\n\r\n  <p>It's possible to use https://kukai.app/ (“hereinafter website”) without submitting any personal information. </p>\r\n\r\n  <H5>Scope of Privacy Policy</H5>\r\n  <p>This privacy policy applies only to your use of our website. Our website and Services may contain links to other\r\n    websites posted by members via images, content such as videos, links to other websites which are not hosted by us.\r\n    Please note that we have no control over how your data is collected, stored, or used by other websites or service\r\n    providers and we advise you to check the privacy policies of any such website(s) before providing any data to them.\r\n  </p>\r\n\r\n  <p>What types of information do we collect and how?\r\n  <p>The type and amount of information we receive and store depends on how you use the website and Services. We do not\r\n    store any information as all data is localized on the User’s computer or device. You can access the website and\r\n    Services without telling us who you are and without revealing any personal information.</p>\r\n\r\n  <p>Data protection laws require us to have a legal justification to process your personal information. We do not\r\n    collect any personally identifiable data from Users, nor do we store or maintain any of such data. All data is\r\n    localized on the User’s computer or device.</p>\r\n\r\n  <H5>Sharing of data</H5>\r\n  <p>In some circumstances your information may be shared with us by third parties, but only where you have specifically\r\n    consented.</p>\r\n\r\n  <p>We never sell user information to anyone.</p>\r\n\r\n  <H6>In order to operate the site, the following data sharing occurs:</H6>\r\n\r\n  <p>Our tech-related service providers may necessarily have access to user data, and could collect/store data beyond\r\n    what Kukai Wallet itself does. Third Party Service providers may or may not include, and are not limited to:\r\n    CoinGecko, Nautilus Cloud, and Tezos Giga Node. Please refer to their respective privacy policies and data\r\n    collection policies.</p>\r\n\r\n  <H5>Other sharing</H5>\r\n  <p>We may also share your personal information with your permission, or if we are legally required to disclose your\r\n    information in circumstances where this cannot be reasonably resisted.</p>\r\n\r\n  <H5>Legal obligation</H5>\r\n  <p>We will process your personal information to fulfil any legal obligations placed upon us, through a lawfully valid\r\n    legal order by a court of competent jurisdiction.</p>\r\n\r\n  <H5>Jurisdiction</H5>\r\n  <p>Our website and Services provided is under U.S. jurisdiction and is subject to U.S. subpoenas, wiretap orders,\r\n    preservation orders (which would negate the above retention rules), and similar. Furthermore, our service\r\n    providers could also be subject to similar orders without our knowledge.</p>\r\n\r\n  <H5>Security</H5>\r\n  <p>We take appropriate security measures to ensure that we keep your limited information secure, accurate and up\r\n    to date. However the transmission of information over the Internet is never completely secure, so while we do\r\n    our best to protect personal information, we cannot guarantee the security of information transmitted to our\r\n    website.</p>\r\n\r\n  <H5>Hosting and processing arrangements</H5>\r\n  <p>Our website is hosted by third party service providers and therefore any personal details you submit through\r\n    them may be processed by that third party service provider. Please see the above for the third party service\r\n    providers.</p>\r\n\r\n  <H5>Retention Period For Data</H5>\r\n  <p>All User data is localized and retained by the User’s computer or device. We do not retain any User\r\n    information.</p>\r\n\r\n  <H5>Complaints</H5>\r\n  <p>If you wish to lodge a complaint about our handling of your personal data please get in touch with us on the\r\n    details above with the details of your complaint; we aim to respond to all complaints within 14 working days.\r\n    All legal requests will be reviewed by our legal department and appropriate action will be taken. If you have a\r\n    legal request, please contact legal@kukai.app</p>\r\n\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-terms-of-use',\r\n  templateUrl: './terms-of-use.component.html',\r\n  styleUrls: ['./terms-of-use.component.scss']\r\n})\r\nexport class TermsOfUseComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"legal\">\r\n  <H1>TERMS OF USE</H1>\r\n  <p><i>Last Updated: June 30, 2020</i></p>\r\n  <p>IMPORTANT NOTICE: THIS AGREEMENT IS SUBJECT TO BINDING ARBITRATION AND A WAIVER OF CLASS ACTION RIGHTS AS DETAILED\r\n    IN SECTION 13. PLEASE READ THE AGREEMENT CAREFULLY.</p>\r\n\r\n  <H4>1. Acceptance of terms</H4>\r\n  <p>Kukai Wallet (hereinafter “Kukai,” “we,” “us,” or “our”) provides a platform for managing Tezos accounts, and\r\n    allowing ordinary websites and applications to interact with the blockchain network, while keeping the user in\r\n    control over what transactions they approve, through our website located at https://kukai.app/ (the “Site”), which\r\n    includes text, images, audio, code and other materials (collectively, the “Content”) and all of the features, and\r\n    services provided. The Site and any other features, tools, materials, or other services offered from time to time by\r\n    Kukai Wallet are referred to here as the “Services.” Please read these Terms of Use (the “Terms”) carefully before\r\n    using the Services. By using or otherwise accessing the Services, or clicking to accept or agree to these Terms\r\n    where that option is made available, you (1) accept and agree to these Terms, (2) consent to the collection, use,\r\n    disclosure and other handling of information as described in our Privacy Policy and (3) agree to any additional\r\n    terms, rules and conditions of participation issued by Kukai Wallet from time to time. If you do not agree to any of\r\n    the Terms, then you may not access or use the Content or Services.</p>\r\n\r\n  <H4>2. Modification of Terms of Use</H4>\r\n  <p>Except for Section 13, providing for arbitration and waiver of class action rights, Kukai Wallet reserves the\r\n    right, at its sole discretion, to modify or replace the Terms at any time without notice. We will always try to\r\n    provide advance notice, however, we reserve the right to modify or replace the Terms at our discretion. The most\r\n    current version of these Terms will be posted on our Site. You shall be responsible for reviewing and becoming\r\n    familiar with any such modifications. Use of the Services by you after any modification to the Terms constitutes\r\n    your acceptance of the Terms as modified.</p>\r\n\r\n  <H4>3. Eligibility</H4>\r\n  <p>You hereby represent and warrant that you are fully able and competent to enter into the terms, conditions,\r\n    obligations, affirmations, representations and warranties set forth in these Terms and to abide by and comply with\r\n    these Terms.</p>\r\n\r\n  <p>Kukai Wallet is a global platform and by accessing the Content or Services, you are representing and warranting\r\n    that you are of the legal age of majority in your jurisdiction as is required to access such Services and Content\r\n    and enter into arrangements as provided by the Services. You further represent that you are otherwise legally\r\n    permitted to use the service in your jurisdiction including owning cryptographic tokens of value, and interacting\r\n    with the Services or Content in any way. You further represent you are responsible for ensuring compliance with the\r\n    laws of your jurisdiction and acknowledge that Kukai Wallet is not liable for your compliance with such laws.</p>\r\n\r\n  <p>In addition, you represent to us that you and your financial institutions, or any party that owns or controls you\r\n    or your financial institutions, are (1) not subject to sanctions or otherwise designated on any list of prohibited\r\n    or restricted parties, including but not limited to the lists maintained by the United Nations Security Council, the\r\n    U.S. Government (e.g., the Specially Designated Nationals List and Foreign Sanctions Evaders List of the U.S.\r\n    Department of Treasury and the Entity List of the U.S. Department of Commerce), the European Union or its Member\r\n    States, or other applicable government authority and (2) not located in any country to which the United States has\r\n    embargoed goods or has otherwise applied any sanctions.</p>\r\n\r\n  <H4>4. Account Password and Security</H4>\r\n  <p>When setting up an account within Kukai Wallet, you will be responsible for keeping your own account secrets, which\r\n    may be a word seed phrase, an account file, or other locally stored secret information. Kukai Wallet encrypts this\r\n    information locally with a password you provide, that we never send to our servers. You agree to (a) never use the\r\n    same password for Kukai Wallet that you have ever used outside of this service, (b) keep your secret information and\r\n    password confidential and do not share them with anyone else and (c) immediately notify Kukai Wallet of any\r\n    unauthorized use of your account or breach of security. Kukai Wallet cannot and will not be liable for any loss or\r\n    damage arising from your failure to comply with this section.\r\n\r\n  <H4>5. DISCLAIMERS- RISKS</H4>\r\n\r\n  <H5>5.1. Warranty Disclaimer</H5>\r\n  <p>You expressly understand and agree that your use of the Services is at your sole risk. The Services (including the\r\n    Site and the Content) are provided on an “as is” and “as available” basis, without warranties of any kind, either\r\n    express or implied, including, without limitation, implied warranties of merchantability, fitness for a particular\r\n    purpose or non-infringement. You acknowledge that Kukai Wallet has no control over, and no duty to take any action\r\n    regarding: which users gain access to or use the Services; what effects the Content may have on you; how you may\r\n    interpret or use the Content; or what actions you may take as a result of having been exposed to the Content. You\r\n    release Kukai Wallet from any and all liability for you having acquired or not acquired Content through the\r\n    Services. Kukai Wallet makes no representations concerning any Content contained in or accessed through the\r\n    Services, and Kukai Wallet will not be responsible or liable for the accuracy, copyright compliance, legality or\r\n    decency of material contained in or accessed through the Services.</p>\r\n\r\n  <p>We do not represent or warrant that access to the Services will be continuous, uninterrupted, timely or secure. You\r\n    acknowledge and accept that the Services (a) may contain bugs, errors and defects, (b) may function improperly or be\r\n    subject to periods of downtime and unavailability, (c) may result in total or partial loss or corruption of data and\r\n    (d) may be modified at any time, including through the release of subsequent versions, all with or without notice to\r\n    you.</p>\r\n\r\n  <p>You acknowledge that Kukai Wallet is not responsible for transferring, safeguarding, or maintaining your private\r\n    keys or any digital currency associated therewith. If you lose, mishandle or have stolen associated digital currency\r\n    private keys, you acknowledge that you may not be able to recover associated digital currency, and that Kukai Wallet\r\n    is not responsible for such loss. You acknowledge that Kukai Wallet is not responsible for any loss, damage or\r\n    liability arising from your failure to comply with the terms hereunder.</p>\r\n\r\n  <H5>5.2 Sophistication and Risk of Cryptographic Systems</H5>\r\n  <p>By utilizing the Services or interacting with the Content or platform in any way, you represent that you understand\r\n    the inherent risks associated with cryptographic systems; and warrant that you have an understanding of the usage\r\n    and intricacies of the native cryptographic token Tezos (xtz), smart contract based tokens, and blockchain-based\r\n    software systems.</p>\r\n\r\n  <H5>5.3 Risk of Regulatory Actions in One or More Jurisdictions</H5>\r\n  <p>Kukai Wallet and any supported cryptographic token and blockchain could be impacted by one or more regulatory\r\n    inquiries or regulatory action, which could impede or limit the ability of Kukai Wallet to continue to develop, or\r\n    which could impede or limit your ability to access or use the Services or the underlying blockchain network.</p>\r\n\r\n  <H5>5.4 Risk of Weaknesses or Exploits in the Field of Cryptography</H5>\r\n  <p>You acknowledge and understand that Cryptography is a progressing field. Advances in code cracking or technical\r\n    advances such as the development of quantum computers may present risks to cryptocurrencies and Services of Content,\r\n    which could result in the theft or loss of your cryptographic tokens or property. To the extent possible, Kukai\r\n    Wallet intends to update the protocol underlying Services to account for any advances in cryptography and to\r\n    incorporate additional security measures, but does not guarantee or otherwise represent full security of the system.\r\n    By using the Services or accessing Content, you acknowledge these inherent risks.</p>\r\n\r\n  <H5>5.5 Volatility of Cryptocurrencies</H5>\r\n  <p>You understand that Tezos and other blockchain technologies and associated cryptographic tokens are highly volatile\r\n    due to many factors including but not limited to adoption, speculation, technology and security risks. You also\r\n    acknowledge that the cost of transacting on such technologies is variable and may increase at any time causing\r\n    impact to any activities taking place on the blockchain network. You acknowledge these risks and agree that Kukai\r\n    Wallet cannot be held liable for such fluctuations or increased costs.</p>\r\n\r\n  <H5>5.6 Application Security</H5>\r\n  <p>You further acknowledge that blockchain applications are code subject to flaws and acknowledge that you are solely\r\n    responsible for evaluating any code provided by the Services or Content and the trustworthiness of any third-party\r\n    websites, products, smart-contracts, or Content you access or use through the Services. You further expressly\r\n    acknowledge and represent that blockchain applications can be written maliciously or negligently, that Kukai Wallet\r\n    cannot be held liable for your interaction with such applications and that such applications may cause the loss of\r\n    property or even identity. This warning and others later provided by Kukai Wallet in no way evidence or represent an\r\n    on-going duty to alert you to all of the potential risks of utilizing the Services or Content. The code to Kukai\r\n    Wallet can be found at: https://github.com/kukai-wallet/kukai.</p>\r\n\r\n  <H4>6. Indemnity</H4>\r\n  <p>You agree to release and to indemnify, defend and hold harmless Kukai Wallet and its principles, subsidiaries,\r\n    affiliates and agencies, as well as the officers, directors, employees, shareholders and representatives of any of\r\n    the foregoing entities, from and against any and all losses, liabilities, expenses, damages, costs (including\r\n    attorneys’ fees and court costs) claims or actions of any kind whatsoever arising or resulting from your use of the\r\n    Services, your violation of these Terms, and any of your acts or omissions that implicate publicity rights,\r\n    defamation or invasion of privacy, and privacy laws. Kukai Wallet reserves the right, at its own expense, to assume\r\n    exclusive defense and control of any matter otherwise subject to indemnification by you and, in such case, you agree\r\n    to cooperate with Kukai Wallet in the defense of such matter.</p>\r\n\r\n  <H4>7. Limitation on Liability</H4>\r\n  <p>YOU ACKNOWLEDGE AND AGREE THAT YOU ASSUME FULL RESPONSIBILITY FOR YOUR USE OF THE SITE AND THE SERVICES. YOU\r\n    ACKNOWLEDGE AND AGREE THAT ANY INFORMATION YOU SEND OR RECEIVE DURING YOUR USE OF THE SITE AND THE SERVICES MAY NOT\r\n    BE SECURE AND MAY BE INTERCEPTED OR LATER ACQUIRED BY UNAUTHORIZED PARTIES. YOU ACKNOWLEDGE AND AGREE THAT YOUR USE\r\n    OF THE SITE AND THE SERVICES IS AT YOUR OWN RISK. RECOGNIZING SUCH, YOU UNDERSTAND AND AGREE THAT, TO THE FULLEST\r\n    EXTENT PERMITTED BY APPLICABLE LAW, NEITHER KUKAI WALLET NOR ITS SUPPLIERS OR LICENSORS WILL BE LIABLE TO YOU FOR\r\n    ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, PUNITIVE, EXEMPLARY OR OTHER DAMAGES OF ANY KIND,\r\n    INCLUDING WITHOUT LIMITATION DAMAGES FOR LOSS OF PROFITS, GOODWILL, USE, DATA OR OTHER TANGIBLE OR INTANGIBLE LOSSES\r\n    OR ANY OTHER DAMAGES BASED ON CONTRACT, TORT, STRICT LIABILITY OR ANY OTHER THEORY (EVEN IF KUKAI WALLET HAD BEEN\r\n    ADVISED OF THE POSSIBILITY OF SUCH DAMAGES), RESULTING FROM THE SITE OR SERVICES; THE USE OR THE INABILITY TO USE\r\n    THE SITE OR THE SERVICES; UNAUTHORIZED ACCESS TO OR ALTERATION OF YOUR TRANSMISSIONS OR DATA; STATEMENTS OR CONDUCT\r\n    OF ANY THIRD PARTY ON THE SITE OR THE SERVICES; ANY ACTIONS WE TAKE OR FAIL TO TAKE AS A RESULT OF COMMUNICATIONS\r\n    YOU SEND TO US; HUMAN ERRORS; TECHNICAL MALFUNCTIONS; FAILURES, INCLUDING PUBLIC UTILITY OR TELEPHONE OUTAGES;\r\n    OMISSIONS, INTERRUPTIONS, LATENCY, DELETIONS OR DEFECTS OF ANY DEVICE OR NETWORK, PROVIDERS, OR SOFTWARE (INCLUDING,\r\n    BUT NOT LIMITED TO, THOSE THAT DO NOT PERMIT PARTICIPATION IN THE SERVICES); ANY INJURY OR DAMAGE TO COMPUTER\r\n    EQUIPMENT; INABILITY TO FULLY ACCESS THE SITE OR THE SERVICES OR ANY OTHER WEBSITE; THEFT, TAMPERING, DESTRUCTION,\r\n    OR UNAUTHORIZED ACCESS TO, IMAGES OR OTHER CONTENT OF ANY KIND; DATA THAT IS PROCESSED LATE OR INCORRECTLY OR IS\r\n    INCOMPLETE OR LOST; TYPOGRAPHICAL, PRINTING OR OTHER ERRORS, OR ANY COMBINATION THEREOF; OR ANY OTHER MATTER\r\n    RELATING TO THE SITE OR ANY OTHER ASPECT OF THE SERVICES.</p>\r\n\r\n  <p>SOME JURISDICTIONS DO NOT ALLOW THE EXCLUSION OF CERTAIN WARRANTIES OR THE LIMITATION OR EXCLUSION OF LIABILITY FOR\r\n    INCIDENTAL OR CONSEQUENTIAL DAMAGES. ACCORDINGLY, SOME OF THE ABOVE LIMITATIONS MAY NOT APPLY TO YOU.</p>\r\n\r\n  <H4>8. Intellectual Property</H4>\r\n  <H5>8.1 Our Proprietary Rights</H5>\r\n  <p>All title, ownership and intellectual property rights in and to the Services are owned by Kukai Wallet or its\r\n    licensors. You acknowledge and agree that the Services contains proprietary and confidential information that is\r\n    protected by applicable intellectual property and other laws. Except as expressly authorized by Kukai Wallet, you\r\n    agree not to copy, modify, rent, lease, loan, sell, distribute, perform, display or create derivative works based on\r\n    the Site, or the Services, in whole or in part.</p>\r\n\r\n  <H5>8.2 Limited License</H5>\r\n  <p>We grant you limited, non-exclusive, revocable permission to make use of the Site, and the Services (collectively\r\n    referred to as, “Access”). This Access shall remain in effect until and unless terminated by you or us. You promise\r\n    and agree that you will not redistribute or transfer the Services.</p>\r\n\r\n  <p>The Kukai Wallet software application, including without limitation the Site, and the Services, are not sold or\r\n    transferred to you, and Kukai Wallet and its licensors retain ownership of all copies of the software applications\r\n    even after installation on your personal computers, mobile handsets, tablets, wearable devices, speakers and/or\r\n    other devices (“Devices”).</p>\r\n\r\n  <p>All Kukai Wallet trademarks, service marks, trade names, logos, domain names, and any other features of the Kukai\r\n    Wallet brand (“Kukai Wallet Brand Features”) are the sole property of Kukai Wallet or its licensors. The Terms do\r\n    not grant you any rights to use any Kukai Wallet Brand Features whether for commercial or non-commercial use.</p>\r\n\r\n  <p>You agree to abide by our user guidelines and not to use the Services or any part thereof in any manner not\r\n    expressly permitted by the Terms. Except for the rights expressly granted to you in the Terms, Kukai Wallet grants\r\n    no right, title, or interest to you in the Site or the Services.</p>\r\n\r\n  <p>Third party software (for example, open source software libraries) included in the Services are made available to\r\n    you under the relevant third party software library’s license terms.</p>\r\n\r\n  <p>Notwithstanding anything herein to the contrary, nothing in the Terms entitles you to copy, modify, fork, merge,\r\n    combine with another program or create a derivative work of the Services, including without limitation the Site.</p>\r\n\r\n  <H4>9. Links</H4>\r\n  <p>The Services provide, or third parties may provide, links to other World Wide Web or accessible sites, applications\r\n    or resources. Because Kukai Wallet has no control over such sites, applications and resources, you acknowledge and\r\n    agree that Kukai Wallet is not responsible for the availability of such external sites, applications or resources,\r\n    and does not endorse and is not responsible or liable for any content, advertising, products or other materials on\r\n    or available from such sites or resources. You further acknowledge and agree that Kukai Wallet shall not be\r\n    responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in\r\n    connection with use of or reliance on any such content, goods or services available on or through any such site or\r\n    resource.</p>\r\n\r\n  <H4>10. Termination and Suspension</H4>\r\n  <p>Kukai Wallet may terminate or suspend all or part of the Services and your Kukai Wallet access immediately, without\r\n    prior notice or liability, if you breach any of the terms or conditions of the Terms. Upon termination of your\r\n    access, your right to use the Services will immediately cease.</p>\r\n\r\n  <p>The following provisions of the Terms survive any termination of these Terms: INDEMNITY; WARRANTY DISCLAIMERS;\r\n    LIMITATION ON LIABILITY; OUR PROPRIETARY RIGHTS; LINKS; TERMINATION; NO THIRD PARTY BENEFICIARIES; BINDING\r\n    ARBITRATION AND CLASS ACTION WAIVER; GENERAL INFORMATION.</p>\r\n\r\n  <H4>11. No Third Party Beneficiaries</H4>\r\n  <p>You agree that, except as otherwise expressly provided in these Terms, there shall be no third party beneficiaries\r\n    to the Terms.</p>\r\n\r\n  <H4>12. Notice and Procedure For Making Claims of Copyright Infringement</H4>\r\n  <p>If you believe that your copyright or the copyright of a person on whose behalf you are authorized to act has been\r\n    infringed, please provide Kukai Wallet’s Copyright Agent a written Notice containing the following information:</p>\r\n\r\n  <p>- an electronic or physical signature of the person authorized to act on behalf of the owner of the copyright or\r\n    other intellectual property interest;\r\n    <BR>- a description of the copyrighted work or other intellectual property that you claim has been infringed;\r\n    <BR>- a description of where the material that you claim is infringing is located on the Services;\r\n    your address, telephone number, and email address;\r\n    <BR>- a statement by you that you have a good faith belief that the disputed use is not authorized by the copyright\r\n    owner, its agent, or the law;\r\n    <BR>- a statement by you, made under penalty of perjury, that the above information in your Notice is accurate and\r\n    that you are the copyright or intellectual property owner or authorized to act on the copyright or intellectual\r\n    property owner’s behalf.</p>\r\n\r\n  <p>Kukai Wallet’s Copyright Agent can be reached at:</p>\r\n\r\n  <p>Email: legal@kukai.app</p>\r\n\r\n  <H4>13. Binding Arbitration and Class Action Waiver</H4>\r\n\r\n  <p>PLEASE READ THIS SECTION CAREFULLY – IT MAY SIGNIFICANTLY AFFECT YOUR LEGAL RIGHTS, INCLUDING YOUR RIGHT TO FILE A\r\n    LAWSUIT IN COURT</p>\r\n\r\n  <H5>13.1 Initial Dispute Resolution</H5>\r\n\r\n  <p>The parties shall use their best efforts to engage directly to settle any dispute, claim, question, or disagreement\r\n    and engage in good faith negotiations which shall be a condition to either party initiating a lawsuit or\r\n    arbitration.</p>\r\n\r\n  <H5>13.2 Binding Arbitration</H5>\r\n\r\n  <p>If the parties do not reach an agreed upon solution within a period of 30 days from the time informal dispute\r\n    resolution under the Initial Dispute Resolution provision begins, then either party may initiate arbitration as the\r\n    sole means to resolve all claims, subject to the terms set forth below. Specifically, all claims arising out of or\r\n    relating to these Terms (including their formation, performance and breach), the parties’ relationship with each\r\n    other and/or your use of the Services shall be finally settled by binding arbitration administered by the American\r\n    Arbitration Association in accordance with the provisions of its Commercial Arbitration Rules and the supplementary\r\n    procedures for consumer related disputes of the American Arbitration Association (the “AAA”), excluding any rules or\r\n    procedures governing or permitting class actions.</p>\r\n\r\n  <p>The arbitrator, and not any federal, state or local court or agency, shall have exclusive authority to resolve all\r\n    disputes arising out of or relating to the interpretation, applicability, enforceability or formation of these\r\n    Terms, including, but not limited to any claim that all or any part of these Terms are void or voidable, or whether\r\n    a claim is subject to arbitration. The arbitrator shall be empowered to grant whatever relief would be available in\r\n    a court under law or in equity. The arbitrator’s award shall be written, and binding on the parties and may be\r\n    entered as a judgment in any court of competent jurisdiction.</p>\r\n\r\n  <p>The parties understand that, absent this mandatory provision, they would have the right to sue in court and have a\r\n    jury trial. They further understand that, in some instances, the costs of arbitration could exceed the costs of\r\n    litigation and the right to discovery may be more limited in arbitration than in court.</p>\r\n\r\n  <H5>13.3 Location</H5>\r\n\r\n  <p>Binding arbitration shall take place in Louisiana. You agree to submit to the personal jurisdiction of any federal\r\n    or state court in Orleans Parish, Louisiana, in order to compel arbitration, to stay proceedings pending\r\n    arbitration, or to confirm, modify, vacate or enter judgment on the award entered by the arbitrator.</p>\r\n\r\n  <H5>13.4 Class Action Waiver</H5>\r\n\r\n  <p>The parties further agree that any arbitration shall be conducted in their individual capacities only and not as a\r\n    class action or other representative action, and the parties expressly waive their right to file a class action or\r\n    seek relief on a class basis. YOU AND KUKAI WALLET AGREE THAT EACH MAY BRING CLAIMS AGAINST THE OTHER ONLY IN YOUR\r\n    OR ITS INDIVIDUAL CAPACITY, AND NOT AS A PLAINTIFF OR CLASS MEMBER IN ANY PURPORTED CLASS OR REPRESENTATIVE\r\n    PROCEEDING. If any court or arbitrator determines that the class action waiver set forth in this paragraph is void\r\n    or unenforceable for any reason or that an arbitration can proceed on a class basis, then the arbitration provision\r\n    set forth above shall be deemed null and void in its entirety and the parties shall be deemed to have not agreed to\r\n    arbitrate disputes.</p>\r\n\r\n  <H5>13.5 Exception - Litigation of Intellectual Property and Small Claims Court Claims</H5>\r\n\r\n  <p>Notwithstanding the parties’ decision to resolve all disputes through arbitration, either party may bring an action\r\n    in state or federal court to protect its intellectual property rights (“intellectual property rights” means patents,\r\n    copyrights, moral rights, trademarks, and trade secrets, but not privacy or publicity rights). Either party may also\r\n    seek relief in a small claims court for disputes or claims within the scope of that court’s jurisdiction.</p>\r\n\r\n  <H5>13.6 Choice of Law</H5>\r\n\r\n  <p>The Terms and the relationship between you and Kukai Wallet shall be governed by the laws of the State of Louisiana\r\n    without regard to conflict of law provisions.</p>\r\n\r\n  <H4>14. GENERAL INFORMATION</H4>\r\n\r\n  <H5>14.1 Entire Agreement</H5>\r\n\r\n  <p>These Terms (and any additional terms, rules and conditions of participation that Kukai Wallet may post on the\r\n    Services) constitute the entire agreement between you and Kukai Wallet with respect to the Services and supersedes\r\n    any prior agreements, oral or written, between you and Kukai Wallet. In the event of a conflict between these Terms\r\n    and the additional terms, rules and conditions of participation, the latter will prevail over the Terms to the\r\n    extent of the conflict.</p>\r\n\r\n  <H5>14.2 Waiver and Severability of Terms</H5>\r\n\r\n  <p>The failure of Kukai Wallet to exercise or enforce any right or provision of the Terms shall not constitute a\r\n    waiver of such right or provision. If any provision of the Terms is found by an arbitrator or court of competent\r\n    jurisdiction to be invalid, the parties nevertheless agree that the arbitrator or court should endeavor to give\r\n    effect to the parties’ intentions as reflected in the provision, and the other provisions of the Terms remain in\r\n    full force and effect.</p>\r\n\r\n  <H5>14.3 Statute of Limitations</H5>\r\n\r\n  <p>You agree that regardless of any statute or law to the contrary, any claim or cause of action arising out of or\r\n    related to the use of the Services or the Terms must be filed within one (1) year after such claim or cause of\r\n    action arose or be forever barred.</p>\r\n\r\n  <H5>14.4 Section Titles</H5>\r\n\r\n  <p>The section titles in the Terms are for convenience only and have no legal or contractual effect.</p>\r\n\r\n  <H5>14.5 Communications</H5>\r\n\r\n  <p>Users with questions, complaints or claims with respect to the Services may contact us using the relevant contact\r\n    information set forth above or email us at: contact@kukai.app</p>\r\n</div>","<div class=\"kukai-card\">\r\n    <H1>Connect with your Ledger Nano S</H1>\r\n    <div class=\"grey-card\">\r\n      <p class=\"description bold\">Keep the private keys safely on your Ledger device and use Kukai to access the Tezos\r\n          blockchain.</p>\r\n      <p class=\"description\">You need to open the Tezos Wallet app on your Ledger device and set the derivation path.</p>\r\n      <input type=\"text\" class=\"text\" [disabled]=\"!isHDDerivationPathCustom\" [(ngModel)]=\"path\"\r\n          value=\"'44\\'/1729\\'/0\\'/0\\''\">\r\n      <small>Use custom HD derivation path</small>\r\n      <div class=\"switch-container\">\r\n          <label class=\"switch\">\r\n              <input type=\"checkbox\" [(ngModel)]=\"isHDDerivationPathCustom\" (click)=\"setDefaultPath()\">\r\n              <span class=\"slider round\"></span>\r\n          </label><span class=\"switch-desc\">\r\n              <ng-container *ngIf=\"!isHDDerivationPathCustom\">Off</ng-container>\r\n              <ng-container *ngIf=\"isHDDerivationPathCustom\">On</ng-container>\r\n          </span>\r\n      </div>\r\n      <div class=\"buttons\">\r\n          <a routerLink=\"/\"><button class=\"button back\">Back</button></a>\r\n          <button class=\"button next\" (click)=\"getPk()\">Connect</button>\r\n      </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Constants } from '../../constants';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { LedgerService } from '../../services/ledger/ledger.service';\r\nimport { ImportService } from '../../services/import/import.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { utils } from '@tezos-core-tools/crypto-utils';\r\n\r\n@Component({\r\n  selector: 'app-connect-ledger',\r\n  templateUrl: './connect-ledger.component.html',\r\n  styleUrls: ['./connect-ledger.component.scss']\r\n})\r\nexport class ConnectLedgerComponent implements OnInit {\r\n  activePanel = 0;\r\n  CONSTANTS = new Constants();\r\n  defaultPath = '44\\'/1729\\'/0\\'/0\\'';\r\n  defaultText = 'Default derivation path';\r\n  path: string;\r\n  pendingLedgerConfirmation = false;\r\n  isHDDerivationPathCustom = false;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private ledgerService: LedgerService,\r\n    private importService: ImportService,\r\n    private messageService: MessageService,\r\n    private inputValidationService: InputValidationService,\r\n    private walletService: WalletService\r\n    ) { }\r\n\r\n  ngOnInit() {\r\n    this.path = this.defaultText;\r\n  }\r\n  async getPk() {\r\n    const path: string = this.path.replace(this.defaultText, this.defaultPath);\r\n    if (this.inputValidationService.derivationPath(path)) {\r\n      this.pendingLedgerConfirmation = true;\r\n      try {\r\n        this.messageService.startSpinner('Waiting for Ledger confirmation...');\r\n        const pk = await this.ledgerService.getPublicAddress(path);\r\n        console.log('getPK => ' + pk);\r\n        await this.importFromPk(pk, path);\r\n      } catch (e) {\r\n        throw(e);\r\n      } finally {\r\n        this.pendingLedgerConfirmation = false;\r\n        this.messageService.stopSpinner();\r\n      }\r\n    } else {\r\n      this.messageService.addWarning('Invalid derivation path');\r\n    }\r\n  }\r\n  async importFromPk(pk: string, path: string) {\r\n    if (utils.validPublicKey(pk)) {\r\n      if (await this.importService.importWalletFromPk(pk, path)) {\r\n        if (this.walletService.wallet.implicitAccounts.length === 1 && this.walletService.wallet.implicitAccounts[0].originatedAccounts.length === 0) {\r\n          this.router.navigate([`/account/${this.walletService.wallet.implicitAccounts[0].address}`]);\r\n        } else {\r\n          this.router.navigate(['/accounts']);\r\n        }\r\n      } else {\r\n        this.messageService.addError('Failed to import Ledger wallet');\r\n      }\r\n    } else {\r\n      this.messageService.addError('Not a valid public key');\r\n    }\r\n  }\r\n  setDefaultPath() {\r\n    if (this.isHDDerivationPathCustom) {\r\n      this.path = this.defaultText;\r\n    } else {\r\n      this.path = this.defaultPath;\r\n    }\r\n  }\r\n}\r\n","<div class=\"outside-container\">\r\n  <span *ngIf=\"!activeAccount.delegate\">No delegate set <span (click)=\"openModal()\">(Choose a baker)</span></span>\r\n  <span *ngIf=\"activeAccount.delegate\">{{ activeAccount.delegate }} <span (click)=\"openModal()\">(Change&nbsp;baker)</span></span>\r\n</div>\r\n<!-- The Modal -->\r\n<div *ngIf=\"modalOpen\" id=\"myModal\" class=\"kukai-modal\">\r\n  <!-- Modal content -->\r\n  <div class=\"km-content\">\r\n    <div class=\"x\" (click)=\"closeModal()\"><img src=\"../../../assets/img/x.svg\"></div>\r\n    <div class=\"km-header\">\r\n      <H1>Delegate (Choose a baker)</H1>\r\n    </div>\r\n    <!-- Prepare delegation -->\r\n    <div class=\"km-body\" *ngIf=\"activeView === 0\">\r\n      <div class=\"group\">\r\n        <label>Current Account Address</label>\r\n        <p>{{ activeAccount.address }}</p>\r\n      </div>\r\n      <div class=\"group\">\r\n        <label>Delegate to Baker Address</label>\r\n        <input #toPkhInput type=\"text\" class=\"text\" [(ngModel)]=\"toPkh\">\r\n      </div>\r\n      <div class=\"group\">\r\n        <label>Fee (tez)</label>\r\n        <input type=\"text\" class=\"text\" [(ngModel)]=\"fee\" placeholder={{this.recommendedFee.toString()}}>\r\n      </div>\r\n      <span *ngIf=\"formInvalid\" class=\"danger no-margin\">\r\n        {{ formInvalid }}\r\n      </span>\r\n      <button class=\"blue\" (click)=\"openModal2()\">Preview</button>\r\n    </div>\r\n    <!-- Confirm transaction -->\r\n    <div class=\"km-body\" *ngIf=\"activeView === 1\">\r\n      <p class=\"preview\">\r\n        Current Account Address — {{ activeAccount.address }}\r\n      </p>\r\n      <p *ngIf=\"getDelegate()\" class=\"preview\">\r\n        Delegate to Baker Address — {{ getDelegate() | delegatorName }}\r\n      </p>\r\n      <p *ngIf=\"!getDelegate()\" class=\"preview\">\r\n        Withdraw delegation\r\n      </p>\r\n      <p class=\"preview\">\r\n        Fee — {{ getFee() | number:'1.0-6' }} tez\r\n      </p>\r\n      <div class=\"row-group\" style=\"margin: 1.25rem 0 1.5rem;\">\r\n        <input *ngIf=\"!walletService.isLedgerWallet() && !walletService.isTorusWallet()\" [(ngModel)]=\"password\" placeholder=\"Password\" autocomplete=\"current-password\" class=\"text password\" type=\"password\" (input)=\"this.pwdValid = ''\" (change)=\"this.pwdValid = ''\">\r\n        <button *ngIf=\"walletService.isLedgerWallet() && ledgerError; else elseBlock\" class=\"retry\" (click)=\"ledgerSign()\">Sign with Ledger</button>\r\n        <ng-template #elseBlock>\r\n          <button class=\"blue confirm\" (click)=\"inject()\" [disabled]=\"walletService.isLedgerWallet() && (!sendResponse || !sendResponse.payload || !sendResponse.payload.signedOperation)\">\r\n            {{ walletService.isLedgerWallet() ? 'Broadcast' : 'Confirm'}}</button>\r\n        </ng-template>\r\n      </div>\r\n      <span *ngIf=\"this.pwdValid\" class=\"danger margin\">{{ this.pwdValid }}</span>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, TemplateRef, OnInit, Input, ViewChild, ElementRef } from '@angular/core';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\n\r\nimport { KeyPair } from '../../interfaces';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport { OperationService } from '../../services/operation/operation.service';\r\nimport { ExportService } from '../../services/export/export.service';\r\nimport { DelegatorNamePipe } from '../../pipes/delegator-name.pipe';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { LedgerService } from '../../services/ledger/ledger.service';\r\nimport { Constants } from '../../constants';\r\nimport { LedgerWallet, Account, ImplicitAccount, OriginatedAccount, TorusWallet } from '../../services/wallet/wallet';\r\nimport { MessageService } from '../../services/message/message.service';\r\n\r\n@Component({\r\n  selector: 'app-delegate',\r\n  templateUrl: './delegate.component.html',\r\n  styleUrls: ['./delegate.component.scss']\r\n})\r\nexport class DelegateComponent implements OnInit {\r\n  modalOpen = false;\r\n  activeView = 0;\r\n  recommendedFee = 0.0013;\r\n  revealFee = 0;\r\n  pkhFee = 0.0013;\r\n  ktFee = 0.003;\r\n  @ViewChild('toPkhInput') toPkhView: ElementRef;\r\n  CONSTANTS = new Constants();\r\n  @Input() activeAccount: Account;\r\n  implicitAccounts;\r\n  toPkh: string;\r\n  storedDelegate: string;\r\n  fee: string;\r\n  storedFee: string;\r\n  password: string;\r\n  pwdValid: string;\r\n  formInvalid = '';\r\n  sendResponse: any;\r\n  ledgerError = '';\r\n  modalRef1: BsModalRef;\r\n  modalRef2: BsModalRef;\r\n  modalRef3: BsModalRef;\r\n\r\n  constructor(\r\n    private modalService: BsModalService,\r\n    private walletService: WalletService,\r\n    private operationService: OperationService,\r\n    private coordinatorService: CoordinatorService,\r\n    private exportService: ExportService,\r\n    private inputValidationService: InputValidationService,\r\n    private ledgerService: LedgerService,\r\n    private messageService: MessageService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.walletService.wallet) {\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  init() {\r\n    this.implicitAccounts = this.walletService.wallet.implicitAccounts;\r\n  }\r\n  openModal() {\r\n    if (this.walletService.wallet) {\r\n      // hide body scrollbar\r\n      const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n      document.body.style.marginRight = scrollBarWidth.toString();\r\n      document.body.style.overflow = 'hidden';\r\n      this.clearForm();\r\n      this.checkReveal();\r\n      this.modalOpen = true;\r\n      if (window.innerWidth > 1300) {\r\n        setTimeout(() => {\r\n          const inputElem = <HTMLInputElement>this.toPkhView.nativeElement;\r\n          inputElem.focus();\r\n        }, 100);\r\n      }\r\n    }\r\n  }\r\n  closeModal() {\r\n    // restore body scrollbar\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflow = '';\r\n    this.modalOpen = false;\r\n    this.activeView = 0;\r\n    this.clearForm();\r\n    this.ledgerError = '';\r\n    this.messageService.stopSpinner();\r\n  }\r\n  async openModal2() {\r\n    this.formInvalid = this.invalidInput();\r\n    if (!this.formInvalid) {\r\n      if (!this.fee) { this.fee = this.recommendedFee.toString(); }\r\n      this.storedFee = this.fee;\r\n      this.storedDelegate = this.toPkh;\r\n      this.activeView = 1;\r\n      if (this.walletService.isLedgerWallet()) {\r\n        const keys = await this.walletService.getKeys('');\r\n        this.sendDelegation(keys);\r\n      }\r\n    }\r\n  }\r\n  async inject() {\r\n    const pwd = this.password;\r\n    this.password = '';\r\n    this.messageService.startSpinner('Signing operation...');\r\n    let keys;\r\n    try {\r\n      keys = await this.walletService.getKeys(pwd, this.activeAccount.pkh);\r\n    } catch {\r\n      this.messageService.stopSpinner();\r\n    }\r\n    if (this.walletService.isLedgerWallet()) {\r\n      this.broadCastLedgerTransaction();\r\n      this.sendResponse = null;\r\n    } else {\r\n      if (keys) {\r\n        this.pwdValid = '';\r\n        this.messageService.startSpinner('Sending operation...');\r\n        this.sendDelegation(keys);\r\n        this.closeModal();\r\n      } else {\r\n        this.messageService.stopSpinner();\r\n        if (this.walletService.wallet instanceof TorusWallet) {\r\n          this.pwdValid = `Authorization failed`;\r\n        } else {\r\n          this.pwdValid = 'Wrong password!';\r\n        }\r\n      }\r\n    }\r\n  }\r\n  open1(template1: TemplateRef<any>) {\r\n    if (this.walletService.wallet) {\r\n      this.clearForm();\r\n      this.checkReveal();\r\n      this.modalRef1 = this.modalService.show(template1, { class: 'first' });\r\n    }\r\n  }\r\n  async open2(template: TemplateRef<any>) {\r\n    this.formInvalid = this.invalidInput();\r\n    if (!this.formInvalid) {\r\n      if (!this.fee) { this.fee = this.recommendedFee.toString(); }\r\n      this.storedFee = this.fee;\r\n      this.storedDelegate = this.toPkh;\r\n      if (this.walletService.isLedgerWallet()) {\r\n        await this.ledgerSign();\r\n      }\r\n    }\r\n  }\r\n  async ledgerSign() {\r\n    this.ledgerError = '';\r\n    const keys = await this.walletService.getKeys('');\r\n    if (keys) {\r\n      this.sendDelegation(keys);\r\n    }\r\n  }\r\n\r\n  close1() {\r\n    this.modalRef1.hide();\r\n    this.modalRef1 = null;\r\n  }\r\n\r\n  close2() {\r\n    this.modalRef2.hide();\r\n    this.modalRef2 = null;\r\n  }\r\n\r\n  close3() {\r\n    this.modalRef3.hide();\r\n    this.modalRef3 = null;\r\n  }\r\n\r\n  async sendDelegation(keys: KeyPair) {\r\n    let fee = this.storedFee;\r\n    this.fee = '';\r\n    if (!fee) {\r\n      fee = '0';\r\n    }\r\n    this.operationService.delegate(this.activeAccount.address, this.getDelegate(), Number(fee), keys).subscribe(\r\n      async (ans: any) => {\r\n        this.sendResponse = ans;\r\n        console.log(JSON.stringify(ans));\r\n        if (ans.success === true) {\r\n          if (ans.payload.opHash) {\r\n            const metadata = { delegate: this.getDelegate(), opHash: ans.payload.opHash };\r\n            this.coordinatorService.boost(this.activeAccount.address, metadata);\r\n          } else if (this.walletService.isLedgerWallet()) {\r\n            this.requestLedgerSignature();\r\n          }\r\n        } else {\r\n          this.messageService.stopSpinner();\r\n          console.log('Delegation error id ', ans.payload.msg);\r\n          this.messageService.addError(ans.payload.msg, 0);\r\n          if (this.walletService.isLedgerWallet) {\r\n            this.closeModal();\r\n          }\r\n        }\r\n      },\r\n      err => {\r\n        console.log('Error Message ', JSON.stringify(err));\r\n        this.ledgerError = 'Failed to create operation';\r\n      }\r\n    );\r\n  }\r\n  async requestLedgerSignature() {\r\n    if (this.walletService.wallet instanceof LedgerWallet) {\r\n      const op = this.sendResponse.payload.unsignedOperation;\r\n      this.messageService.startSpinner('Waiting for Ledger signature');\r\n      let signature;\r\n      try {\r\n        signature = await this.ledgerService.signOperation(op, this.walletService.wallet.implicitAccounts[0].derivationPath);\r\n      } finally {\r\n        this.messageService.stopSpinner();\r\n      }\r\n      if (signature) {\r\n        const signedOp = op + signature;\r\n        this.sendResponse.payload.signedOperation = signedOp;\r\n        console.log(this.sendResponse);\r\n      } else {\r\n        this.ledgerError = 'Failed to sign operation';\r\n      }\r\n    }\r\n  }\r\n  async broadCastLedgerTransaction() {\r\n    this.messageService.startSpinner('Broadcasting operation');\r\n    this.operationService.broadcast(this.sendResponse.payload.signedOperation).subscribe(\r\n      ((ans: any) => {\r\n        this.sendResponse = ans;\r\n        if (ans.success && this.activeAccount.address) {\r\n          const metadata = { delegate: this.getDelegate(), opHash: ans.payload.opHash };\r\n          this.coordinatorService.boost(this.activeAccount.address, metadata);\r\n        } else {\r\n          this.messageService.addError(this.sendResponse.payload.msg, 0);\r\n        }\r\n        this.closeModal();\r\n        console.log('ans: ' + JSON.stringify(ans));\r\n      }),\r\n      (error => {\r\n        this.messageService.stopSpinner();\r\n        this.messageService.addError(error, 0);\r\n      })\r\n    );\r\n  }\r\n  checkReveal() {\r\n    console.log('check reveal ' + this.activeAccount.pkh);\r\n    this.operationService.isRevealed(this.activeAccount.pkh)\r\n      .subscribe((revealed: boolean) => {\r\n        if (!revealed) {\r\n          this.revealFee = 0.0013;\r\n        } else {\r\n          this.revealFee = 0;\r\n        }\r\n        this.checkSource();\r\n      });\r\n  }\r\n  checkSource() {\r\n    if (this.activeAccount instanceof ImplicitAccount) {\r\n      this.recommendedFee = this.revealFee + this.pkhFee;\r\n    } else if (this.activeAccount instanceof OriginatedAccount) {\r\n      this.recommendedFee = this.revealFee + this.ktFee;\r\n    }\r\n  }\r\n  getFee() {\r\n    if (this.fee) {\r\n      return this.fee;\r\n    }\r\n    return this.storedFee;\r\n  }\r\n  getDelegate() {\r\n    if (this.toPkh) {\r\n      return this.toPkh;\r\n    }\r\n    return this.storedDelegate;\r\n  }\r\n  clearForm() {\r\n    this.toPkh = '';\r\n    this.fee = '';\r\n    this.password = '';\r\n    this.pwdValid = '';\r\n    this.formInvalid = '';\r\n    this.sendResponse = '';\r\n    this.ledgerError = '';\r\n  }\r\n  invalidInput(): string {\r\n    if ((!this.inputValidationService.address(this.toPkh) &&\r\n      this.toPkh !== '') || (\r\n        this.toPkh.length > 1 && this.toPkh.slice(0, 2) !== 'tz') || (\r\n        this.walletService.wallet.getImplicitAccount(this.toPkh))) {\r\n      return 'invalid delegate address';\r\n    } else if (!this.inputValidationService.fee(this.fee)) {\r\n      return 'invalid fee';\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n  download() {\r\n    this.exportService.downloadOperationData(this.sendResponse.payload.unsignedOperation, false);\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.scss']\r\n})\r\nexport class FooterComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"foot-container\">\r\n<div id=\"follow\">\r\n    <span>follow kukai on</span>\r\n    <a href=\"https://github.com/kukai-wallet/kukai\" target=\"_blank\"><img src=\"../../../assets/img/logo-github.svg\"></a>\r\n    <a id=\"tg\" href=\"https://t.me/KukaiWallet\" target=\"_blank\"><img src=\"../../../assets/img/logo-telegram.svg\"></a>\r\n    <a href=\"https://twitter.com/KukaiWallet/\" target=\"_blank\"><img src=\"../../../assets/img/logo-twitter.svg\"></a>\r\n</div>\r\n<div class=\"links\">\r\n<a href=\"./terms-of-use\" target=\"_blank\">Terms of Use</a>\r\n<a href=\"./privacy-policy\" target=\"_blank\">Privacy Policy</a>\r\n<a target=\"_blank\" href=\"mailto:contact@kukai.app\">Contact</a>\r\n<a style=\"margin: 0 1rem 1rem auto;\" href=\"https://docs.kukai.app\" target=\"_blank\"><img src=\"../../../assets/img/docs.svg\"></a>\r\n</div>\r\n</div>","import { Component, OnInit, Input, ChangeDetectorRef } from '@angular/core';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport { Account, TorusWallet } from '../../services/wallet/wallet';\r\nimport { LookupService } from '../../services/lookup/lookup.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss']\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n  @Input() activeAccount: Account;\r\n  impAccs: Account[];\r\n  constructor(\r\n    private router: Router,\r\n    public walletService: WalletService,\r\n    public lookupService: LookupService,\r\n    private coordinatorService: CoordinatorService,\r\n    private messageService: MessageService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.walletService.wallet) {\r\n      this.impAccs = this.walletService.wallet.implicitAccounts;\r\n    }\r\n  }\r\n  logout() {\r\n    this.coordinatorService.stopAll();\r\n    this.messageService.clear();\r\n    this.walletService.clearWallet();\r\n    this.lookupService.clear();\r\n    this.router.navigate(['']);\r\n  }\r\n  click() {\r\n  }\r\n  getUsername() {\r\n    if (this.walletService.wallet instanceof TorusWallet) {\r\n      return this.walletService.wallet.displayName();\r\n    }\r\n    return '';\r\n  }\r\n  getVerifier() {\r\n    if (this.walletService.wallet instanceof TorusWallet) {\r\n      return this.walletService.wallet.verifier;\r\n    }\r\n    return '';\r\n  }\r\n}\r\n","<div id=\"top-container\">\r\n  <a routerLink=\"/accounts\" class=\"logo\"><img id=\"logo\" src=\"../../../assets/img/kukai-logo.svg\"></a>\r\n  <div class=\"middle\">\r\n    <ng-container *ngIf=\"!activeAccount\">\r\n      <span>Accounts</span>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"activeAccount\">\r\n      <a class=\"accounts\" routerLink=\"/accounts\">\r\n        Accounts\r\n      </a>\r\n      <img src=\"../../../assets/img/slash.svg\">\r\n      <div class=\"dropdown\">\r\n        <div class=\"dropbtn\"><span>{{ activeAccount.shortAddress() }}</span><img\r\n            src=\"../../../assets/img/chevron-down.svg\"></div>\r\n        <div class=\"dropdown-content\">\r\n          <div class=\"sep\">\r\n            <ng-container *ngFor=\"let impAcc of impAccs\">\r\n              <a routerLink=\"/account/{{impAcc.address}}\" [class.selected]=\"impAcc.address === activeAccount.address\">\r\n                {{ impAcc.shortAddress() }}\r\n              </a>\r\n              <ng-container *ngFor=\"let origAcc of impAcc.originatedAccounts\">\r\n                <a routerLink=\"/account/{{origAcc.address}}\"\r\n                  [class.selected]=\"origAcc.address === activeAccount.address\">\r\n                  {{ origAcc.shortAddress() }}\r\n                </a>\r\n              </ng-container>\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n  <div>\r\n    <div id=\"menu\" (click)=\"logout()\">\r\n      <span>Logout</span><BR>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div id=\"header-list\">\r\n  <ng-container *ngIf=\"getVerifier()\"><img class=\"verifier-logo\"\r\n      src=\"../../../assets/img/{{ getVerifier() }}-logo.svg\">&nbsp;</ng-container>{{ getUsername() }}\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { TorusService } from '../../services/torus/torus.service';\r\n\r\n@Component({\r\n  selector: 'app-messages',\r\n  templateUrl: './messages.component.html',\r\n  styleUrls: ['./messages.component.scss']\r\n})\r\nexport class MessagesComponent implements OnInit {\r\n  constructor(\r\n    public messageService: MessageService,\r\n    private location: Location,\r\n    public torusService: TorusService\r\n    ) { }\r\n  readonly subject = 'Sent you Tezos tokens';\r\n  ngOnInit() {\r\n  }\r\n  removeMessage(index: number) {\r\n    this.messageService.messages.splice(index, 1);\r\n  }\r\n  getHostName() {\r\n    return location.hostname;\r\n  }\r\n  notifyFormat(message: any) {\r\n    if (message.email) {\r\n      return this.mailtoFormat(message);\r\n    } else if (message.username) {\r\n      return this.redditPmFormat(message);\r\n    } else if (message.twitterId) {\r\n      return this.twitterPmFormat(message);\r\n    } else {\r\n      throw new Error('Invalid message');\r\n    }\r\n  }\r\n  mailtoFormat(message: any): string {\r\n    const subject = encodeURI(this.subject);\r\n    const body = this.encodedBody(message.amount, 'Google', `https://${this.getHostName()}/direct-auth\\n\\n`);\r\n    return `mailto:${message.email}?subject=${subject}&body=${body}`;\r\n  }\r\n  redditPmFormat(message: any) {\r\n    // https://www.reddit.com/message/compose?to=USERNAME&subject=SUBJECT&message=MESSAGE\r\n    const subject = encodeURI(this.subject);\r\n    const body = this.encodedBody(`${message.amount}`, 'Reddit', `[kukai.app](https://${this.getHostName()}/direct-auth)`);\r\n    return `https://www.reddit.com/message/compose?to=${message.username}&subject=${subject}&message=${body}`;\r\n  }\r\n  twitterPmFormat(message: any) {\r\n    // https://twitter.com/messages/compose?recipient_id=USER_ID&text=MESSAGE\r\n    const body = this.encodedBody(message.amount, 'Twitter', `https://${this.getHostName()}/direct-auth`);\r\n    return `https://twitter.com/messages/compose?recipient_id=${message.twitterId}&text=${body}`;\r\n  }\r\n  encodedBody(amount: string, accountType: string, url: string): string {\r\n    const s = (accountType === 'Reddit') ? '  ' : '';\r\n    const b = (accountType === 'Reddit') ? '**' : '';\r\n    const t = (accountType === 'Twitter') ? 'Tezos ' : '';\r\n    return encodeURI(`Hi,${s}\\nI sent you ${b}${amount} tez${b} using the Kukai wallet.\\n\\nYou can access your ${t}wallet with your ${accountType} account at: ${url}`);\r\n  }\r\n  getAlias(message: any) {\r\n    return message.email ? message.email :\r\n      message.username ? message.username :\r\n      message.handler ? message.handler :\r\n      'recipient';\r\n  }\r\n}\r\n","<div class='msg-container'>\r\n  <div *ngFor=\"let message of messageService.messages ; let i = index\">\r\n    <alert *ngIf=\"!message.timeout\" [type]=\"message.type\">\r\n      <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"removeMessage(i)\">\r\n        <span aria-hidden=\"true\">&times;</span>\r\n      </button>\r\n      <span *ngIf=\"!message.email && !message.username && !message.twitterId && message.msg\">{{ message.msg }}</span>\r\n      <span *ngIf=\"message.email || message.username || message.twitterId\">Click <a target=\"_blank\" href=\"{{ notifyFormat(message) }}\">here to notify</a> {{ getAlias(message) }} via {{ message.msg }}: <b>{{ message.amount }} tez</b> sent</span>\r\n    </alert>\r\n    <alert *ngIf=\"message.timeout\" [type]=\"message.type\" [dismissOnTimeout]=\"message.timeout\">\r\n      <span *ngIf=\"message.msg\">{{ message.msg }}</span></alert>\r\n  </div>\r\n</div>","import { Component, OnInit, HostBinding } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Constants } from '../../constants';\r\nimport { TranslateService } from '@ngx-translate/core'; // Multiple instances created ?\r\n\r\nimport { ImportService } from '../../services/import/import.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { ExportService } from '../../services/export/export.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { utils, hd } from '@tezos-core-tools/crypto-utils';\r\n\r\n@Component({\r\n  selector: 'app-mnemonic-import-wallet',\r\n  templateUrl: './mnemonic-import.component.html',\r\n  styleUrls: ['./mnemonic-import.component.scss']\r\n})\r\nexport class MnemonicImportComponent implements OnInit {\r\n  CONSTANTS = new Constants();\r\n  @HostBinding('class.tacos') showTacos = false;\r\n  MIN_PWD_LENGTH = 9;\r\n  mnemonic: string;\r\n  email: string;\r\n  password: string;\r\n  passphrase: string;\r\n  pkh: string;\r\n  importOption = 0;\r\n  activePanel = 0;\r\n  hdImport = false;\r\n  wallet: any;\r\n  walletJson: string;\r\n  pwd = '';\r\n  pwd1: string;\r\n  pwd2: string;\r\n  pwdStrength = '';\r\n  Downloaded = false;\r\n  fileName = '';\r\n  showWrongFileUploadMsg: false;\r\n\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private importService: ImportService,\r\n    private router: Router,\r\n    private messageService: MessageService,\r\n    private walletService: WalletService,\r\n    private exportService: ExportService,\r\n    private inputValidationService: InputValidationService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  retrieve() {\r\n    if (this.mnemonic) {\r\n      this.mnemonic = this.mnemonic.toLowerCase().replace(/(\\r\\n|\\n|\\r)/gm, ' ').trim();\r\n    }\r\n    if (this.importOption === 2) {\r\n      this.passphrase = this.email + this.password;\r\n    }\r\n    if (!this.inputValidationService.mnemonics(this.mnemonic)) {\r\n      this.translate\r\n        .get('MNEMONICIMPORTCOMPONENT.INVALIDMNEMONIC')\r\n        .subscribe((res: string) => this.messageService.addWarning(res, 10));\r\n    } else if (\r\n      this.importOption === 2 &&\r\n      !this.inputValidationService.email(this.email)\r\n    ) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.INVALIDEMAIL').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // 'Invalid email!'\r\n      );\r\n    } else if (this.importOption === 2 && !this.password) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.INVALIDPASSWORD').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // 'Invalid password!'\r\n      );\r\n    } else if (!this.inputValidationService.passphrase(this.passphrase)) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.INVALIDPASSPHRASE').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // 'Invalid passphrase!'\r\n      );\r\n    } else if (this.pkh && !this.inputValidationService.address(this.pkh)) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.INVALIDPKH').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // 'Invalid public key hash!'\r\n      );\r\n    } else {\r\n      let pkh = '';\r\n      if (this.pkh) {\r\n        if (this.importOption === 1 && this.hdImport) {\r\n          pkh = hd.keyPairFromAccountIndex(\r\n            utils.mnemonicToSeed(this.mnemonic, this.passphrase, true),\r\n            0\r\n          ).pkh;\r\n        } else {\r\n          pkh = utils.seedToKeyPair(\r\n            utils.mnemonicToSeed(this.mnemonic, this.passphrase, false)\r\n          ).pkh;\r\n        }\r\n      }\r\n      if (this.pkh && pkh !== this.pkh) {\r\n        if (this.importOption === 2) {\r\n          this.translate\r\n            .get('MNEMONICIMPORTCOMPONENT.INVALIDEMAILPASSWORD')\r\n            .subscribe((res: string) => this.messageService.addWarning(res, 5));\r\n        } else {\r\n          this.translate\r\n            .get('MNEMONICIMPORTCOMPONENT.INVALIDPASSPHRASE')\r\n            .subscribe((res: string) => this.messageService.addWarning(res, 5));\r\n        }\r\n      } else {\r\n        this.activePanel++;\r\n      }\r\n    }\r\n  }\r\n  async setPwd() {\r\n    if (this.validPwd()) {\r\n      const password = this.pwd1;\r\n      this.pwd1 = '';\r\n      this.pwd2 = '';\r\n      await this.messageService.startSpinner('Encrypting wallet...');\r\n      try {\r\n        this.wallet = await this.walletService.createEncryptedWallet(\r\n          this.mnemonic,\r\n          password,\r\n          this.passphrase,\r\n          this.importOption === 1 && this.hdImport\r\n        );\r\n      } finally {\r\n        this.messageService.stopSpinner();\r\n      }\r\n      this.mnemonic = '';\r\n      this.passphrase = '';\r\n      this.email = '';\r\n      this.password = '';\r\n      this.activePanel++;\r\n      if (document.body.offsetWidth >= 480) {\r\n        this.showTacos = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  validPwd(): boolean {\r\n    if (!this.inputValidationService.password(this.pwd1)) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.PASSWORDWEAK').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // 'Password is too weak!'\r\n      );\r\n      return false;\r\n    } else if (this.pwd1 !== this.pwd2) {\r\n      this.translate.get('MNEMONICIMPORTCOMPONENT.NOMATCHPASSWORDS').subscribe(\r\n        (res: string) => this.messageService.addWarning(res, 10) // Passwords don't match!\r\n      );\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  calcStrength() {\r\n    this.pwdStrength = this.inputValidationService.passwordStrengthDisplay(\r\n      this.pwd1\r\n    );\r\n  }\r\n  export(): string {\r\n    return JSON.stringify(this.wallet.data);\r\n  }\r\n  showPkh(): string {\r\n    return this.wallet.pkh;\r\n  }\r\n  download() {\r\n    this.exportService.downloadWallet(this.wallet.data);\r\n    this.Downloaded = true;\r\n  }\r\n  async done() {\r\n    await this.messageService.startSpinner('Loading wallet...');\r\n    try {\r\n      await this.importService.importWalletFromObject(\r\n        this.wallet.data,\r\n        this.wallet.seed\r\n      );\r\n    } finally {\r\n      this.messageService.stopSpinner();\r\n    }\r\n    this.wallet = null;\r\n    if (this.walletService.wallet.implicitAccounts.length === 1 && this.walletService.wallet.implicitAccounts[0].originatedAccounts.length === 0) {\r\n      this.router.navigate([`/account/${this.walletService.wallet.implicitAccounts[0].address}`]);\r\n    } else {\r\n      this.router.navigate(['/accounts']);\r\n    }\r\n    this.translate\r\n      .get('MNEMONICIMPORTCOMPONENT.WALLETREADY')\r\n      .subscribe((res: string) => this.messageService.addSuccess(res));\r\n  }\r\n  /* Keystore handling */\r\n  importPreCheck(keyFile: string) {\r\n    this.typeCheckFile(keyFile);\r\n    if (this.importService.pwdRequired(keyFile)) {\r\n      this.walletJson = keyFile;\r\n    } else {\r\n      throw new Error('Unsupported wallet file');\r\n    }\r\n  }\r\n  typeCheckFile(keyFile: string) {\r\n    const obj = JSON.parse(keyFile);\r\n    // Required\r\n    try {\r\n      if (typeof obj.provider !== 'string') {\r\n        throw new Error('provider not a string!');\r\n      }\r\n      if (typeof obj.version !== 'number') {\r\n        throw new Error('version not a number!');\r\n      }\r\n      if (typeof obj.walletType !== 'number') {\r\n        throw new Error('walletType not a number!');\r\n      }\r\n      // Optional\r\n      if (obj.encryptedSeed && typeof obj.encryptedSeed !== 'string') {\r\n        throw new Error('encryptedSeed not a string!');\r\n      }\r\n      if (obj.pkh && typeof obj.pkh !== 'string') {\r\n        throw new Error('pkh not a string!');\r\n      }\r\n      if (obj.iv && typeof obj.iv !== 'string') {\r\n        throw new Error('iv not a string!');\r\n      }\r\n      if (obj.pk && typeof obj.pk !== 'string') {\r\n        throw new Error('pk not a string!');\r\n      }\r\n      if (obj.encryptedEntropy && typeof obj.encryptedEntropy !== 'string') {\r\n        throw new Error('encryptedEntropy not a string!');\r\n      }\r\n    } catch (e) {\r\n      this.messageService.addError(e);\r\n      throw e;\r\n    }\r\n  }\r\n  async checkImportPwd() {\r\n    if (this.pwd) {\r\n      await this.messageService.startSpinner('Importing wallet...');\r\n      try {\r\n        await this.import(this.walletJson, this.pwd);\r\n        this.pwd = '';\r\n      } finally {\r\n        this.messageService.stopSpinner();\r\n      }\r\n    } else {\r\n      this.messageService.addWarning('No password provided', 5);\r\n    }\r\n  }\r\n  async import(keyFile: string, pwd: string) {\r\n    this.typeCheckFile(keyFile);\r\n    await this.importService\r\n      .importWalletFromJson(keyFile, pwd)\r\n      .then((success: boolean) => {\r\n        if (success) {\r\n          if (this.walletService.wallet.implicitAccounts.length === 1 && this.walletService.wallet.implicitAccounts[0].originatedAccounts.length === 0) {\r\n            this.router.navigate([`/account/${this.walletService.wallet.implicitAccounts[0].address}`]);\r\n          } else {\r\n            this.router.navigate(['/accounts']);\r\n          }\r\n        } else {\r\n          console.log(success);\r\n          this.messageService.addError('Something went wrong');\r\n        }\r\n      }).catch((e) => {\r\n        this.messageService.addError(e);\r\n      });\r\n  }\r\n  handleFileInput(files: FileList) {\r\n    let fileToUpload = files.item(0);\r\n    if (!fileToUpload) {\r\n      return false;\r\n    } else if (!this.validateFile(fileToUpload.name)) {\r\n      let fileNotSupported = '';\r\n      this.translate\r\n        .get('IMPORTCOMPONENT.FILENOTSUPPORTED')\r\n        .subscribe((res: string) => (fileNotSupported = res));\r\n      this.messageService.add(fileNotSupported);\r\n\r\n      console.log('Selected file format is not supported');\r\n      fileToUpload = null;\r\n      this.walletJson = null;\r\n      return false;\r\n    } else {\r\n\r\n      const reader = new FileReader();\r\n      reader.readAsText(fileToUpload);\r\n      reader.onload = () => {\r\n        if (typeof reader.result === 'string') {\r\n          try {\r\n            this.importPreCheck(reader.result);\r\n          } catch (e) {\r\n            this.messageService.addError(e, 5);\r\n            this.walletJson = null;\r\n          }\r\n          if (this.walletJson) {\r\n            this.fileName = fileToUpload.name;\r\n          }\r\n        } else {\r\n          this.walletJson = null;\r\n          throw new Error('Not a string import');\r\n        }\r\n      };\r\n    }\r\n  }\r\n  validateFile(name: String) {\r\n    const ext = name.substring(name.lastIndexOf('.') + 1);\r\n    if (ext.toLowerCase() === 'tez' || ext.toLowerCase() === 'json') {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","<div class=\"kukai-card\">\r\n  <div *ngIf=\"activePanel === 0\">\r\n      <H1>Import wallet</H1>\r\n      <div class=\"import-options\">\r\n          <span [class.selected]=\"importOption===0\" (click)=\"importOption = 0\">Keystore File</span>\r\n          <span [class.selected]=\"importOption===1\" (click)=\"importOption = 1\">Seed Words</span>\r\n          <span [class.selected]=\"importOption===2\" (click)=\"importOption = 2\">Fundraiser</span>\r\n      </div>\r\n      <div class=\"grey-card menu\">\r\n        <ng-container *ngIf=\"importOption === 0\">\r\n            <p class=\"description bold\" style=\"font-size: 1rem\">\r\n                Import your wallet from an encrypted keystore file (.tez).\r\n            </p>\r\n            <input type=\"file\" (change)=\"handleFileInput($event.target.files)\" accept=\".tez\" id=\"file\" name=\"file\"\r\n                class=\"input-file\">\r\n            <label for=\"file\" class=\"input-file\" [class.loaded]=\"walletJson\"><span\r\n                    *ngIf=\"walletJson\">{{ fileName }}</span><span>Browse</span></label>\r\n            <div class=\"authenticate\" *ngIf=\"walletJson\">\r\n                <input type=\"password\" class=\"text\" autocomplete=\"current-password\" (keydown.enter)='checkImportPwd()' id=\"pwd\" [(ngModel)]=\"pwd\"\r\n                    placeholder=\"Password\">\r\n                </div>\r\n                <div class=\"buttons\">\r\n                  <a routerLink=\"/\">\r\n                      <button class=\"button back\">Back</button>\r\n                  </a>\r\n                  <button class=\"button next\" [class.disabled-button]=\"!walletJson || !pwd\" (click)='checkImportPwd()'>Import</button>\r\n              </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"importOption > 0\">\r\n            <p class=\"description faucet\" *ngIf=\"importOption === 2\"><span>Please make sure to first <a routerLink=\"/activate\">activate</a> your fundraiser wallet.</span></p>\r\n            <ng-container>\r\n                <small>The seed (12-24 words)</small>\r\n                <textarea class=\"text\" [(ngModel)]=\"mnemonic\" autocomplete=\"off\" [placeholder]=\"'Seed Words (required)'\"></textarea>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"importOption === 1\">\r\n                <small>If your seed words are protected by a passphrase, it needs to be entered here</small>\r\n                <input class=\"text\" type=\"password\" name=\"passphrase\" autocomplete=\"one-time-code\" [(ngModel)]=\"passphrase\" [placeholder]=\"'Passphrase (optional)'\">\r\n            </ng-container>\r\n            <ng-container *ngIf=\"importOption === 2\">\r\n                <small>The email used during the fundraiser</small>\r\n                <input class=\"text\" type=\"text\" [(ngModel)]=\"email\" [placeholder]=\"'Email (required)'\">\r\n                <small>The password you chose during the fundraiser</small>\r\n                <input class=\"text\" type=\"password\" name=\"tge-password\" autocomplete=\"one-time-code\" [(ngModel)]=\"password\" [placeholder]=\"'Password (required)'\">\r\n            </ng-container>\r\n            <ng-container>\r\n                <small *ngIf=\"importOption === 1\">{{ 'MNEMONICIMPORTCOMPONENT.INFOPKH' | translate }}</small>\r\n                <small *ngIf=\"importOption === 2\">{{ 'MNEMONICIMPORTCOMPONENT.INFOPKHICO' | translate }}</small>\r\n                <input type=\"text\" class=\"text\" [(ngModel)]=\"pkh\" [placeholder]=\"'tz1... (recomended)'\">\r\n            </ng-container>\r\n            <div class=\"radios\" *ngIf=\"importOption === 1\">\r\n                <div>\r\n                    <input (change)=\"hdImport = !hdImport\" type=\"radio\" name=\"walletType\" value=\"legacy\" checked>\r\n                    <small>Legacy wallet</small>\r\n                </div>\r\n                <div>\r\n                    <input (change)=\"hdImport = !hdImport\" type=\"radio\" name=\"walletType\" value=\"hd\">\r\n                    <small>HD wallet</small>\r\n                </div>\r\n            </div>\r\n            <div class=\"buttons\">\r\n                <a routerLink=\"/\">\r\n                    <button class=\"button back\">Back</button>\r\n                </a>\r\n                <button class=\"button next\" (click)=\"retrieve()\">Import</button>\r\n            </div>\r\n        </ng-container>\r\n      </div>\r\n  </div>\r\n  <!-- Step 2 -->\r\n  <div *ngIf=\"activePanel==1\">\r\n      <H1>Set a password</H1>\r\n      <div class=\"grey-card\">\r\n        <p class=\"description bold blue\">This password will be used to create an encrypted keystore file.</p>\r\n        <p class=\"description\" style=\"margin-top: 1.25rem\">When performing operations that need to be signed with your secret key, this password will be required</p>\r\n        <input type=\"password\" style=\"margin-top: 2.5rem\" class=\"text\" autocomplete=\"new-password\" placeholder=\"{{ 'NEWWALLETCOMPONENT.PASSWORD' | translate }}\" [(ngModel)]=\"pwd1\" (keyup)=\"calcStrength()\">\r\n        <small class=\"grey\" style=\"margin-top: 0.5rem\"> {{ 'NEWWALLETCOMPONENT.PASSWORDSTRENGTH' | translate }} — {{ pwdStrength }}</small>\r\n        <input type=\"password\" style=\"margin-top: 1.5rem\" class=\"text\" autocomplete=\"new-password\" placeholder=\"{{ 'NEWWALLETCOMPONENT.CONFIRMPASSWORD' | translate }}\" [(ngModel)]=\"pwd2\">\r\n        <div class=\"buttons\" style=\"margin-top: 3rem\"><a routerLink=\"/\">\r\n                <button class=\"button back\">Cancel</button>\r\n            </a>\r\n            <button class=\"button next\" [class.disabled-button]=\"!pwd1\" (click)=\"setPwd()\">Next</button>\r\n        </div>\r\n      </div>\r\n  </div>\r\n  <!-- Step 3 -->\r\n  <div *ngIf=\"activePanel==2\">\r\n      <H1 style=\"background-color: #5963FF\">Wallet imported!</H1>\r\n      <div class=\"grey-card\">\r\n      <p class=\"description bold\">Your wallet is now set up and ready to be used.</p>\r\n      <p class=\"description\">Download your encrypted keystore file and import it when you want to access your wallet.</p>\r\n      <div class=\"whitebox final\">\r\n        <p class=\"description bold pkh\">Your public account address:&#10;&#13;{{ showPkh() }}</p>\r\n      </div>\r\n      <div class=\"buttons\" style=\"margin-top: 3rem\">\r\n        <button class=\"button next\" (click)=\"download()\">Download</button>\r\n        <button class=\"button next\" [class.disabled-button]=\"!Downloaded\" (click)=\"done()\">Open Wallet</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","<img class=\"add\" *ngIf=\"walletService.isHdWallet()\" src=\"../../../assets/img/add.svg\" (click)=\"openModal()\">\r\n\r\n<!-- The Modal -->\r\n<div *ngIf=\"modalOpen\" id=\"myModal\" class=\"kukai-modal\">\r\n  <!-- Modal content -->\r\n  <div class=\"km-content\">\r\n    <div class=\"x\" (click)=\"closeModal()\"><img src=\"../../../assets/img/x.svg\"></div>\r\n    <div class=\"km-header\">\r\n      <H1>Add a new account</H1>\r\n    </div>\r\n    <!-- Prepare delegation -->\r\n    <div class=\"km-body\">\r\n      <p>Add a new account to your HD wallet. Enter your password to confirm.</p>\r\n      <div class=\"row-group\" style=\"margin: 1.25rem 0 1.5rem;\">\r\n        <input #pwdInput [(ngModel)]=\"password\" class=\"text password\" autocomplete=\"current-password\" placeholder=\"Password\" type=\"password\" (input)=\"this.errorMsg = ''\" (change)=\"this.errorMsg = ''\">\r\n        <button  class=\"blue confirm\" (click)=\"addPkh()\">Confirm</button>\r\n      </div>\r\n      <span *ngIf=\"this.errorMsg\" class=\"danger margin\">{{ this.errorMsg }}</span>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, ViewChild, TemplateRef, ChangeDetectorRef, ElementRef } from '@angular/core';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { HdWallet } from '../../services/wallet/wallet';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { MessageService } from '../../services/message/message.service';\r\n\r\n@Component({\r\n  selector: 'app-new-implicit',\r\n  templateUrl: './new-implicit.component.html',\r\n  styleUrls: ['./new-implicit.component.scss'],\r\n})\r\nexport class NewImplicitComponent implements OnInit {\r\n  @ViewChild('pwdInput') pwdView: ElementRef;\r\n  modalOpen = false;\r\n  password = '';\r\n  errorMsg = '';\r\n  modalRef1: BsModalRef;\r\n  constructor(\r\n    public walletService: WalletService,\r\n    private coordinatorService: CoordinatorService,\r\n    private modalService: BsModalService,\r\n    private messageService: MessageService,\r\n    private cdRef: ChangeDetectorRef\r\n  ) {}\r\n  openModal() {\r\n    if (this.openPkhSpot()) {\r\n      // hide body scrollbar\r\n      const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n      document.body.style.marginRight = scrollBarWidth.toString();\r\n      document.body.style.overflow = 'hidden';\r\n      this.clear();\r\n      this.modalOpen = true;\r\n      setTimeout(() => {\r\n        const inputElem = <HTMLInputElement>this.pwdView.nativeElement;\r\n        inputElem.focus();\r\n      }, 100);\r\n    } else {\r\n      this.messageService.addWarning('Can\\'t create additional accounts when an unused account already exists');\r\n    }\r\n  }\r\n  closeModal() {\r\n    // restore body scrollbar\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflow = '';\r\n    this.clear();\r\n    this.modalOpen = false;\r\n  }\r\n  ngOnInit(): void {}\r\n  async addPkh() {\r\n    if (this.openPkhSpot()) {\r\n      this.messageService.startSpinner('Creating new account');\r\n      const pkh = await this.walletService.incrementAccountIndex(this.password);\r\n      if (pkh) {\r\n        this.coordinatorService.start(pkh);\r\n        this.closeModal();\r\n      } else {\r\n        this.errorMsg = 'Wrong password!';\r\n      }\r\n      this.messageService.stopSpinner();\r\n    } else {\r\n      console.log('blocked!');\r\n    }\r\n  }\r\n  openPkhSpot(): boolean {\r\n    const counter = this.walletService.wallet.implicitAccounts[\r\n      this.walletService.wallet.implicitAccounts.length - 1\r\n    ].activitiesCounter;\r\n    const balance: number = this.walletService.wallet.implicitAccounts[\r\n      this.walletService.wallet.implicitAccounts.length - 1\r\n    ].balanceXTZ;\r\n    return (\r\n      this.walletService.wallet instanceof HdWallet &&\r\n      ((counter && counter > 0) || (balance !== null && balance > 0))\r\n    );\r\n  }\r\n  clear() {\r\n    this.password = '';\r\n    this.errorMsg = '';\r\n  }\r\n}\r\n","<div class=\"kukai-card\">\r\n  <span class=\"step-counter\">\r\n    —{{ activePanel }}/4—\r\n  </span>\r\n  <div *ngIf=\"activePanel==1\" (click)=\"hideBlur = false\">\r\n    <H1>Back up your seed</H1>\r\n    <p class=\"description\">When you create a new wallet, new Tezos seed words are generated. Your seed words are the master key of your wallet accounts and any value they hold.</p>\r\n    <div class=\"grey-card\">\r\n      <div class=\"whitebox\" (mouseout)=\"hideBlur = false\" (click)=\"$event.stopPropagation()\">{{ MNEMONIC.string }}</div>\r\n      <div *ngIf=\"!hideBlur\" class=\"seed-blur\" (click)=\"hideBlur = true ; $event.stopPropagation()\">\r\n        <span class=\"black\">Click here to reveal your seed words</span>\r\n      </div>\r\n      <p class=\"description red\" style=\"justify-content: center\">Make sure to back it up, write it down, and keep it incredibly safe.</p>\r\n      <div class=\"buttons\"><a routerLink=\"/\"><button class=\"button back\">Back</button></a><button class=\"button next\" (click)=\"verifyView()\">Next</button></div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"activePanel==2\">\r\n    <H1>Verify your seed</H1>\r\n    <div class=\"grey-card\">\r\n      <p class=\"description\">{{ formatVerifyDescription(MNEMONIC.verify[0] + 1) }}</p>\r\n      <progress max=\"{{ MNEMONIC.wordsToVerify }}\" value=\"{{ MNEMONIC.wordsToVerify - MNEMONIC.verify.length }}\"></progress>\r\n      <div *ngIf=\"MNEMONIC.verify.length\" class=\"word-verify\">\r\n        <div class=\"word-hint\">\r\n          <span class=\"word-index\">{{ indexFormat(MNEMONIC.verify[0] - 1) }}</span>\r\n          <span class=\"word-value\">{{ valueFormat(MNEMONIC.verify[0] - 1) }}</span>\r\n        </div>\r\n        <div class=\"word-input\">\r\n          <span class=\"word-index\"><ng-container *ngIf=\"MNEMONIC.verify.length\">Word {{ MNEMONIC.verify[0] + 1 }}</ng-container></span>\r\n          <input id=\"wordInput\" class=\"text\" type=\"text\" (input)=\"checkWord()\" (change)=\"checkWord()\" [(ngModel)]=\"wordInput\" [disabled]=\"!MNEMONIC.verify.length\" autofocus>\r\n        </div>\r\n        <div class=\"word-hint\">\r\n          <span class=\"word-index\">{{ indexFormat(MNEMONIC.verify[0] + 1) }}</span>\r\n          <span class=\"word-value\">{{ valueFormat(MNEMONIC.verify[0] + 1) }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"buttons\"><a routerLink=\"/\"><button class=\"button back\">Cancel</button></a><button class=\"button next\" [class.disabled-button]=\"MNEMONIC.verify.length\" (click)=\"pwdView()\">Next</button></div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"activePanel==3\">\r\n    <H1>Set a password</H1>\r\n    <div class=\"grey-card\">\r\n      <p class=\"description bold blue\">This password will be used to create an encrypted keystore file.</p>\r\n      <p class=\"description\" style=\"margin-top: 1.25rem\">When performing operations that need to be signed with your secret key, this password will be required</p>\r\n      <input type=\"password\" style=\"margin-top: 2.5rem\" placeholder=\"{{ 'NEWWALLETCOMPONENT.PASSWORD' | translate }}\" class=\"text\" autocomplete=\"new-password\" [(ngModel)]=\"pwd1\" (keyup)=\"calcStrength()\">\r\n      <small class=\"grey\" style=\"margin-top: 0.5rem\"> {{ 'NEWWALLETCOMPONENT.PASSWORDSTRENGTH' | translate }} — {{ pwdStrength }}</small><BR>\r\n      <input type=\"password\" style=\"margin-top: 1.5rem\" placeholder=\"{{ 'NEWWALLETCOMPONENT.CONFIRMPASSWORD' | translate }}\" class=\"text\" autocomplete=\"new-password\" [(ngModel)]=\"pwd2\">\r\n      <div class=\"buttons\"><a routerLink=\"/\"><button class=\"button back\">Cancel</button></a><button class=\"button next\" [class.disabled-button]=\"!pwd1\" (click)=\"encryptWallet()\">Next</button></div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"activePanel==4\">\r\n    <H1 style=\"background-color: #5963FF\">Wallet created!</H1>\r\n    <div class=\"grey-card\">\r\n      <p class=\"description bold\">Your wallet is now set up and ready to be used.</p>\r\n      <p class=\"description\">Download your encrypted keystore file and import it when you want to access your wallet.</p>\r\n      <div class=\"whitebox final\">\r\n        <p class=\"description bold pkh\">Your public account address:&#10;&#13;{{ getPkh() }}</p>\r\n      </div>\r\n      <div class=\"buttons\">\r\n        <button class=\"button next\" (click)=\"download()\">Download</button>\r\n        <button class=\"button next\" [class.disabled-button]=\"!ekfDownloaded\" (click)=\"done()\">Open Wallet</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, Input, HostBinding } from '@angular/core';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { ExportService } from '../../services/export/export.service';\r\nimport { ImportService } from '../../services/import/import.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Router } from '@angular/router';\r\n\r\n\r\n@Component({\r\n  selector: 'app-new-wallet',\r\n  templateUrl: './new-wallet.component.html',\r\n  styleUrls: ['./new-wallet.component.scss']\r\n})\r\nexport class NewWalletComponent implements OnInit {\r\n  wordInput: string;\r\n  @HostBinding('class.tacos') showTacos = false;\r\n  @Input() pwd1 = '';\r\n  @Input() pwd2 = '';\r\n  @Input() userMnemonic = '';\r\n  hideBlur = false;\r\n  pwdStrength = '';\r\n  ekfDownloaded = false;\r\n  activePanel = 0;\r\n  data: any;\r\n  seed: any;\r\n  pkh: string;\r\n  pk: string;\r\n  MNEMONIC: {\r\n    string: string,\r\n    array: string[],\r\n    verify: number[],\r\n    wordsToVerify: number\r\n  };\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private walletService: WalletService,\r\n    private messageService: MessageService,\r\n    private exportService: ExportService,\r\n    private importService: ImportService,\r\n    private inputValidationService: InputValidationService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.generateSeed();\r\n  }\r\n  generateSeed() {\r\n    const mnemonic = this.walletService.createNewWallet();\r\n    this.MNEMONIC = {\r\n      string: mnemonic,\r\n      array: mnemonic.split(' '),\r\n      verify: [],\r\n      wordsToVerify: 5\r\n    };\r\n    // shuffle\r\n    const mnemonicLength = this.MNEMONIC.array.length;\r\n    while (this.MNEMONIC.verify.length < this.MNEMONIC.wordsToVerify) {\r\n      const index = Math.floor(Math.random() * Math.floor(mnemonicLength));\r\n      if (!this.MNEMONIC.verify.includes(index)) {\r\n        this.MNEMONIC.verify.push(index);\r\n      }\r\n    }\r\n    this.MNEMONIC.verify.sort((a, b) => a - b);\r\n    this.activePanel++;\r\n  }\r\n  checkWord() {\r\n    this.wordInput = this.wordInput.toLowerCase().trim();\r\n    if (this.wordInput === this.MNEMONIC.array[this.MNEMONIC.verify[0]]) {\r\n      this.MNEMONIC.verify.shift();\r\n      this.wordInput = '';\r\n    }\r\n    if (!this.MNEMONIC.verify) {\r\n      // Remove focus from input box\r\n      document.getElementById('wordInput').blur();\r\n    }\r\n  }\r\n  formatVerifyDescription(index: number): string {\r\n    if (this.MNEMONIC.verify.length === 0) {\r\n      return 'Seed backup has been verified!';\r\n    }\r\n    switch (index) {\r\n      case 1:\r\n      case 21:\r\n        return `Fill in the ${index}st word to verify your seed backup`;\r\n      case 2:\r\n      case 22:\r\n        return `Fill in the ${index}nd word to verify your seed backup`;\r\n      case 3:\r\n      case 23:\r\n        return `Fill in the ${index}rd word to verify your seed backup`;\r\n      default:\r\n        return `Fill in the ${index}th word to verify your seed backup`;\r\n    }\r\n  }\r\n  indexFormat(index: number): string {\r\n    if (this.MNEMONIC.verify.length === 0) {\r\n      return '';\r\n    } else if (index < 0 || index >= this.MNEMONIC.array.length) {\r\n      return '';\r\n    } else {\r\n      return 'Word ' + (index + 1);\r\n    }\r\n  }\r\n  valueFormat(index: number): string {\r\n    if (this.MNEMONIC.verify.length === 0) {\r\n      return '';\r\n    } else if (index < 0 || index > this.MNEMONIC.array.length) {\r\n      return '';\r\n    } else {\r\n      return this.MNEMONIC.array[index];\r\n    }\r\n  }\r\n  verifyView() {\r\n    if (this.MNEMONIC.verify.length) {\r\n      this.activePanel++;\r\n    } else {\r\n      throw new Error('Unexpected verify array');\r\n    }\r\n  }\r\n  pwdView() {\r\n    this.activePanel++;\r\n    this.userMnemonic = '';\r\n  }\r\n\r\n  mnemonicMatch(): boolean {\r\n    return (this.MNEMONIC.string === this.userMnemonic);\r\n  }\r\n  async encryptWallet() {\r\n    if (this.validPwd()) {\r\n      this.messageService.startSpinner('Encrypting wallet...');\r\n      const pwd = this.pwd1;\r\n      this.pwd1 = '';\r\n      this.pwd2 = '';\r\n      const ans = await this.walletService.createEncryptedWallet(this.MNEMONIC.string, pwd, '', true);\r\n      this.seed = ans.seed;\r\n      this.data = ans.data;\r\n      this.pkh = ans.pkh;\r\n      this.pk = ans.pk;\r\n      this.MNEMONIC.string = '';\r\n      this.MNEMONIC.array = [];\r\n      this.MNEMONIC.verify = [];\r\n      this.activePanel++;\r\n      this.messageService.stopSpinner();\r\n      if (document.body.offsetWidth >= 480) {\r\n        this.showTacos = true;\r\n      }\r\n    }\r\n  }\r\n  validPwd(): boolean {\r\n    if (!this.inputValidationService.password(this.pwd1)) {\r\n      this.messageService.addWarning(this.translate.instant('MNEMONICIMPORTCOMPONENT.PASSWORDWEAK'), 5);\r\n      return false;\r\n    } else if (this.pwd1 !== this.pwd2) {\r\n      this.messageService.addWarning(this.translate.instant('MNEMONICIMPORTCOMPONENT.NOMATCHPASSWORDS'), 5);\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  calcStrength() {\r\n    this.pwdStrength = this.inputValidationService.passwordStrengthDisplay(this.pwd1);\r\n  }\r\n  async done() {\r\n    const seed = this.seed;\r\n    this.seed = null;\r\n    await this.importService.importWalletFromObject(this.data, seed);\r\n    this.walletService.storeWallet();\r\n    this.data = null;\r\n    this.messageService.addSuccess('Your new wallet is now set up and ready to use!');\r\n    this.router.navigate([`/account/${this.walletService.wallet.implicitAccounts[0].address}`]);\r\n  }\r\n  export(): string {\r\n    return JSON.stringify(this.data);\r\n  }\r\n  getPkh(): string {\r\n    return this.pkh;\r\n  }\r\n  download() {\r\n    this.exportService.downloadWallet(this.data);\r\n    this.ekfDownloaded = true;\r\n  }\r\n}\r\n","import { Component, OnInit, ViewChild, TemplateRef, Input } from '@angular/core';\r\n\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as QRCode from 'qrcode';\r\nimport { MessageService } from '../../services/message/message.service';\r\n\r\n\r\n\r\n@Component({\r\n    selector: 'app-receive',\r\n    templateUrl: './receive.component.html',\r\n    styleUrls: ['./receive.component.scss']\r\n})\r\nexport class ReceiveComponent implements OnInit {\r\n    @ViewChild('modal1') modal1: TemplateRef<any>;\r\n    @Input() activeAddress: String;\r\n    showReceiveFormat = {\r\n        btnOutline: true,\r\n        dropdownItem: false,\r\n    };\r\n    modalRef1: BsModalRef;\r\n    modalOpen = false;\r\n    constructor(\r\n        private modalService: BsModalService,\r\n        private messageService: MessageService\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n    }\r\n    openModal() {\r\n      // hide body scrollbar\r\n      const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n      document.body.style.marginRight = scrollBarWidth.toString();\r\n      document.body.style.overflow = 'hidden';\r\n      this.modalOpen = true;\r\n      setTimeout(() => {\r\n        this.getQR();\r\n      }, 100);\r\n    }\r\n    closeModal() {\r\n      // restore body scrollbar\r\n      document.body.style.marginRight = '';\r\n      document.body.style.overflow = '';\r\n      this.modalOpen = false;\r\n    }\r\n    getQR() {\r\n        QRCode.toCanvas(document.getElementById('canvas'), this.activeAddress, { errorCorrectionLevel: 'H' , scaleFactor: 2}, function (err, canvas) {\r\n            if (err) { throw err; }\r\n        });\r\n    }\r\n\r\n    open1(template1: TemplateRef<any>) {\r\n        if (this.activeAddress) {\r\n            this.modalRef1 = this.modalService.show(template1, { class: 'first' });  // modal-sm / modal-lg\r\n            setTimeout(() => {\r\n                this.getQR();\r\n            }, 100);\r\n        } else {\r\n            this.messageService.add('Select an address first by clicking on it!');\r\n        }\r\n    }\r\n\r\n}\r\n","\r\n<img class=\"qr-icon\" src=\"../../../assets/img/qr.svg\" (click)=\"openModal()\">\r\n<!-- The Modal -->\r\n<div *ngIf=\"modalOpen\" id=\"myModal\" class=\"kukai-modal\">\r\n  <!-- Modal content -->\r\n  <div class=\"km-content\">\r\n    <div class=\"x\" (click)=\"closeModal()\"><img src=\"../../../assets/img/x.svg\"></div>\r\n    <div class=\"km-header\">\r\n      <H1>{{ 'RECEIVECOMPONENT.RECEIVETEZ' | translate }}</H1>\r\n    </div>\r\n    <!-- Prepare delegation -->\r\n    <div class=\"km-body\">\r\n      <label>Your account QR code</label>\r\n      <center>\r\n        <canvas id='canvas'></canvas>\r\n      </center>\r\n      <span>{{ activeAddress }}</span>\r\n    </div>\r\n  </div>\r\n</div>","<button class=\"purple\" (click)=\"openModal()\">Send</button>\r\n\r\n<!-- The Modal -->\r\n<div *ngIf=\"modalOpen\" id=\"myModal\" class=\"kukai-modal\">\r\n  <!-- Modal content -->\r\n  <div class=\"km-content\">\r\n    <div class=\"x\" (click)=\"closeModal()\"><img src=\"../../../assets/img/x.svg\"></div>\r\n    <div class=\"km-header\">\r\n      <H1 *ngIf=\"activeView === 0\">Send tez</H1>\r\n      <H1 *ngIf=\"activeView === 1\">Confirmation</H1>\r\n      <!--<span class=\"close\" (click)=\"modalOpen = false\" class=\"close\">&times;</span>-->\r\n      <button *ngIf=\"activeView === 0 && !walletService.isLedgerWallet()\" class=\"small multiple-destinations\"\r\n        (click)=\"toggleDestination()\">\r\n        <ng-container *ngIf=\"!this.isMultipleDestinations\">Multiple transactions</ng-container>\r\n        <ng-container *ngIf=\"this.isMultipleDestinations\">Single transaction</ng-container>\r\n      </button>\r\n    </div>\r\n    <!-- Prepare transaction -->\r\n    <div class=\"km-body\" *ngIf=\"activeView === 0\">\r\n      <div class=\"amount\">\r\n        <input #amountInput class=\"input\" class=\"custom-large\" placeholder=\"0.00\" [(ngModel)]=\"amount\"\r\n          (click)=\"sendMax = false;\" [style.font-size.rem]=\"dynSize()\"\r\n          [style.width.ch]=\"amount ? amount.length + 1 : 3.6\" [disabled]=\"isMultipleDestinations\">\r\n        <span class=\"tez\">tez</span>\r\n      </div>\r\n      <div class=\"row-group\">\r\n        <button *ngIf=\"!this.isMultipleDestinations\" tabindex=-1 class=\"small\" [class.max]=\"sendMax\"\r\n          (click)=\"sendEntireBalance($event)\">Send Max</button>\r\n        <p *ngIf=\"this.isMultipleDestinations\"></p>\r\n        <p class=\"fee\">\r\n          <ng-container *ngIf=\"!getTotalBurn() ; else burn\">Fee: </ng-container>\r\n          <ng-template #burn>Fee & storage cost: </ng-template>\r\n          {{ getTotalCost(true) }}\r\n        </p>\r\n      </div>\r\n      <div class=\"group\">\r\n        <label>From address</label>\r\n        <p>{{ activeAccount.address }}</p>\r\n      </div>\r\n      <div *ngIf=\"!this.isMultipleDestinations\" class=\"group\">\r\n        <label style=\"justify-content: space-between; opacity: 1; color: rgba(44, 50, 58, 0.4)\"><span>Send to</span>\r\n          <select class=\"select-css\" [(ngModel)]=\"torusVerifier\" (ngModelChange)=\"verifierChange()\">\r\n            <option value=\"\" selected>Tezos Address</option>\r\n            <option *ngFor=\"let key of torusService.verifierMapKeys\" value=\"{{key}}\">{{ torusService.verifierMap[key].name }} Account</option>\r\n          </select></label>\r\n        <input type=\"text\" class=\"text\" (input)=\"updateDefaultValues()\" (change)=\"validateReceiverAddress()\"\r\n          [(ngModel)]=\"toPkh\">\r\n      </div>\r\n      <ng-container *ngIf=\"torusVerifier\">\r\n        <p class=\"torus-details\" *ngIf=\"torusPendingLookup\">Loading address...</p>\r\n        <p class=\"torus-details\" *ngIf=\"!torusPendingLookup && torusLookupAddress\">{{ torusLookupAddress }}</p>\r\n      </ng-container>\r\n      <div *ngIf=\"this.isMultipleDestinations\" class=\"group\">\r\n        <label>Addresses and amounts <span class=\"batchInfo\">{{ batchSpace() }}</span></label>\r\n        <textarea type=\"text\" class=\"text\" (input)=\"updateDefaultValues()\" (change)=\"validateBatch()\" rows=\"3\"\r\n          [(ngModel)]=\"toMultipleDestinationsString\"\r\n          placeholder=\"address1 amount1 ; &#10;address2 amount2 ; &#10;address3 ...\"></textarea>\r\n      </div>\r\n      <div class=\"advanced\">\r\n        <small>Advanced</small>\r\n        <div class=\"switch-container\">\r\n          <label class=\"switch\">\r\n            <input type=\"checkbox\" [(ngModel)]=\"advancedForm\" tabindex=-1>\r\n            <span class=\"slider round\"></span>\r\n          </label><span class=\"switch-desc\">\r\n            <ng-container *ngIf=\"!advancedForm\">Off</ng-container>\r\n            <ng-container *ngIf=\"advancedForm\">On</ng-container>\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div *ngIf=\"advancedForm\" class=\"advanced-form\">\r\n        <div class=\"row-group\">\r\n          <div class=\"group\">\r\n            <label>Gas limit</label>\r\n            <input type=\"text\" class=\"text\" placeholder={{this.defaultTransactionParams.gas.toString()}}\r\n              [(ngModel)]=\"gas\">\r\n          </div>\r\n          <div class=\"group\">\r\n            <label>Fee</label>\r\n            <input type=\"text\" (input)=\"updateMaxAmount()\" (paste)=\"updateMaxAmount()\" class=\"text\"\r\n              placeholder={{this.defaultTransactionParams.fee.toString()}} [(ngModel)]=\"fee\">\r\n          </div>\r\n        </div>\r\n        <div class=\"row-group\">\r\n          <div class=\"group\">\r\n            <label>Storage limit</label>\r\n            <input type=\"text\" (input)=\"updateMaxAmount()\" (paste)=\"updateMaxAmount()\" class=\"text\"\r\n              placeholder={{this.defaultTransactionParams.storage.toString()}} [(ngModel)]=\"storage\">\r\n          </div>\r\n          <div class=\"group\">\r\n            <label>Max storage cost</label>\r\n            <input type=\"text\" class=\"text read-only\" [value]=\"burnAmount() ? burnAmount() : '0 tez'\" tabindex=-1\r\n              readonly>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <span *ngIf=\"formInvalid\" class=\"danger no-margin\">\r\n        {{ formInvalid }}\r\n      </span>\r\n      <button style=\"margin: 2.5rem 0 1.5rem;\" class=\"purple\" (click)=\"openModal2()\">Preview</button>\r\n    </div>\r\n    <!-- Confirm transaction -->\r\n    <div class=\"km-body\" *ngIf=\"activeView === 1\">\r\n      <!-- Single transaction -->\r\n      <div class=\"preview-top\">\r\n      <div class=\"preview-amount\">\r\n        <span class=\"section\">Send</span>\r\n        <span class=\"amount-tez\">{{ totalAmount() | number:'1.0-6' }} tez</span>\r\n        <span class=\"amount-usd\">{{ totalAmount() * walletService.wallet.XTZrate | number:'1.0-2' }} USD</span>\r\n        <span *ngIf=\"!isMultipleDestinations\" class=\"section\">To</span>\r\n      </div>\r\n      <img src=\"../../../assets/img/tezos-xtz-logo.svg\" style=\"height: 4.5rem; margin-right: 1rem\">\r\n      </div>\r\n      <ng-container *ngIf=\"!isMultipleDestinations\">\r\n        <span *ngIf=\"torusLookupId\" class=\"torus-to\"><img src=\"../../../assets/img/{{ torusVerifier }}-logo.svg\">\r\n          {{ torusLookupId }}</span>\r\n        <span class=\"single-to\">{{ transactions[0].to }}</span>\r\n        <p id=\"previewAttention\" *ngIf=\"torusLookupId\">{{ previewAttention() }}</p>\r\n        <div class=\"seperator\"></div>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"isMultipleDestinations\">\r\n        <!-- Multiple transactions -->\r\n        <div class=\"seperator\"></div>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">{{ 'SENDCOMPONENT.TO' | translate }}</th>\r\n              <th scope=\"col\">{{ 'SENDCOMPONENT.AMOUNT' | translate }}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let transaction of showTransactions\">\r\n              <td><span *ngIf=\"transaction.storageLimit\">*</span>{{ transaction.to }}</td>\r\n              <td class=\"txAmount\">{{ transaction.amount | number:'1.0-6' }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <button style=\"margin-left: auto; margin: 0.5rem 0 1rem; height: 2rem;\" *ngIf='transactions.length > 2' type=\"button\"\r\n          class=\"show-more\" aria-label=\"More\" (click)=\"toggleTransactions()\">\r\n          <span aria-hidden=\"true\"> {{ showBtn }} </span>\r\n        </button>\r\n        <div class=\"seperator\"></div>\r\n      </ng-container>\r\n      <!-- Sender -->\r\n      <ng-container *ngIf=\"this.walletService.wallet.verifier\">\r\n        <!-- Torus -->\r\n        <div class=\"preview-row\">\r\n          <span>From</span><span><img src=\"../../../assets/img/{{ this.walletService.wallet.verifier }}-logo.svg\">\r\n            {{ this.walletService.wallet.displayName() }}\r\n          </span>\r\n        </div>\r\n        <div class=\"preview-row\">\r\n          <span>Address</span><span>{{ activeAccount.address }}</span>\r\n        </div>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"!this.walletService.wallet.name\">\r\n        <!-- Other -->\r\n        <div class=\"preview-row\">\r\n          <span>From</span><span>{{ activeAccount.address }}</span>\r\n        </div>\r\n      </ng-container>\r\n      <div class=\"seperator\"></div>\r\n      <div class=\"preview-row\">\r\n        <span>Fee</span><span>{{ getTotalFee() | number:'1.0-6' }} tez</span>\r\n      </div>\r\n      <div *ngIf=\"getTotalBurn()\" class=\"preview-row\">\r\n        <span>Max storage cost</span><span>{{ getTotalBurn() | number:'1.0-6' }} tez</span>\r\n      </div>\r\n      <div class=\"seperator\"></div>\r\n      <div class=\"row-group\" style=\"margin: 1.25rem 0 1.5rem;\">\r\n        <input *ngIf=\"!walletService.isLedgerWallet() && !walletService.isTorusWallet()\" [(ngModel)]=\"password\"\r\n          autocomplete=\"current-password\" placeholder=\"Password\" class=\"text password\" type=\"password\"\r\n          (input)=\"this.pwdValid = ''\" (change)=\"this.pwdValid = ''\">\r\n        <button class=\"retry\" *ngIf=\"walletService.isLedgerWallet() && ledgerError; else elseBlock\"\r\n          (click)=\"ledgerRetry()\">Sign with Ledger</button>\r\n        <ng-template #elseBlock>\r\n          <button class=\"purple confirm\" (click)=\"inject()\"\r\n            [disabled]=\"walletService.isLedgerWallet() && (!sendResponse || !sendResponse.payload || !sendResponse.payload.signedOperation)\">\r\n            {{ walletService.isLedgerWallet() ? 'Broadcast' : 'Confirm'}}</button>\r\n        </ng-template>\r\n      </div>\r\n      <span *ngIf=\"this.pwdValid\" class=\"danger margin\">{{ this.pwdValid }}</span>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, Input, ViewChild, ElementRef } from '@angular/core';\r\nimport { KeyPair, DefaultTransactionParams } from '../../interfaces';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { CoordinatorService } from '../../services/coordinator/coordinator.service';\r\nimport { OperationService } from '../../services/operation/operation.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { LedgerService } from '../../services/ledger/ledger.service';\r\nimport { EstimateService } from '../../services/estimate/estimate.service';\r\nimport Big from 'big.js';\r\nimport { Constants } from '../../constants';\r\nimport { LedgerWallet, TorusWallet } from '../../services/wallet/wallet';\r\nimport { Account, ImplicitAccount, OriginatedAccount } from '../../services/wallet/wallet';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { TorusService } from '../../services/torus/torus.service';\r\nimport { LookupService } from '../../services/lookup/lookup.service';\r\n\r\ninterface SendData {\r\n  to: string;\r\n  amount: number;\r\n  gasLimit: number;\r\n  storageLimit: number;\r\n  meta?: {\r\n    alias: string;\r\n    verifier: string;\r\n    twitterId?: string;\r\n  };\r\n}\r\nconst zeroTxParams: DefaultTransactionParams = {\r\n  gas: 0,\r\n  storage: 0,\r\n  fee: 0,\r\n  burn: 0\r\n};\r\n@Component({\r\n  selector: 'app-send',\r\n  templateUrl: './send.component.html',\r\n  styleUrls: ['./send.component.scss']\r\n})\r\nexport class SendComponent implements OnInit {\r\n  // torus\r\n  torusVerifier = '';\r\n  torusPendingLookup = false;\r\n  torusLookupAddress = '';\r\n  torusLookupId = '';\r\n  torusTwitterId = '';\r\n  /* New variables */\r\n  modalOpen = false;\r\n  advancedForm = false;\r\n  sendMax = false;\r\n  /* old variables */\r\n  @Input() activeAccount: Account;\r\n  @ViewChild('amountInput') amountInputView: ElementRef;\r\n  CONSTANTS = new Constants();\r\n  defaultTransactionParams: DefaultTransactionParams = zeroTxParams;\r\n\r\n  // Transaction variables\r\n  toPkh: string;\r\n  amount = '';\r\n  fee: string;\r\n  sendFee: string;\r\n  burnFee = 0;\r\n  gas = '';\r\n  storage = '';\r\n  isMultipleDestinations = false;\r\n  toMultipleDestinationsString = '';\r\n  toMultipleDestinations: SendData[] = [];\r\n  activeView = 0;\r\n  showTransactions: SendData[] = [];\r\n  simSemaphore = 0;\r\n  dom: Document;\r\n  implicitAccounts = null;\r\n  password: string;\r\n  pwdValid: string;\r\n  formInvalid = '';\r\n  sendResponse: any;\r\n  errorMessage = '';\r\n  latestSimError = '';\r\n  transactions: SendData[] = [];\r\n  prevEquiClass = '';\r\n  XTZrate = 0;\r\n  ledgerError = '';\r\n  showBtn = 'Show More';\r\n\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private walletService: WalletService,\r\n    private operationService: OperationService,\r\n    private coordinatorService: CoordinatorService,\r\n    private inputValidationService: InputValidationService,\r\n    private ledgerService: LedgerService,\r\n    private estimateService: EstimateService,\r\n    private messageService: MessageService,\r\n    public torusService: TorusService,\r\n    private lookupService: LookupService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.walletService.wallet) {\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  init() {\r\n    if (!this.activeAccount) {\r\n      this.activeAccount = this.walletService.wallet.implicitAccounts[0];\r\n    }\r\n    console.log(this.activeAccount.address);\r\n    this.implicitAccounts = this.walletService.wallet.implicitAccounts;\r\n  }\r\n  /* Modal 2 */\r\n  openModal() {\r\n    // hide body scrollbar\r\n    const scrollBarWidth = window.innerWidth - document.body.offsetWidth;\r\n    document.body.style.marginRight = scrollBarWidth.toString();\r\n    document.body.style.overflow = 'hidden';\r\n    console.log('open modal');\r\n    this.modalOpen = true;\r\n    if (this.walletService.wallet) {\r\n      if (!this.activeAccount) {\r\n        this.activeAccount = this.implicitAccounts[0];\r\n      }\r\n      this.clearForm();\r\n      if (window.innerWidth > 1300) {\r\n        setTimeout(() => {\r\n          const inputElem = <HTMLInputElement>this.amountInputView.nativeElement;\r\n          inputElem.focus();\r\n        }, 100);\r\n      }\r\n      this.estimateService.preLoadData(this.activeAccount.pkh, this.activeAccount.pk);\r\n    }\r\n  }\r\n  async openModal2() {\r\n    if (!this.simSemaphore && !this.torusPendingLookup) {\r\n      this.formInvalid = this.checkInput(true);\r\n      if (!this.formInvalid) {\r\n        if (!this.amount) { this.amount = '0'; }\r\n        let clearFee = false;\r\n        if (!this.fee) {\r\n          this.fee = this.defaultTransactionParams.fee.toString();\r\n          clearFee = true;\r\n        }\r\n        this.prepTransactions();\r\n        this.formInvalid = this.checkBalance();\r\n        if (!this.formInvalid) {\r\n          this.activeView++;\r\n          if (this.walletService.isLedgerWallet()) {\r\n            this.messageService.startSpinner('Preparing transaction...');\r\n            const keys = await this.walletService.getKeys('');\r\n            if (keys) {\r\n              await this.sendTransaction(keys);\r\n            } else {\r\n              this.messageService.stopSpinner();\r\n            }\r\n          }\r\n        } else if (clearFee) {\r\n          this.fee = '';\r\n        }\r\n      }\r\n    }\r\n  }\r\n  async ledgerRetry() {\r\n    this.ledgerError = '';\r\n    this.messageService.startSpinner('Preparing transaction...');\r\n    const keys = await this.walletService.getKeys('');\r\n    if (keys) {\r\n      await this.sendTransaction(keys);\r\n    } else {\r\n      this.messageService.stopSpinner();\r\n    }\r\n  }\r\n  async inject() {\r\n    if (this.walletService.isLedgerWallet()) {\r\n      this.broadCastLedgerTransaction();\r\n      this.sendResponse = null;\r\n      this.closeModal();\r\n    } else {\r\n      const pwd = this.password;\r\n      this.password = '';\r\n      this.messageService.startSpinner('Signing transaction...');\r\n      let keys;\r\n      try {\r\n        keys = await this.walletService.getKeys(pwd, this.activeAccount.pkh);\r\n      } catch {\r\n        this.messageService.stopSpinner();\r\n      }\r\n      if (keys) {\r\n        this.pwdValid = '';\r\n        this.messageService.startSpinner('Sending transaction...');\r\n        this.sendTransaction(keys);\r\n        this.closeModal();\r\n      } else {\r\n        this.messageService.stopSpinner();\r\n        if (this.walletService.wallet instanceof TorusWallet) {\r\n          this.pwdValid = `Authorization failed`;\r\n        } else {\r\n          this.pwdValid = this.translate.instant('SENDCOMPONENT.WRONGPASSWORD');  // 'Wrong password!';\r\n        }\r\n      }\r\n    }\r\n  }\r\n  closeModal() {\r\n    // restore body scrollbar\r\n    document.body.style.marginRight = '';\r\n    document.body.style.overflow = '';\r\n    this.activeView = 0;\r\n    this.modalOpen = false;\r\n    this.clearForm();\r\n  }\r\n  showAccountBalance() {\r\n    const accountBalance = Big(this.activeAccount.balanceXTZ).div(1000000).toString();\r\n    return this.numberWithCommas(accountBalance) + ' XTZ';\r\n  }\r\n  numberWithCommas(x: string) {\r\n    const parts: Array<string> = x.split('.');\r\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n    return parts.join('.');\r\n  }\r\n  sendEntireBalance(event: Event) {\r\n    event.stopPropagation();\r\n    this.sendMax = true;\r\n    this.checkMaxAmount();\r\n  }\r\n  checkMaxAmount() {\r\n    if (this.sendMax) {\r\n      const max = this.maxToSend(this.activeAccount);\r\n      if (max.length && max.slice(0, 1) !== '-') {\r\n        this.amount = max;\r\n      } else {\r\n        this.amount = '0';\r\n      }\r\n    }\r\n  }\r\n  updateMaxAmount() {\r\n    if (this.sendMax) {\r\n      const max = this.maxToSend(this.activeAccount);\r\n      let maxAmount = '0';\r\n      if (max.length && max.slice(0, 1) !== '-') {\r\n        maxAmount = max;\r\n      }\r\n      if (this.amount !== maxAmount) {\r\n        this.amount = maxAmount;\r\n      }\r\n    }\r\n  }\r\n  maxToSend(account: Account): string {\r\n    if (account && (account instanceof ImplicitAccount)) {\r\n      let accountBalance = Big(account.balanceXTZ).div(1000000);\r\n      accountBalance = accountBalance.minus(this.fee && Number(this.fee) ? Number(this.fee) : this.defaultTransactionParams.fee);\r\n      if (!this.isMultipleDestinations) {\r\n        accountBalance = accountBalance.minus(this.storage && Number(this.storage) ? Number(this.storage) / 1000 : this.defaultTransactionParams.burn);\r\n      } else {\r\n        accountBalance = accountBalance.minus(this.defaultTransactionParams.burn);\r\n      }\r\n      accountBalance = accountBalance.minus(0.000001); // dust\r\n      return accountBalance.toString();\r\n    } else {\r\n      return Big(account.balanceXTZ).div(1000000).toString();\r\n    }\r\n  }\r\n  prepTransactions(finalCheck = false): boolean {\r\n    if (!this.checkInput(finalCheck)) {\r\n      if (!this.toMultipleDestinationsString) { this.toMultipleDestinationsString = ''; }\r\n      if (this.isMultipleDestinations) {\r\n        this.transactions = this.toMultipleDestinations;\r\n        this.showTransactions = [];\r\n        if (this.transactions.length > 1) {\r\n          this.showTransactions.push(this.transactions[0], this.transactions[1]);\r\n        } else {\r\n          this.showTransactions.push(this.transactions[0]);\r\n        }\r\n      } else {\r\n        const gasLimit = this.gas ? Number(this.gas) : this.defaultTransactionParams.gas;\r\n        const storageLimit = this.storage ? Number(this.storage) : this.defaultTransactionParams.storage;\r\n        const toAddress = !this.torusVerifier ? this.toPkh : this.torusLookupAddress;\r\n        this.transactions = [{ to: toAddress, amount: Number(this.amount), gasLimit, storageLimit }];\r\n        if (this.torusLookupId) {\r\n          if (this.torusVerifier === 'twitter') {\r\n            this.transactions[0].meta = { alias: this.torusLookupId, verifier: this.torusVerifier, twitterId: this.torusTwitterId };\r\n          } else {\r\n            this.transactions[0].meta = { alias: this.torusLookupId, verifier: this.torusVerifier };\r\n          }\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  async sendTransaction(keys: KeyPair) {\r\n    let amount = this.amount;\r\n    let fee = this.fee;\r\n    if (!this.walletService.isLedgerWallet()) {\r\n      this.toPkh = '';\r\n      this.amount = '';\r\n      this.fee = '';\r\n      this.gas = '';\r\n      this.storage = '';\r\n      this.toMultipleDestinationsString = '';\r\n      this.toMultipleDestinations = [];\r\n      this.showTransactions = [];\r\n    }\r\n    if (!amount) { amount = '0'; }\r\n    if (!fee) { fee = '0'; }\r\n    this.operationService.transfer(this.activeAccount.address, this.transactions, Number(fee), keys).subscribe(\r\n      async (ans: any) => {\r\n        this.sendResponse = ans;\r\n        if (ans.success === true) {\r\n          console.log('Transaction successful ', ans);\r\n          if (ans.payload.opHash) {\r\n            this.messageService.stopSpinner();\r\n            const metadata = { transactions: this.transactions, opHash: ans.payload.opHash };\r\n            this.coordinatorService.boost(this.activeAccount.address, metadata);\r\n            if (this.transactions[0].meta) {\r\n              this.torusNotification(this.transactions[0]);\r\n            }\r\n            for (const transaction of this.transactions) {\r\n              if (this.walletService.addressExists(transaction.to)) {\r\n                this.coordinatorService.boost(transaction.to);\r\n              }\r\n            }\r\n          } else if (this.walletService.wallet instanceof LedgerWallet) {\r\n            await this.requestLedgerSignature();\r\n          }\r\n        } else {\r\n          this.messageService.stopSpinner();\r\n          console.log('Transaction error id ', ans.payload.msg);\r\n          this.messageService.addError(ans.payload.msg, 0);\r\n        }\r\n      },\r\n      err => {\r\n        this.messageService.stopSpinner();\r\n        console.log('Error Message ', JSON.stringify(err));\r\n        if (this.walletService.isLedgerWallet()) {\r\n          this.messageService.addError('Failed to create transaction', 0);\r\n        }\r\n      },\r\n    );\r\n  }\r\n  async requestLedgerSignature() {\r\n    if (this.walletService.wallet instanceof LedgerWallet) {\r\n      await this.messageService.startSpinner('Waiting for Ledger signature...');\r\n      try {\r\n        const op = this.sendResponse.payload.unsignedOperation;\r\n        const signature = await this.ledgerService.signOperation(op, this.walletService.wallet.implicitAccounts[0].derivationPath);\r\n        if (signature) {\r\n          const signedOp = op + signature;\r\n          this.sendResponse.payload.signedOperation = signedOp;\r\n        } else {\r\n          this.ledgerError = 'Failed to sign transaction';\r\n        }\r\n      } finally {\r\n        this.messageService.stopSpinner();\r\n      }\r\n    }\r\n  }\r\n\r\n  async broadCastLedgerTransaction() {\r\n    this.operationService.broadcast(this.sendResponse.payload.signedOperation).subscribe(\r\n      ((ans: any) => {\r\n        this.sendResponse = ans;\r\n        if (ans.success && this.activeAccount) {\r\n          const metadata = { transactions: this.transactions, opHash: ans.payload.opHash };\r\n          if (this.transactions[0].meta) {\r\n            this.torusNotification(this.transactions[0]);\r\n          }\r\n          this.coordinatorService.boost(this.activeAccount.address, metadata);\r\n          if (this.walletService.addressExists(this.transactions[0].to)) {\r\n            this.coordinatorService.boost(this.transactions[0].to);\r\n          }\r\n        } else {\r\n          this.messageService.addError(this.sendResponse.payload.msg, 0);\r\n        }\r\n        console.log('ans: ' + JSON.stringify(ans));\r\n      })\r\n    );\r\n  }\r\n  toggleDestination() {\r\n    this.defaultTransactionParams = zeroTxParams;\r\n    this.sendMax = false;\r\n    this.prevEquiClass = '';\r\n    this.isMultipleDestinations = !this.isMultipleDestinations;\r\n    this.transactions = [];\r\n    this.toMultipleDestinationsString = '';\r\n    this.formInvalid = '';\r\n    this.toPkh = '';\r\n    this.amount = '';\r\n    this.fee = '';\r\n    this.gas = '';\r\n    this.storage = '';\r\n    this.clearTorus();\r\n    this.updateDefaultValues();\r\n  }\r\n  burnAmount(): string {\r\n    const burn = this.storage ? Number(this.storage) / 1000 : this.defaultTransactionParams.storage / 1000;\r\n    if (burn) {\r\n      return burn + ' tez';\r\n    }\r\n    return '';\r\n  }\r\n  clearForm() {\r\n    this.toPkh = '';\r\n    this.amount = '';\r\n    this.fee = '';\r\n    this.gas = '';\r\n    this.storage = '';\r\n    this.advancedForm = false;\r\n    this.sendMax = false;\r\n    this.toMultipleDestinationsString = '';\r\n    this.toMultipleDestinations = [];\r\n    this.isMultipleDestinations = false;\r\n    this.showTransactions = [];\r\n    this.password = '';\r\n    this.pwdValid = '';\r\n    this.formInvalid = '';\r\n    this.sendResponse = null;\r\n    this.ledgerError = '';\r\n    this.showBtn = 'Show More';\r\n    this.defaultTransactionParams = zeroTxParams;\r\n    this.prevEquiClass = '';\r\n    this.latestSimError = '';\r\n    this.clearTorus();\r\n  }\r\n\r\n  checkInput(finalCheck = false): string {\r\n    let result: any;\r\n    if (this.isMultipleDestinations) {\r\n      result = this.invalidInputMultiple(finalCheck);\r\n    } else {\r\n      result = this.invalidInputSingle(finalCheck);\r\n    }\r\n    if (!result && this.latestSimError) {\r\n      result = this.latestSimError;\r\n    }\r\n    return result;\r\n  }\r\n  checkBalance() {\r\n    if (this.transactions.length > 0) {\r\n      if (this.activeAccount && (this.activeAccount instanceof ImplicitAccount)) {\r\n        const max = Big(this.maxToSend(this.activeAccount)).plus(0.000001);\r\n        let amount = Big(0);\r\n        for (const tx of this.transactions) {\r\n          amount = amount.plus(Big(tx.amount));\r\n        }\r\n        if (amount.gt(max)) {\r\n          return this.translate.instant('SENDCOMPONENT.TOOHIGHFEEORAMOUNT');\r\n        }\r\n      } else if (this.activeAccount && (this.activeAccount instanceof OriginatedAccount)) {\r\n        const maxKt = Big(this.maxToSend(this.activeAccount));\r\n        const maxTz = Big(this.maxToSend(this.walletService.wallet.getImplicitAccount(this.activeAccount.pkh))).plus(0.000001);\r\n        let amount = Big(0);\r\n        for (const tx of this.transactions) {\r\n          amount = amount.plus(Big(tx.amount));\r\n        }\r\n        if (amount.gt(maxKt)) {\r\n          return this.translate.instant('SENDCOMPONENT.TOOHIGHAMOUNT');\r\n        } else if ((new Big('0')).gt(maxTz)) {\r\n          return this.translate.instant('SENDCOMPONENT.TOOHIGHFEE');\r\n        }\r\n      }\r\n    }\r\n    return '';\r\n  }\r\n  async activeAccountChange() {\r\n    await this.estimateService.preLoadData(this.activeAccount.pkh, this.activeAccount.pk);\r\n    this.updateDefaultValues();\r\n  }\r\n  updateDefaultValues() {\r\n    if (!this.torusVerifier) {\r\n      this.estimateFees();\r\n      if (this.isMultipleDestinations) {\r\n        this.amount = this.totalAmount().toString();\r\n      }\r\n    }\r\n  }\r\n  async estimateFees() {\r\n    const prevSimError = this.latestSimError;\r\n    this.latestSimError = '';\r\n    if (this.prepTransactions()) {\r\n      const equiClass = this.equiClass(this.activeAccount.address, this.transactions);\r\n      if (this.prevEquiClass !== equiClass) {\r\n        this.latestSimError = '';\r\n        this.prevEquiClass = equiClass;\r\n        this.simSemaphore++; // Put lock on 'Preview and 'Send max'\r\n        const callback = (res) => {\r\n          if (res) {\r\n            if (res.error) {\r\n              this.formInvalid = res.error;\r\n              this.latestSimError = res.error;\r\n            } else {\r\n              this.defaultTransactionParams = res;\r\n              this.formInvalid = '';\r\n              this.latestSimError = '';\r\n              this.updateMaxAmount();\r\n            }\r\n          }\r\n          this.simSemaphore--;\r\n        };\r\n        console.log('simulate...');\r\n        this.estimateService.estimate(JSON.parse(JSON.stringify(this.transactions)), this.activeAccount.address, callback);\r\n      } else {\r\n        this.latestSimError = prevSimError;\r\n        this.formInvalid = this.latestSimError;\r\n      }\r\n    } else {\r\n      this.latestSimError = prevSimError;\r\n      if (this.isMultipleDestinations ? !this.toMultipleDestinationsString : !this.toPkh) {\r\n        this.defaultTransactionParams = zeroTxParams;\r\n        this.updateMaxAmount();\r\n        this.prevEquiClass = '';\r\n      }\r\n    }\r\n  }\r\n  // prevent redundant estimations\r\n  equiClass(sender: string, transactions: SendData[]): string {\r\n    let data = sender;\r\n    for (const tx of transactions) {\r\n      data += tx.to;\r\n    }\r\n    return data;\r\n  }\r\n  batchSpace(txs = 0) {\r\n    if (this.isMultipleDestinations && this.defaultTransactionParams.customLimits && this.defaultTransactionParams.customLimits.length) {\r\n      const numberOfTxs = txs ? txs : this.defaultTransactionParams.customLimits.length;\r\n      const txsLimit = 294 + (this.defaultTransactionParams.reveal ? 0 : 2); // Max transactions in a batch is 296 (294 with a reveal)\r\n      return !txs ? this.numberWithCommas(numberOfTxs + ' / ' + txsLimit) : numberOfTxs <= txsLimit;\r\n\r\n    }\r\n    return !txs ? '' : true;\r\n  }\r\n  recieverIsKT() {\r\n    return (this.inputValidationService.address(this.toPkh) && this.toPkh.slice(0, 2) === 'KT');\r\n  }\r\n  senderIsKT() {\r\n    return (this.activeAccount && (this.activeAccount instanceof OriginatedAccount));\r\n  }\r\n  validateReceiverAddress() {\r\n    if (!this.torusVerifier) {\r\n      if (!this.inputValidationService.address(this.toPkh) && this.toPkh !== '') {\r\n        this.formInvalid = this.translate.instant('SENDCOMPONENT.INVALIDRECEIVERADDRESS');\r\n      } else if (!this.latestSimError) {\r\n        this.formInvalid = ''; // clear error\r\n      }\r\n    } else { // Torus\r\n      this.torusLookupAddress = '';\r\n      /*if (this.torusVerifier === 'google' && !this.inputValidationService.email(this.toPkh) && this.toPkh !== '') {\r\n        this.formInvalid = 'Invalid Google account';\r\n      } else if (this.torusVerifier === 'reddit' && !this.inputValidationService.redditAccount(this.toPkh) && this.toPkh !== '') {\r\n        this.formInvalid = 'Invalid Reddit account';*/\r\n      if (this.torusService.verifierMapKeys.includes(this.torusVerifier)) {\r\n        if (!this.inputValidationService.torusAccount(this.toPkh, this.torusVerifier) && this.toPkh !== '') {\r\n          switch (this.torusVerifier) {\r\n            case 'google':\r\n              this.formInvalid = 'Invalid Google email address';\r\n              break;\r\n            case 'reddit':\r\n              this.formInvalid = 'Invalid Reddit username';\r\n              break;\r\n            case 'twitter':\r\n              this.formInvalid = 'Twitter username begins with \"@\"';\r\n              break;\r\n            default:\r\n              this.formInvalid = 'Unhandled verifier';\r\n          }\r\n        } else {\r\n          if (!this.latestSimError) {\r\n            this.formInvalid = ''; // clear error\r\n          }\r\n          this.torusLookup();\r\n        }\r\n      } else {\r\n        this.formInvalid = 'Unrecognized verifier';\r\n      }\r\n    }\r\n  }\r\n  validateBatch() {\r\n    this.formInvalid = this.checkInput();\r\n  }\r\n  invalidInputSingle(finalCheck: boolean): string {\r\n    if (!this.inputValidationService.address(this.activeAccount.address)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDSENDERADDRESS');\r\n    } else if (!this.inputValidationService.fee(this.fee)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDFEE');\r\n    } else {\r\n      return this.checkReceiverAndAmount(this.toPkh, this.amount, finalCheck);\r\n    }\r\n  }\r\n  checkReceiverAndAmount(toPkh: string, amount: string, finalCheck: boolean): string {\r\n    console.log(toPkh + ' ' + amount);\r\n    if (!this.torusVerifier && (!this.inputValidationService.address(toPkh) || toPkh === this.activeAccount.address)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDRECEIVERADDRESS');\r\n    } else if (this.torusVerifier\r\n      && (!this.inputValidationService.torusAccount(this.toPkh, this.torusVerifier) || this.torusLookupAddress === this.activeAccount.address)) {\r\n      return 'Invalid recipient';\r\n      /*} else if (this.torusVerifier && this.torusVerifier === 'google' && (!this.inputValidationService.email(this.toPkh) || this.torusLookupAddress === this.activeAccount.address)) {\r\n        return 'Invalid email';\r\n      } else if (this.torusVerifier && this.torusVerifier === 'reddit' && (!this.inputValidationService.redditAccount(this.toPkh) || this.torusLookupAddress === this.activeAccount.address)) {\r\n        return 'Invalid Reddit account';*/\r\n    } else if (!this.inputValidationService.amount(amount) ||\r\n      (finalCheck && (((amount === '0') || amount === '') && (toPkh.slice(0, 3) !== 'KT1')))) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDAMOUNT');\r\n    } else if (!this.inputValidationService.gas(this.gas)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDGASLIMIT');\r\n    } else if (!this.inputValidationService.storage(this.storage)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDSTORAGELIMIT');\r\n    }\r\n    return '';\r\n  }\r\n\r\n  // Checking toMultipleDestinationsString and building up toMultipleDestinations[to: string, amount: number]\r\n  invalidInputMultiple(finalCheck = false): string {\r\n    if (!this.inputValidationService.address(this.activeAccount.address)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDSENDERADDRESS');\r\n    } else if (!this.inputValidationService.fee(this.fee)) {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDFEE');\r\n    }\r\n    this.toMultipleDestinations = [];\r\n    const toMultipleDestinationsArray = this.toMultipleDestinationsString.split(';');\r\n    if (toMultipleDestinationsArray.length === 1 && toMultipleDestinationsArray[0].trim() === '') {\r\n      return this.translate.instant('SENDCOMPONENT.INVALIDRECEIVERADDRESS');\r\n    }\r\n    let validationError = '';\r\n    toMultipleDestinationsArray.forEach((item, index) => {\r\n      toMultipleDestinationsArray[index] = item.trim();\r\n      if (toMultipleDestinationsArray[index] !== '') {\r\n        const singleSendDataArray = toMultipleDestinationsArray[index].split(' ');\r\n        if (singleSendDataArray.length === 2) {\r\n          const singleSendDataCheckresult = this.checkReceiverAndAmount(singleSendDataArray[0], singleSendDataArray[1], finalCheck);\r\n          if (singleSendDataCheckresult === '') {\r\n            const gasLimit = this.gas ? Number(this.gas) : this.defaultTransactionParams.customLimits &&\r\n              this.defaultTransactionParams.customLimits.length > index ?\r\n              this.defaultTransactionParams.customLimits[index].gasLimit : this.defaultTransactionParams.gas;\r\n            const storageLimit = this.storage ? Number(this.storage) : this.defaultTransactionParams.customLimits &&\r\n              this.defaultTransactionParams.customLimits.length > index ?\r\n              this.defaultTransactionParams.customLimits[index].storageLimit : this.defaultTransactionParams.storage;\r\n            this.toMultipleDestinations.push({ to: singleSendDataArray[0], amount: Number(singleSendDataArray[1]), gasLimit, storageLimit });\r\n          } else {\r\n            this.toMultipleDestinations = [];\r\n            validationError = singleSendDataCheckresult + '. Transaction ' + (index + 1);\r\n          }\r\n        } else if (singleSendDataArray.length === 1) {\r\n          validationError = this.translate.instant('SENDCOMPONENT.NOADDRESSORAMOUNT') + ' Transaction ' + (index + 1);\r\n        } else {\r\n          validationError = 'Expected semicolon after transaction ' + (index + 1);\r\n        }\r\n      }\r\n    });\r\n    if (!validationError && finalCheck && !this.batchSpace(this.toMultipleDestinations.length)) {\r\n      validationError = this.translate.instant('SENDCOMPONENT.TRANSACTIONSOVERFLOW');\r\n    }\r\n    return validationError;\r\n  }\r\n\r\n  totalAmount(): string {\r\n    let totalSent = Big(0);\r\n    for (const tx of this.transactions) {\r\n      totalSent = totalSent.add(tx.amount);\r\n    }\r\n    return totalSent.toString();\r\n  }\r\n  getTotalCost(display: boolean = false): string {\r\n    const totalFee = Big(this.getTotalFee()).plus(Big(this.getTotalBurn())).toString();\r\n    if (display && totalFee === '0') {\r\n      return '-';\r\n    }\r\n    return totalFee;\r\n  }\r\n  getTotalFee(): number {\r\n    if (this.fee !== '' && Number(this.fee)) {\r\n      return Number(this.fee);\r\n    }\r\n    return Number(this.defaultTransactionParams.fee);\r\n  }\r\n  getTotalBurn(): number {\r\n    if (this.storage !== '' && Number(this.storage)) {\r\n      return Number(Big(this.storage).mul(this.transactions.length).div('1000').toString());\r\n    }\r\n    return Number(this.defaultTransactionParams.burn);\r\n  }\r\n  toggleTransactions() {\r\n    if (this.showTransactions.length === 2) {\r\n      this.showTransactions = this.transactions;\r\n      this.showBtn = 'Show Less';\r\n    } else {\r\n      this.showTransactions = [];\r\n      this.showTransactions.push(this.transactions[0], this.transactions[1]);\r\n      this.showBtn = 'Show More';\r\n    }\r\n  }\r\n  dynSize(): string {\r\n    const size = this.amount ? this.amount.length : 0;\r\n    if (size < 7) {\r\n      return '5';\r\n    } else if (size < 9) {\r\n      return '4';\r\n    } else if (size < 12) {\r\n      return '3';\r\n    } else if (size < 17) {\r\n      return '2';\r\n    }\r\n    return '1.5';\r\n  }\r\n  async verifierChange() {\r\n    this.torusLookupAddress = '';\r\n    console.log('Verifier: ' + this.torusVerifier);\r\n    this.validateReceiverAddress();\r\n    // resimulate?\r\n  }\r\n  async torusLookup() {\r\n    if (!this.torusService.verifierMapKeys.includes(this.torusVerifier)) {\r\n      this.formInvalid = 'Invalid verifier';\r\n      console.log(this.torusService.verifierMapKeys);\r\n      console.log(this.torusVerifier);\r\n    } else if (this.toPkh) {\r\n      this.torusPendingLookup = true;\r\n      this.torusLookupId = this.toPkh;\r\n      const { pkh, twitterId } = await this.torusService.lookupPkh(this.torusVerifier, this.toPkh).catch(e => {\r\n        console.error(e);\r\n        this.formInvalid = e;\r\n        return '';\r\n      });\r\n      this.torusPendingLookup = false;\r\n      if (pkh) {\r\n        this.torusLookupAddress = pkh;\r\n        this.torusTwitterId = twitterId ? twitterId : '';\r\n        this.estimateFees();\r\n        console.log('Torus address', pkh);\r\n      } else {\r\n        this.torusLookupAddress = '';\r\n      }\r\n    }\r\n  }\r\n  torusReady(): boolean {\r\n    return (!this.torusPendingLookup && this.torusLookupAddress !== '');\r\n  }\r\n  clearTorus() {\r\n    this.torusVerifier = '';\r\n    this.torusPendingLookup = false;\r\n    this.torusLookupAddress = '';\r\n    this.torusLookupId = '';\r\n    this.torusTwitterId = '';\r\n  }\r\n  async torusNotification(transaction: SendData) {\r\n    if (transaction.meta) {\r\n      if (transaction.meta.verifier === 'google') {\r\n        this.messageService.emailNotify(transaction.meta.alias, transaction.amount.toString());\r\n        this.lookupService.add(transaction.to, transaction.meta.alias, 2);\r\n      } else if (transaction.meta.verifier === 'reddit') {\r\n        this.messageService.redditNotify(transaction.meta.alias, transaction.amount.toString());\r\n        this.lookupService.add(transaction.to, transaction.meta.alias, 3);\r\n      } else if (transaction.meta.verifier === 'twitter') {\r\n        this.messageService.twitterNotify(transaction.meta.twitterId, transaction.meta.alias, transaction.amount.toString());\r\n        this.lookupService.add(transaction.to, transaction.meta.alias, 4);\r\n      }\r\n    }\r\n  }\r\n  previewAttention(): string {\r\n    if (this.torusLookupId) {\r\n      if (new Big(this.totalAmount()).gt('50')) {\r\n        let recipientKind = '';\r\n        switch (this.torusVerifier) {\r\n          case 'google':\r\n            recipientKind = 'Google account email address';\r\n            break;\r\n          case 'reddit':\r\n            recipientKind = 'Reddit username';\r\n            break;\r\n          case 'twitter':\r\n            recipientKind = 'Twitter handle';\r\n            break;\r\n          default:\r\n            recipientKind = 'information';\r\n        }\r\n        return `Carefully review the recipient's ${recipientKind}! Spelling mistakes can lead to permanent loss of the transferred funds.`;\r\n      }\r\n    }\r\n    return '';\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MessageService } from '../../services/message/message.service';\r\n\r\n@Component({\r\n  selector: 'app-spinner',\r\n  templateUrl: './spinner.component.html',\r\n  styleUrls: ['./spinner.component.scss']\r\n})\r\nexport class SpinnerComponent implements OnInit {\r\n\r\n  constructor(public messageService: MessageService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n}\r\n","<div *ngIf=\"messageService.spinnerOn\" class=\"spinner-wrapper\">\r\n    <div class=\"container\">\r\n        <div class=\"row\">\r\n            <div id=\"loader\">\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"dot\"></div>\r\n                <div class=\"loading\">{{ messageService.spinnerText }}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\n\r\n@Component({\r\n  selector: 'app-start',\r\n  templateUrl: './start.component.html',\r\n  styleUrls: ['./start.component.scss']\r\n})\r\nexport class StartComponent implements OnInit {\r\n  constructor(\r\n    private walletService: WalletService,\r\n    public translate: TranslateService,\r\n    private router: Router\r\n  ) {\r\n  }\r\n  animationActive = true;\r\n\r\n  async ngOnInit() {\r\n    if (this.walletService.wallet) {\r\n      this.router.navigate(['/accounts']);\r\n    }\r\n  }\r\n}\r\n","<div id=\"wrapper\">\r\n  <div>\r\n    <div class=\"top-container\">\r\n      <div class=\"logo-holder\">\r\n        <object class=\"logo\" data=\"../../../assets/img/logo-start.svg\" type=\"image/svg+xml\"></object>\r\n        <p>Kukai is a Tezos web wallet based on three principles: Security, Community and Reliability.</p>\r\n      </div>\r\n      <div id=\"mobile-menu-container\">\r\n        <a routerLink=\"/import/\" class=\"menu-item\">\r\n          <div class=\"content\">\r\n            <H1>Import wallet</H1>\r\n            <div class=\"icon\">\r\n              <img src=\"../../../assets/img/import-wallet.svg\">\r\n            </div>\r\n          </div>\r\n        </a>\r\n        <a routerLink=\"/new-wallet/\" class=\"menu-item\">\r\n          <div class=\"content\">\r\n            <H1>New wallet</H1>\r\n            <div class=\"icon\">\r\n              <img src=\"../../../assets/img/new-wallet.svg\">\r\n            </div>\r\n          </div>\r\n        </a>\r\n        <a routerLink=\"/connect-ledger/\" class=\"menu-item\">\r\n          <div class=\"content\">\r\n            <H1>Connect Ledger</H1>\r\n            <div class=\"icon\">\r\n              <img src=\"../../../assets/img/ledger-wallet.svg\">\r\n            </div>\r\n          </div>\r\n        </a>\r\n        <a routerLink=\"/direct-auth/\" class=\"menu-item\">\r\n          <div class=\"content\">\r\n            <H1>DirectAuth</H1>\r\n            <div class=\"icon\">\r\n              <img src=\"../../../assets/img/circle.svg\">\r\n            </div>\r\n          </div>\r\n        </a>\r\n      </div>\r\n      <div class=\"monk-holder\" [class.animationActive]=\"animationActive\">\r\n        <object class=\"monk\" data=\"../../../assets/img/monk.svg\" type=\"image/svg+xml\"></object>\r\n        <object class=\"monk-shadow\" data=\"../../../assets/img/shadow.svg\" type=\"image/svg+xml\"></object>\r\n      </div>\r\n    </div>\r\n    <div id=\"menu-container\">\r\n      <a routerLink=\"/import/\" class=\"menu-item\">\r\n        <div class=\"icon\">\r\n          <img src=\"../../../assets/img/import-wallet.svg\">\r\n        </div>\r\n        <div class=\"content\">\r\n          <H1>Import wallet</H1>\r\n          <p>Import an existing wallet using your encrypted keystore file, seed words or fundraiser credentials</p>\r\n        </div>\r\n      </a>\r\n      <a routerLink=\"/new-wallet/\" class=\"menu-item\">\r\n        <div class=\"icon\">\r\n          <img src=\"../../../assets/img/new-wallet.svg\">\r\n        </div>\r\n        <div class=\"content\">\r\n          <H1>New wallet</H1>\r\n          <p>Create a new HD wallet on the Tezos blockchain and safely record your seed words to backup your accounts</p>\r\n        </div>\r\n      </a>\r\n      <a routerLink=\"/connect-ledger/\" class=\"menu-item\">\r\n        <div class=\"icon\">\r\n          <img src=\"../../../assets/img/ledger-wallet.svg\">\r\n        </div>\r\n        <div class=\"content\">\r\n          <H1>Connect Ledger</H1>\r\n          <p>Keep your private keys safely on your Ledger device and use Kukai to access your wallet</p>\r\n        </div>\r\n      </a>\r\n      <a routerLink=\"/direct-auth/\" class=\"menu-item\">\r\n        <div class=\"icon\">\r\n          <img src=\"../../../assets/img/circle.svg\">\r\n        </div>\r\n        <div class=\"content\">\r\n          <H1>DirectAuth</H1>\r\n          <p>One-Click login with your Google, Reddit or Twitter account</p>\r\n        </div>\r\n      </a>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"bottom-container\">\r\n  <img class=\"blue-wave\" src=\"../../../assets/img/blue-wave.svg\">\r\n  <div></div>\r\n</div>","<div>\r\n  <div class=\"top\">\r\n    <a routerLink=\"/\" class=\"logo\"><img id=\"logo\" src=\"../../../assets/img/kukai-logo.svg\"></a>\r\n  </div>\r\n  <div class=\"main\">\r\n    <div class=\"main-top\">\r\n      <h1>DirectAuth</h1>\r\n      <p>Your Tezos wallet in one-click. <a class=\"learn-more\" target=\"_blank\" href=\"https://docs.kukai.app/learn-kukai/direct-auth\">Learn more</a></p>\r\n    </div>\r\n    <div class=\"main-mid\">\r\n      <p class=\"signup\">Sign up / in with</p>\r\n      <div class=\"login-options\">\r\n        <div *ngFor=\"let key of torusService.verifierMapKeys\" (click)=\"torusLogin(key)\" class=\"login-option\" (mouseover)=\"activeLogin = key\">\r\n          <ng-container *ngIf=\"key === activeLogin || mobile(); then color else grey\"></ng-container>\r\n          <ng-template #color><img class=\"login-logo color\" src=\"../../../assets/img/torus-login/{{ key }}-color.svg\"></ng-template>\r\n          <ng-template #grey><img class=\"login-logo grey\" src=\"../../../assets/img/torus-login/{{ key }}-grey.svg\"></ng-template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"main-bottom\">\r\n      <p>The following sign-ins involve a third party authenticator: Twitter</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"torus-bg\"><img src=\"../../../assets/img/torus-bg.svg\"></div>","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { TorusService } from '../../services/torus/torus.service';\r\nimport { ImportService } from '../../services/import/import.service';\r\nimport { MessageService } from '../../services/message/message.service';\r\nimport { Router } from '@angular/router';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\n\r\n@Component({\r\n  selector: 'app-torus',\r\n  templateUrl: './torus.component.html',\r\n  styleUrls: ['./torus.component.scss']\r\n})\r\nexport class TorusComponent implements OnInit {\r\n  activeLogin = 'google';\r\n  constructor(\r\n    private walletService: WalletService,\r\n    public torusService: TorusService,\r\n    private importService: ImportService,\r\n    private messageService: MessageService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.torusService.initTorus();\r\n  }\r\n  async torusLogin(verifier: string) {\r\n    await this.messageService.startSpinner('Loading wallet...');\r\n    const { keyPair, userInfo } = await this.torusService.loginTorus(verifier).catch(async (e) =>\r\n      await this.messageService.stopSpinner()\r\n    );\r\n    console.log('login done');\r\n    if (keyPair) {\r\n      await this.importService\r\n        .importWalletFromPk(keyPair.pk, '', { verifier: userInfo.typeOfLogin, id: userInfo.verifierId, name: userInfo.name })\r\n        .then((success: boolean) => {\r\n          if (success) {\r\n            console.log('success');\r\n            if (this.walletService.wallet.implicitAccounts.length === 1 && this.walletService.wallet.implicitAccounts[0].originatedAccounts.length === 0) {\r\n              console.log('single address');\r\n              this.router.navigate([`/account/${this.walletService.wallet.implicitAccounts[0].address}`]);\r\n            } else {\r\n              this.router.navigate(['/accounts']);\r\n            }\r\n            this.messageService.stopSpinner();\r\n          } else {\r\n            this.messageService.addError('Torus import failed');\r\n            this.messageService.stopSpinner();\r\n          }\r\n        });\r\n    } else {\r\n      await this.messageService.stopSpinner();\r\n    }\r\n  }\r\n  mobile(): boolean {\r\n    return (window.innerWidth < 480);\r\n  }\r\n}\r\n","interface Net {\r\n    NAME: string;\r\n    NETWORK: string;\r\n    CSI: { // Conseil Server Info\r\n        url: string;\r\n        apiKey: string;\r\n    };\r\n    NODE_URL: string;\r\n    BLOCK_EXPLORER_URL: string;\r\n}\r\nexport class Constants {\r\n    // Select Testnet or Mainnet\r\n    readonly NET: Net = this.carthagenet();\r\n    private mainnet(): Net {\r\n        return {\r\n            NAME: 'Mainnet',\r\n            NETWORK: 'mainnet',\r\n            CSI: {\r\n                url: 'https://conseil-prod.cryptonomic-infra.tech',\r\n                apiKey: 'klassare'\r\n            },\r\n            NODE_URL: 'https://mainnet-tezos.giganode.io',\r\n            BLOCK_EXPLORER_URL: 'https://tzkt.io'\r\n        };\r\n    }\r\n    private carthagenet(): Net {\r\n        return {\r\n            NAME: 'Testnet / Carthage',\r\n            NETWORK: 'carthagenet',\r\n            CSI: {\r\n                url: 'https://conseil-dev.cryptonomic-infra.tech',\r\n                apiKey: 'klassare'\r\n            },\r\n            NODE_URL: 'https://testnet-tezos.giganode.io',\r\n            BLOCK_EXPLORER_URL: 'https://carthage.tzkt.io'\r\n        };\r\n    }\r\n}\r\n","export interface KeyPair {\r\n    sk: string|null;\r\n    pk: string|null;\r\n    pkh: string;\r\n}\r\nexport interface Wallet {\r\n  seed: null|string;\r\n  salt: null|string;\r\n  pk?: string;\r\n  encryptionVersion: number|null;\r\n  type: WalletType;\r\n  balance: Balance;\r\n  XTZrate: number | null;\r\n  accounts: Account[];\r\n  derivationPath?: string;\r\n}\r\nexport interface Account {\r\n  pkh: string|null;\r\n  delegate: string;\r\n  balance: Balance;\r\n  numberOfActivites: number;\r\n  activities: Activity[];\r\n}\r\nexport interface Activity {\r\n  hash: string;\r\n  block: string;\r\n  source: string;\r\n  destination: string;\r\n  amount: number;\r\n  fee: number;\r\n  timestamp: null|Date;\r\n  type: string;\r\n}\r\nexport interface Balance {\r\n  balanceXTZ: number | null;\r\n  pendingXTZ: number | null;\r\n  balanceFiat: number | null;\r\n  pendingFiat: number | null;\r\n}\r\nexport enum WalletType {\r\n  FullWallet,\r\n  ViewOnlyWallet,\r\n  ObserverWallet,\r\n  LedgerWallet,\r\n  HdWallet\r\n}\r\nexport interface Baker {\r\n  baker_name: string;\r\n  image: string;\r\n  rolls: number;\r\n  identity: string;\r\n  vote: string;\r\n  vote2: string;\r\n  // vote: []\r\n}\r\nexport interface Vote {\r\n  voting_period: string;\r\n  period_kind: PeriodKind;\r\n  proposal_hash: string[];\r\n  proposal_alias: string[];\r\n  votes: number[];\r\n  operation: string[];\r\n}\r\nexport interface Period {\r\n  amendment: string;\r\n  period: number;\r\n  period_kind: string;\r\n  proposal_hash: string[];\r\n  proposal_alias: string[];\r\n  start_level: number;\r\n  end_level: number;\r\n  level: number;\r\n  progress: number;\r\n  remaining: number;\r\n}\r\nexport interface ParticipationPerPeriod {\r\n  proposal?: [{\r\n    hash: string;\r\n    alias: string;\r\n    count: number;\r\n    votes: number;\r\n  }];\r\n  unused_count: number;\r\n  total_count: number;\r\n  unused_votes: number;\r\n  total_votes: number;\r\n}\r\nexport interface Ballot {\r\n  proposal: string;\r\n  nb_yay: number;\r\n  nb_nay: number;\r\n  nb_pass: number;\r\n  vote_yay: number;\r\n  vote_nay: number;\r\n  vote_pass: number;\r\n}\r\nexport enum PeriodKind {\r\n  Proposal,\r\n  Exploration,\r\n  Testing,\r\n  Promotion\r\n}\r\nexport interface DefaultTransactionParams {\r\n  gas: number;\r\n  storage: number;\r\n  fee: number;\r\n  burn: number;\r\n  reveal?: boolean;\r\n  customLimits?: {\r\n    gasLimit: number;\r\n    storageLimit: number;\r\n  }[];\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { BAKERSLIST } from '../../data/bakers-list';\r\n\r\n@Pipe({\r\n    name: 'delegatorName'\r\n})\r\nexport class DelegatorNamePipe implements PipeTransform {\r\n    transform(pkh: string): string {\r\n        if (!pkh) {\r\n            return '';\r\n        }\r\n        const index = BAKERSLIST.findIndex(b => b.identity === pkh);\r\n        if (index !== -1) {\r\n            return BAKERSLIST[index].baker_name;\r\n        } else {\r\n            return pkh;\r\n        }\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n/*\r\n    Informs users on most common errors\r\n    RPC errors doc: http://tezos.gitlab.io/mainnet/api/errors.html\r\n*/\r\n\r\n@Pipe({\r\n  name: 'errorHandling',\r\n})\r\nexport class ErrorHandlingPipe implements PipeTransform {\r\n  ERROR_LIST = [\r\n    {\r\n      msg: 'A fatal assertion failed',\r\n      id: 'proto.alpha.assertion',\r\n    },\r\n    {\r\n      msg: 'The block\\'s proof-of-work stamp is insufficient',\r\n      id: 'proto.alpha.baking.insufficient_proof_of_work',\r\n    },\r\n    {\r\n      msg: 'A block was not signed with the expected private key.',\r\n      id: 'proto.alpha.baking.invalid_block_signature',\r\n    },\r\n    {\r\n      msg: 'The gap of fitness is out of bounds',\r\n      id: 'proto.alpha.baking.invalid_fitness_gap',\r\n    },\r\n    {\r\n      msg: 'The block\\'s signature is invalid',\r\n      id: 'proto.alpha.baking.invalid_signature',\r\n    },\r\n    {\r\n      msg:\r\n        'The block timestamp is before the first slot for this baker at this level',\r\n      id: 'proto.alpha.baking.timestamp_too_early',\r\n    },\r\n    {\r\n      msg: 'The operation is signed by a delegate without endorsement rights.',\r\n      id: 'proto.alpha.baking.unexpected_endorsement',\r\n    },\r\n    {\r\n      msg: 'A double-baking evidence is inconsistent (two distinct delegates)',\r\n      id: 'proto.alpha.block.inconsistent_double_baking_evidence',\r\n    },\r\n    {\r\n      msg:\r\n        'A double-endorsement evidence is inconsistent (two distinct delegates)',\r\n      id: 'proto.alpha.block.inconsistent_double_endorsement_evidence',\r\n    },\r\n    {\r\n      msg: 'The block header has invalid commitment.',\r\n      id: 'proto.alpha.block.invalid_commitment',\r\n    },\r\n    {\r\n      msg: 'A double-baking evidence is inconsistent (two distinct level)',\r\n      id: 'proto.alpha.block.invalid_double_baking_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-endorsement evidence is malformed',\r\n      id: 'proto.alpha.block.invalid_double_endorsement_evidence',\r\n    },\r\n    {\r\n      msg: 'A manager operation should not contain more than one revelation',\r\n      id: 'proto.alpha.block.multiple_revelation',\r\n    },\r\n    {\r\n      msg: 'A double-baking evidence is outdated.',\r\n      id: 'proto.alpha.block.outdated_double_baking_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-endorsement evidence is outdated.',\r\n      id: 'proto.alpha.block.outdated_double_endorsement_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-baking evidence is in the future',\r\n      id: 'proto.alpha.block.too_early_double_baking_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-endorsement evidence is in the future',\r\n      id: 'proto.alpha.block.too_early_double_endorsement_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-baking evidence is unrequired',\r\n      id: 'proto.alpha.block.unrequired_double_baking_evidence',\r\n    },\r\n    {\r\n      msg: 'A double-endorsement evidence is unrequired',\r\n      id: 'proto.alpha.block.unrequired_double_endorsement_evidence',\r\n    },\r\n    {\r\n      msg: 'Unexpected JSON object.',\r\n      id: 'proto.alpha.context.failed_to_decode_parameter',\r\n    },\r\n    {\r\n      msg: 'The protocol parameters are not valid JSON.',\r\n      id: 'proto.alpha.context.failed_to_parse_parameter',\r\n    },\r\n    {\r\n      msg:\r\n        'An error that should never happen unless something has been deleted or corrupted in the database.',\r\n      id: 'proto.alpha.context.storage_error',\r\n    },\r\n    {\r\n      msg: 'An operation tried to spend more tokens than the contract has',\r\n      id: 'proto.alpha.contract.balance_too_low',\r\n    },\r\n    {\r\n      msg: 'The storage fee is higher than the contract balance',\r\n      id: 'proto.alpha.contract.cannot_pay_storage_fee',\r\n    },\r\n    {\r\n      msg: 'An operation assumed a contract counter in the future',\r\n      id: 'proto.alpha.contract.counter_in_the_future',\r\n    },\r\n    {\r\n      msg: 'An operation assumed a contract counter in the past',\r\n      id: 'proto.alpha.contract.counter_in_the_past',\r\n    },\r\n    {\r\n      msg: 'Forbidden to credit 0ꜩ to a contract without code.',\r\n      id: 'proto.alpha.contract.empty_transaction',\r\n    },\r\n    {\r\n      msg: 'Unexpected contract storage error',\r\n      id: 'proto.alpha.contract.failure',\r\n    },\r\n    {\r\n      msg: 'A malformed contract notation was given to an RPC or in a script.',\r\n      id: 'proto.alpha.contract.invalid_contract_notation',\r\n    },\r\n    {\r\n      msg: 'Change is not enough to consume a roll.',\r\n      id: 'proto.alpha.contract.manager.consume_roll_change',\r\n    },\r\n    {\r\n      msg:\r\n        'A revealed manager public key is inconsistent with the announced hash',\r\n      id: 'proto.alpha.contract.manager.inconsistent_hash',\r\n    },\r\n    {\r\n      msg:\r\n        'A provided manager public key is different with the public key stored in the contract',\r\n      id: 'proto.alpha.contract.manager.inconsistent_public_key',\r\n    },\r\n    {\r\n      msg: 'Delegate has no roll.',\r\n      id: 'proto.alpha.contract.manager.no_roll_for_delegate',\r\n    },\r\n    {\r\n      msg:\r\n        'A snapshot of the rolls distribution does not exist for this cycle.',\r\n      id: 'proto.alpha.contract.manager.no_roll_snapshot_for_cycle',\r\n    },\r\n    {\r\n      msg: 'A contract cannot be delegated to an unregistered delegate',\r\n      id: 'proto.alpha.contract.manager.unregistered_delegate',\r\n    },\r\n    {\r\n      msg:\r\n        'A contract handle is not present in the context (either it never was or it has been destroyed)',\r\n      id: 'proto.alpha.contract.non_existing_contract',\r\n    },\r\n    {\r\n      msg: 'One tried to revealed twice a manager public key',\r\n      id: 'proto.alpha.contract.previously_revealed_key',\r\n    },\r\n    {\r\n      msg:\r\n        'One tried to apply a manager operation without revealing the manager public key',\r\n      id: 'proto.alpha.contract.unrevealed_key',\r\n    },\r\n    {\r\n      msg: 'An operation tried to spend tokens from an unspendable contract',\r\n      id: 'proto.alpha.contract.unspendable_contract',\r\n    },\r\n    {\r\n      msg: 'Useless delegate reactivation',\r\n      id: 'proto.alpha.delegate.already_active',\r\n    },\r\n    {\r\n      msg: 'Cannot freeze deposit when the balance is too low',\r\n      id: 'proto.alpha.delegate.balance_too_low_for_deposit',\r\n    },\r\n    {\r\n      msg: 'Cannot register a delegate when its implicit account is empty',\r\n      id: 'proto.alpha.delegate.empty_delegate_account',\r\n    },\r\n    {\r\n      msg: 'Tried to unregister a delegate',\r\n      id: 'proto.alpha.delegate.no_deletion',\r\n    },\r\n    {\r\n      msg: 'Contract already delegated to the given delegate',\r\n      id: 'proto.alpha.delegate.unchanged',\r\n    },\r\n    {\r\n      msg: 'Proposal lists cannot be empty.',\r\n      id: 'proto.alpha.empty_proposal',\r\n    },\r\n    {\r\n      msg:\r\n        'The sum of gas consumed by all the operations in the block exceeds the hard gas limit per block',\r\n      id: 'proto.alpha.gas_exhausted.block',\r\n    },\r\n    {\r\n      msg:\r\n        'Gas limit was not high enough to deserialize the transaction parameters or origination script code or initial storage, making the operation impossible to parse within the provided gas bounds.',\r\n      id: 'proto.alpha.gas_exhausted.init_deserialize',\r\n    },\r\n    {\r\n      msg:\r\n        'A script or one of its callee took more time than the operation said it would',\r\n      id: 'proto.alpha.gas_exhausted.operation',\r\n    },\r\n    {\r\n      msg: 'A transaction tried to exceed the hard limit on gas',\r\n      id: 'proto.alpha.gas_limit_too_high',\r\n    },\r\n    {\r\n      msg: 'No manager operations are allowed on an empty implicit contract.',\r\n      id: 'proto.alpha.implicit.empty_implicit_contract',\r\n    },\r\n    {\r\n      msg: 'Emptying an implicit delegated account is not allowed.',\r\n      id: 'proto.alpha.implicit.empty_implicit_delegated_contract',\r\n    },\r\n    {\r\n      msg:\r\n        'The number of endorsements must be non-negative and at most the endosers_per_block constant.',\r\n      id: 'proto.alpha.incorrect_number_of_endorsements',\r\n    },\r\n    {\r\n      msg: 'Block priority must be non-negative.',\r\n      id: 'proto.alpha.incorrect_priority',\r\n    },\r\n    {\r\n      msg: 'An internal operation was emitted twice by a script',\r\n      id: 'proto.alpha.internal_operation_replay',\r\n    },\r\n    {\r\n      msg: 'A compile-time constant was invalid for its expected form.',\r\n      id: 'proto.alpha.invalidSyntacticConstantError',\r\n    },\r\n    {\r\n      msg: 'Negative multiple of periods are not allowed.',\r\n      id: 'proto.alpha.invalid_arg',\r\n    },\r\n    {\r\n      msg:\r\n        'Could not deserialize some piece of data from its binary representation',\r\n      id: 'proto.alpha.invalid_binary_format',\r\n    },\r\n    {\r\n      msg: 'Fitness representation should be exactly 8 bytes long.',\r\n      id: 'proto.alpha.invalid_fitness',\r\n    },\r\n    {\r\n      msg: 'Ballot provided for a proposal that is not the current one.',\r\n      id: 'proto.alpha.invalid_proposal',\r\n    },\r\n    {\r\n      msg: 'Period is negative.',\r\n      id: 'proto.alpha.malformed_period',\r\n    },\r\n    {\r\n      msg:\r\n        'Either no parameter was supplied to a contract with a non-unit parameter type, a non-unit parameter was passed to an account, or a parameter was supplied of the wrong type',\r\n      id: 'proto.alpha.michelson_v1.bad_contract_parameter',\r\n    },\r\n    {\r\n      msg: 'Unexpected stack at the end of a lambda or script.',\r\n      id: 'proto.alpha.michelson_v1.bad_return',\r\n    },\r\n    {\r\n      msg: 'The stack has an unexpected length or contents.',\r\n      id: 'proto.alpha.michelson_v1.bad_stack',\r\n    },\r\n    {\r\n      msg:\r\n        'The type of a stack item is unexpected (this error is always accompanied by a more precise one).',\r\n      id: 'proto.alpha.michelson_v1.bad_stack_item',\r\n    },\r\n    {\r\n      msg: 'The error was too big to be serialized with the provided gas',\r\n      id: 'proto.alpha.michelson_v1.cannot_serialize_error',\r\n    },\r\n    {\r\n      msg:\r\n        'Argument of FAILWITH was too big to be serialized with the provided gas',\r\n      id: 'proto.alpha.michelson_v1.cannot_serialize_failure',\r\n    },\r\n    {\r\n      msg:\r\n        'Execution trace with stacks was to big to be serialized with the provided gas',\r\n      id: 'proto.alpha.michelson_v1.cannot_serialize_log',\r\n    },\r\n    {\r\n      msg:\r\n        'The returned storage was too big to be serialized with the provided gas',\r\n      id: 'proto.alpha.michelson_v1.cannot_serialize_storage',\r\n    },\r\n    {\r\n      msg:\r\n        'A non comparable type was used in a place where only comparable types are accepted.',\r\n      id: 'proto.alpha.michelson_v1.comparable_type_expected',\r\n    },\r\n    {\r\n      msg:\r\n        'A deprecated instruction usage is disallowed in newly created contracts',\r\n      id: 'proto.alpha.michelson_v1.deprecated_instruction',\r\n    },\r\n    {\r\n      msg: 'Two entrypoints have the same name.',\r\n      id: 'proto.alpha.michelson_v1.duplicate_entrypoint',\r\n    },\r\n    {\r\n      msg: 'Map literals cannot contain duplicated keys',\r\n      id: 'proto.alpha.michelson_v1.duplicate_map_keys',\r\n    },\r\n    {\r\n      msg: 'When parsing script, a field was found more than once',\r\n      id: 'proto.alpha.michelson_v1.duplicate_script_field',\r\n    },\r\n    {\r\n      msg:\r\n        'Set literals cannot contain duplicate elements, but a duplicae was found while parsing.',\r\n      id: 'proto.alpha.michelson_v1.duplicate_set_values_in_literal',\r\n    },\r\n    {\r\n      msg: 'An entrypoint name exceeds the maximum length of 31 characters.',\r\n      id: 'proto.alpha.michelson_v1.entrypoint_name_too_long',\r\n    },\r\n    {\r\n      msg: 'There is non trivial garbage code after a FAIL instruction.',\r\n      id: 'proto.alpha.michelson_v1.fail_not_in_tail_position',\r\n    },\r\n    {\r\n      msg:\r\n        'The toplevel error thrown when trying to parse a type expression (always followed by more precise errors).',\r\n      id: 'proto.alpha.michelson_v1.ill_formed_type',\r\n    },\r\n    {\r\n      msg:\r\n        'The toplevel error thrown when trying to typecheck a contract code against given input, output and storage types (always followed by more precise errors).',\r\n      id: 'proto.alpha.michelson_v1.ill_typed_contract',\r\n    },\r\n    {\r\n      msg:\r\n        'The toplevel error thrown when trying to typecheck a data expression against a given type (always followed by more precise errors).',\r\n      id: 'proto.alpha.michelson_v1.ill_typed_data',\r\n    },\r\n    {\r\n      msg: 'The annotations on two types could not be merged',\r\n      id: 'proto.alpha.michelson_v1.inconsistent_annotations',\r\n    },\r\n    {\r\n      msg:\r\n        'The specified field does not match the field annotation in the type',\r\n      id: 'proto.alpha.michelson_v1.inconsistent_field_annotations',\r\n    },\r\n    {\r\n      msg:\r\n        'A stack was of an unexpected length (this error is always in the context of a located error).',\r\n      id: 'proto.alpha.michelson_v1.inconsistent_stack_lengths',\r\n    },\r\n    {\r\n      msg: 'The two types contain annotations that do not match',\r\n      id: 'proto.alpha.michelson_v1.inconsistent_type_annotations',\r\n    },\r\n    {\r\n      msg:\r\n        'This is the basic type clash error, that appears in several places where the equality of two types have to be proven, it is always accompanied with another error that provides more context.',\r\n      id: 'proto.alpha.michelson_v1.inconsistent_types',\r\n    },\r\n    {\r\n      msg:\r\n        'In a script or data expression, a primitive was applied to an unsupported number of arguments.',\r\n      id: 'proto.alpha.michelson_v1.invalid_arity',\r\n    },\r\n    {\r\n      msg:\r\n        'A script or data expression references a big_map that does not exist or assumes a wrong type for an existing big_map.',\r\n      id: 'proto.alpha.michelson_v1.invalid_big_map',\r\n    },\r\n    {\r\n      msg: 'A data expression was invalid for its expected type.',\r\n      id: 'proto.alpha.michelson_v1.invalid_constant',\r\n    },\r\n    {\r\n      msg:\r\n        'A script or data expression references a contract that does not exist or assumes a wrong type for an existing contract.',\r\n      id: 'proto.alpha.michelson_v1.invalid_contract',\r\n    },\r\n    {\r\n      msg:\r\n        'In a script or data expression, an expression was of the wrong kind (for instance a string where only a primitive applications can appear).',\r\n      id: 'proto.alpha.michelson_v1.invalid_expression_kind',\r\n    },\r\n    {\r\n      msg:\r\n        'The body of an ITER instruction must result in the same stack type as before the ITER.',\r\n      id: 'proto.alpha.michelson_v1.invalid_iter_body',\r\n    },\r\n    {\r\n      msg:\r\n        'FAIL cannot be the only instruction in the body. The propper type of the return list cannot be inferred.',\r\n      id: 'proto.alpha.michelson_v1.invalid_map_block_fail',\r\n    },\r\n    {\r\n      msg: 'The body of a map block did not match the expected type',\r\n      id: 'proto.alpha.michelson_v1.invalid_map_body',\r\n    },\r\n    {\r\n      msg: 'In a script or data expression, a primitive was unknown.',\r\n      id: 'proto.alpha.michelson_v1.invalid_primitive',\r\n    },\r\n    {\r\n      msg:\r\n        'In a script or data expression, a primitive name is unknown or has a wrong case.',\r\n      id: 'proto.alpha.michelson_v1.invalid_primitive_name',\r\n    },\r\n    {\r\n      msg:\r\n        'In a script or data expression, a primitive name is neither uppercase, lowercase or capitalized.',\r\n      id: 'proto.alpha.michelson_v1.invalid_primitive_name_case',\r\n    },\r\n    {\r\n      msg:\r\n        'In a script or data expression, a primitive was of the wrong namespace.',\r\n      id: 'proto.alpha.michelson_v1.invalid_primitive_namespace',\r\n    },\r\n    {\r\n      msg: 'When parsing script, a field was expected, but not provided',\r\n      id: 'proto.alpha.michelson_v1.missing_script_field',\r\n    },\r\n    {\r\n      msg: 'An entrypoint was not found when calling a contract.',\r\n      id: 'proto.alpha.michelson_v1.no_such_entrypoint',\r\n    },\r\n    {\r\n      msg: 'Toplevel error for all runtime script errors',\r\n      id: 'proto.alpha.michelson_v1.runtime_error',\r\n    },\r\n    {\r\n      msg: 'A FAIL instruction was reached due to the detection of an overflow',\r\n      id: 'proto.alpha.michelson_v1.script_overflow',\r\n    },\r\n    {\r\n      msg: 'A FAILWITH instruction was reached',\r\n      id: 'proto.alpha.michelson_v1.script_rejected',\r\n    },\r\n    {\r\n      msg: 'A SELF instruction was encountered in a lambda expression.',\r\n      id: 'proto.alpha.michelson_v1.self_in_lambda',\r\n    },\r\n    {\r\n      msg: 'An instruction generated a type larger than the limit.',\r\n      id: 'proto.alpha.michelson_v1.type_too_large',\r\n    },\r\n    {\r\n      msg:\r\n        'A binary operation is called on operands of types over which it is not defined.',\r\n      id: 'proto.alpha.michelson_v1.undefined_binop',\r\n    },\r\n    {\r\n      msg:\r\n        'A unary operation is called on an operand of type over which it is not defined.',\r\n      id: 'proto.alpha.michelson_v1.undefined_unop',\r\n    },\r\n    {\r\n      msg: 'A node in the syntax tree was impropperly annotated',\r\n      id: 'proto.alpha.michelson_v1.unexpected_annotation',\r\n    },\r\n    {\r\n      msg:\r\n        'When parsing script, a big_map type was found in a position where it could end up stored inside a big_map, which is forbidden for now.',\r\n      id: 'proto.alpha.michelson_v1.unexpected_bigmap',\r\n    },\r\n    {\r\n      msg:\r\n        'When parsing script, a contract type was found in the storage or parameter field.',\r\n      id: 'proto.alpha.michelson_v1.unexpected_contract',\r\n    },\r\n    {\r\n      msg:\r\n        'When parsing script, an operation type was found in the storage or parameter field.',\r\n      id: 'proto.alpha.michelson_v1.unexpected_operation',\r\n    },\r\n    {\r\n      msg: 'Annotations of the same kind must be grouped',\r\n      id: 'proto.alpha.michelson_v1.ungrouped_annotations',\r\n    },\r\n    {\r\n      msg: 'In a script or data expression, a primitive was unknown.',\r\n      id: 'proto.alpha.michelson_v1.unknown_primitive_name',\r\n    },\r\n    {\r\n      msg:\r\n        'At the join point at the end of two code branches the stacks have inconsistent lengths or contents.',\r\n      id: 'proto.alpha.michelson_v1.unmatched_branches',\r\n    },\r\n    {\r\n      msg: 'Map keys must be in strictly increasing order',\r\n      id: 'proto.alpha.michelson_v1.unordered_map_literal',\r\n    },\r\n    {\r\n      msg: 'Set values must be in strictly increasing order',\r\n      id: 'proto.alpha.michelson_v1.unordered_set_literal',\r\n    },\r\n    {\r\n      msg: 'An entrypoint in the contract is not reachable.',\r\n      id: 'proto.alpha.michelson_v1.unreachable_entrypoint',\r\n    },\r\n    {\r\n      msg: 'Duplicated revelation for a nonce.',\r\n      id: 'proto.alpha.nonce.previously_revealed',\r\n    },\r\n    {\r\n      msg: 'Nonce revelation happens before cycle end',\r\n      id: 'proto.alpha.nonce.too_early_revelation',\r\n    },\r\n    {\r\n      msg: 'Nonce revelation happens too late',\r\n      id: 'proto.alpha.nonce.too_late_revelation',\r\n    },\r\n    {\r\n      msg: 'The provided nonce is inconsistent with the committed nonce hash.',\r\n      id: 'proto.alpha.nonce.unexpected',\r\n    },\r\n    {\r\n      msg: 'The operation is ill-formed or for another protocol version',\r\n      id: 'proto.alpha.operation.cannot_parse',\r\n    },\r\n    {\r\n      msg: 'Two endorsements received from same delegate',\r\n      id: 'proto.alpha.operation.duplicate_endorsement',\r\n    },\r\n    {\r\n      msg:\r\n        'The given key and secret do not correspond to any existing preallocated contract',\r\n      id: 'proto.alpha.operation.invalid_activation',\r\n    },\r\n    {\r\n      msg:\r\n        'The level of an endorsement is inconsistent with the provided block hash.',\r\n      id: 'proto.alpha.operation.invalid_endorsement_level',\r\n    },\r\n    {\r\n      msg:\r\n        'The operation signature is ill-formed or has been made with the wrong public key',\r\n      id: 'proto.alpha.operation.invalid_signature',\r\n    },\r\n    {\r\n      msg:\r\n        'The operation is of a kind that must be signed, but the signature is missing',\r\n      id: 'proto.alpha.operation.missing_signature',\r\n    },\r\n    {\r\n      msg:\r\n        'The block being validated does not include the required minimum number of endorsements for this priority.',\r\n      id: 'proto.alpha.operation.not_enought_endorsements_for_priority',\r\n    },\r\n    {\r\n      msg:\r\n        'Trying to include an endorsement in a block that is not the successor of the endorsed one',\r\n      id: 'proto.alpha.operation.wrong_endorsement_predecessor',\r\n    },\r\n    {\r\n      msg:\r\n        'Trying to onclude a proposal or ballot meant for another voting period',\r\n      id: 'proto.alpha.operation.wrong_voting_period',\r\n    },\r\n    {\r\n      msg: 'The requested seed is not available',\r\n      id: 'proto.alpha.seed.unknown_seed',\r\n    },\r\n    {\r\n      msg:\r\n        'A script or one of its callee wrote more bytes than the operation said it would',\r\n      id: 'proto.alpha.storage_exhausted.operation',\r\n    },\r\n    {\r\n      msg: 'A transaction tried to exceed the hard limit on storage',\r\n      id: 'proto.alpha.storage_limit_too_high',\r\n    },\r\n    {\r\n      msg: 'An addition of two tez amounts overflowed',\r\n      id: 'proto.alpha.tez.addition_overflow',\r\n    },\r\n    {\r\n      msg: 'Multiplication of a tez amount by a non positive integer',\r\n      id: 'proto.alpha.tez.invalid_divisor',\r\n    },\r\n    {\r\n      msg: 'A multiplication of a tez amount by an integer overflowed',\r\n      id: 'proto.alpha.tez.multiplication_overflow',\r\n    },\r\n    {\r\n      msg: 'Multiplication of a tez amount by a negative integer',\r\n      id: 'proto.alpha.tez.negative_multiplicator',\r\n    },\r\n    {\r\n      msg: 'An subtraction of two tez amounts underflowed',\r\n      id: 'proto.alpha.tez.subtraction_underflow',\r\n    },\r\n    {\r\n      msg: 'Overflow when adding timestamps.',\r\n      id: 'proto.alpha.timestamp_add',\r\n    },\r\n    {\r\n      msg: 'Substracting timestamps resulted in negative period.',\r\n      id: 'proto.alpha.timestamp_sub',\r\n    },\r\n    {\r\n      msg:\r\n        'A transaction exceeded the hard limit of internal operations it can emit',\r\n      id: 'proto.alpha.too_many_internal_operations',\r\n    },\r\n    {\r\n      msg: 'The delegate reached the maximum number of allowed proposals.',\r\n      id: 'proto.alpha.too_many_proposals',\r\n    },\r\n    {\r\n      msg:\r\n        'The delegate provided for the ballot is not in the voting listings.',\r\n      id: 'proto.alpha.unauthorized_ballot',\r\n    },\r\n    {\r\n      msg:\r\n        'The delegate provided for the proposal is not in the voting listings.',\r\n      id: 'proto.alpha.unauthorized_proposal',\r\n    },\r\n    {\r\n      msg:\r\n        'An origination was attemped out of the scope of a manager operation',\r\n      id: 'proto.alpha.undefined_operation_nonce',\r\n    },\r\n    {\r\n      msg: 'Ballot recorded outside of a voting period.',\r\n      id: 'proto.alpha.unexpected_ballot',\r\n    },\r\n    {\r\n      msg: 'Level must be non-negative.',\r\n      id: 'proto.alpha.unexpected_level',\r\n    },\r\n    {\r\n      msg: 'Nonce length is incorrect.',\r\n      id: 'proto.alpha.unexpected_nonce_length',\r\n    },\r\n    {\r\n      msg: 'Proposal recorded outside of a proposal period.',\r\n      id: 'proto.alpha.unexpected_proposal',\r\n    },\r\n    {\r\n      msg: 'Block locator is invalid.',\r\n      id: 'node.bootstrap_pipeline.invalid_locator',\r\n    },\r\n    {\r\n      msg: 'Block locator is too short.',\r\n      id: 'node.bootstrap_pipeline.too_short_locator',\r\n    },\r\n    {\r\n      msg: 'IO error: connection with a peer is closed.',\r\n      id: 'node.p2p_io_scheduler.connection_closed',\r\n    },\r\n    {\r\n      msg: 'Fail to connect with a peer: a connection is already established.',\r\n      id: 'node.p2p_pool.connected',\r\n    },\r\n    {\r\n      msg: 'Connection was refused.',\r\n      id: 'node.p2p_pool.connection_refused',\r\n    },\r\n    {\r\n      msg: 'The peer identity you tried to connect is banned.',\r\n      id: 'node.p2p_pool.peer_banned',\r\n    },\r\n    {\r\n      msg: 'Fail to connect with a peer: a connection is already pending.',\r\n      id: 'node.p2p_pool.pending_connection',\r\n    },\r\n    {\r\n      msg: 'The address you tried to connect is banned.',\r\n      id: 'node.p2p_pool.point_banned',\r\n    },\r\n    {\r\n      msg: 'Node is in private mode.',\r\n      id: 'node.p2p_pool.private_mode',\r\n    },\r\n    {\r\n      msg: 'Connection to peer was rejected by us.',\r\n      id: 'node.p2p_pool.rejected',\r\n    },\r\n    {\r\n      msg: 'Too many connections.',\r\n      id: 'node.p2p_pool.too_many_connections',\r\n    },\r\n    {\r\n      msg: 'An error occurred while deciphering.',\r\n      id: 'node.p2p_socket.decipher_error',\r\n    },\r\n    {\r\n      msg: 'An error occurred while decoding.',\r\n      id: 'node.p2p_socket.decoding_error',\r\n    },\r\n    {\r\n      msg: 'An error occurred while encoding.',\r\n      id: 'node.p2p_socket.encoding_error',\r\n    },\r\n    {\r\n      msg: 'Rejected peer connection: invalid authentication.',\r\n      id: 'node.p2p_socket.invalid_auth',\r\n    },\r\n    {\r\n      msg: 'Size of chunks is not valid.',\r\n      id: 'node.p2p_socket.invalid_chunks_size',\r\n    },\r\n    {\r\n      msg: 'The size of the message to be written is invalid.',\r\n      id: 'node.p2p_socket.invalid_message_size',\r\n    },\r\n    {\r\n      msg: 'Remote peer is actually yourself.',\r\n      id: 'node.p2p_socket.myself',\r\n    },\r\n    {\r\n      msg: 'Remote peer cannot be authenticated: not enough proof of work.',\r\n      id: 'node.p2p_socket.not_enough_proof_of_work',\r\n    },\r\n    {\r\n      msg:\r\n        'Rejected peer connection: The peer rejected the socket connection by Nack with a list of alternative peers.',\r\n      id: 'node.p2p_socket.rejected_by_nack',\r\n    },\r\n    {\r\n      msg:\r\n        'Rejected peer connection: rejected socket connection as we have no common network protocol with the peer.',\r\n      id: 'node.p2p_socket.rejected_no_common_protocol',\r\n    },\r\n    {\r\n      msg: 'Rejected peer connection: rejected socket connection.',\r\n      id: 'node.p2p_socket.rejected_socket_connection',\r\n    },\r\n    {\r\n      msg: 'Rejecting peer connection with motive.',\r\n      id: 'node.p2p_socket.rejecting_incoming',\r\n    },\r\n    {\r\n      msg: 'Known invalid block found in the peer\\'s chain',\r\n      id: 'node.peer_validator.known_invalid',\r\n    },\r\n    {\r\n      msg: 'Unknown ancestor block found in the peer\\'s chain',\r\n      id: 'node.peer_validator.unknown_ancestor',\r\n    },\r\n    {\r\n      msg: 'The block was annotated with a time too far in the future.',\r\n      id: 'node.prevalidation.future_block_header',\r\n    },\r\n    {\r\n      msg: 'The operation size is bigger than allowed.',\r\n      id: 'node.prevalidation.oversized_operation',\r\n    },\r\n    {\r\n      msg:\r\n        'Raised when an operation has not been parsed correctly during prevalidation.',\r\n      id: 'node.prevalidation.parse_error',\r\n    },\r\n    {\r\n      msg: 'The prevalidation context is full.',\r\n      id: 'node.prevalidation.too_many_operations',\r\n    },\r\n    {\r\n      msg: 'Invalid protocol.',\r\n      id: 'node.protocol_validator.invalid_protocol',\r\n    },\r\n    {\r\n      msg:\r\n        'The data directory could not be read. This could be because it was generated with an old version of the tezos-node program. Deleting and regenerating this directory may fix the problem.',\r\n      id: 'node.state.bad_data_dir',\r\n    },\r\n    {\r\n      msg:\r\n        'When commiting the context of a block, the announced context hash was not the one computed at commit time.',\r\n      id: 'node.state.block.inconsistent_context_hash',\r\n    },\r\n    {\r\n      msg: 'The invalid block to be unmarked was not actually invalid.',\r\n      id: 'node.state.block_not_invalid',\r\n    },\r\n    {\r\n      msg:\r\n        'The chain identifier could not be found in the chain identifiers table.',\r\n      id: 'node.state.unknown_chain',\r\n    },\r\n    {\r\n      msg:\r\n        'The block belongs to a branch that is not compatible with the current checkpoint.',\r\n      id: 'node.validator.checkpoint_error',\r\n    },\r\n    {\r\n      msg: 'Attempted validation of a block from an inactive chain.',\r\n      id: 'node.validator.inactive_chain',\r\n    },\r\n    {\r\n      msg: 'Incorrect history mode switch.',\r\n      id: 'node_config_file.incorrect_history_mode_switch',\r\n    },\r\n    {\r\n      msg: 'Missing key in store',\r\n      id: 'raw_store.unknown',\r\n    },\r\n    {\r\n      msg:\r\n        'The provided list of operations is inconsistent with the block header.',\r\n      id: 'validator.inconsistent_operations_hash',\r\n    },\r\n    {\r\n      msg: 'Invalid block.',\r\n      id: 'validator.invalid_block',\r\n    },\r\n    {\r\n      msg: 'Missing test protocol when forking the test chain',\r\n      id: 'validator.missing_test_protocol',\r\n    },\r\n    {\r\n      msg: 'The protocol required for validating a block is missing.',\r\n      id: 'validator.unavailable_protocol',\r\n    },\r\n    {\r\n      msg: 'Failed to validate block using exteranl validation process.',\r\n      id: 'validator.validation_process_failed',\r\n    },\r\n    {\r\n      msg:\r\n        'An operation on a worker could not complete before it was shut down.',\r\n      id: 'worker.closed',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an annotation exceeded the maximum length (255).',\r\n      id: 'micheline.parse_error.annotation_exceeds_max_length',\r\n    },\r\n    {\r\n      msg:\r\n        'Tried to interpret an empty piece or Micheline source as a single expression.',\r\n      id: 'micheline.parse_error.empty_expression',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an extra semi colon or parenthesis was encountered.',\r\n      id: 'micheline.parse_error.extra_token',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, a sequence of bytes that is not valid UTF-8 was encountered.',\r\n      id: 'micheline.parse_error.invalid_utf8_sequence',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an expression was not aligned with its siblings of the same mother application or sequence.',\r\n      id: 'micheline.parse_error.misaligned_node',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, a number was not visually separated from its follower token, leading to misreadability.',\r\n      id: 'micheline.parse_error.missing_break_after_number',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, the length of a byte sequence (0x...) was not a multiple of two, leaving a trailing half byte.',\r\n      id: 'micheline.parse_error.odd_lengthed_bytes',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, a parenthesis or a brace was unclosed.',\r\n      id: 'micheline.parse_error.unclosed_token',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an unexpected escape sequence was encountered in a string.',\r\n      id: 'micheline.parse_error.undefined_escape_sequence',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an unexpected character was encountered.',\r\n      id: 'micheline.parse_error.unexpected_character',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an unexpected token was encountered.',\r\n      id: 'micheline.parse_error.unexpected_token',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, a commentX was not terminated.',\r\n      id: 'micheline.parse_error.unterminated_comment',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, an integer was not terminated.',\r\n      id: 'micheline.parse_error.unterminated_integer',\r\n    },\r\n    {\r\n      msg:\r\n        'While parsing a piece of Micheline source, a string was not terminated.',\r\n      id: 'micheline.parse_error.unterminated_string',\r\n    },\r\n    {\r\n      msg: 'Wrong hash given',\r\n      id: 'Bad_hash',\r\n    },\r\n    {\r\n      msg: 'The context checkout failed using a given hash',\r\n      id: 'Block_validator_process.failed_to_checkout_context',\r\n    },\r\n    {\r\n      msg: 'Cannot reconstruct',\r\n      id: 'CannotReconstruct',\r\n    },\r\n    {\r\n      msg: 'Cannot find context corresponding to hash',\r\n      id: 'Context_not_found',\r\n    },\r\n    {\r\n      msg: 'The imported block is not the expected one.',\r\n      id: 'InconsistentImportedBlock',\r\n    },\r\n    {\r\n      msg: 'The operations given do not match their hashes.',\r\n      id: 'InconsistentOperationHashes',\r\n    },\r\n    {\r\n      msg: 'The data provided by the snapshot is inconsistent',\r\n      id: 'Inconsistent_snapshot_data',\r\n    },\r\n    {\r\n      msg: 'Error while opening snapshot file',\r\n      id: 'Inconsistent_snapshot_file',\r\n    },\r\n    {\r\n      msg: 'Invalid specification of block to import',\r\n      id: 'InvalidBlockSpecification',\r\n    },\r\n    {\r\n      msg: 'The version of the snapshot to import is not valid',\r\n      id: 'Invalid_snapshot_version',\r\n    },\r\n    {\r\n      msg: 'Mandatory data missing while reaching end of snapshot file.',\r\n      id: 'Missing_snapshot_data',\r\n    },\r\n    {\r\n      msg:\r\n        'RPC lookup failed. Block has been pruned and requested data deleted.',\r\n      id: 'RPC_context.Gone',\r\n    },\r\n    {\r\n      msg:\r\n        'RPC lookup failed. No RPC exists at the URL or the RPC tried to access non-existent data.',\r\n      id: 'RPC_context.Not_found',\r\n    },\r\n    {\r\n      msg: 'Internal error while restoring the context',\r\n      id: 'Restore_context_failure',\r\n    },\r\n    {\r\n      msg: 'The imported snapshot is malformed.',\r\n      id: 'SnapshotImportFailure',\r\n    },\r\n    {\r\n      msg: 'Failed to read file',\r\n      id: 'System_read_error',\r\n    },\r\n    {\r\n      msg: 'The validator failed because of a system error',\r\n      id: 'Validator_process.system_error_while_validating',\r\n    },\r\n    {\r\n      msg: 'Cannot write in file for context dump',\r\n      id: 'Writing_error',\r\n    },\r\n    {\r\n      msg: 'The block to export in the snapshot is not valid.',\r\n      id: 'WrongBlockExport',\r\n    },\r\n    {\r\n      msg: 'Wrong protocol hash',\r\n      id: 'WrongProtocolHash',\r\n    },\r\n    {\r\n      msg: 'Snapshot exports is not compatible with the current configuration.',\r\n      id: 'WrongSnapshotExport',\r\n    },\r\n    {\r\n      msg: 'A fatal assertion failed',\r\n      id: 'assertion',\r\n    },\r\n    {\r\n      msg: 'A promise was unexpectedly canceled',\r\n      id: 'canceled',\r\n    },\r\n    {\r\n      msg: 'A key has been provided with an invalid uri.',\r\n      id: 'cli.key.invalid_uri',\r\n    },\r\n    {\r\n      msg: 'The signer produced an invalid signature',\r\n      id: 'cli.signature_mismatch',\r\n    },\r\n    {\r\n      msg:\r\n        'A key has been provided with an unregistered scheme (no corresponding plugin)',\r\n      id: 'cli.unregistered_key_scheme',\r\n    },\r\n    {\r\n      msg:\r\n        'The byte sequence references a multisig counter that does not match the one currently stored in the given multisig contract',\r\n      id: 'client.alpha.Bad deserialized counter',\r\n    },\r\n    {\r\n      msg:\r\n        'When trying to deserialise an action from a sequence of bytes, we got an expression that does not correspond to a known multisig action',\r\n      id: 'client.alpha.actionDeserialisation',\r\n    },\r\n    {\r\n      msg:\r\n        'When trying to deserialise an action from a sequence of bytes, we got an action for another multisig contract',\r\n      id: 'client.alpha.badDeserializedContract',\r\n    },\r\n    {\r\n      msg: 'invalid duration in -endorsement-delay',\r\n      id: 'client.alpha.badEndorsementDelayArg',\r\n    },\r\n    {\r\n      msg: 'invalid priority in -max-priority',\r\n      id: 'client.alpha.badMaxPriorityArg',\r\n    },\r\n    {\r\n      msg: 'invalid duration in -max-waiting-time',\r\n      id: 'client.alpha.badMaxWaitingTimeArg',\r\n    },\r\n    {\r\n      msg: 'invalid fee threshold in -fee-threshold',\r\n      id: 'client.alpha.badMinimalFeesArg',\r\n    },\r\n    {\r\n      msg: 'invalid number of levels in -preserved-levels',\r\n      id: 'client.alpha.badPreservedLevelsArg',\r\n    },\r\n    {\r\n      msg: 'Invalid ꜩ notation in parameter.',\r\n      id: 'client.alpha.badTezArg',\r\n    },\r\n    {\r\n      msg:\r\n        'When trying to deserialise an action from a sequence of bytes, we got an error',\r\n      id: 'client.alpha.bytesDeserialisation',\r\n    },\r\n    {\r\n      msg:\r\n        'A multisig command has referenced a scriptless smart contract instead of a multisig smart contract.',\r\n      id: 'client.alpha.contractHasNoScript',\r\n    },\r\n    {\r\n      msg:\r\n        'A multisig command has referenced a smart contract without storage instead of a multisig smart contract.',\r\n      id: 'client.alpha.contractHasNoStorage',\r\n    },\r\n    {\r\n      msg:\r\n        'A multisig command has referenced a smart contract whose storage is of a different shape than the expected one.',\r\n      id: 'client.alpha.contractHasUnexpectedStorage',\r\n    },\r\n    {\r\n      msg:\r\n        'Attempt to get the code of a contract failed because it has nocode. No scriptless contract should remain.',\r\n      id: 'client.alpha.contractWithoutCode',\r\n    },\r\n    {\r\n      msg:\r\n        'A signature was given for a multisig contract that matched none of the public keys of the contract signers',\r\n      id: 'client.alpha.invalidSignature',\r\n    },\r\n    {\r\n      msg: 'A wrong number of arguments was provided to a macro',\r\n      id: 'client.alpha.michelson.macros.bas_arity',\r\n    },\r\n    {\r\n      msg: 'An macro expects a sequence, but a sequence was not provided',\r\n      id: 'client.alpha.michelson.macros.sequence_expected',\r\n    },\r\n    {\r\n      msg:\r\n        'A macro had an annotation, but no annotation was permitted on this macro.',\r\n      id: 'client.alpha.michelson.macros.unexpected_annotation',\r\n    },\r\n    {\r\n      msg: 'A multisig threshold should be a positive number',\r\n      id: 'client.alpha.nonPositiveThreshold',\r\n    },\r\n    {\r\n      msg:\r\n        'A multisig command has referenced a smart contract whose script is not one of the known multisig contract scripts.',\r\n      id: 'client.alpha.notASupportedMultisigContract',\r\n    },\r\n    {\r\n      msg:\r\n        'To run an action on a multisig contract, you should provide at least as many signatures as indicated by the threshold stored in the multisig contract.',\r\n      id: 'client.alpha.notEnoughSignatures',\r\n    },\r\n    {\r\n      msg:\r\n        'The given threshold is higher than the number of keys, this would lead to a frozen multisig contract',\r\n      id: 'client.alpha.thresholdTooHigh',\r\n    },\r\n    {\r\n      msg: 'Cannot recover from a corrupted context.',\r\n      id: 'context.non_recoverable_context',\r\n    },\r\n    {\r\n      msg: '<gf>context_dump.read.cannot_open',\r\n    },\r\n    {\r\n      msg: '<gf>context_dump.read.suspicious',\r\n    },\r\n    {\r\n      msg: '<gf>context_dump.write.cannot_open',\r\n    },\r\n    {\r\n      msg: 'Exception safely wrapped in an error',\r\n      id: 'failure',\r\n    },\r\n    {\r\n      msg: 'Activation of an Internal Event SINK with an URI failed',\r\n      id: 'internal-event-activation-error',\r\n    },\r\n    {\r\n      msg: 'The raw context extraction depth argument must be positive.',\r\n      id: 'raw_context.invalid_depth',\r\n    },\r\n    {\r\n      msg: 'No protocol was registered with the requested hash.',\r\n      id: 'registered_protocol.unregistered_protocol',\r\n    },\r\n    {\r\n      msg: 'The fetch of a Operation_hash has been canceled',\r\n      id: 'requester.Operation_hash.fetch_canceled',\r\n    },\r\n    {\r\n      msg: 'The fetch of a Operation_hash has timed out',\r\n      id: 'requester.Operation_hash.fetch_timeout',\r\n    },\r\n    {\r\n      msg: 'Some Operation_hash is missing from the requester',\r\n      id: 'requester.Operation_hash.missing',\r\n    },\r\n    {\r\n      msg: 'The fetch of a Protocol_hash has been canceled',\r\n      id: 'requester.Protocol_hash.fetch_canceled',\r\n    },\r\n    {\r\n      msg: 'The fetch of a Protocol_hash has timed out',\r\n      id: 'requester.Protocol_hash.fetch_timeout',\r\n    },\r\n    {\r\n      msg: 'Some Protocol_hash is missing from the requester',\r\n      id: 'requester.Protocol_hash.missing',\r\n    },\r\n    {\r\n      msg: 'The fetch of a block_hash has been canceled',\r\n      id: 'requester.block_hash.fetch_canceled',\r\n    },\r\n    {\r\n      msg: 'The fetch of a block_hash has timed out',\r\n      id: 'requester.block_hash.fetch_timeout',\r\n    },\r\n    {\r\n      msg: 'Some block_hash is missing from the requester',\r\n      id: 'requester.block_hash.missing',\r\n    },\r\n    {\r\n      msg: 'The fetch of a operation_hashes has been canceled',\r\n      id: 'requester.operation_hashes.fetch_canceled',\r\n    },\r\n    {\r\n      msg: 'The fetch of a operation_hashes has timed out',\r\n      id: 'requester.operation_hashes.fetch_timeout',\r\n    },\r\n    {\r\n      msg: 'Some operation_hashes is missing from the requester',\r\n      id: 'requester.operation_hashes.missing',\r\n    },\r\n    {\r\n      msg: 'The fetch of a operations has been canceled',\r\n      id: 'requester.operations.fetch_canceled',\r\n    },\r\n    {\r\n      msg: 'The fetch of a operations has timed out',\r\n      id: 'requester.operations.fetch_timeout',\r\n    },\r\n    {\r\n      msg: 'Some operations is missing from the requester',\r\n      id: 'requester.operations.missing',\r\n    },\r\n    {\r\n      msg: 'Error while decoding a remote signer message',\r\n      id: 'signer.decoding_error',\r\n    },\r\n    {\r\n      msg: 'Error while encoding a remote signer message',\r\n      id: 'signer.encoding_error',\r\n    },\r\n    {\r\n      msg: 'Block not found',\r\n      id: 'state.block.contents_not_found',\r\n    },\r\n    {\r\n      msg: 'Block not found',\r\n      id: 'state.block.not_found',\r\n    },\r\n    {\r\n      msg: 'Unix System_info failure',\r\n      id: 'unix.system_info',\r\n    },\r\n    {\r\n      msg: 'An unhandled unix exception',\r\n      id: 'unix_error',\r\n    },\r\n    {\r\n      msg: 'Canceled',\r\n      id: 'utils.Canceled',\r\n    },\r\n    {\r\n      msg: 'Timeout',\r\n      id: 'utils.Timeout',\r\n    },\r\n    {\r\n      msg: 'Fee exceeded hard cap!',\r\n      id: 'TooHighFee'\r\n    }\r\n  ];\r\n  transform(errorId: string): any {\r\n    errorId = errorId.replace('006-PsCARTHA', 'alpha');\r\n    let errorMessage = '';\r\n    const index = this.ERROR_LIST.findIndex((s) => s.id === errorId);\r\n    console.log(index);\r\n    if (index !== -1) {\r\n      return this.ERROR_LIST[index].msg;\r\n    } else {\r\n      if (\r\n        errorId.indexOf('branch refused (Error:') !== -1 &&\r\n        errorId.indexOf('already used for contract') !== -1\r\n      ) {\r\n        errorMessage =\r\n          'Counter error: Another operation in mempool is blocking your operation. Wait for it to be included in a block or pruned from mempool (up to 60 minutes).';\r\n      } else {\r\n        errorMessage = 'Unrecognized error: ' + errorId;\r\n      }\r\n    }\r\n    return errorMessage;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { TranslateService } from '@ngx-translate/core';  // Multiple instances created ?\r\nimport { timeout } from 'rxjs/operators';\r\n\r\n@Pipe({\r\n    name: 'timeAgo',\r\n    pure: true  // if false pipe will be called at each changes - necessary for translation - is there a better way?\r\n})\r\nexport class TimeAgoPipe implements PipeTransform {\r\n    constructor(\r\n        private translate: TranslateService\r\n    ) {}\r\n    transform(timestamp: number): string {\r\n        let result: string;\r\n\r\n        let secTmp = '';\r\n        let secsTmp = '';\r\n        let mnTmp = '';\r\n        let mnsTmp = '';\r\n        let hrTmp = '';\r\n        let hrsTmp = '';\r\n        let dayTmp = '';\r\n        let daysTmp = '';\r\n        let monthTmp = '';\r\n        let monthsTmp = '';\r\n        let yearTmp = '';\r\n        let yearsTmp = '';\r\n\r\n        secTmp = this.translate.instant('TIMEAGOPIPE.SEC');\r\n        // console.log('loaded? ' + secTmp);\r\n        secsTmp = secTmp;\r\n        mnTmp = this.translate.instant('TIMEAGOPIPE.MINUTE');\r\n        mnsTmp = mnTmp;\r\n        hrTmp = this.translate.instant('TIMEAGOPIPE.HOUR');\r\n        hrsTmp = this.translate.instant('TIMEAGOPIPE.HOURS');\r\n        dayTmp = this.translate.instant('TIMEAGOPIPE.DAY');\r\n        daysTmp = this.translate.instant('TIMEAGOPIPE.DAYS');\r\n        monthTmp = this.translate.instant('TIMEAGOPIPE.MONTH');\r\n        monthsTmp = this.translate.instant('TIMEAGOPIPE.MONTHS');\r\n        yearTmp = this.translate.instant('TIMEAGOPIPE.YEAR');\r\n        yearsTmp = this.translate.instant('TIMEAGOPIPE.YEARS');\r\n        // Tranforming from String to Date format\r\n\r\n        // current time\r\n        const now = new Date().getTime();\r\n\r\n        // time since transaction was made in seconds\r\n        const delta = (now - timestamp) / 1000;\r\n\r\n        // If transaction has just been broadcasted then dateString will be null in the first few seconds (prevalidation stage)\r\n        if (delta < 20 ) {\r\n            return this.translate.instant('TIMEAGOPIPE.JUSTNOW');\r\n            // 'just now';\r\n        }\r\n\r\n        // Return interval format in seconds, hours or days\r\n        if (delta < 60) {  // Sent in last minute\r\n            // result = Math.floor(delta) + ' sec ';\r\n            result = Math.round(Math.floor(delta) / 10) * 10 + ' ' + secTmp + ' ';\r\n        } else if (delta < 120) {  // Sent in last hour: 1h = 3600 sec -> displays seconds\r\n            // result = Math.floor(delta / 60) + ' mn ';\r\n            result = Math.floor(delta / 60) + ' ' + mnTmp + ' ';\r\n\r\n            // Adds seconds details if there's a remainder in 'delta % 60'\r\n            if (Math.floor(delta % 60) !== 0) {\r\n                // result = result + Math.floor(delta % 60) + ' sec ';\r\n                result = result + Math.round(Math.floor(delta % 60) / 10) * 10 + ' ' + secTmp + ' ';\r\n            }\r\n        } else if (delta < 86400) {  // Sent on last day: 1d = 86400 sec -> displays hours and seconds\r\n            result = String(Math.floor(delta / 3600));\r\n\r\n            // Adds suffix hr or hrs depending on 'delta / 3600' value\r\n            // result = Math.floor(delta / 3600) > 1 ? result + ' hrs ' : result + ' hr ';\r\n            result = Math.floor(delta / 3600) > 1 ? result + ' ' + hrsTmp + ' ' : result + ' ' + hrTmp + ' ';\r\n\r\n            // Adds minutes details if there's a remainder in 'delta % 3600'\r\n            if (Math.floor((delta % 3600) / 60) !== 0) {\r\n                result = result + String(Math.floor((delta % 3600) / 60)) + ' ' + mnTmp + ' ';\r\n                // result = result + String(Math.floor((delta % 3600) / 60)) + ' mn ';\r\n                // result = Math.floor((delta % 3600) / 60) > 1 ? result + ' mns ' : result + ' mn '; // there's no plural in mn\r\n            }\r\n        } else if (delta < 2592000) {  // Sent on last month: 1m = 2592000 sec (30 days) -> displays days and hours\r\n            result = String(Math.floor(delta / 86400));\r\n\r\n            // Adds suffix day or days depending on 'delta / 86400' value\r\n            result = Math.floor(delta / 86400) > 1 ? result + ' ' + daysTmp + ' ' : result + ' ' + dayTmp + ' ';\r\n            // result = Math.floor(delta / 86400) > 1 ? result + ' days ' : result + ' day ';\r\n\r\n            // Adds hours details if there's a remainder in 'delta % 86400'\r\n            if (Math.floor((delta % 86400) / 3600) !== 0) {\r\n                result = result + String(Math.floor((delta % 86400) / 3600));\r\n\r\n                // Adds suffix hr or hrs depending on '(delta % 86400) / 3600' value\r\n                result = Math.floor((delta % 86400) / 3600) > 1 ? result + ' ' + hrsTmp + ' ' : result + ' ' + hrTmp + ' ';\r\n                // result = Math.floor((delta % 86400) / 3600) > 1 ? result + ' hrs ' : result + ' hr ';\r\n            }\r\n        } else if (delta < 31536000) {  // Sent on last year: 1y = 31536000 sec (365 days) -> displays months and days\r\n            result = String(Math.floor(delta / 2592000));\r\n\r\n            // Adds suffix month or months depending on 'delta / 2592000' value\r\n            result = Math.floor(delta / 2592000) > 1 ? result + ' ' + monthsTmp + ' ' : result + ' ' + monthTmp + ' ';\r\n            // result = Math.floor(delta / 2592000) > 1 ? result + ' months ' : result + ' month ';\r\n\r\n            // Adds days details if there's a remainder in 'delta / 2592000'\r\n            if (Math.floor((delta % 2592000) / 86400) !== 0) {\r\n                result = result + String(Math.floor((delta % 2592000) / 86400));\r\n\r\n                // Adds suffix day or days depending on '(delta % 2592000) / 86400' value\r\n                result = Math.floor((delta % 2592000) / 86400) > 1 ? result + ' ' + daysTmp + ' ' : result + ' ' + dayTmp + ' ';\r\n                // result = Math.floor((delta % 2592000) / 86400) > 1 ? result + ' days ' : result + ' day ';\r\n            }\r\n\r\n        } else {  // Sent more than one year ago -> displays years and months\r\n            result = String(Math.floor(delta / 31536000));\r\n\r\n            // Adds suffix year or years depending on 'delta / 31536000' value\r\n            result = Math.floor(delta / 31536000) > 1 ? result + ' ' + yearsTmp + ' ' : result + ' ' + yearTmp + ' ';\r\n            // result = Math.floor(delta / 31536000) > 1 ? result + ' years ' : result + ' year ';\r\n\r\n            // Adds months details if there's a remainder in 'delta / 31536000' which is more then 1\r\n            if (Math.floor((delta % 31536000) / 2592000) !== 0) {\r\n                result = result + String(Math.floor((delta % 31536000) / 2592000));\r\n\r\n                // Adds suffix month or months depending on '(delta % 31536000) / 2592000' value\r\n                result = Math.floor((delta % 31536000) / 2592000) > 1 ? result + ' ' + monthsTmp + ' ' : result + ' ' + monthTmp + ' ';\r\n                // result = Math.floor((delta % 31536000) / 2592000) > 1 ? result + ' months ' : result + ' month ';\r\n            }\r\n\r\n        }\r\n\r\n        // const agoTmp = this.translate.instant('TIMEAGOPIPE.AGO');  // not working\r\n        const agoTmp = this.translate.instant('TIMEAGOPIPE.AGO');\r\n\r\n        result = result + agoTmp;\r\n        // console.log('in time-ago return result: ', result);  // working but View not updated when language is changed and pipe is pure\r\n        return result;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'truncate'\r\n})\r\nexport class TruncatePipe implements PipeTransform {\r\n    transform(value?: string, args?: number, endTrail?: boolean): string {\r\n        const limit = args ? args : 3;\r\n        const trail = '...';\r\n\r\n        let returnString;\r\n\r\n        if (endTrail && value.length > limit) {\r\n            const endTrailstring = value.slice(-limit);\r\n            returnString = value.substring(0, limit) + trail + endTrailstring;\r\n\r\n            return returnString;\r\n        } else {\r\n            return value.length > limit ? value.substring(0, limit) + trail : value;\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { ConseilService } from '../conseil/conseil.service';\r\nimport { of, Observable } from 'rxjs';\r\nimport { flatMap } from 'rxjs/operators';\r\nimport { Activity, Account } from '../wallet/wallet';\r\nimport { MessageService } from '../message/message.service';\r\nimport { LookupService } from '../lookup/lookup.service';\r\n\r\n@Injectable()\r\nexport class ActivityService {\r\n  maxTransactions = 10;\r\n  constructor(\r\n    private walletService: WalletService,\r\n    private conseilService: ConseilService,\r\n    private messageService: MessageService,\r\n    private lookupService: LookupService\r\n  ) {}\r\n  updateTransactions(pkh): Observable<any> {\r\n    try {\r\n      const account = this.walletService.wallet.getAccount(pkh);\r\n      return this.getTransactonsCounter(account).pipe(\r\n        flatMap((ans: any) => {\r\n          return of(ans);\r\n        })\r\n      );\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n  getTransactonsCounter(account): Observable<any> {\r\n    return this.conseilService.accountInfo(account.address).pipe(\r\n      flatMap((counter) => {\r\n        if (account.activitiesCounter !== counter) {\r\n          return this.getAllTransactions(account, counter);\r\n        } else {\r\n          return of({\r\n            upToDate: true,\r\n          });\r\n        }\r\n      })\r\n    );\r\n  }\r\n  getAllTransactions(account, counter): Observable<any> {\r\n    return this.conseilService.getOperations(account.address).pipe(\r\n      flatMap((ans) => {\r\n        if (Array.isArray(ans)) {\r\n          const oldActivities = account.activities;\r\n          account.activities = ans;\r\n          const oldActivitiesCounter = account.activitiesCounter;\r\n          account.activitiesCounter = counter;\r\n          console.log(oldActivitiesCounter + ' # ' + counter);\r\n          this.walletService.storeWallet();\r\n          if (oldActivitiesCounter !== -1) { // Exclude inital loading\r\n            this.promptNewActivities(account, oldActivities, ans);\r\n          } else {\r\n            console.log('# Excluded ' + counter);\r\n          }\r\n          for (const activity of ans) {\r\n            const counterParty = this.getCounterparty(activity, account, false);\r\n            this.lookupService.check(counterParty);\r\n          }\r\n        } else {\r\n          console.log('#');\r\n          console.log(ans);\r\n        }\r\n        return of({\r\n          upToDate: false\r\n        });\r\n      })\r\n    );\r\n  }\r\n  promptNewActivities(account: Account, oldActivities: Activity[], newActivities: Activity[]) {\r\n    for (const activity of newActivities) {\r\n      const index = oldActivities.findIndex((a) => a.hash === activity.hash);\r\n      if (index === -1 || (index !== -1 && oldActivities[index].status === 0)) {\r\n        if (activity.type === 'transaction') {\r\n          if (account.address === activity.source) {\r\n            this.messageService.addSuccess(account.shortAddress() + ': Sent ' + activity.amount / 1000000 + ' tez');\r\n          }\r\n          if (account.address === activity.destination) {\r\n            this.messageService.addSuccess(account.shortAddress() + ': Received ' + activity.amount / 1000000 + ' tez');\r\n          }\r\n        } else if (activity.type === 'delegation') {\r\n          this.messageService.addSuccess(account.shortAddress() + ': Delegate updated');\r\n        } else if (activity.type === 'origination') {\r\n          this.messageService.addSuccess(account.shortAddress() + ': Account originated');\r\n        } else if (activity.type === 'activation') {\r\n          this.messageService.addSuccess(account.shortAddress() + ': Account activated');\r\n        }\r\n      }\r\n    }\r\n  }\r\n  getCounterparty(transaction: any, account: Account, withLookup = true): string {\r\n    let counterParty = '';\r\n    if (transaction.type === 'delegation') {\r\n      if (transaction.destination) {\r\n        counterParty = transaction.destination;\r\n      } else {\r\n        counterParty =  ''; // User has undelegated\r\n      }\r\n    } else if (transaction.type === 'transaction') {\r\n      if (account.address === transaction.source) {\r\n        counterParty =  transaction.destination; // to\r\n      } else {\r\n        counterParty =  transaction.source; // from\r\n      }\r\n    } else if (transaction.type === 'origination') {\r\n      if (account.address === transaction.source) {\r\n        counterParty =  transaction.destination;\r\n      } else {\r\n        counterParty =  transaction.source;\r\n      }\r\n    } else {\r\n      counterParty =  '';\r\n    }\r\n    if (withLookup) {\r\n      counterParty = this.lookupService.resolve(counterParty);\r\n    }\r\n    return counterParty;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { TranslateService } from '@ngx-translate/core';  // Multiple instances created ?\r\n\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { MessageService } from '../message/message.service';\r\nimport { TzrateService } from '../tzrate/tzrate.service';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { Account } from '../wallet/wallet';\r\nimport { isNullOrUndefined } from 'util';\r\n\r\n@Injectable()\r\nexport class BalanceService {\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private walletService: WalletService,\r\n    private messageService: MessageService,\r\n    private tzrateService: TzrateService,\r\n    private operationService: OperationService\r\n  ) { }\r\n\r\n  getBalanceAll() {\r\n    for (const account of this.walletService.wallet.getAccounts()) {\r\n      this.getAccountBalance(account);\r\n    }\r\n  }\r\n  getAccountBalance(account: Account) {\r\n    console.log('for ' + account.address);\r\n    this.operationService.getBalance(account.address)\r\n      .subscribe((ans: any) => {\r\n        if (ans.success) {\r\n          this.updateAccountBalance(account, Number(ans.payload.balance));\r\n        } else {\r\n          console.log('Balance Error: ' + JSON.stringify(ans.payload.msg));\r\n        }\r\n      });\r\n  }\r\n  updateAccountBalance(account: Account, newBalance: number) {\r\n    if (account.balanceXTZ === null || account.balanceXTZ === undefined || newBalance !== account.balanceXTZ) {\r\n      account.balanceXTZ = newBalance;\r\n      this.updateTotalBalance();\r\n      this.tzrateService.updateFiatBalances();\r\n      this.walletService.storeWallet();\r\n    }\r\n  }\r\n  updateTotalBalance() {\r\n    let balance = 0;\r\n    let change = false;\r\n    for (const account of this.walletService.wallet.getAccounts()) {\r\n      if (!(account.balanceXTZ === null || account.balanceXTZ === undefined)) {\r\n        balance = balance + Number(account.balanceXTZ);\r\n        change = true;\r\n      }\r\n    }\r\n    if (change) {\r\n      this.walletService.wallet.totalBalanceXTZ = balance;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Constants } from '../../constants';\r\nimport { of, Observable, from as fromPromise } from 'rxjs';\r\nimport { flatMap } from 'rxjs/operators';\r\nimport { ConseilDataClient, ConseilQueryBuilder, ConseilSortDirection, ConseilOperator } from 'conseiljs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ConseilService {\r\n  CONSTANTS: any;\r\n  conseilServer: any;\r\n  platform: string;\r\n  network: string;\r\n  constructor(\r\n  ) {\r\n    this.CONSTANTS = new Constants();\r\n    this.conseilServer = this.CONSTANTS.NET.CSI;\r\n    this.network = this.CONSTANTS.NET.NETWORK;\r\n    this.platform = 'tezos';\r\n  }\r\n  async getContractAddresses(pkh: string): Promise<any> {\r\n    const entity = 'operations';\r\n    let query = ConseilQueryBuilder.blankQuery();\r\n    query = ConseilQueryBuilder.addFields(query, 'originated_contracts');\r\n    query = ConseilQueryBuilder.addPredicate(query, 'kind', ConseilOperator.EQ, ['origination'], false);\r\n    query = ConseilQueryBuilder.addPredicate(query, 'source', ConseilOperator.EQ, [pkh], false);\r\n    query = ConseilQueryBuilder.addPredicate(query, 'status', ConseilOperator.EQ, ['applied'], false);\r\n    query = ConseilQueryBuilder.addOrdering(query, 'block_level', ConseilSortDirection.DESC);\r\n    query = ConseilQueryBuilder.setLimit(query, 100);\r\n    const results = await ConseilDataClient.executeEntityQuery(this.conseilServer, this.platform, this.network, entity, query);\r\n    const addresses = [];\r\n    for (const result of results) {\r\n      addresses.push(result.originated_contracts);\r\n    }\r\n    return addresses;\r\n  }\r\n  accountInfo(address: string): Observable<any> {\r\n    const entity = 'accounts';\r\n    let query = ConseilQueryBuilder.blankQuery();\r\n    query = ConseilQueryBuilder.addFields(query, 'block_level');\r\n    query = ConseilQueryBuilder.addPredicate(query, 'account_id', ConseilOperator.EQ, [address], false);\r\n    query = ConseilQueryBuilder.setLimit(query, 1);\r\n    return fromPromise(ConseilDataClient.executeEntityQuery(this.conseilServer, this.platform, this.network, entity, query)).pipe(flatMap((result) => {\r\n      if (result[0]) {\r\n        return of(result[0].block_level);\r\n      } else {\r\n        return of(0);\r\n      }\r\n    }));\r\n  }\r\n  getOperations(pkh: string): Observable<any> {\r\n    const entity = 'operations';\r\n    let sendQuery = ConseilQueryBuilder.blankQuery();\r\n    sendQuery = ConseilQueryBuilder.addFields(sendQuery, 'kind', 'block_hash', 'operation_group_hash', 'timestamp', 'originated_contracts', 'source', 'destination', 'amount', 'delegate');\r\n    sendQuery = ConseilQueryBuilder.addPredicate(sendQuery, 'kind', ConseilOperator.IN, ['transaction', 'origination', 'delegation'], false);\r\n    sendQuery = ConseilQueryBuilder.addPredicate(sendQuery, 'source', ConseilOperator.EQ, [pkh], false);\r\n    sendQuery = ConseilQueryBuilder.addPredicate(sendQuery, 'status', ConseilOperator.EQ, ['applied'], false);\r\n    sendQuery = ConseilQueryBuilder.addOrdering(sendQuery, 'block_level', ConseilSortDirection.DESC);\r\n    sendQuery = ConseilQueryBuilder.setLimit(sendQuery, 10);\r\n\r\n    let receiveQuery = ConseilQueryBuilder.blankQuery();\r\n    receiveQuery = ConseilQueryBuilder.addFields(receiveQuery, 'kind', 'block_hash', 'operation_group_hash', 'timestamp', 'source', 'destination', 'amount');\r\n    receiveQuery = ConseilQueryBuilder.addPredicate(receiveQuery, 'kind', ConseilOperator.IN, ['transaction', 'origination'], false);\r\n    receiveQuery = ConseilQueryBuilder.addPredicate(receiveQuery, 'destination', ConseilOperator.EQ, [pkh], false);\r\n    receiveQuery = ConseilQueryBuilder.addPredicate(receiveQuery, 'status', ConseilOperator.EQ, ['applied'], false);\r\n    receiveQuery = ConseilQueryBuilder.addOrdering(receiveQuery, 'block_level', ConseilSortDirection.DESC);\r\n    receiveQuery = ConseilQueryBuilder.setLimit(receiveQuery, 10);\r\n\r\n    return fromPromise(ConseilDataClient.executeEntityQuery(this.conseilServer, this.platform, this.network, entity, sendQuery)).pipe(flatMap((sendResult) => {\r\n      sendResult = this.formatTx(sendResult);\r\n      return fromPromise(ConseilDataClient.executeEntityQuery(this.conseilServer, this.platform, this.network, entity, receiveQuery)).pipe(flatMap((receiveResult) => {\r\n        receiveResult = this.formatTx(receiveResult);\r\n        const transactions = sendResult.concat(receiveResult).sort((a, b) => b['timestamp'] - a['timestamp']);\r\n        console.log('ADDRESS GET ' + pkh);\r\n        console.log(transactions);\r\n        return of(transactions);\r\n      }));\r\n    }));\r\n  }\r\n  formatTx(input: any): any {\r\n    const output = [];\r\n    for (const tx of input) {\r\n      if (tx.kind !== 'transaction' || tx.amount > 0) {\r\n        let destination = tx.destination;\r\n        if (tx.kind === 'origination') {\r\n          destination = tx.originated_contracts;\r\n        } else if (tx.kind === 'delegation') {\r\n          destination = tx.delegate;\r\n        }\r\n        output.push(\r\n          {\r\n            type: tx.kind,\r\n            block: tx.block_hash,\r\n            status: 1,\r\n            amount: tx.amount,\r\n            source: tx.source,\r\n            destination: destination,\r\n            hash: tx.operation_group_hash,\r\n            timestamp: tx.timestamp\r\n          }\r\n        );\r\n      }\r\n    }\r\n    return output;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivityService } from '../activity/activity.service';\r\nimport { TzrateService } from '../tzrate/tzrate.service';\r\nimport { BalanceService } from '../balance/balance.service';\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { DelegateService } from '../delegate/delegate.service';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { ErrorHandlingPipe } from '../../pipes/error-handling.pipe';\r\nimport { Account } from '../wallet/wallet';\r\nimport Big from 'big.js';\r\n\r\nexport interface ScheduleData {\r\n  pkh: string;\r\n  state: State;\r\n  interval: any;\r\n  stateCounter: number;\r\n}\r\nenum State {\r\n  UpToDate,\r\n  Wait,\r\n  Updating,\r\n}\r\n\r\n@Injectable()\r\nexport class CoordinatorService {\r\n  scheduler: Map<string, any> = new Map<string, any>(); // pkh + delay\r\n  defaultDelayActivity = 30000; // 30s\r\n  shortDelayActivity = 5000; // 5s\r\n  tzrateInterval: any;\r\n  defaultDelayPrice = 300000; // 300s\r\n  accounts: Account[];\r\n  constructor(\r\n    private activityService: ActivityService,\r\n    private tzrateService: TzrateService,\r\n    private walletService: WalletService,\r\n    private balanceService: BalanceService,\r\n    private delegateService: DelegateService,\r\n    private operationService: OperationService,\r\n    private errorHandlingPipe: ErrorHandlingPipe\r\n  ) {}\r\n  startAll() {\r\n    if (this.walletService.wallet) {\r\n      this.accounts = this.walletService.wallet.getAccounts();\r\n      for (let i = 0; i < this.accounts.length; i++) {\r\n        this.start(this.accounts[i].address);\r\n      }\r\n      this.startXTZ();\r\n    } else {\r\n      console.log('no wallet found');\r\n    }\r\n  }\r\n  startXTZ() {\r\n    if (!this.tzrateInterval) {\r\n      console.log('Start scheduler XTZ');\r\n      this.tzrateService.getTzrate();\r\n      this.tzrateInterval = setInterval(\r\n        () => this.tzrateService.getTzrate(),\r\n        this.defaultDelayPrice\r\n      );\r\n    }\r\n  }\r\n  async start(pkh: string) {\r\n    if (pkh && !this.scheduler.get(pkh)) {\r\n      this.accounts = this.walletService.wallet.getAccounts();\r\n      console.log('Start scheduler ' + this.scheduler.size + ' ' + pkh);\r\n      const scheduleData: ScheduleData = {\r\n        pkh: pkh,\r\n        state: State.UpToDate,\r\n        interval: setInterval(\r\n          () => this.update(pkh),\r\n          this.defaultDelayActivity\r\n        ),\r\n        stateCounter: 0,\r\n      };\r\n      this.scheduler.set(pkh, scheduleData);\r\n      this.update(pkh);\r\n      this.updateAccountData(pkh);\r\n    }\r\n  }\r\n  async boost(pkh: string, metadata: any = null) {\r\n    // Expect action\r\n    console.log('boost ' + pkh);\r\n    if (this.walletService.addressExists(pkh)) {\r\n      if (metadata) {\r\n        this.addUnconfirmedOperations(pkh, metadata);\r\n      }\r\n      if (!this.scheduler.get(pkh)) {\r\n        await this.start(pkh);\r\n      }\r\n      if (this.scheduler.get(pkh).state !== State.Wait) {\r\n        this.changeState(pkh, State.Wait);\r\n        this.update(pkh);\r\n        const counter = this.scheduler.get(pkh).stateCounter;\r\n        setTimeout(() => {\r\n          // Failsafe\r\n          if (\r\n            this.scheduler &&\r\n            this.scheduler.get(pkh).stateCounter === counter\r\n          ) {\r\n            console.log('Timeout from wait state');\r\n            this.changeState(pkh, State.UpToDate);\r\n          }\r\n        }, 150000);\r\n      }\r\n    }\r\n  }\r\n  async update(pkh) {\r\n    this.setDelay(pkh, this.defaultDelayActivity);\r\n    this.activityService.updateTransactions(pkh).subscribe(\r\n      (ans: any) => {\r\n        switch (this.scheduler.get(pkh) ? this.scheduler.get(pkh).state : -1) {\r\n          case State.UpToDate: {\r\n            if (!ans.upToDate) {\r\n              this.changeState(pkh, State.Updating);\r\n            }\r\n            break;\r\n          }\r\n          case State.Wait: {\r\n            if (!ans.upToDate) {\r\n              this.changeState(pkh, State.Updating);\r\n            } else {\r\n              this.setDelay(pkh, this.shortDelayActivity);\r\n            }\r\n            break;\r\n          }\r\n          case State.Updating: {\r\n            if (ans.upToDate) {\r\n              this.changeState(pkh, State.UpToDate);\r\n            } else {\r\n              this.setDelay(pkh, this.shortDelayActivity);\r\n            }\r\n            break;\r\n          }\r\n          default: {\r\n            console.log('No state found!');\r\n            break;\r\n          }\r\n        }\r\n        const acc = this.walletService.wallet.getAccount(pkh);\r\n        if (acc && acc.activities.length) {\r\n          const latestActivity = acc.activities[0];\r\n          if (latestActivity.status === 0) {\r\n            const age = new Date().getTime() - new Date(latestActivity.timestamp).getTime();\r\n            if (age > 360000) {\r\n              acc.activities.shift();\r\n            }\r\n          }\r\n        }\r\n      },\r\n      err => console.log('Error in update(): ' + JSON.stringify(err)),\r\n      () => {\r\n        console.log(`account[${this.accounts.findIndex((a) => a.address === pkh)}][${\r\n          typeof this.scheduler.get(pkh).state !== 'undefined' ? this.scheduler.get(pkh).state : '*'}]: <<`);\r\n      }\r\n    );\r\n  }\r\n  changeState(pkh: string, newState: State) {\r\n    const scheduleData: ScheduleData = this.scheduler.get(pkh);\r\n    scheduleData.state = newState;\r\n    if (newState === State.UpToDate || newState === State.Updating) {\r\n      this.updateAccountData(pkh);\r\n    }\r\n    if (newState === State.Wait || newState === State.Updating) {\r\n      clearInterval(scheduleData.interval);\r\n      scheduleData.interval = setInterval(\r\n        () => this.update(pkh),\r\n        this.shortDelayActivity\r\n      );\r\n    }\r\n    scheduleData.stateCounter++;\r\n    this.scheduler.set(pkh, scheduleData);\r\n  }\r\n  setDelay(pkh: string, time: number) {\r\n    const scheduleData: ScheduleData = this.scheduler.get(pkh);\r\n    if (scheduleData.interval) {\r\n      clearInterval(scheduleData.interval);\r\n    }\r\n    scheduleData.interval = setInterval(() => this.update(pkh), time);\r\n    this.scheduler.set(pkh, scheduleData);\r\n  }\r\n  stopAll() {\r\n    if (this.walletService.wallet) {\r\n      console.log('Stop all schedulers');\r\n      for (\r\n        let i = 0;\r\n        i < this.accounts.length;\r\n        i++\r\n      ) {\r\n        this.stop(this.accounts[i].address);\r\n      }\r\n      clearInterval(this.tzrateInterval);\r\n      this.tzrateInterval = null;\r\n    }\r\n  }\r\n  async stop(pkh) {\r\n    console.log(\r\n      'Stop scheduler ' + this.accounts.findIndex((a) => a.address === pkh)\r\n    );\r\n    clearInterval(this.scheduler.get(pkh).interval);\r\n    this.scheduler.get(pkh).interval = null;\r\n    this.scheduler.delete(pkh);\r\n  }\r\n  updateAccountData(pkh: string) {\r\n    // Maybe also check for originations to account?\r\n    console.log('update account data for ' + pkh);\r\n    this.operationService.getAccount(pkh).subscribe((ans: any) => {\r\n      if (ans.success) {\r\n        this.balanceService.updateAccountBalance(\r\n          this.walletService.wallet.getAccount(pkh),\r\n          Number(ans.payload.balance)\r\n        );\r\n        const acc = this.walletService.wallet.getAccount(pkh);\r\n        this.delegateService.handleDelegateResponse(acc, ans.payload.delegate);\r\n      } else {\r\n        console.log('updateAccountData -> getAccount failed ', ans.payload.msg);\r\n      }\r\n    });\r\n  }\r\n  addUnconfirmedOperations(from: string, metadata: any) {\r\n    if (metadata.transactions) {\r\n      console.log('Unconfirmed transactions:');\r\n      console.log(metadata.transactions);\r\n      for (const op of metadata.transactions) {\r\n        const transaction = {\r\n          type: 'transaction',\r\n          status: 0,\r\n          amount: Big(op.amount).times(1000000).toString(),\r\n          fee: null,\r\n          source: from,\r\n          destination: op.to,\r\n          hash: metadata.opHash,\r\n          block: null,\r\n          timestamp: new Date().getTime()\r\n        };\r\n        let account = this.walletService.wallet.getAccount(from);\r\n        account.activities.unshift(transaction);\r\n        account = this.walletService.wallet.getAccount(op.to);\r\n        if (account) {\r\n          account.activities.unshift(transaction);\r\n        }\r\n      }\r\n    } else if (metadata.delegate !== undefined) {\r\n      const delegation = {\r\n        type: 'delegation',\r\n        status: 0,\r\n        amount: null,\r\n        fee: null,\r\n        source: from,\r\n        destination: metadata.delegate,\r\n        hash: metadata.opHash,\r\n        block: null,\r\n        timestamp: new Date().getTime()\r\n      };\r\n      const account = this.walletService.wallet.getAccount(from);\r\n      account.activities.unshift(delegation);\r\n    } else {\r\n      console.log('Unknown metadata');\r\n      console.log(metadata);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { Account } from '../wallet/wallet';\r\n\r\n@Injectable()\r\nexport class DelegateService {\r\n  constructor(\r\n    private walletService: WalletService,\r\n    private operationService: OperationService\r\n  ) {}\r\n  getDelegates() {\r\n    if (\r\n      this.walletService.wallet &&\r\n      this.walletService.wallet.implicitAccounts\r\n    ) {\r\n      for (const account of this.walletService.wallet.getAccounts()) {\r\n        this.getDelegate(account);\r\n      }\r\n    }\r\n  }\r\n  getDelegate(account: Account) {\r\n    this.operationService.getDelegate(account.address).subscribe(\r\n      (data: any) => {\r\n        if (data.success) {\r\n          this.handleDelegateResponse(account, data.payload.delegate);\r\n        }\r\n      },\r\n      (err) => console.log(JSON.stringify(err))\r\n    );\r\n  }\r\n  handleDelegateResponse(account: Account, data: any) {\r\n    if (data) {\r\n      if (account.delegate !== data) {\r\n        account.delegate = data;\r\n        this.walletService.storeWallet();\r\n      } else {\r\n        console.log('delegate for ' + account.address + ' up to date');\r\n      }\r\n    } else {\r\n      if (account.delegate !== '') {\r\n        account.delegate = '';\r\n        this.walletService.storeWallet();\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport * as pbkdf2 from 'pbkdf2';\r\nimport * as AES from 'aes-js';\r\nimport * as scrypt from 'scryptsy';\r\nimport * as cryptob from 'crypto-browserify';\r\nimport * as forge from 'node-forge';\r\nimport { rejects } from 'assert';\r\ndeclare const Buffer;\r\n@Injectable()\r\nexport class EncryptionService {\r\n  constructor() { }\r\n  async encrypt(plaintext: any, password: string, version: number, salt: string = null): Promise<any> {\r\n    if (version === 1) {\r\n      throw new Error('Encryption version no longer supported');\r\n    } else if (version === 2) {\r\n      return this.encrypt_v2(plaintext, password);\r\n    } else if (version === 3) {\r\n      return this.encrypt_v2(plaintext, password, salt);\r\n    } else {\r\n      throw new Error('Unrecognized encryption format');\r\n    }\r\n  }\r\n  async decrypt(chiphertext: string, password: string, salt: string, version: number): Promise<any> {\r\n    if (version === 1) {\r\n      return this.decrypt_v1(chiphertext, password, salt);\r\n    } else if (version === 2 || version === 3) {\r\n      return this.decrypt_v2(chiphertext, password, salt);\r\n    } else {\r\n      throw new Error('Unrecognized encryption format');\r\n    }\r\n  }\r\n  // Version 1\r\n  async encrypt_v1(plaintext: any, password: string, salt: string): Promise<string> {\r\n    return new Promise(resolve => {\r\n      try {\r\n        if (!password || !salt) {\r\n          throw new Error('Missing password or salt');\r\n        }\r\n        pbkdf2.pbkdf2(password, salt, 10000, 32, 'sha512', (err, key) => {\r\n          if (err) {\r\n            throw (err);\r\n          }\r\n          const aesCtr = new AES.ModeOfOperation.ctr(key);\r\n          let chiphertext = aesCtr.encrypt(plaintext);\r\n          chiphertext = AES.utils.hex.fromBytes(chiphertext);\r\n          resolve(chiphertext);\r\n        });\r\n      } catch (e) {\r\n        console.warn(e);\r\n        resolve('');\r\n      }\r\n    });\r\n  }\r\n  async decrypt_v1(chiphertext: string, password: string, salt: string): Promise<any> {\r\n    return new Promise(resolve => {\r\n      try {\r\n        if (!password || !salt) {\r\n          throw new Error('Missing password or salt');\r\n        }\r\n        pbkdf2.pbkdf2(password, salt, 10000, 32, 'sha512', (err, key) => {\r\n          if (err) {\r\n            throw (err);\r\n          }\r\n          chiphertext = AES.utils.hex.toBytes(chiphertext);\r\n          const aesCtr = new AES.ModeOfOperation.ctr(key);\r\n          const plaintext = aesCtr.decrypt(chiphertext);\r\n          resolve(plaintext);\r\n        });\r\n      } catch (e) {\r\n        resolve('');\r\n      }\r\n    });\r\n  }\r\n  // Version 2\r\n  async encrypt_v2(plaintext: Buffer, password: string, salt?: string): Promise<any> {\r\n    if (!password) {\r\n      throw new Error('Missing password');\r\n    }\r\n    let salty;\r\n    if (salt) {\r\n      salty = new Buffer(salt, 'hex');\r\n    } else {\r\n      salty = cryptob.randomBytes(16);\r\n    }\r\n    const key = await scrypt.async(password, salty, 65536, 8, 1, 32);\r\n    const cipher: any = forge.cipher.createCipher('AES-GCM', key.toString('binary'));\r\n    cipher.start({\r\n      iv: salty,\r\n    });\r\n    const byteStringBuffer = forge.util.createBuffer(plaintext.toString('binary'), 'utf-8');\r\n    cipher.update(byteStringBuffer);\r\n    cipher.finish();\r\n    const chiphertext = cipher.output.toHex() + '==' + cipher.mode.tag.toHex();\r\n    return { chiphertext: chiphertext, iv: salty.toString('hex') };\r\n  }\r\n  async decrypt_v2(chipher: string, password: string, salt: string): Promise<string> {\r\n    try {\r\n      if (!password || !salt) {\r\n        throw new Error('Missing password or salt');\r\n      }\r\n      const parts = chipher.split('==');\r\n      const chiphertext = parts[0];\r\n      const tag = parts[1];\r\n      const key = await scrypt.async(password, new Buffer(salt, 'hex'), 65536, 8, 1, 32);\r\n      const decipher: any = forge.cipher.createDecipher('AES-GCM', key.toString('binary'));\r\n      decipher.start({\r\n        iv: new Buffer(salt, 'hex'),\r\n        tag: forge.util.createBuffer((new Buffer(tag, 'hex')).toString('binary'), 'utf-8'), // authentication tag from encryption\r\n      });\r\n      decipher.update(forge.util.createBuffer((new Buffer(chiphertext, 'hex')).toString('binary'), 'utf-8'));\r\n      const pass = decipher.finish();\r\n      if (pass) {\r\n        return new Buffer(decipher.output.toHex(), 'hex');\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  }\r\n  bumpIV(salt: string, bumps: number) {\r\n    if (bumps > 255) {\r\n      throw new Error('Invalid incremention');\r\n    }\r\n    const buf = new Buffer(salt, 'hex');\r\n    buf[13] = (buf[13] + 1) % 256;\r\n    return buf.toString('hex');\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { flatMap, catchError } from 'rxjs/operators';\r\nimport { of, Observable } from 'rxjs';\r\nimport { DefaultTransactionParams } from '../../interfaces';\r\nimport Big from 'big.js';\r\n\r\nconst httpOptions = { headers: { 'Content-Type': 'application/json' } };\r\nconst hardGasLimit = 800000;\r\nconst hardStorageLimit = 60000;\r\n@Injectable()\r\nexport class EstimateService {\r\n  queue = [];\r\n  CONSTANTS = this.operationService.CONSTANTS;\r\n  revealGasLimit = 10000;\r\n  nodeURL = this.CONSTANTS.NET.NODE_URL;\r\n  pkh: string;\r\n  pk: string;\r\n  hash: string;\r\n  chainId: string;\r\n  manager: string;\r\n  counter: number;\r\n  constructor(\r\n    private http: HttpClient,\r\n    private operationService: OperationService\r\n  ) { }\r\n  init(hash: string, chainId: string, counter: number, manager: string, pk: string, pkh: string) {\r\n    this.hash = hash;\r\n    this.chainId = chainId;\r\n    this.counter = counter;\r\n    this.manager = manager;\r\n    this.pk = pk;\r\n    this.pkh = pkh;\r\n  }\r\n  async preLoadData(pkh: string, pk: string) {\r\n    this.pkh = pkh;\r\n    this.pk = pk;\r\n    await Promise.all([this.operationService.getHeader().toPromise(), this.getCounter(pkh), this.getManager(pkh)]).then(req => {\r\n      if (req[0] && req[1] && (req[2]) || req[2] === null) {\r\n        this.init(req[0].hash, req[0].chain_id, req[1], req[2], pk, pkh);\r\n      }\r\n    });\r\n  }\r\n  async estimate(transactions: any, from: string, callback) {\r\n    this.queue.push({ transactions, from, callback });\r\n    if (this.queue.length === 1) {\r\n      while (this.queue.length > 0) {\r\n        while (this.queue.length > 1) {\r\n          this.queue[0].callback(null);\r\n          this.queue.shift();\r\n        }\r\n        let retry = false;\r\n        for (let i = 0; i < 1 || retry && i < 2; i++) {\r\n          await this._estimate(this.queue[0].transactions, this.queue[0].from).then((res) => {\r\n            this.queue[0].callback(res);\r\n          }).catch(async (error) => {\r\n            if (error.message && error.message === 'An operation assumed a contract counter in the past' && !retry) {\r\n              console.log('Update counter');\r\n              await this.preLoadData(this.pkh, this.pk);\r\n              retry = true;\r\n            } else {\r\n              this.queue[0].callback({ error });\r\n            }\r\n          });\r\n        }\r\n        this.queue.shift();\r\n      }\r\n    }\r\n  }\r\n  async _estimate(transactions: any, from: string): Promise<any> {\r\n    const extraGas = 80;\r\n    if (!this.hash) { return null; }\r\n    const simulation = {\r\n      fee: 0,\r\n      gasLimit: hardGasLimit,\r\n      storageLimit: hardStorageLimit\r\n    };\r\n    for (const tx of transactions) {\r\n      if (!tx.amount) {\r\n        tx.amount = 0;\r\n      }\r\n      if (tx.to.slice(0, 3) !== 'KT1') {\r\n        tx.amount = 0.000001;\r\n      }\r\n      tx.gasLimit = simulation.gasLimit;\r\n      tx.storageLimit = simulation.storageLimit;\r\n    }\r\n    if (this.hash && this.counter && (this.manager || this.manager === null)) {\r\n      const op = this.operationService.createTransactionObject(this.hash, this.counter, this.manager, transactions,\r\n        this.pkh, this.pk, from, simulation.fee);\r\n      const result = await this.simulate(op).toPromise().catch(\r\n        e => {\r\n          console.warn(e);\r\n          return null;\r\n        }\r\n      );\r\n      if (result && result.contents) {\r\n        let reveal = false;\r\n        const limits = [];\r\n        for (const content of result.contents) {\r\n          if (content.kind === 'reveal') {\r\n            reveal = true;\r\n          } else {\r\n            if (content.kind === 'transaction' && content.metadata.operation_result.status === 'applied') {\r\n              const { gasUsage, storageUsage } = this.getOpUsage(content);\r\n              limits.push({ gasLimit: gasUsage + extraGas, storageLimit: storageUsage });\r\n            } else {\r\n              return null;\r\n            }\r\n          }\r\n        }\r\n        return await this.operationService.localForge(op).pipe(flatMap(fop => {\r\n          const bytes = (fop.length / 2) + 64;\r\n          const gas = this.averageGasLimit(limits);\r\n          const storage = this.averageStorageLimit(limits);\r\n          const dtp: DefaultTransactionParams = { customLimits: limits, fee: this.recommendFee(limits, reveal, bytes), burn: this.burnFee(limits), gas, storage, reveal };\r\n          console.log(JSON.stringify(dtp));\r\n          return of(dtp);\r\n        })).toPromise();\r\n      } else if (typeof result.success === 'boolean' && result.success === false) {\r\n        console.log(result);\r\n        throw new Error(result.payload.msg);\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  getOpUsage(content: any): { gasUsage: number, storageUsage: number } {\r\n    let gasUsage = 0;\r\n    let burn = Big(0);\r\n    if (content.source && content.source === this.pkh) {\r\n      burn = burn.minus(content.amount ? content.amount : '0');\r\n      burn = burn.minus(content.fee ? content.fee : '0');\r\n    }\r\n    if (content.destination && content.destination === this.pkh) {\r\n      burn = burn.plus(content.amount ? content.amount : '0');\r\n    }\r\n    if (content.metadata.operation_result.balance_updates) {\r\n      for (const balanceUpdate of content.metadata.operation_result.balance_updates) {\r\n        if (balanceUpdate.contract === this.pkh) {\r\n          burn = burn.minus(balanceUpdate.change);\r\n        }\r\n      }\r\n    }\r\n    if (content.metadata.balance_updates) {\r\n      for (const balanceUpdate of content.metadata.balance_updates) {\r\n        if (balanceUpdate.contract === this.pkh) {\r\n          burn = burn.minus(balanceUpdate.change);\r\n        }\r\n      }\r\n    }\r\n    gasUsage += content.metadata.operation_result.consumed_gas ? Number(content.metadata.operation_result.consumed_gas) : 0;\r\n    if (content.metadata.internal_operation_results) {\r\n      for (const internalResult of content.metadata.internal_operation_results) {\r\n        if (internalResult.result) {\r\n          if (internalResult.result.consumed_gas) {\r\n            gasUsage += internalResult.result && internalResult.result.consumed_gas ? Number(internalResult.result.consumed_gas) : 0;\r\n          } if (internalResult.result.balance_updates) {\r\n            for (const balanceUpdate of internalResult.result.balance_updates) {\r\n              if (balanceUpdate.contract === this.pkh && balanceUpdate.change.slice(0, 1) === '-') {\r\n                burn = burn.minus(balanceUpdate.change);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const storageUsage = Math.round(burn / 1000);\r\n    if (gasUsage < 0 || gasUsage > hardGasLimit || storageUsage < 0 || storageUsage > hardStorageLimit) {\r\n      throw new Error('InvalidUsageCalculation');\r\n    }\r\n    return { gasUsage, storageUsage };\r\n  }\r\n  /*\r\n    Need to be updated when fee market appear or default behavior for bakers changes\r\n  */\r\n  recommendFee(limits: any, reveal: boolean, bytes: number): number {\r\n    const minimalFee = 100;\r\n    const feePerByte = 1;\r\n    const feePerGasUnit = 0.1;\r\n    let gasUnits = 0;\r\n    let numberOfOperations = 0;\r\n    if (reveal) {\r\n      gasUnits += this.revealGasLimit;\r\n      numberOfOperations++;\r\n    }\r\n    for (const data of limits) {\r\n      gasUnits += data.gasLimit;\r\n      numberOfOperations++;\r\n    }\r\n    bytes += 10 * numberOfOperations; // add 10 extra bytes for variation in amount & fee\r\n    return Number(Big(Math.ceil(minimalFee + (feePerByte * bytes) + (feePerGasUnit * gasUnits))).div(1000000));\r\n  }\r\n  averageGasLimit(limits: any) {\r\n    let totalGasLimit = 0;\r\n    for (const data of limits) {\r\n      totalGasLimit += data.gasLimit;\r\n    }\r\n    return Math.ceil(totalGasLimit / limits.length);\r\n  }\r\n  averageStorageLimit(limits: any) {\r\n    let totalStorageLimit = 0;\r\n    for (const data of limits) {\r\n      totalStorageLimit += data.storageLimit;\r\n    }\r\n    return Math.ceil(totalStorageLimit / limits.length);\r\n  }\r\n  burnFee(limits: any) {\r\n    let totalStorageLimit = 0;\r\n    for (const data of limits) {\r\n      totalStorageLimit += data.storageLimit;\r\n    }\r\n    return totalStorageLimit * 0.001;\r\n  }\r\n  simulate(op: any): Observable<any> {\r\n    op.signature = 'edsigtXomBKi5CTRf5cjATJWSyaRvhfYNHqSUGrn4SdbYRcGwQrUGjzEfQDTuqHhuA8b2d8NarZjz8TRf65WkpQmo423BtomS8Q';\r\n    return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/scripts/run_operation',\r\n      { operation: op, chain_id: this.chainId }, httpOptions).pipe(flatMap(res => {\r\n        console.log(JSON.stringify(res));\r\n        this.operationService.checkApplied([res]);\r\n        return of(res);\r\n      })).pipe(catchError(err => this.operationService.errHandler(err)));\r\n  }\r\n  private async getCounter(pkh: string): Promise<number> {\r\n    return fetch(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh + '/counter', {}).then(response => {\r\n      return response.json();\r\n    });\r\n  }\r\n  private async getManager(pkh: string): Promise<string> {\r\n    return fetch(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh + '/manager_key', {}).then(response => {\r\n      return response.json();\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { saveAs } from 'file-saver';\r\n\r\n@Injectable()\r\nexport class ExportService {\r\n\r\n  constructor(\r\n  ) { }\r\n  downloadWallet(data: any) {\r\n    const blob = new Blob([JSON.stringify(data, null, 4)], { type: 'application/json' });\r\n    let filename = 'wallet.tez';\r\n    if (data.walletType === 1) {\r\n      filename = 'view-only_wallet.tez';\r\n    } else if (data.walletType === 2) {\r\n      filename = 'observer_wallet.tez';\r\n    } else if (data.walletType === 3) {\r\n      filename = 'ledger_wallet.tez';\r\n    } else if (data.walletType === 4) {\r\n      filename = 'hd-wallet.tez';\r\n    }\r\n    saveAs(blob, filename);\r\n  }\r\n\r\n  downloadOperationData(hex: string, signed: boolean) {\r\n    const data = {\r\n      hex: hex,\r\n      signed: signed\r\n    };\r\n    let filename;\r\n    if (signed) {\r\n      filename = 'signed.tzop';\r\n    } else {\r\n      filename = 'unsigned.tzop';\r\n    }\r\n    const blob = new Blob([JSON.stringify(data, null, 4)], { type: 'application/json' });\r\n    saveAs(blob, filename);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { WalletType, KeyPair } from './../../interfaces';\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { CoordinatorService } from '../coordinator/coordinator.service';\r\nimport { ConseilService } from '../conseil/conseil.service';\r\nimport {\r\n  LegacyWalletV1,\r\n  LegacyWalletV2,\r\n  LegacyWalletV3,\r\n  HdWallet,\r\n  LedgerWallet,\r\n  TorusWallet\r\n} from '../wallet/wallet';\r\nimport { hd, utils } from '@tezos-core-tools/crypto-utils';\r\nimport { EncryptionService } from '../encryption/encryption.service';\r\nimport { TorusService } from '../torus/torus.service';\r\n\r\n@Injectable()\r\nexport class ImportService {\r\n  constructor(\r\n    private walletService: WalletService,\r\n    private coordinatorService: CoordinatorService,\r\n    private conseilService: ConseilService,\r\n    private encryptionService: EncryptionService,\r\n    private torusService: TorusService\r\n  ) { }\r\n  pwdRequired(json: string) {\r\n    const walletData = JSON.parse(json);\r\n    if (walletData.provider !== 'Kukai') {\r\n      throw new Error(`Unsupported wallet format`);\r\n    }\r\n    if (walletData.walletType === 0 || walletData.walletType === 4) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  async importWalletFromJson(json: any, pwd: string): Promise<boolean> {\r\n    // From file\r\n    let seed;\r\n    let walletData;\r\n    try {\r\n      walletData = JSON.parse(json);\r\n      if (walletData.walletType === 4 && walletData.version === 3) {\r\n        //hd\r\n        seed = await this.encryptionService.decrypt(\r\n          walletData.encryptedSeed,\r\n          pwd,\r\n          walletData.iv,\r\n          3\r\n        );\r\n      } else if (walletData.walletType === 0) {\r\n        if (walletData.version === 1) {\r\n          console.log('v1');\r\n          seed = await this.encryptionService.decrypt(\r\n            walletData.encryptedSeed,\r\n            pwd,\r\n            walletData.pkh.slice(3, 19),\r\n            1\r\n          );\r\n          if (utils.seedToKeyPair(seed).pkh !== walletData.pkh) {\r\n            seed = '';\r\n          }\r\n        } else if (walletData.version === 2 || walletData.version === 3) {\r\n          seed = await this.encryptionService.decrypt(\r\n            walletData.encryptedSeed,\r\n            pwd,\r\n            walletData.iv,\r\n            walletData.version\r\n          );\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      throw new Error('Failed to decrypt keystore file');\r\n    }\r\n    if (seed) {\r\n      return this.importWalletFromObject(walletData, seed).then(\r\n        (ans) => {\r\n          return ans;\r\n        },\r\n        (e) => {\r\n          console.error(e);\r\n          throw new Error('Failed to fetch account(s). Please check your connection.');\r\n        }\r\n      );\r\n    } else {\r\n      throw new Error('Wrong password');\r\n    }\r\n  }\r\n  async importWalletFromObject(data: any, seed: any): Promise<boolean> {\r\n    this.coordinatorService.stopAll();\r\n    if (data.walletType === 4 && data.version === 3) {\r\n      // HD\r\n      this.walletService.wallet = new HdWallet(\r\n        data.iv,\r\n        data.encryptedSeed,\r\n        data.encryptedEntropy\r\n      );\r\n    } else if (data.walletType === 0) {\r\n      if (data.version === 3) {\r\n        this.walletService.wallet = new LegacyWalletV3(\r\n          data.iv,\r\n          data.encryptedSeed,\r\n          data.encryptedEntropy\r\n        );\r\n      } else if (data.version === 2) {\r\n        this.walletService.wallet = new LegacyWalletV2(\r\n          data.iv,\r\n          data.encryptedSeed\r\n        );\r\n      } else if (data.version === 1) {\r\n        this.walletService.wallet = new LegacyWalletV1(\r\n          data.pkh.slice(3, 19),\r\n          data.encryptedSeed\r\n        );\r\n      } else {\r\n        throw new Error('Unsupported wallet file');\r\n      }\r\n    } else {\r\n      throw new Error('Unsupported wallet file');\r\n    }\r\n    let keys: KeyPair;\r\n    if (seed.length === 32) {\r\n      keys = utils.seedToKeyPair(seed);\r\n    } else if (seed.length === 64) {\r\n      keys = hd.keyPairFromAccountIndex(seed, 0);\r\n    } else {\r\n      throw new Error('Invalid seed length');\r\n    }\r\n    this.walletService.initStorage();\r\n    if (this.walletService.wallet instanceof HdWallet) {\r\n      let index = 0;\r\n      let counter = 1;\r\n      while (counter) {\r\n        keys = hd.keyPairFromAccountIndex(seed, index);\r\n        counter = await this.conseilService\r\n          .accountInfo(keys.pkh)\r\n          .toPromise();\r\n        if (counter || index === 0) {\r\n          this.walletService.addImplicitAccount(\r\n            keys.pk,\r\n            index++\r\n          );\r\n          await this.findContracts(keys.pkh);\r\n        }\r\n      }\r\n      this.walletService.wallet.index = index;\r\n    } else {\r\n      this.walletService.addImplicitAccount(keys.pk);\r\n      await this.findContracts(keys.pkh, true);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  async importWalletFromPk(pk: string, derivationPath: string, verifierDetails: any = null): Promise<boolean> {\r\n    this.coordinatorService.stopAll();\r\n    if (derivationPath) {\r\n      return this.ledgerImport(pk, derivationPath);\r\n    } else if (verifierDetails) {\r\n      return this.torusImport(pk, verifierDetails);\r\n    }\r\n  }\r\n  async ledgerImport(pk: string, derivationPath: string) {\r\n    try {\r\n      this.walletService.initStorage();\r\n      this.walletService.wallet = new LedgerWallet();\r\n      this.walletService.addImplicitAccount(pk, derivationPath);\r\n      await this.findContracts(this.walletService.wallet.implicitAccounts[0].pkh);\r\n      return true;\r\n    } catch (err) {\r\n      console.warn(err);\r\n      this.walletService.clearWallet();\r\n      return false;\r\n    }\r\n  }\r\n  async torusImport(pk: string, verifierDetails: any) {\r\n    try {\r\n      this.walletService.initStorage();\r\n      this.walletService.wallet = new TorusWallet(verifierDetails.verifier, verifierDetails.id, verifierDetails.name);\r\n      if (verifierDetails.verifier === 'twitter') {\r\n        this.updateTwitterName(verifierDetails.id);\r\n      }\r\n      this.walletService.addImplicitAccount(pk);\r\n      return true;\r\n    } catch (err) {\r\n      console.warn(err);\r\n      this.walletService.clearWallet();\r\n      return false;\r\n    }\r\n  }\r\n  async updateTwitterName(verifierId: string) {\r\n    const twitterId = verifierId.split('|')[1];\r\n    const { username } = await this.torusService.twitterLookup(undefined, twitterId);\r\n    if (username && this.walletService.wallet instanceof TorusWallet) {\r\n      this.walletService.wallet.name = '@' + username;\r\n    }\r\n  }\r\n  async findContracts(pkh: string, recursiveScan = false, address: string = pkh) {\r\n    const addresses = await this.conseilService.getContractAddresses(address);\r\n    for (const KT of addresses) {\r\n      console.log('Found KT: ' + KT);\r\n      this.walletService.addOriginatedAccount(KT, pkh);\r\n    }\r\n    this.walletService.storeWallet();\r\n    if (recursiveScan && addresses.length) {\r\n      for (const KT of addresses) {\r\n        await this.findContracts(pkh, true, KT);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { utils, hd } from '@tezos-core-tools/crypto-utils';\r\nimport * as zxcvbn from 'zxcvbn';\r\n\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Injectable()\r\nexport class InputValidationService {\r\n\r\n  constructor(\r\n    private operationService: OperationService,\r\n    private translate: TranslateService\r\n  ) { }\r\n  /*\r\n    Input validations\r\n  */\r\n  mnemonics(mnemonics: string): boolean {\r\n    return this.operationService.validMnemonic(mnemonics);\r\n  }\r\n  password(password: string): boolean {\r\n    return (zxcvbn(password).score === 4);\r\n  }\r\n  passwordStrengthDisplay(password: string): string {\r\n    if (!password) {\r\n      return '';\r\n    }\r\n    switch (zxcvbn(password).score) {\r\n      case 0: {\r\n        return this.translate.instant('INPUTVALIDATIONCOMPONENT.CATASTROPHIC');  // 'Catastrophic!'\r\n      } case 1: {\r\n        return this.translate.instant('INPUTVALIDATIONCOMPONENT.VERYWEAK');  // 'Very weak!'\r\n      } case 2: {\r\n        return this.translate.instant('INPUTVALIDATIONCOMPONENT.WEAK');  // 'Weak!'\r\n      } case 3: {\r\n        return this.translate.instant('INPUTVALIDATIONCOMPONENT.WEAK');  // 'Weak!'\r\n      } case 4: {\r\n        return this.translate.instant('INPUTVALIDATIONCOMPONENT.STRONG');  // 'Strong!'\r\n      } default: {\r\n        return '';\r\n      }\r\n    }\r\n  }\r\n  address(address: string): Boolean {\r\n    return this.operationService.validAddress(address);\r\n  }\r\n  torusAccount(verifierId: string, loginType: string): Boolean {\r\n    switch (loginType) {\r\n      case 'google':\r\n        return this.email(verifierId);\r\n      case 'reddit':\r\n        return this.redditAccount(verifierId);\r\n      case 'twitter':\r\n        return this.twitterAccount(verifierId);\r\n      default:\r\n        return false;\r\n    }\r\n\r\n  }\r\n  redditAccount(username: string) {\r\n    // Letters, numbers, dashes, and underscores only\r\n    // Username must be between 3 and 20 characters\r\n    const re = /^[0-9a-zA-Z\\-\\_]{3,20}$/;\r\n    return re.test(username);\r\n  }\r\n  email(email: string): Boolean {\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n  }\r\n  twitterAccount(username: string) {\r\n    // The only characters you can use are uppercase and lowercase letters, numbers, and the underscore character ( _ ).\r\n    const re = /^\\@{1}[0-9a-zA-Z\\_]{1,15}$/;\r\n    return re.test(username);\r\n  }\r\n  twitterId(id: string) {\r\n    const re = /^[0-9]+$/;\r\n    return re.test(id);\r\n  }\r\n  passphrase(passphrase: string): Boolean {\r\n    return true;\r\n  }\r\n  amount(amount: string): Boolean {\r\n    console.log(amount);\r\n    if (amount === '' || amount === '0') { // default value / zero\r\n      return true;\r\n    } else if (Number(amount) && amount.match(/^(0|[1-9][0-9]{0,8})(\\.[0-9]{1,6}){0,1}$/g)) { // Positive number\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  fee(fee: string): Boolean {\r\n    return this.amount(fee); // same as amount\r\n  }\r\n  gas(amount: string): Boolean {\r\n    if (amount === '' || amount === '0') { // default value / zero\r\n      return true;\r\n    } else if (Number(amount) && 0 < Number(amount) && Number(amount) % 1 === 0) { // Positive integer\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  storage(amount: string) {\r\n    return this.gas(amount);\r\n  }\r\n  code(code: string): Boolean {\r\n    if (code && code.length === 40 && code.match(/^[0-9a-f]*$/g)) { // 40 hex chars\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  derivationPath(path: string): Boolean {\r\n    const m = path.match(/^44\\'\\/1729(\\'\\/[0-9]+)+\\'$/g);\r\n    if (m || path === '44\\'/1729\\'') {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  operationRaw(hex: string): Boolean {\r\n    if (hex && hex.match(/^[a-f0-9]*$/)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport 'babel-polyfill';\r\nimport TransportU2F from '@ledgerhq/hw-transport-u2f';\r\nimport Tezos from '@obsidiansystems/hw-app-xtz';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { MessageService } from '../message/message.service';\r\n\r\n@Injectable()\r\nexport class LedgerService {\r\n  transport: any;\r\n  errorMessage = 'U2F browser support is needed for Ledger. Please use Chrome, Opera ' +\r\n    'or Firefox with a U2F extension. Also make sure you\\'re on an HTTPS connection';\r\n  constructor(\r\n    private operationService: OperationService,\r\n    private messageService: MessageService\r\n  ) {}\r\n  async setTransport() {\r\n    if (!this.transport) {\r\n      console.log('Trying to use U2F for transport...');\r\n      try {\r\n        this.transport = await TransportU2F.create();\r\n        console.log('Transport is now set to use U2F!');\r\n      } catch (e) {\r\n        console.log('Couldn\\'t use U2F for transport!');\r\n      }\r\n    }\r\n  }\r\n  async transportCheck() {\r\n    if (!this.transport) {\r\n      await this.setTransport();\r\n    }\r\n    if (!this.transport) {\r\n      this.messageService.addError(this.errorMessage);\r\n    }\r\n  }\r\n  async getPublicAddress(path: string) {\r\n    await this.transportCheck();\r\n    const xtz = new Tezos(this.transport);\r\n    console.log(path);\r\n    const result = await xtz.getAddress(path, true)\r\n      .catch(e => {\r\n        if (e.message) {\r\n          this.messageService.addError(e.message);\r\n        } else {\r\n          this.messageService.addError(e);\r\n        }\r\n        throw e;\r\n      });\r\n    const pk = this.operationService.hex2pk(result.publicKey);\r\n    return pk;\r\n  }\r\n  async signOperation(op: string, path: string) {\r\n    await this.transportCheck();\r\n    const xtz = new Tezos(this.transport);\r\n    console.log(path);\r\n    const toSign = '03' + op;\r\n    if (toSign.length > 512) {\r\n      this.messageService.addError('Operation is too big for Ledger to sign (' + toSign.length / 2 + ' > 256 bytes)', 0);\r\n      throw new Error('LedgerSignError');\r\n    }\r\n    const result = await xtz.signOperation(path, toSign)\r\n      .catch(e => {\r\n        this.messageService.addError(e, 0);\r\n      });\r\n    console.log(JSON.stringify(result));\r\n    if (result && result.signature) {\r\n      return result.signature;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { OperationService } from '../../services/operation/operation.service';\r\nimport { TorusService } from '../../services/torus/torus.service';\r\nimport { WalletService } from '../../services/wallet/wallet.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\n\r\nenum LookupType { // ordered in priority\r\n  AddressBook,\r\n  TezosDomains,\r\n  Google,\r\n  Reddit,\r\n  Twitter\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LookupService {\r\n  public records: { address: string, data: { name: string, lookupType: LookupType }[]}[] = [];\r\n  private pendingLookups: Record<string, boolean> = {};\r\n  constructor(\r\n    private operationService: OperationService,\r\n    private torusService: TorusService,\r\n    private walletService: WalletService,\r\n    private inputValidationService: InputValidationService\r\n  ) {\r\n    this.initCheck();\r\n  }\r\n  initCheck() {\r\n    if (!this.records.length &&\r\n      this.walletService.wallet &&\r\n      this.walletService.wallet.lookups.length) {\r\n        console.log('### Loading lookups from memory');\r\n        this.records = this.walletService.wallet.lookups;\r\n      }\r\n  }\r\n  add(address: string, name: string, lookupType: LookupType) {\r\n    console.log('#name', name);\r\n    const { x, y } = this.index(address, lookupType);\r\n    if (x !== -1) {\r\n      if (y === -1) {\r\n        this.records[x].data.push({ name, lookupType });\r\n      }\r\n    } else {\r\n      this.records.push({ address, data: [{ name, lookupType }]});\r\n    }\r\n    this.walletService.wallet.lookups = this.records;\r\n    this.walletService.storeWallet();\r\n  }\r\n  clear() {\r\n    this.records = [];\r\n    this.pendingLookups = {};\r\n  }\r\n  mark(address: string) {\r\n    const { x, y } = this.indexTop(address);\r\n    if (x === -1) {\r\n      this.records.push({ address, data: []});\r\n    }\r\n    this.walletService.storeWallet();\r\n  }\r\n  async check(address: string) {\r\n    this.initCheck();\r\n    if (address && address.slice(0, 3) === 'tz2') {\r\n      const { x } = this.index(address, 0);\r\n      if (!this.pendingLookups[address] && x === -1) {\r\n        this.pendingLookups[address] = true;\r\n        this.operationService.torusKeyLookup(address).subscribe(async (ans: any) => {\r\n          if (ans) {\r\n          if (\r\n            ans.result &&\r\n            ans.result.Verifiers\r\n          ) {\r\n            const keys = Object.keys(ans.result.Verifiers);\r\n            const verifierMap = this.torusService.verifierMap;\r\n            for (const key of keys) {\r\n              if (key === verifierMap['google'].verifier) {\r\n                this.add(address, ans.result.Verifiers[verifierMap['google'].verifier][0], LookupType.Google);\r\n              } else if (key === verifierMap['reddit'].verifier) {\r\n                this.add(address, ans.result.Verifiers[verifierMap['reddit'].verifier][0], LookupType.Reddit);\r\n              } else if (key === verifierMap['twitter'].verifier) {\r\n                const verifierId = ans.result.Verifiers[verifierMap['twitter'].verifier][0];\r\n                const verifierArray = verifierId.split('|');\r\n                if (verifierArray[0] === 'twitter' && this.inputValidationService.twitterId(verifierArray[1])) {\r\n                  const twitterId = verifierArray[1];\r\n                  const { username } = await this.torusService.twitterLookup(undefined, twitterId);\r\n                  if (username) {\r\n                    this.add(address, '@' + username, LookupType.Twitter);\r\n                  }\r\n                }\r\n              } else {\r\n                console.log('Unhandled verifier result', ans);\r\n              }\r\n            }\r\n            this.pendingLookups[address] = false;\r\n          } else if (!ans.noReveal) {\r\n            this.mark(address);\r\n          }\r\n          // Do nothing if tz2 haven't revealed pk\r\n        }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  torusEntryExist(address: string): boolean {\r\n    const record = this.records[address];\r\n    if (record) {\r\n      for (const entry of record) {\r\n        if (entry.lookupType > 1) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  index(address: string, lookupType: LookupType) {\r\n    let [x, y] = Array(2).fill(-1);\r\n    for (let i = 0; i < this.records.length; i++) {\r\n      if (this.records[i].address === address) {\r\n        x = i;\r\n        for (let j = 0; j < this.records[i].data.length; j++) {\r\n          if (this.records[i].data[j].lookupType === lookupType) {\r\n            y = j;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return { x, y };\r\n  }\r\n  indexTop(address: string) {\r\n    let [x, y] = Array(2).fill(-1);\r\n    for (let i = 0; i < this.records.length; i++) {\r\n      if (this.records[i].address === address) {\r\n        x = i;\r\n        for (let j = 0; j < this.records[i].data.length; j++) {\r\n          if (this.records[i].data[j].lookupType < y || y === -1) {\r\n            y = j;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return { x, y };\r\n  }\r\n  resolve(address: string): any {\r\n    this.initCheck();\r\n    const { x, y } = this.indexTop(address);\r\n    if (x !== -1 && y !== -1) {\r\n      return { name: this.records[x].data[y].name, lookupType: this.records[x].data[y].lookupType, address };\r\n    }\r\n    return { address };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class MessageService {\r\n  spinnerOn = false;\r\n  spinnerText = '';\r\n  messages: any[] = [];\r\n  defaultTime = 10;\r\n  add(message: string, seconds: number = this.defaultTime) {\r\n    const type = 'info';\r\n    console.log(type + ': ' + message);\r\n    this.messages.push({\r\n      type: type,\r\n      msg: message,\r\n      timeout: seconds * 1000\r\n    });\r\n  }\r\n  addError(message: string, seconds: number = this.defaultTime) {\r\n    const type = 'danger';\r\n    console.log(type + ': ' + message);\r\n    this.messages.push({\r\n      type: type,\r\n      msg: message,\r\n      timeout: seconds * 1000\r\n    });\r\n  }\r\n  addWarning(message: string, seconds: number = this.defaultTime) {\r\n    const type = 'warning';\r\n    console.log(type + ': ' + message);\r\n    this.messages.push({\r\n      type: type,\r\n      msg: message,\r\n      timeout: seconds * 1000\r\n    });\r\n  }\r\n  addSuccess(message: string, seconds: number = this.defaultTime) {\r\n    const type = 'success';\r\n    console.log(type + ': ' + message);\r\n    this.messages.push({\r\n      type: type,\r\n      msg: message,\r\n      timeout: seconds * 1000\r\n    });\r\n  }\r\n  emailNotify(email: string, amount: string) {\r\n    console.log(email);\r\n    const type = 'success';\r\n    this.messages.push({\r\n      type: type,\r\n      timeout: 0,\r\n      msg: 'email',\r\n      email,\r\n      amount\r\n    });\r\n  }\r\n  redditNotify(username: string, amount: string) {\r\n    console.log(username);\r\n    const type = 'success';\r\n    this.messages.push({\r\n      type: type,\r\n      timeout: 0,\r\n      msg: 'Reddit',\r\n      username,\r\n      amount\r\n    });\r\n  }\r\n  twitterNotify(twitterId: string, handler: string, amount: string) {\r\n    console.log(twitterId);\r\n    const type = 'success';\r\n    this.messages.push({\r\n      type: type,\r\n      timeout: 0,\r\n      msg: 'Twitter',\r\n      twitterId,\r\n      handler,\r\n      amount\r\n    });\r\n  }\r\n  clear() {\r\n    this.messages = [];\r\n  }\r\n  async startSpinner(text: string = '') {\r\n    this.spinnerText = text;\r\n    this.spinnerOn = true;\r\n  }\r\n  async stopSpinner() {\r\n    this.spinnerText = '';\r\n    this.spinnerOn = false;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { of, Observable, from as fromPromise } from 'rxjs';\r\nimport { catchError, flatMap } from 'rxjs/operators';\r\nimport { Buffer } from 'buffer';\r\nimport * as libs from 'libsodium-wrappers';\r\nimport * as Bs58check from 'bs58check';\r\nimport * as bip39 from 'bip39';\r\nimport Big from 'big.js';\r\nimport { localForger } from '@taquito/local-forging';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Constants } from '../../constants';\r\nimport { ErrorHandlingPipe } from '../../pipes/error-handling.pipe';\r\nimport * as elliptic from 'elliptic';\r\nimport {instantiateSecp256k1, hexToBin, binToHex} from '@bitauth/libauth';\r\n\r\nconst httpOptions = { headers: { 'Content-Type': 'application/json' } };\r\n\r\nexport interface KeyPair {\r\n  sk: string | null;\r\n  pk: string | null;\r\n  pkh: string;\r\n}\r\n@Injectable()\r\nexport class OperationService {\r\n  CONSTANTS = new Constants();\r\n  nodeURL = this.CONSTANTS.NET.NODE_URL;\r\n  prefix = {\r\n    tz1: new Uint8Array([6, 161, 159]),\r\n    tz2: new Uint8Array([6, 161, 161]),\r\n    tz3: new Uint8Array([6, 161, 164]),\r\n    edpk: new Uint8Array([13, 15, 37, 217]),\r\n    sppk: new Uint8Array([3, 254, 226, 86]),\r\n    edsk: new Uint8Array([43, 246, 78, 7]),\r\n    spsk: new Uint8Array([17, 162, 224, 201]),\r\n    edsig: new Uint8Array([9, 245, 205, 134, 18]),\r\n    spsig: new Uint8Array([13, 115, 101, 19, 63]),\r\n    sig: new Uint8Array([4, 130, 43]),\r\n    o: new Uint8Array([5, 116]),\r\n    B: new Uint8Array([1, 52]),\r\n    TZ: new Uint8Array([3, 99, 29]),\r\n    KT: new Uint8Array([2, 90, 121])\r\n  };\r\n  microTez = new Big(1000000);\r\n  feeHardCap = 10; //tez\r\n  constructor(\r\n    private http: HttpClient,\r\n    private translate: TranslateService,\r\n    private errorHandlingPipe: ErrorHandlingPipe\r\n  ) { }\r\n  /*\r\n    Returns an observable for the activation of an ICO identity\r\n  */\r\n  activate(pkh: string, secret: string): Observable<any> {\r\n    return this.getHeader()\r\n      .pipe(flatMap((header: any) => {\r\n        const fop: any = {\r\n          branch: header.hash,\r\n          contents: [{\r\n            kind: 'activate_account',\r\n            pkh: pkh,\r\n            secret: secret\r\n          }]\r\n        };\r\n        return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/forge/operations', fop)\r\n          .pipe(flatMap((opbytes: any) => {\r\n            const sopbytes: string = opbytes + Array(129).join('0');\r\n            fop.protocol = header.protocol;\r\n            fop.signature = 'edsigtXomBKi5CTRf5cjATJWSyaRvhfYNHqSUGrn4SdbYRcGwQrUGjzEfQDTuqHhuA8b2d8NarZjz8TRf65WkpQmo423BtomS8Q';\r\n            return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/preapply/operations', [fop])\r\n              .pipe(flatMap((preApplyResult: any) => {\r\n                console.log(JSON.stringify(preApplyResult));\r\n                return this.http.post(this.nodeURL + '/injection/operation',\r\n                  JSON.stringify(sopbytes), httpOptions)\r\n                  .pipe(flatMap((final: any) => {\r\n                    return this.opCheck(final);\r\n                  }));\r\n              }));\r\n          }));\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  opCheck(final: any, newPkh: string = null): Observable<any> {\r\n    if (typeof (final) === 'string' && final.length === 51) {\r\n      return of(\r\n        {\r\n          success: true,\r\n          payload: {\r\n            opHash: final,\r\n            newPkh: newPkh\r\n          }\r\n        });\r\n    } else {\r\n      return of(\r\n        {\r\n          success: false,\r\n          payload: {\r\n            opHash: null,\r\n            msg: final\r\n          }\r\n        });\r\n    }\r\n  }\r\n  /*\r\n    Returns an observable for the origination of new accounts.\r\n  */\r\n  originate(pkh: string, amount: number, fee: number = 0, keys: KeyPair): Observable<any> {\r\n    return this.getHeader()\r\n      .pipe(flatMap((header: any) => {\r\n        return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/counter', {})\r\n          .pipe(flatMap((actions: number) => {\r\n            return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/manager_key', {})\r\n              .pipe(flatMap((manager: any) => {\r\n                if (fee >= this.feeHardCap) {\r\n                  throw new Error('TooHighFee');\r\n                }\r\n                let counter: number = Number(actions);\r\n                const script = this.getManagerScript(keys.pkh);\r\n                const fop: any = {\r\n                  branch: header.hash,\r\n                  contents: [\r\n                    {\r\n                      kind: 'origination',\r\n                      source: keys.pkh,\r\n                      fee: this.microTez.times(fee).toString(),\r\n                      counter: (++counter).toString(),\r\n                      gas_limit: '15678',\r\n                      storage_limit: '509',\r\n                      balance: this.microTez.times(amount).toString(),\r\n                      script: script\r\n                    }\r\n                  ]\r\n                };\r\n                if (manager === null) {\r\n                  fop.contents[1] = fop.contents[0];\r\n                  fop.contents[0] = {\r\n                    kind: 'reveal',\r\n                    source: keys.pkh,\r\n                    fee: '0',\r\n                    counter: (counter).toString(),\r\n                    gas_limit: '10000',\r\n                    storage_limit: '0',\r\n                    public_key: keys.pk\r\n                  };\r\n                  fop.contents[1].counter = (Number(fop.contents[1].counter) + 1).toString();\r\n                }\r\n                return this.operation(fop, header, keys, true);\r\n              }));\r\n          }));\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  /*\r\n    Returns an observable for the transaction of tez.\r\n  */\r\n  transfer(from: string, transactions: any, fee: number, keys: KeyPair): Observable<any> {\r\n    return this.getHeader()\r\n      .pipe(flatMap((header: any) => {\r\n        return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/counter', {})\r\n          .pipe(flatMap((actions: any) => {\r\n            return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/manager_key', {})\r\n              .pipe(flatMap((manager: any) => {\r\n                if (fee >= this.feeHardCap) {\r\n                  throw new Error('TooHighFee');\r\n                }\r\n                const counter: number = Number(actions);\r\n                const fop = this.createTransactionObject(header.hash, counter, manager, transactions, keys.pkh, keys.pk, from, fee);\r\n                return this.operation(fop, header, keys);\r\n              }));\r\n          }));\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  createTransactionObject(hash: string, counter: number, manager: string, transactions: any,\r\n    pkh: string, pk: string, from: string, fee: number): any {\r\n    const fop: any = {\r\n      branch: hash,\r\n      contents: []\r\n    };\r\n    if (manager === null) { // Reveal\r\n      fop.contents.push({\r\n        kind: 'reveal',\r\n        source: pkh,\r\n        fee: '0',\r\n        counter: (++counter).toString(),\r\n        gas_limit: '10000',\r\n        storage_limit: '0',\r\n        public_key: pk\r\n      });\r\n    }\r\n    for (let i = 0; i < transactions.length; i++) {\r\n      const currentFee = i === transactions.length - 1 ? this.microTez.times(fee).toString() : '0';\r\n      const gasLimit = transactions[i].gasLimit.toString();\r\n      const storageLimit = transactions[i].storageLimit.toString();\r\n      if (from.slice(0, 2) === 'tz') {\r\n        const transactionOp: any = {\r\n          kind: 'transaction',\r\n          source: from,\r\n          fee: currentFee,\r\n          counter: (++counter).toString(),\r\n          gas_limit: gasLimit,\r\n          storage_limit: storageLimit,\r\n          amount: this.microTez.times(transactions[i].amount).toString(),\r\n          destination: transactions[i].to,\r\n        };\r\n        fop.contents.push(transactionOp);\r\n      } else if (from.slice(0, 2) === 'KT') {\r\n        if (transactions[i].to.slice(0, 2) === 'tz') {\r\n          const managerTransaction = this.getContractPkhTransaction(transactions[i].to, this.microTez.times(transactions[i].amount).toString());\r\n          fop.contents.push({\r\n            kind: 'transaction',\r\n            source: pkh,\r\n            fee: currentFee,\r\n            counter: (++counter).toString(),\r\n            gas_limit: gasLimit,\r\n            storage_limit: storageLimit,\r\n            amount: '0',\r\n            destination: from,\r\n            parameters: managerTransaction\r\n          });\r\n        } else if (transactions[i].to.slice(0, 2) === 'KT') {\r\n          const managerTransaction = this.getContractKtTransaction(transactions[i].to, this.microTez.times(transactions[i].amount).toString());\r\n          fop.contents.push({\r\n            kind: 'transaction',\r\n            source: pkh,\r\n            fee: currentFee,\r\n            counter: (++counter).toString(),\r\n            gas_limit: gasLimit,\r\n            storage_limit: storageLimit,\r\n            amount: '0',\r\n            destination: from,\r\n            parameters: managerTransaction\r\n          });\r\n        }\r\n      }\r\n    }\r\n    return fop;\r\n  }\r\n  /*\r\n    Returns an observable for the delegation of baking rights.\r\n  */\r\n  delegate(from: string, to: string, fee: number = 0, keys: KeyPair): Observable<any> {\r\n    return this.getHeader()\r\n      .pipe(flatMap((header: any) => {\r\n        return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/counter', {})\r\n          .pipe(flatMap((actions: any) => {\r\n            return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + keys.pkh + '/manager_key', {})\r\n              .pipe(flatMap((manager: any) => {\r\n                if (fee >= this.feeHardCap) {\r\n                  throw new Error('TooHighFee');\r\n                }\r\n                let counter: number = Number(actions);\r\n                let delegationOp: any;\r\n                if (from.slice(0, 2) === 'tz') {\r\n                  delegationOp = {\r\n                    kind: 'delegation',\r\n                    source: from,\r\n                    fee: this.microTez.times(fee).toString(),\r\n                    counter: (++counter).toString(),\r\n                    gas_limit: '10000',\r\n                    storage_limit: '0',\r\n                  };\r\n                  if (to !== '') {\r\n                    delegationOp.delegate = to;\r\n                  }\r\n                } else if (from.slice(0, 2) === 'KT') {\r\n                  delegationOp = {\r\n                    kind: 'transaction',\r\n                    source: keys.pkh,\r\n                    fee: this.microTez.times(fee).toString(),\r\n                    counter: (++counter).toString(),\r\n                    gas_limit: '26283',\r\n                    storage_limit: '0',\r\n                    amount: '0',\r\n                    destination: from,\r\n                    parameters: (to !== '') ? this.getContractDelegation(to) : this.getContractUnDelegation()\r\n                  };\r\n                }\r\n                const fop: any = {\r\n                  branch: header.hash,\r\n                  contents: [\r\n                    delegationOp\r\n                  ]\r\n                };\r\n                if (manager === null) {\r\n                  fop.contents[1] = fop.contents[0];\r\n                  fop.contents[0] = {\r\n                    kind: 'reveal',\r\n                    source: keys.pkh,\r\n                    fee: '0',\r\n                    counter: (counter).toString(),\r\n                    gas_limit: '10000',\r\n                    storage_limit: '0',\r\n                    public_key: keys.pk\r\n                  };\r\n                  fop.contents[1].counter = (Number(fop.contents[1].counter) + 1).toString();\r\n                }\r\n                return this.operation(fop, header, keys);\r\n              }));\r\n          }));\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  /*\r\n  Help function for operations\r\n  */\r\n  operation(fop: any, header: any, keys: KeyPair, origination: boolean = false): Observable<any> {\r\n    console.log('fop to send: ' + JSON.stringify(fop));\r\n    return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/forge/operations', fop)\r\n      .pipe(flatMap((opbytes: any) => {\r\n        return this.localForge(fop)\r\n          .pipe(flatMap((localOpbytes: string) => {\r\n            if (opbytes !== localOpbytes) {\r\n              throw new Error('ValidationError');\r\n            }\r\n            if (!keys.sk) {\r\n              fop.signature = 'edsigtXomBKi5CTRf5cjATJWSyaRvhfYNHqSUGrn4SdbYRcGwQrUGjzEfQDTuqHhuA8b2d8NarZjz8TRf65WkpQmo423BtomS8Q';\r\n              return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/scripts/run_operation', { operation: fop, chain_id: header.chain_id })\r\n                .pipe(flatMap((applied: any) => {\r\n                  console.log('applied: ' + JSON.stringify(applied));\r\n                  this.checkApplied([applied]);\r\n                  return of(\r\n                    {\r\n                      success: true,\r\n                      payload: {\r\n                        unsignedOperation: opbytes\r\n                      }\r\n                    });\r\n                }));\r\n            } else {\r\n              fop.protocol = header.protocol;\r\n              const signed = this.sign(opbytes, keys.sk);\r\n              const sopbytes = signed.sbytes;\r\n              fop.signature = signed.edsig;\r\n              return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/preapply/operations', [fop])\r\n                .pipe(flatMap((applied: any) => {\r\n                  console.log('applied: ' + JSON.stringify(applied));\r\n                  this.checkApplied(applied);\r\n                  console.log('sop: ' + sopbytes);\r\n                  return this.http.post(this.nodeURL + '/injection/operation', JSON.stringify(sopbytes), httpOptions)\r\n                    .pipe(flatMap((final: any) => {\r\n                      let newPkh = null;\r\n                      if (origination) {\r\n                        newPkh = applied[0].contents[fop.contents.length - 1].\r\n                          metadata.operation_result.originated_contracts[0];\r\n                      }\r\n                      return this.opCheck(final, newPkh);\r\n                    }));\r\n                }));\r\n            }\r\n          }));\r\n      }));\r\n  }\r\n  /*\r\n    Broadcast a signed operation to the network\r\n  */\r\n  broadcast(sopbytes: string): Observable<any> {\r\n    let fop: any;\r\n    try {\r\n      const opbytes = sopbytes.slice(0, sopbytes.length - 128);\r\n      const edsig = this.sig2edsig(sopbytes.slice(sopbytes.length - 128));\r\n      fop = this.decodeOpBytes(opbytes);\r\n      fop.signature = edsig;\r\n    } catch (e) {\r\n      return this.errHandler('Invalid bytes');\r\n    }\r\n    return this.getHeader().pipe(flatMap((header: any) => {\r\n      fop.protocol = header.protocol;\r\n      return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/preapply/operations', [fop])\r\n        .pipe(flatMap((parsed: any) => {\r\n          let newPkh = null;\r\n          for (let i = 0; i < parsed[0].contents.length; i++) {\r\n            if (parsed[0].contents[i].kind === 'origination') {\r\n              newPkh = parsed[0].contents[i].metadata.operation_result.originated_contracts[0];\r\n            }\r\n          }\r\n          return this.http.post(this.nodeURL + '/injection/operation', JSON.stringify(sopbytes), httpOptions)\r\n            .pipe(flatMap((final: any) => {\r\n              return this.opCheck(final, newPkh);\r\n            }));\r\n        }));\r\n    })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  torusKeyLookup(tz2address: string): Observable<any> {\r\n    // Make it into Promise\r\n    // Zero padding\r\n    if (tz2address.length !== 36 || tz2address.slice(0, 3) !== 'tz2') {\r\n      throw new Error('InvalidTorusAddress');\r\n    }\r\n    return this.http.get(this.nodeURL + `/chains/main/blocks/head/context/contracts/${tz2address}/manager_key`, {})\r\n      .pipe(flatMap((manager: any) => {\r\n        if (manager === null) {\r\n          return of({noReveal: true});\r\n        } else {\r\n          return fromPromise(this.decompress(manager)).pipe(flatMap((pk: any) => {\r\n            const torusReq = {\r\n              jsonrpc: '2.0',\r\n              method: 'KeyLookupRequest',\r\n              id: 10,\r\n              params: {\r\n                pub_key_X: pk.X,\r\n                pub_key_Y: pk.Y\r\n              }\r\n            };\r\n            const url = this.CONSTANTS.NET.NETWORK === 'mainnet' ? 'https://torus-19.torusnode.com/jrpc' : 'https://teal-15-1.torusnode.com/jrpc';\r\n            return this.http.post(url, JSON.stringify(torusReq), httpOptions)\r\n            .pipe(flatMap((ans: any) => {\r\n              try {\r\n                if (ans.result.PublicKey.X === pk.X &&\r\n                    ans.result.PublicKey.Y === pk.Y) {\r\n                    return of(ans);\r\n                  } else {\r\n                    return of(null);\r\n                  }\r\n              } catch {\r\n                return of(null);\r\n              }\r\n            }));\r\n          }));\r\n        }\r\n      }));\r\n  }\r\n  checkApplied(applied: any) {\r\n    for (let i = 0; i < applied[0].contents.length; i++) {\r\n      if (applied[0].contents[i].metadata.operation_result.status !== 'applied') {\r\n        console.log('throw error ->');\r\n        if (applied[0].contents[i].metadata.operation_result.errors) {\r\n          throw new Error(applied[0].contents[i].metadata.operation_result.errors[0].id); // prevent failed operations\r\n        } else if (applied[0].contents[i].metadata.internal_operation_results &&\r\n          applied[0].contents[i].metadata.internal_operation_results[0].result.errors) {\r\n          throw new Error(applied[0].contents[i].metadata.internal_operation_results[0].result.errors[0].id);\r\n        } else {\r\n          throw new Error('Uncatched error in preapply');\r\n        }\r\n      }\r\n    }\r\n  }\r\n  errHandler(error: any): Observable<any> {\r\n    console.log(JSON.stringify(error));\r\n    if (error.error && error.error[0] && error.error[0].id) {\r\n      let errorId = error.error[0].id;\r\n      if (errorId === 'failure' && error.error[0].msg) {\r\n        errorId = error.error[0].msg;\r\n      }\r\n      const errorMsg = this.errorHandlingPipe.transform(errorId);\r\n      error = errorMsg;\r\n    } else if (error.error && error.error[0] && error.error[0].error) {\r\n      error = error.error[0].error;\r\n    } else if (error.statusText) {\r\n      error = error.statusText;\r\n    } if (error.message) {\r\n      error = this.errorHandlingPipe.transform(error.message);\r\n    } else {\r\n      console.log('Error not categorized');\r\n    }\r\n    return of(\r\n      {\r\n        success: false,\r\n        payload: {\r\n          msg: error\r\n        }\r\n      }\r\n    );\r\n  }\r\n  // Local forge with Taquito\r\n  localForge(operation: any): Observable<string> {\r\n    return fromPromise(localForger.forge(operation)).pipe(flatMap((localForgedBytes: string) => {\r\n      return of(localForgedBytes);\r\n    }));\r\n  }\r\n  getHeader(): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/header');\r\n  }\r\n  getBalance(pkh: string): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh + '/balance')\r\n      .pipe(flatMap((balance: any) => {\r\n        return of(\r\n          {\r\n            success: true,\r\n            payload: {\r\n              balance: balance\r\n            }\r\n          }\r\n        );\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  getDelegate(pkh: string): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh)\r\n      .pipe(flatMap((contract: any) => {\r\n        let delegate = '';\r\n        if (contract.delegate) {\r\n          delegate = contract.delegate;\r\n        }\r\n        return of(\r\n          {\r\n            success: true,\r\n            payload: {\r\n              delegate: delegate\r\n            }\r\n          }\r\n        );\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  getVotingRights(): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/votes/listings')\r\n      .pipe(flatMap((listings: any) => {\r\n        return of(\r\n          {\r\n            success: true,\r\n            payload: listings\r\n          }\r\n        );\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  isRevealed(pkh: string): Observable<boolean> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh + '/manager_key', {})\r\n      .pipe(flatMap((manager: any) => {\r\n        if (manager === null) {\r\n          return of(false);\r\n        } else {\r\n          return of(true);\r\n        }\r\n      }\r\n      )).pipe(catchError(err => {\r\n        return of(true);\r\n      })); // conservative action\r\n  }\r\n  getAccount(pkh: string): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/contracts/' + pkh)\r\n      .pipe(flatMap((contract: any) => {\r\n        let delegate = '';\r\n        if (contract.delegate) {\r\n          delegate = contract.delegate;\r\n        }\r\n        return of(\r\n          {\r\n            success: true,\r\n            payload: {\r\n              balance: contract.balance,\r\n              manager: contract.manager,\r\n              delegate: delegate,\r\n              counter: contract.counter\r\n            }\r\n          }\r\n        );\r\n      })).pipe(catchError(err => this.errHandler(err)));\r\n  }\r\n  getVerifiedOpBytes(operationLevel, operationHash, pkh, pk): Observable<string> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/' + operationLevel + '/operation_hashes', {})\r\n      .pipe(flatMap((opHashes: any) => {\r\n        const opIndex = opHashes[3].findIndex(a => a === operationHash);\r\n        return this.http.get(this.nodeURL + '/chains/main/blocks/' + operationLevel + '/operations', {})\r\n          .pipe(flatMap((op: any) => {\r\n            let ans = '';\r\n            op = op[3][opIndex];\r\n            const sig = op.signature;\r\n            delete op.chain_id;\r\n            delete op.signature;\r\n            delete op.hash;\r\n            delete op.protocol;\r\n            for (let i = 0; i < op.contents.length; i++) {\r\n              delete op.contents[i].metadata;\r\n              if (op.contents[i].managerPubkey) { // Fix for mainnet\r\n                op.contents[i].manager_pubkey = op.contents[i].managerPubkey;\r\n                delete op.contents[i].managerPubkey;\r\n              }\r\n            }\r\n            return this.http.post(this.nodeURL + '/chains/main/blocks/head/helpers/forge/operations', op)\r\n              .pipe(flatMap((opBytes: any) => {\r\n                if (this.pk2pkh(pk) === pkh) {\r\n                  if (this.verify(opBytes, sig, pk)) {\r\n                    ans = opBytes + this.buf2hex(this.b58cdecode(sig, this.prefix.sig));\r\n                  } else {\r\n                    throw new Error('InvalidSignature');\r\n                  }\r\n                } else {\r\n                  throw new Error('InvalidPublicKey');\r\n                }\r\n                return of(ans);\r\n              }));\r\n          }));\r\n      }));\r\n  }\r\n  createKTaddress(sopBytes: string): string {\r\n    const hash = libs.crypto_generichash(32, this.hex2buf(sopBytes));\r\n    const index = new Uint8Array([0, 0, 0, 0]);\r\n    const hash2 = libs.crypto_generichash(20, this.mergebuf(index, hash));\r\n    return this.b58cencode(hash2, this.prefix.KT);\r\n  }\r\n  getConstants(): Observable<any> {\r\n    return this.http.get(this.nodeURL + '/chains/main/blocks/head/context/constants');\r\n  }\r\n  seed2keyPair(seed: Buffer): KeyPair {\r\n    if (!seed) {\r\n      throw new Error('NullSeed');\r\n    }\r\n    const keyPair = libs.crypto_sign_seed_keypair(seed);\r\n    return {\r\n      sk: this.b58cencode(keyPair.privateKey, this.prefix.edsk),\r\n      pk: this.b58cencode(keyPair.publicKey, this.prefix.edpk),\r\n      pkh: this.b58cencode(libs.crypto_generichash(20, keyPair.publicKey), this.prefix.tz1)\r\n    };\r\n  }\r\n  mnemonic2seed(mnemonic: string, passphrase: string = '') {\r\n    if (!this.validMnemonic(mnemonic)) {\r\n      throw new Error('InvalidMnemonic');\r\n    }\r\n    return (bip39.mnemonicToSeedSync(mnemonic, passphrase)).slice(0, 32);\r\n  }\r\n  mnemonic2entropy(mnemonic: string, passphrase: string = '') {\r\n    if (!this.validMnemonic(mnemonic)) {\r\n      throw new Error('InvalidMnemonic');\r\n    }\r\n    return bip39.mnemonicToEntropy(mnemonic);\r\n  }\r\n  validMnemonic(mnemonic: string) {\r\n    return bip39.validateMnemonic(mnemonic);\r\n  }\r\n  validAddress(address: string) {\r\n    try {\r\n      this.b58cdecode(address, this.prefix.tz1);\r\n      return true;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n  pk2pkh(pk: string): string {\r\n    if (pk.length === 54 && pk.slice(0, 4) === 'edpk') {\r\n      const pkDecoded = this.b58cdecode(pk, this.prefix.edpk);\r\n      return this.b58cencode(libs.crypto_generichash(20, pkDecoded), this.prefix.tz1);\r\n    } else if (pk.length === 55 && pk.slice(0, 4) === 'sppk') {\r\n      const pkDecoded = this.b58cdecode(pk, this.prefix.edpk);\r\n      return this.b58cencode(libs.crypto_generichash(20, pkDecoded), this.prefix.tz2);\r\n    }\r\n    throw new Error('Invalid public key');\r\n  }\r\n  spPrivKeyToKeyPair(secretKey: string) {\r\n    let sk;\r\n    if (secretKey.match(/^[0-9a-f]{64}$/g)) {\r\n      sk = this.b58cencode(this.hex2buf(secretKey), this.prefix.spsk);\r\n    } else if (secretKey.match(/^spsk[1-9a-km-zA-HJ-NP-Z]{50}$/g)) {\r\n      sk = secretKey;\r\n    } else {\r\n      throw new Error('Invalid private key');\r\n    }\r\n    const keyPair = (new elliptic.ec('secp256k1')).keyFromPrivate(\r\n      new Uint8Array(this.b58cdecode(sk, this.prefix.spsk))\r\n    );\r\n    const prefixVal = keyPair.getPublic().getY().toArray()[31] % 2 ? 3 : 2; // Y odd / even\r\n    const pad = new Array(32).fill(0); // Zero-padding\r\n    const publicKey = new Uint8Array(\r\n      [prefixVal].concat(pad.concat(keyPair.getPublic().getX().toArray()).slice(-32)\r\n      ));\r\n    const pk = this.b58cencode(publicKey, this.prefix.sppk);\r\n    const pkh = this.pk2pkh(pk);\r\n    return { sk, pk, pkh };\r\n  }\r\n  spPointsToPkh(pubX: string, pubY: string): string {\r\n    const key = (new elliptic.ec('secp256k1')).keyFromPublic({ x: pubX, y: pubY });\r\n    const prefixVal = key.getPublic().getY().toArray()[31] % 2 ? 3 : 2;\r\n    const pad = new Array(32).fill(0);\r\n    const publicKey = new Uint8Array(\r\n      [prefixVal].concat(pad.concat(key.getPublic().getX().toArray()).slice(-32)\r\n      ));\r\n    const pk = this.b58cencode(publicKey, this.prefix.sppk);\r\n    const pkh = this.pk2pkh(pk);\r\n    return pkh;\r\n  }\r\n  async decompress(pk: string): Promise<any> {\r\n    const decodedPk = this.b58cdecode(pk, this.prefix.sppk);\r\n    const hexPk = this.buf2hex(decodedPk);\r\n    const secp256k1 = await instantiateSecp256k1();\r\n    const compressed = hexToBin(hexPk);\r\n    const uncompressed = secp256k1.uncompressPublicKey(compressed);\r\n    const xy = binToHex(uncompressed).slice(2);\r\n    return {X: xy.slice(0, 64), Y: xy.slice(64, 128)};\r\n  }\r\n  hex2pk(hex: string): string {\r\n    return this.b58cencode(this.hex2buf(hex.slice(2, 66)), this.prefix.edpk);\r\n  }\r\n  hex2buf(hex) {\r\n    return new Uint8Array(hex.match(/[\\da-f]{2}/gi).map(function (h) {\r\n      return parseInt(h, 16);\r\n    }));\r\n  }\r\n  buf2hex(buffer) {\r\n    const byteArray = new Uint8Array(buffer), hexParts = [];\r\n    for (let i = 0; i < byteArray.length; i++) {\r\n      const hex = byteArray[i].toString(16);\r\n      const paddedHex = ('00' + hex).slice(-2);\r\n      hexParts.push(paddedHex);\r\n    }\r\n    return hexParts.join('');\r\n  }\r\n  b58cencode(payload: any, prefixx?: Uint8Array) {\r\n    const n = new Uint8Array(prefixx.length + payload.length);\r\n    n.set(prefixx);\r\n    n.set(payload, prefixx.length);\r\n    return Bs58check.encode(Buffer.from(this.buf2hex(n), 'hex'));\r\n  }\r\n  b58cdecode(enc, prefixx) {\r\n    let n = Bs58check.decode(enc);\r\n    n = n.slice(prefixx.length);\r\n    return n;\r\n  }\r\n  mergebuf(b, wm = new Uint8Array([3])) {\r\n    const r = new Uint8Array(wm.length + b.length);\r\n    r.set(wm);\r\n    r.set(b, wm.length);\r\n    return r;\r\n  }\r\n  sign(bytes, sk): any {\r\n    console.log(sk);\r\n    if (sk.slice(0, 4) === 'spsk') {\r\n      const hash = libs.crypto_generichash(32, this.mergebuf(this.hex2buf(bytes)));\r\n      const key = (new elliptic.ec('secp256k1')).keyFromPrivate(new Uint8Array(this.b58cdecode(sk, this.prefix.spsk)));\r\n      let sig = key.sign(hash, {canonical: true});\r\n      sig = new Uint8Array(sig.r.toArray().concat(sig.s.toArray()));\r\n      const spsig = this.b58cencode(sig, this.prefix.spsig);\r\n      const sbytes = bytes + this.buf2hex(sig);\r\n      return {\r\n        bytes: bytes,\r\n        sig: sig,\r\n        edsig: spsig,\r\n        sbytes: sbytes,\r\n      };\r\n    } else {\r\n      const hash = libs.crypto_generichash(32, this.mergebuf(this.hex2buf(bytes)));\r\n      const sig = libs.crypto_sign_detached(hash, this.b58cdecode(sk, this.prefix.edsk), 'uint8array');\r\n      const edsig = this.b58cencode(sig, this.prefix.edsig);\r\n      const sbytes = bytes + this.buf2hex(sig);\r\n      return {\r\n        bytes: bytes,\r\n        sig: sig,\r\n        edsig: edsig,\r\n        sbytes: sbytes,\r\n      };\r\n    }\r\n  }\r\n  verify(bytes: string, sig: string, pk: string): Boolean {\r\n    const hash = libs.crypto_generichash(32, this.mergebuf(this.hex2buf(bytes)));\r\n    const signature = this.b58cdecode(sig, this.prefix.sig);\r\n    const publicKey = this.b58cdecode(pk, this.prefix.edpk);\r\n    return libs.crypto_sign_verify_detached(signature, hash, publicKey);\r\n  }\r\n  sig2edsig(sig: string): any {\r\n    return this.b58cencode(this.hex2buf(sig), this.prefix.edsig);\r\n  }\r\n  /*\r\n    Binary decoding\r\n  */\r\n  decodeOpBytes(opbytes: string) {\r\n    // First 32 bytes = branch\r\n    const branch = this.b58cencode(this.hex2buf(opbytes.slice(0, 64)), this.prefix.B);\r\n    const contents = this.decodeContents(opbytes.slice(64));\r\n    return {\r\n      branch: branch,\r\n      contents: contents\r\n    };\r\n  }\r\n  decodeContents(content: string): any {\r\n    // Check tag\r\n    const tag = Number(this.hex2buf(content.slice(0, 2)));\r\n    switch (tag) {\r\n      case 4: {\r\n        return this.decodeActivateAccount(content.slice(2));\r\n      } case 107: {\r\n        return this.decodeReveal(content.slice(2));\r\n      } case 108: {\r\n        return this.decodeTransaction(content.slice(2));\r\n      } case 109: {\r\n        return this.decodeOrigination(content.slice(2));\r\n      } case 110: {\r\n        return this.decodeDelegation(content.slice(2));\r\n      } default: {\r\n        throw new Error('Unknown tag');\r\n      }\r\n    }\r\n  }\r\n  decodeActivateAccount(content: any): any { // Tag 4\r\n    const data: any = { kind: 'activate' };\r\n    data.pkh = this.b58cencode(this.hex2buf(content.slice(0, 40)), this.prefix.tz1);\r\n    data.secret = content.slice(40, 80);\r\n    return data;\r\n  }\r\n  decodeReveal(content: any): any { // Tag 7\r\n    let index = 0;\r\n    const op = this.decodeCommon({ kind: 'reveal' }, content);\r\n    if (op.rest.slice(index, index += 2) !== '00') {\r\n      throw new Error('TagErrorR1');\r\n    }\r\n    op.data.public_key = this.b58cencode(this.hex2buf(op.rest.slice(index, index += 64)), this.prefix.edpk);\r\n    if (op.rest.length === index) {\r\n      return [op.data];\r\n    } else {\r\n      return [op.data].concat(this.decodeContents(op.rest.slice(index)));\r\n    }\r\n  }\r\n  decodeTransaction(content: any): any { // Tag 8\r\n    let index = 0;\r\n    const op = this.decodeCommon({ kind: 'transaction' }, content);\r\n    const amount = this.zarithDecode(op.rest.slice(index));\r\n    op.data.amount = amount.value.toString();\r\n    op.data.destination = this.decodeContractId(op.rest.slice(index += amount.count * 2, index += 44));\r\n    if (op.rest.slice(index, index += 2) === 'ff') { // parameters?\r\n      if (op.rest.slice(index, index += 8) !== '02000000') {\r\n        throw new Error('UnsupportedTagT1');\r\n      }\r\n      const size = Number('0x' + op.rest.slice(index, index += 2));\r\n      const argument = op.rest.slice(index, index += size * 2);\r\n      if (argument.slice(0, 40) === '02000000' + (size - 5).toString(16) + '0320053d036d0743035d0100000024') {\r\n        const pkh = this.decodeString(argument.slice(40, 112));\r\n        if (argument.slice(112, 124) === '0346034e031b') { // KT delegate\r\n          op.data.parameters = this.getContractDelegation(pkh);\r\n        } else if (argument.slice(112, 126) === '031e0743036a00') { // KT to tz transaction\r\n          const amount2 = this.zarithDecodeInt(argument.slice(126, argument.length - 12));\r\n          if (argument.slice(argument.length - 12, argument.length) !== '034f034d031b') {\r\n            throw new Error('UnsupportedTagT4');\r\n          }\r\n          console.log(' Val: ' + amount2.value);\r\n          op.data.parameters = this.getContractPkhTransaction(pkh, amount2.value.toString());\r\n        } else {\r\n          throw new Error('UnsupportedTagT3');\r\n        }\r\n      } else if (argument.slice(0, 40) === '02000000' + (size - 5).toString(16) + '0320053d036d0743036e0100000024') { // KT to KT transaction\r\n        const kt = this.decodeString(argument.slice(40, 112));\r\n        if (argument.slice(112, 182) !== '0555036c0200000015072f02000000090200000004034f032702000000000743036a00') {\r\n        }\r\n        const amount2 = this.zarithDecodeInt(argument.slice(182));\r\n        if (argument.slice(184 + amount2.count * 2, 194 + amount2.count * 2) !== '4f034d031b') {\r\n          throw new Error('UnsupportedTagT6');\r\n        }\r\n        op.data.parameters = this.getContractKtTransaction(kt, amount2.value.toString());\r\n      } else {\r\n        throw new Error('UnsupportedTagT2');\r\n      }\r\n    }\r\n    if (op.rest.length === index) {\r\n      return [op.data];\r\n    } else {\r\n      return [op.data].concat(this.decodeContents(op.rest.slice(index)));\r\n    }\r\n  }\r\n  decodeOrigination(content: any): any { // Tag 9\r\n    let index = 0;\r\n    const op = this.decodeCommon({ kind: 'origination' }, content);\r\n    const balance = this.zarithDecode(op.rest.slice(index));\r\n    op.data.balance = balance.value.toString();\r\n    index += balance.count * 2;\r\n    if (op.rest.slice(index, index += 2) !== '00') { // delegate?\r\n      throw new Error('UnsupportedTagO1');\r\n    }\r\n    const managerScript = '000000c602000000c105000764085e036c055f036d0000000325646f046c000000082564656661756c740501035d050202000000950200000012020000000d03210316051f02000000020317072e020000006a0743036a00000313020000001e020000000403190325072c020000000002000000090200000004034f0327020000000b051f02000000020321034c031e03540348020000001e020000000403190325072c020000000002000000090200000004034f0327034f0326034202000000080320053d036d0342'; // manager script\r\n    if (op.rest.slice(index, index += managerScript.length) !== managerScript) {\r\n      throw new Error('InvalidManagerScript');\r\n    }\r\n    const storageDefinition = '0000001a0a00000015';\r\n    if (op.rest.slice(index, index += storageDefinition.length) !== storageDefinition) {\r\n      throw new Error('InvalidStorageDefinition');\r\n    }\r\n    op.data.script = this.getManagerScript(op.rest.slice(index, index += 42));\r\n    if (op.rest.length === index) {\r\n      return [op.data];\r\n    } else {\r\n      return [op.data].concat(this.decodeContents(op.rest.slice(index)));\r\n    }\r\n  }\r\n  decodeDelegation(content: any): any { // Tag 10\r\n    let index = 0;\r\n    const op = this.decodeCommon({ kind: 'delegation' }, content);\r\n    if (op.rest.slice(index, index += 2) === 'ff') {\r\n      op.data.delegate = this.decodePkh(op.rest.slice(index, index += 42));\r\n    } else if (op.rest.slice(index - 2, index) !== '00') {\r\n      throw new Error('TagErrorD1');\r\n    }\r\n    if (op.rest.length === index) {\r\n      return [op.data];\r\n    } else {\r\n      return [op.data].concat(this.decodeContents(op.rest.slice(index)));\r\n    }\r\n  }\r\n  decodeCommon(data: any, content: any): any {\r\n    let index = 0;\r\n    data.source = this.decodePkh(content.slice(index, index += 42));\r\n    // data.source = this.decodeContractId(content.slice(index, index += 44));\r\n    const fee = this.zarithDecode(content.slice(index));\r\n    data.fee = fee.value.toString();\r\n    const counter = this.zarithDecode(content.slice(index += fee.count * 2));\r\n    data.counter = counter.value.toString();\r\n    const gas_limit = this.zarithDecode(content.slice(index += counter.count * 2));\r\n    data.gas_limit = gas_limit.value.toString();\r\n    const storage_limit = this.zarithDecode(content.slice(index += gas_limit.count * 2));\r\n    data.storage_limit = storage_limit.value.toString();\r\n    const rest = content.slice(index += storage_limit.count * 2);\r\n    return {\r\n      data: data,\r\n      rest: rest\r\n    };\r\n  }\r\n  decodePkh(bytes: string): string {\r\n    if (bytes.slice(0, 2) === '00') {\r\n      return this.b58cencode(this.hex2buf(bytes.slice(2, 42)), this.prefix.tz1);\r\n    } else if (bytes.slice(0, 2) === '01') {\r\n      return this.b58cencode(this.hex2buf(bytes.slice(2, 42)), this.prefix.tz2);\r\n    } else if (bytes.slice(0, 2) === '02') {\r\n      return this.b58cencode(this.hex2buf(bytes.slice(2, 42)), this.prefix.tz3);\r\n    } else {\r\n      throw new Error('TagErrorPkh');\r\n    }\r\n  }\r\n  decodePk() {\r\n    return null;\r\n  }\r\n  decodeString(bytes: string): string {\r\n    return Buffer.from(this.hex2buf(bytes)).toString('utf-8');\r\n  }\r\n  zarithDecode(hex: string): any {\r\n    let count = 0;\r\n    let value = 0;\r\n    while (1) {\r\n      const byte = Number('0x' + hex.slice(0 + count * 2, 2 + count * 2));\r\n      value += ((byte & 127) * (128 ** count));\r\n      count++;\r\n      if ((byte & 128) !== 128) {\r\n        break;\r\n      }\r\n    }\r\n    return {\r\n      value: value,\r\n      count: count\r\n    };\r\n  }\r\n  zarithDecodeInt(hex: string): any {\r\n    let count = 0;\r\n    let value = Big(0);\r\n    while (1) {\r\n      const byte = Number('0x' + hex.slice(0 + count * 2, 2 + count * 2));\r\n      if (count === 0) {\r\n        value = Big(((byte & 63) * (128 ** count))).add(value);\r\n      } else {\r\n        value = Big(((byte & 127) * 2) >> 1).times(64 * 128 ** (count - 1)).add(value);\r\n      }\r\n      count++;\r\n      if ((byte & 128) !== 128) {\r\n        break;\r\n      }\r\n    }\r\n    return {\r\n      value: value,\r\n      count: count\r\n    };\r\n  }\r\n  decodeContractId(hex: string): string {\r\n    if (hex.slice(0, 2) === '00') {\r\n      return this.decodePkh(hex.slice(2, 44));\r\n    } else if (hex.slice(0, 2) === '01') {\r\n      return this.b58cencode(this.hex2buf(hex.slice(2, 42)), this.prefix.KT);\r\n    } else {\r\n      throw new Error('TagError');\r\n    }\r\n  }\r\n  /*\r\n    Output\r\n  */\r\n  fop2strings(fop: any): any {\r\n    const output: string[] = [];\r\n    for (let i = 0; i < fop.contents.length; i++) {\r\n      if (fop.contents[i].kind !== 'reveal') {\r\n        let typeTmp = '';\r\n        let sourceTmp = '';\r\n        typeTmp = this.translate.instant('OPERATIONSERVICE.TYPE');\r\n        sourceTmp = this.translate.instant('OPERATIONSERVICE.SOURCE');\r\n        output.push(typeTmp + ' ' + fop.contents[i].kind);\r\n        output.push(sourceTmp + ' ' + fop.contents[i].source);\r\n        if (fop.contents[i].kind === 'transaction') {\r\n          let destinationTmp = '';\r\n          let amountTmp = '';\r\n          destinationTmp = this.translate.instant('OPERATIONSERVICE.DESTINATION');\r\n          amountTmp = this.translate.instant('OPERATIONSERVICE.AMOUNT');\r\n          output.push(destinationTmp + ' ' + fop.contents[i].destination);\r\n          output.push(amountTmp + ' ' + Big(Number(fop.contents[i].amount)).div(this.microTez).toString() + ' tez');\r\n        } else if (fop.contents[i].kind === 'origination') {\r\n          let managerTmp = '';\r\n          let balanceTmp = '';\r\n          managerTmp = this.translate.instant('OPERATIONSERVICE.MANAGER');\r\n          balanceTmp = this.translate.instant('OPERATIONSERVICE.BALANCE');\r\n          // output.push(managerTmp + ' ' + fop.contents[i].managerPubkey);  // betanet\r\n          output.push(managerTmp + ' ' + fop.contents[i].manager_pubkey);  // zeronet\r\n          output.push(balanceTmp + ' ' + Big(Number(fop.contents[i].balance)).div(this.microTez).toString() + ' tez');\r\n        } else if (fop.contents[i].kind === 'delegation') {\r\n          let delegateTmp = '';\r\n          delegateTmp = this.translate.instant('OPERATIONSERVICE.DELEGATE');\r\n          output.push(delegateTmp + ' ' + fop.contents[i].delegate);\r\n          // output.push('Delegate: ' + fop.contents[i].delegate);\r\n        } else {\r\n          let tagNotSupportedTmp = '';\r\n          tagNotSupportedTmp = this.translate.instant('OPERATIONSERVICE.TAGNOTSUPPORTED');\r\n          throw new Error(tagNotSupportedTmp);\r\n        }\r\n\r\n        let feeTmp = '';\r\n        feeTmp = this.translate.instant('OPERATIONSERVICE.FEE');\r\n        output.push(feeTmp + ' ' + Big(Number(fop.contents[i].fee)).div(this.microTez).toString() + ' tez');\r\n        if (i + 1 < fop.contents.length) {\r\n          output.push('');\r\n        }\r\n      }\r\n    }\r\n    return output;\r\n  }\r\n  getContractDelegation(pkh: string) {\r\n    return {\r\n      entrypoint: 'do',\r\n      value:\r\n        [{ prim: 'DROP' },\r\n        {\r\n          prim: 'NIL',\r\n          args: [{ prim: 'operation' }]\r\n        },\r\n        {\r\n          prim: 'PUSH',\r\n          args:\r\n            [{ prim: 'key_hash' },\r\n            {\r\n              string: pkh\r\n            }]\r\n        },\r\n        { prim: 'SOME' }, { prim: 'SET_DELEGATE' },\r\n        { prim: 'CONS' }]\r\n    };\r\n  }\r\n  getContractUnDelegation() {\r\n    return {\r\n      entrypoint: 'do',\r\n      value:\r\n        [{ prim: 'DROP' },\r\n        {\r\n          prim: 'NIL',\r\n          args: [{ prim: 'operation' }],\r\n        }, {\r\n          prim: 'NONE',\r\n          args: [{ prim: 'key_hash' }],\r\n        },\r\n        { prim: 'SET_DELEGATE' },\r\n        { prim: 'CONS' }]\r\n    };\r\n  }\r\n  getContractPkhTransaction(to: string, amount: string) {\r\n    return {\r\n      entrypoint: 'do',\r\n      value:\r\n        [{ prim: 'DROP' },\r\n        { prim: 'NIL', args: [{ prim: 'operation' }] },\r\n        {\r\n          prim: 'PUSH',\r\n          args:\r\n            [{ prim: 'key_hash' },\r\n            {\r\n              string: to\r\n            }]\r\n        },\r\n        { prim: 'IMPLICIT_ACCOUNT' },\r\n        {\r\n          prim: 'PUSH',\r\n          args:\r\n            [{ prim: 'mutez' }, { 'int': amount }]\r\n        },\r\n        { prim: 'UNIT' }, { prim: 'TRANSFER_TOKENS' },\r\n        { prim: 'CONS' }]\r\n    };\r\n  }\r\n  getContractKtTransaction(to: string, amount: string) {\r\n    return {\r\n      entrypoint: 'do',\r\n      value: [{ prim: 'DROP' },\r\n      { prim: 'NIL', args: [{ prim: 'operation' }] },\r\n      {\r\n        prim: 'PUSH',\r\n        args:\r\n          [{ prim: 'address' },\r\n          { string: to }]\r\n      },\r\n      { prim: 'CONTRACT', args: [{ prim: 'unit' }] },\r\n      [{\r\n        prim: 'IF_NONE',\r\n        args:\r\n          [[[{ prim: 'UNIT' }, { prim: 'FAILWITH' }]],\r\n          []]\r\n      }],\r\n      {\r\n        prim: 'PUSH',\r\n        args: [{ prim: 'mutez' }, { 'int': amount }]\r\n      },\r\n      { prim: 'UNIT' }, { prim: 'TRANSFER_TOKENS' },\r\n      { prim: 'CONS' }]\r\n    };\r\n  }\r\n  getManagerScript(pkh: string) {\r\n    let pkHex: string;\r\n    if (pkh.slice(0, 2) === 'tz') {\r\n      pkHex = '00' + this.buf2hex(this.b58cdecode(pkh, this.prefix.tz1));\r\n    } else {\r\n      pkHex = pkh;\r\n    }\r\n    return {\r\n      code: [\r\n        {\r\n          prim: 'parameter',\r\n          args: [\r\n            {\r\n              prim: 'or',\r\n              args: [\r\n                {\r\n                  prim: 'lambda',\r\n                  args: [\r\n                    {\r\n                      prim: 'unit'\r\n                    },\r\n                    {\r\n                      prim: 'list',\r\n                      args: [\r\n                        {\r\n                          prim: 'operation'\r\n                        }\r\n                      ]\r\n                    }\r\n                  ],\r\n                  annots: [\r\n                    '%do'\r\n                  ]\r\n                },\r\n                {\r\n                  prim: 'unit',\r\n                  annots: [\r\n                    '%default'\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          prim: 'storage',\r\n          args: [\r\n            {\r\n              prim: 'key_hash'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          prim: 'code',\r\n          args: [\r\n            [\r\n              [\r\n                [\r\n                  {\r\n                    prim: 'DUP'\r\n                  },\r\n                  {\r\n                    prim: 'CAR'\r\n                  },\r\n                  {\r\n                    prim: 'DIP',\r\n                    args: [\r\n                      [\r\n                        {\r\n                          prim: 'CDR'\r\n                        }\r\n                      ]\r\n                    ]\r\n                  }\r\n                ]\r\n              ],\r\n              {\r\n                prim: 'IF_LEFT',\r\n                args: [\r\n                  [\r\n                    {\r\n                      prim: 'PUSH',\r\n                      args: [\r\n                        {\r\n                          prim: 'mutez'\r\n                        },\r\n                        {\r\n                          'int': '0'\r\n                        }\r\n                      ]\r\n                    },\r\n                    {\r\n                      prim: 'AMOUNT'\r\n                    },\r\n                    [\r\n                      [\r\n                        {\r\n                          prim: 'COMPARE'\r\n                        },\r\n                        {\r\n                          prim: 'EQ'\r\n                        }\r\n                      ],\r\n                      {\r\n                        prim: 'IF',\r\n                        args: [\r\n                          [\r\n\r\n                          ],\r\n                          [\r\n                            [\r\n                              {\r\n                                prim: 'UNIT'\r\n                              },\r\n                              {\r\n                                prim: 'FAILWITH'\r\n                              }\r\n                            ]\r\n                          ]\r\n                        ]\r\n                      }\r\n                    ],\r\n                    [\r\n                      {\r\n                        prim: 'DIP',\r\n                        args: [\r\n                          [\r\n                            {\r\n                              prim: 'DUP'\r\n                            }\r\n                          ]\r\n                        ]\r\n                      },\r\n                      {\r\n                        prim: 'SWAP'\r\n                      }\r\n                    ],\r\n                    {\r\n                      prim: 'IMPLICIT_ACCOUNT'\r\n                    },\r\n                    {\r\n                      prim: 'ADDRESS'\r\n                    },\r\n                    {\r\n                      prim: 'SENDER'\r\n                    },\r\n                    [\r\n                      [\r\n                        {\r\n                          prim: 'COMPARE'\r\n                        },\r\n                        {\r\n                          prim: 'EQ'\r\n                        }\r\n                      ],\r\n                      {\r\n                        prim: 'IF',\r\n                        args: [\r\n                          [\r\n\r\n                          ],\r\n                          [\r\n                            [\r\n                              {\r\n                                prim: 'UNIT'\r\n                              },\r\n                              {\r\n                                prim: 'FAILWITH'\r\n                              }\r\n                            ]\r\n                          ]\r\n                        ]\r\n                      }\r\n                    ],\r\n                    {\r\n                      prim: 'UNIT'\r\n                    },\r\n                    {\r\n                      prim: 'EXEC'\r\n                    },\r\n                    {\r\n                      prim: 'PAIR'\r\n                    }\r\n                  ],\r\n                  [\r\n                    {\r\n                      prim: 'DROP'\r\n                    },\r\n                    {\r\n                      prim: 'NIL',\r\n                      args: [\r\n                        {\r\n                          prim: 'operation'\r\n                        }\r\n                      ]\r\n                    },\r\n                    {\r\n                      prim: 'PAIR'\r\n                    }\r\n                  ]\r\n                ]\r\n              }\r\n            ]\r\n          ]\r\n        }\r\n      ],\r\n      storage:\r\n        { bytes: pkHex }\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport DirectWebSdk from '@toruslabs/torus-direct-web-sdk';\r\nimport FetchNodeDetails from '@toruslabs/fetch-node-details';\r\nimport TorusUtils from '@toruslabs/torus.js';\r\nimport { OperationService } from '../../services/operation/operation.service';\r\nimport { InputValidationService } from '../../services/input-validation/input-validation.service';\r\nimport { Constants } from '../../constants';\r\n\r\nconst GOOGLE = 'google';\r\nconst REDDIT = 'reddit';\r\nconst TWITTER = 'twitter';\r\nconst AUTH_DOMAIN = 'https://dev-0li4gssz.eu.auth0.com';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TorusService {\r\n  CONSTANTS = new Constants();\r\n  torus: any = null;\r\n  nodeDetails: { torusNodeEndpoints: String[], torusNodePub: any[] } = null;\r\n  public readonly verifierMap: any;\r\n  private readonly proxy: any;\r\n  verifierMaps = {\r\n    testnet: {\r\n      [GOOGLE]: {\r\n        name: 'Google',\r\n        typeOfLogin: 'google',\r\n        clientId: '952872982551-od475jfe3ach7dghacin634rbkcqhpll.apps.googleusercontent.com',\r\n        verifier: 'kukai-google',\r\n        caseSensitiveVerifierID: false\r\n      },\r\n      [REDDIT]: {\r\n        name: 'Reddit',\r\n        typeOfLogin: 'reddit',\r\n        clientId: 'H0nhRv1leU9pGQ',\r\n        verifier: 'tezos-reddit-testnet',\r\n        caseSensitiveVerifierID: false\r\n      },\r\n      [TWITTER]: {\r\n        name: 'Twitter',\r\n        typeOfLogin: 'twitter',\r\n        clientId: 'vKFgnaYZzKLUnhxnX5xqTqeMcumdVTz1',\r\n        verifier: 'tezos-twitter-test',\r\n        caseSensitiveVerifierID: false\r\n      }\r\n    },\r\n    mainnet: {\r\n      [GOOGLE]: {\r\n        name: 'Google',\r\n        typeOfLogin: 'google',\r\n        clientId: '952872982551-49mfvktoios59oj2kmiknlltfq9pvi6c.apps.googleusercontent.com',\r\n        verifier: 'tezos-google',\r\n        caseSensitiveVerifierID: false\r\n      },\r\n      [REDDIT]: {\r\n        name: 'Reddit',\r\n        typeOfLogin: 'reddit',\r\n        clientId: 'YivAW_t3iCp9QA',\r\n        verifier: 'tezos-reddit',\r\n        caseSensitiveVerifierID: false\r\n      },\r\n      [TWITTER]: {\r\n        name: 'Twitter',\r\n        typeOfLogin: 'twitter',\r\n        clientId: 'UJl5d4iHVgbrAaSlucXNf2F2uKlC0m25',\r\n        verifier: 'tezos-twitter',\r\n        caseSensitiveVerifierID: false\r\n      }\r\n    }\r\n  };\r\n  verifierMapKeys: any;\r\n  constructor(\r\n    private operationService: OperationService,\r\n    private inputValidationService: InputValidationService\r\n  ) {\r\n    if (this.CONSTANTS.NET.NETWORK === 'mainnet') {\r\n      this.verifierMap = this.verifierMaps.mainnet;\r\n      this.proxy = { address: '0x638646503746d5456209e33a2ff5e3226d698bea', network: 'mainnet' };\r\n    } else if (this.CONSTANTS.NET.NETWORK) {\r\n      this.verifierMap = this.verifierMaps.testnet;\r\n      this.proxy = { address: '0x4023d2a0D330bF11426B12C6144Cfb96B7fa6183', network: 'ropsten' };\r\n    }\r\n    this.verifierMapKeys = Object.keys(this.verifierMap);\r\n  }\r\n  async initTorus() {\r\n    if (!this.torus) {\r\n      try {\r\n        const torusdirectsdk = new DirectWebSdk({\r\n          baseUrl: `${location.origin}/serviceworker`,\r\n          enableLogging: !(this.proxy.network === 'mainnet'),\r\n          proxyContractAddress: this.proxy.address,\r\n          network: (this.proxy.network === 'mainnet') ? this.proxy.network : 'testnet',\r\n        });\r\n        await torusdirectsdk.init({ skipSw: false });\r\n        this.torus = torusdirectsdk;\r\n      } catch (error) {\r\n        console.error(error, 'oninit caught');\r\n      }\r\n    }\r\n  }\r\n  async lookupPkh(selectedVerifier: string, verifierId: string): Promise<any> {\r\n    const fetchNodeDetails = new FetchNodeDetails({ network: this.proxy.network, proxyAddress: this.proxy.address });\r\n    const torus = new TorusUtils();\r\n    const verifier = this.verifierMap[selectedVerifier].verifier;\r\n    if (!this.nodeDetails) {\r\n      const { torusNodeEndpoints, torusNodePub, torusIndexes } = await fetchNodeDetails.getNodeDetails();\r\n      this.nodeDetails = { torusNodeEndpoints, torusNodePub }; // Cache node details\r\n    }\r\n    let sanitizedVerifierId = verifierId;\r\n    if (!this.verifierMap[selectedVerifier].caseSensitiveVerifierID) {\r\n      sanitizedVerifierId = sanitizedVerifierId.toLocaleLowerCase();\r\n    }\r\n    let twitterId = '';\r\n    if (selectedVerifier === 'twitter') {\r\n      const username = sanitizedVerifierId.replace('@', '');\r\n      const { id } = await this.twitterLookup(username);\r\n      if (this.inputValidationService.twitterId(id)) {\r\n        sanitizedVerifierId = `twitter|${id}`;\r\n        twitterId = id;\r\n      } else {\r\n        throw new Error('Twitter handle not found');\r\n      }\r\n    }\r\n    const pk: any = await torus.getPublicAddress(this.nodeDetails.torusNodeEndpoints, this.nodeDetails.torusNodePub, { verifier, verifierId: sanitizedVerifierId }, true);\r\n    const pkh = this.operationService.spPointsToPkh(pk.X, pk.Y);\r\n    return { pkh, twitterId };\r\n  }\r\n  async twitterLookup(username?: string, id?: string) {\r\n    let req = {};\r\n    if ((id && username) || (!id && !username)) {\r\n      console.log({ username, id });\r\n      throw new Error('Invalid input');\r\n    } else if (id) {\r\n      req = { id };\r\n    } else {\r\n      req = { username: username.replace('@', '') };\r\n    }\r\n    return await fetch(`https://api.tezos.help/twitter-lookup/`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      referrerPolicy: 'no-referrer',\r\n      body: JSON.stringify(req)\r\n    }).then(\r\n      (ans) => {\r\n        return ans.json();\r\n      }\r\n    );\r\n  }\r\n  async loginTorus(selectedVerifier: string, verifierId = ''): Promise<any> {\r\n    try {\r\n      const jwtParams: any = this._loginToConnectionMap()[selectedVerifier] || {};\r\n      if (verifierId && selectedVerifier === GOOGLE) {\r\n        jwtParams.login_hint = verifierId;\r\n        console.log('login_hint: ' + verifierId);\r\n      }\r\n      const { typeOfLogin, clientId, verifier } = this.verifierMap[selectedVerifier];\r\n      const loginDetails = await this.torus.triggerLogin({\r\n        verifier,\r\n        typeOfLogin,\r\n        clientId,\r\n        jwtParams\r\n      });\r\n      const keyPair = this.operationService.spPrivKeyToKeyPair(loginDetails.privateKey);\r\n      console.log('DirectAuth KeyPair', keyPair);\r\n      return { keyPair, userInfo: loginDetails.userInfo };\r\n    } catch (e) {\r\n      console.error(e, 'login caught');\r\n      return { keyPair: null, userInfo: null };\r\n    }\r\n  }\r\n  async getTorusKeyPair(selectedVerifier: string, verifierId: string): Promise<any> {\r\n    const { keyPair } = await this.loginTorus(selectedVerifier, verifierId);\r\n    return keyPair;\r\n  }\r\n  _loginToConnectionMap = () => {\r\n    return {\r\n      [TWITTER]: {\r\n        domain: AUTH_DOMAIN,\r\n      }\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { WalletService } from '../wallet/wallet.service';\r\nimport { Constants } from '../../constants';\r\n\r\n@Injectable()\r\nexport class TzrateService {\r\n  public apiUrl = 'https://api.coingecko.com/api/v3/simple/price?ids=tezos&vs_currencies=usd';\r\n  private CONSTANTS = new Constants();\r\n  constructor(private http: HttpClient,\r\n    private walletService: WalletService) {\r\n  }\r\n\r\n  getTzrate() {\r\n    if (this.CONSTANTS.NET.NETWORK === 'mainnet') {\r\n      this.http.get(this.apiUrl).subscribe(\r\n        (price: any) => {\r\n          this.walletService.wallet.XTZrate = price.tezos.usd;\r\n          this.updateFiatBalances();\r\n        },\r\n        err => console.log('Failed to get xtz price: ' + JSON.stringify(err))\r\n      );\r\n    } else {\r\n      this.walletService.wallet.XTZrate = 0;\r\n      this.updateFiatBalances();\r\n    }\r\n  }\r\n  updateFiatBalances() {\r\n    const accounts = this.walletService.wallet.getAccounts();\r\n    let tot = 0;\r\n    let change = false;\r\n    for (const account of accounts) {\r\n      if (account.balanceXTZ !== null) {\r\n        account.balanceUSD =\r\n          Number(account.balanceXTZ / 1000000 * this.walletService.wallet.XTZrate);\r\n        tot += account.balanceUSD;\r\n        change = true;\r\n      }\r\n    }\r\n    if (change) {\r\n      this.walletService.wallet.totalBalanceUSD = Number(tot);\r\n      this.walletService.storeWallet();\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { KeyPair, WalletType } from './../../interfaces';\r\nimport {\r\n  WalletObject,\r\n  HdWallet,\r\n  FullWallet,\r\n  LegacyWalletV1,\r\n  LegacyWalletV2,\r\n  LegacyWalletV3,\r\n  ImplicitAccount,\r\n  LedgerWallet,\r\n  TorusWallet,\r\n  OriginatedAccount,\r\n} from './wallet';\r\nimport { EncryptionService } from '../encryption/encryption.service';\r\nimport { OperationService } from '../operation/operation.service';\r\nimport { TorusService } from '../torus/torus.service';\r\nimport { utils, hd } from '@tezos-core-tools/crypto-utils';\r\n@Injectable()\r\nexport class WalletService {\r\n  storeKey = `kukai-wallet`;\r\n  storageId = 0;\r\n  wallet: WalletObject;\r\n\r\n  constructor(\r\n    private encryptionService: EncryptionService,\r\n    private operationService: OperationService,\r\n    private torusService: TorusService\r\n  ) {}\r\n  /*\r\n    Wallet creation\r\n  */\r\n  createNewWallet(): string {\r\n    return utils.generateMnemonic(24);\r\n  }\r\n  async createEncryptedWallet(\r\n    mnemonic: string,\r\n    password: string,\r\n    passphrase: string = '',\r\n    hdSeed: boolean\r\n  ): Promise<any> {\r\n    const seed = utils.mnemonicToSeed(mnemonic, passphrase, hdSeed);\r\n    const entropy: Buffer = Buffer.from(utils.mnemonicToEntropy(mnemonic));\r\n    let keyPair: KeyPair;\r\n    if (!hdSeed) {\r\n      keyPair = this.operationService.seed2keyPair(seed);\r\n    } else {\r\n      keyPair = hd.keyPairFromAccountIndex(seed, 0);\r\n    }\r\n    const encrypted = await this.encryptionService.encrypt(seed, password, 3);\r\n    const encryptedSeed: string = encrypted.chiphertext;\r\n    const iv: string = encrypted.iv;\r\n    const iv2: string = this.encryptionService.bumpIV(iv, 1);\r\n    const encryptedEntropy: string = (await this.encryptionService.encrypt(\r\n      entropy,\r\n      password,\r\n      3,\r\n      iv2\r\n    )).chiphertext;\r\n    return {\r\n      data: this.exportKeyStoreInit(\r\n        hdSeed ? WalletType.HdWallet : WalletType.FullWallet,\r\n        encryptedSeed,\r\n        encryptedEntropy,\r\n        iv\r\n      ),\r\n      pkh: keyPair.pkh,\r\n      pk: keyPair.pk,\r\n      seed: seed,\r\n    };\r\n  }\r\n  async getKeys(pwd: string, pkh?: string): Promise<KeyPair> {\r\n    let seed;\r\n    if (this.wallet instanceof LegacyWalletV1) {\r\n      console.log('v1');\r\n      seed = await this.encryptionService.decrypt(\r\n        this.wallet.encryptedSeed,\r\n        pwd,\r\n        this.wallet.salt,\r\n        1\r\n      );\r\n      console.log('done');\r\n    } else if (this.wallet instanceof LegacyWalletV2) {\r\n      seed = await this.encryptionService.decrypt(\r\n        this.wallet.encryptedSeed,\r\n        pwd,\r\n        this.wallet.IV,\r\n        2\r\n      );\r\n    } else if (\r\n      this.wallet instanceof LegacyWalletV3 ||\r\n      this.wallet instanceof HdWallet\r\n    ) {\r\n      seed = await this.encryptionService.decrypt(\r\n        this.wallet.encryptedSeed,\r\n        pwd,\r\n        this.wallet.IV,\r\n        3\r\n      );\r\n    } else if (this.wallet instanceof LedgerWallet) {\r\n      console.log(this.wallet);\r\n      const keyPair: KeyPair = {\r\n        sk: null,\r\n        pk: this.wallet.implicitAccounts[0].pk,\r\n        pkh: this.wallet.implicitAccounts[0].pkh,\r\n      };\r\n      return keyPair;\r\n    } else if (this.wallet instanceof TorusWallet) {\r\n      console.log('torus id ' + this.wallet.id);\r\n      const keyPair = await this.torusService.getTorusKeyPair(this.wallet.verifier, this.wallet.id);\r\n      console.log(keyPair);\r\n      if (this.wallet.getImplicitAccount(keyPair.pkh)) {\r\n        return keyPair;\r\n      } else {\r\n        throw new Error('Signed with wrong account');\r\n      }\r\n      return null;\r\n    }  else {\r\n      return null;\r\n    }\r\n    if (!seed) {\r\n      return null;\r\n    }\r\n    if (this.wallet instanceof HdWallet) {\r\n      if (!pkh) {\r\n        throw new Error('No pkh provided');\r\n      }\r\n      const account = this.wallet.getImplicitAccount(pkh);\r\n      if (!account.derivationPath) {\r\n        throw new Error('No derivationPath found');\r\n      }\r\n      return hd.seedToKeyPair(seed, account.derivationPath);\r\n    } else if (this.wallet instanceof LegacyWalletV1) {\r\n      const keyPair = this.operationService.seed2keyPair(seed);\r\n      if (!keyPair.pkh || !pkh || keyPair.pkh !== pkh) {\r\n        return null;\r\n      } else {\r\n        return keyPair;\r\n      }\r\n    } else {\r\n      return this.operationService.seed2keyPair(seed);\r\n    }\r\n  }\r\n  async revealMnemonicPhrase(pwd: string): Promise<string> {\r\n    if (\r\n      this.wallet &&\r\n      (this.wallet instanceof HdWallet || this.wallet instanceof LegacyWalletV3)\r\n    ) {\r\n      const iv = this.encryptionService.bumpIV(this.wallet.IV, 1);\r\n      const entropy = await this.encryptionService.decrypt(\r\n        this.wallet.encryptedEntropy,\r\n        pwd,\r\n        iv,\r\n        3\r\n      );\r\n      if (entropy) {\r\n        return utils.entropyToMnemonic(entropy);\r\n      } else {\r\n        console.log('Invalid password');\r\n      }\r\n    }\r\n    return '';\r\n  }\r\n  addImplicitAccount(pk: string, derivationPath?: string | number) {\r\n    let pkh;\r\n    console.log(pk);\r\n    if (pk && pk.slice(0, 4) === 'sppk') {\r\n      pkh = this.operationService.pk2pkh(pk);\r\n    } else {\r\n      pkh = utils.pkToPkh(pk);\r\n    }\r\n    if (pkh) {\r\n      this.wallet.implicitAccounts.push(\r\n        new ImplicitAccount(pkh, pk, typeof derivationPath === 'number' ? `44'/1729'/${derivationPath}'/0'` : derivationPath)\r\n      );\r\n      console.log('Adding new implicit account...');\r\n      console.log(\r\n        this.wallet.implicitAccounts[this.wallet.implicitAccounts.length - 1]\r\n      );\r\n      this.storeWallet();\r\n    }\r\n  }\r\n  addOriginatedAccount(kt: string, manager: string) {\r\n    const implicitAccount = this.wallet.getImplicitAccount(manager);\r\n    if (implicitAccount) {\r\n      const origAcc = new OriginatedAccount(\r\n        kt,\r\n        implicitAccount.pkh,\r\n        implicitAccount.pk\r\n      );\r\n      implicitAccount.originatedAccounts.push(origAcc);\r\n      this.storeWallet();\r\n    } else {\r\n      console.warn(`Manager address $(manager) not found`);\r\n    }\r\n  }\r\n  /*addUnusedAccount(account: any) {\r\n    if (this.wallet instanceof HdWallet) {\r\n      this.wallet.unusedAccounts.push(account);\r\n    }\r\n  }*/\r\n  addressExists(address: string): boolean {\r\n    return (\r\n      this.wallet.getAccounts().findIndex((a) => a.address === address) !== -1\r\n    );\r\n  }\r\n  async incrementAccountIndex(password: string): Promise<string> {\r\n    if (this.wallet instanceof HdWallet) {\r\n      const seed = await this.encryptionService.decrypt(\r\n        this.wallet.encryptedSeed,\r\n        password,\r\n        this.wallet.IV,\r\n        3\r\n      );\r\n      if (seed) {\r\n        const keyPair: KeyPair = hd.seedToKeyPair(seed, `44'/1729'/${this.wallet.index}'/0'`);\r\n        this.addImplicitAccount(keyPair.pk, this.wallet.index);\r\n        this.wallet.index++;\r\n        this.storeWallet();\r\n        return keyPair.pkh;\r\n      } else {\r\n        return ''; // Wrong pwd\r\n      }\r\n    }\r\n  }\r\n  /*\r\n    Clear wallet data from browser\r\n  */\r\n  clearWallet() {\r\n    this.wallet = null;\r\n    this.storageId = 0;\r\n    localStorage.removeItem(this.storeKey);\r\n  }\r\n  /*\r\n  Used to decide wallet type\r\n  */\r\n  isFullWallet(): boolean {\r\n    return this.wallet instanceof FullWallet;\r\n  }\r\n  isViewOnlyWallet(): boolean {\r\n    return false;\r\n  }\r\n  isObserverWallet(): boolean {\r\n    return false;\r\n  }\r\n  isLedgerWallet(): boolean {\r\n    return this.wallet instanceof LedgerWallet;\r\n  }\r\n  isHdWallet(): boolean {\r\n    return this.wallet instanceof HdWallet;\r\n  }\r\n  isTorusWallet(): boolean {\r\n    return this.wallet instanceof TorusWallet;\r\n  }\r\n  exportKeyStoreInit(\r\n    type: WalletType,\r\n    encryptedSeed: string,\r\n    encryptedEntropy: string,\r\n    iv: string\r\n  ) {\r\n    const data: any = {\r\n      provider: 'Kukai',\r\n      version: 3.0,\r\n      walletType: type,\r\n      encryptedSeed,\r\n      encryptedEntropy,\r\n      iv,\r\n    };\r\n    return data;\r\n  }\r\n  /*\r\n    Read and write to localStorage\r\n  */\r\n  initStorage() {\r\n    this.storageId = Date.now();\r\n    localStorage.setItem(\r\n      this.storeKey,\r\n      JSON.stringify({ localStorageId: this.storageId })\r\n    );\r\n  }\r\n  storeWallet() {\r\n    const localStorageId = this.getLocalStorageId();\r\n    if (this.storageId && localStorageId && this.storageId === localStorageId) {\r\n      let type = 'unknown';\r\n      if (this.wallet instanceof HdWallet) {\r\n        type = 'HdWallet';\r\n      } else if (this.wallet instanceof LegacyWalletV1) {\r\n        type = 'LegacyWalletV1';\r\n      } else if (this.wallet instanceof LegacyWalletV2) {\r\n        type = 'LegacyWalletV2';\r\n      } else if (this.wallet instanceof LegacyWalletV3) {\r\n        type = 'LegacyWalletV3';\r\n      } else if (this.wallet instanceof LedgerWallet) {\r\n        type = 'LedgerWallet';\r\n      } else if (this.wallet instanceof TorusWallet) {\r\n        type = 'TorusWallet';\r\n      }\r\n      console.log('Type is ' + type);\r\n      localStorage.setItem(\r\n        this.storeKey,\r\n        JSON.stringify({ type, localStorageId: this.storageId, data: this.wallet })\r\n      );\r\n    } else {\r\n      console.log('Outdated storage id');\r\n    }\r\n  }\r\n  getLocalStorageId() {\r\n    const walletData = localStorage.getItem(this.storeKey);\r\n    if (walletData) {\r\n      const parsed = JSON.parse(walletData);\r\n      if (parsed && parsed.localStorageId) {\r\n        return parsed.localStorageId;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  loadStoredWallet() {\r\n    const walletData = localStorage.getItem(this.storeKey);\r\n    if (walletData && walletData !== 'undefined') {\r\n      const parsedWalletData = JSON.parse(walletData);\r\n      console.log(parsedWalletData);\r\n      if (parsedWalletData.type && parsedWalletData.data && parsedWalletData.localStorageId) {\r\n        this.storageId = parsedWalletData.localStorageId;\r\n        const wd = parsedWalletData.data;\r\n        this.deserializeStoredWallet(wd, parsedWalletData.type);\r\n        console.log(this.wallet);\r\n      } else {\r\n        console.log('couldnt load a wallet');\r\n        this.clearWallet();\r\n      }\r\n    } else {\r\n      console.log('couldnt load a wallet');\r\n      this.clearWallet();\r\n    }\r\n  }\r\n  deserializeStoredWallet(wd: any, type: string) {\r\n    switch (type) {\r\n      case 'HdWallet':\r\n        this.wallet = new HdWallet(\r\n          wd.IV,\r\n          wd.encryptedSeed,\r\n          wd.encryptedEntropy\r\n        );\r\n        if (this.wallet instanceof HdWallet) {\r\n          this.wallet.index = wd.index;\r\n        }\r\n        break;\r\n      case 'LegacyWalletV1':\r\n        this.wallet = new LegacyWalletV1(wd.salt, wd.encryptedSeed);\r\n        break;\r\n      case 'LegacyWalletV2':\r\n        this.wallet = new LegacyWalletV2(wd.IV, wd.encryptedSeed);\r\n        break;\r\n      case 'LegacyWalletV3':\r\n        this.wallet = new LegacyWalletV3(\r\n          wd.IV,\r\n          wd.encryptedSeed,\r\n          wd.encryptedEntropy\r\n        );\r\n        break;\r\n      case 'LedgerWallet':\r\n        this.wallet = new LedgerWallet();\r\n        break;\r\n      case 'TorusWallet':\r\n        this.wallet = new TorusWallet(wd.verifier, wd.id, wd.name);\r\n        this.torusService.initTorus();\r\n        break;\r\n      default:\r\n    }\r\n    this.wallet.XTZrate = wd.XTZrate;\r\n    this.wallet.totalBalanceUSD = wd.totalBalanceUSD;\r\n    this.wallet.totalBalanceXTZ = wd.totalBalanceXTZ;\r\n    if (wd.lookups) {\r\n      console.log('found', wd.lookups);\r\n      this.wallet.lookups = wd.lookups;\r\n    }\r\n    for (const implicit of wd.implicitAccounts) {\r\n      const impAcc: ImplicitAccount = new ImplicitAccount(\r\n        implicit.pkh,\r\n        implicit.pk,\r\n        implicit.derivationPath ? implicit.derivationPath : null\r\n      );\r\n      impAcc.balanceUSD = implicit.balanceUSD;\r\n      impAcc.balanceXTZ = implicit.balanceXTZ;\r\n      impAcc.delegate = implicit.delegate;\r\n      impAcc.activitiesCounter = implicit.activitiesCounter;\r\n      impAcc.activities = implicit.activities;\r\n      for (const originated of implicit.originatedAccounts) {\r\n        const origAcc = new OriginatedAccount(\r\n          originated.address,\r\n          impAcc.pkh,\r\n          impAcc.pk\r\n        );\r\n        origAcc.balanceUSD = originated.balanceUSD;\r\n        origAcc.balanceXTZ = originated.balanceXTZ;\r\n        origAcc.delegate = originated.delegate;\r\n        origAcc.activitiesCounter = originated.activitiesCounter;\r\n        origAcc.activities = originated.activities;\r\n        impAcc.originatedAccounts.push(origAcc);\r\n      }\r\n      this.wallet.implicitAccounts.push(impAcc);\r\n    }\r\n  }\r\n}\r\n","export type WalletObject =\r\n  LegacyWalletV1\r\n  | LegacyWalletV2\r\n  | LegacyWalletV3\r\n  | LedgerWallet\r\n  | HdWallet\r\n  | TorusWallet;\r\n\r\nexport class Wallet {\r\n  totalBalanceXTZ: number | null;\r\n  totalBalanceUSD: number | null;\r\n  XTZrate: number | null;\r\n  implicitAccounts: ImplicitAccount[];\r\n  lookups: any[];\r\n  constructor() {\r\n    this.totalBalanceXTZ = null;\r\n    this.totalBalanceUSD = null;\r\n    this.XTZrate = null;\r\n    this.implicitAccounts = [];\r\n    this.lookups = [];\r\n  }\r\n  getAccounts(): Account[] {\r\n    const accounts: Account[] = [];\r\n    if (this.implicitAccounts.length) {\r\n      for (const implicitAccount of this.implicitAccounts) {\r\n        accounts.push(implicitAccount);\r\n        if (implicitAccount.originatedAccounts.length) {\r\n          for (const originatedAccount of implicitAccount.originatedAccounts) {\r\n            accounts.push(originatedAccount);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return accounts;\r\n  }\r\n  getImplicitAccounts(): ImplicitAccount[] {\r\n    return this.implicitAccounts;\r\n  }\r\n  getAccount(address: string): Account {\r\n    if (this.implicitAccounts.length) {\r\n      for (const implicitAccount of this.implicitAccounts) {\r\n        if (implicitAccount.address === address) {\r\n          return implicitAccount;\r\n        }\r\n        if (implicitAccount.originatedAccounts.length) {\r\n          for (const originatedAccount of implicitAccount.originatedAccounts) {\r\n            if (originatedAccount.address === address) {\r\n              return originatedAccount;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  getImplicitAccount(pkh: string): ImplicitAccount {\r\n    if (this.implicitAccounts.length) {\r\n      for (const implicitAccount of this.implicitAccounts) {\r\n        if (implicitAccount.pkh === pkh) {\r\n          return implicitAccount;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\nexport class FullWallet extends Wallet {\r\n  encryptedSeed: string;\r\n  constructor(encryptedSeed: string) {\r\n    super();\r\n    this.encryptedSeed = encryptedSeed;\r\n  }\r\n}\r\n\r\nexport class LegacyWalletV1 extends FullWallet {\r\n  salt: string;\r\n  constructor(salt: string, encrypedSeed: string) {\r\n    super(encrypedSeed);\r\n    this.salt = salt;\r\n  }\r\n}\r\n\r\nexport class LegacyWalletV2 extends FullWallet {\r\n  IV: string;\r\n  constructor(IV: string, encryptedSeed: string) {\r\n    super(encryptedSeed);\r\n    this.IV = IV;\r\n  }\r\n}\r\n\r\nexport class LegacyWalletV3 extends FullWallet {\r\n  encryptedEntropy: string;\r\n  IV: string;\r\n  constructor(IV: string, encryptedSeed: string, encryptedEntropy: string) {\r\n    super(encryptedSeed);\r\n    this.IV = IV;\r\n    this.encryptedEntropy = encryptedEntropy;\r\n  }\r\n}\r\n\r\nexport class HdWallet extends FullWallet {\r\n  encryptedEntropy: string;\r\n  IV: string;\r\n  index: number;\r\n  constructor(IV: string, encryptedSeed: string, encryptedEntropy: string) {\r\n    super(encryptedSeed);\r\n    this.encryptedEntropy = encryptedEntropy;\r\n    this.IV = IV;\r\n    this.index = 0;\r\n  }\r\n}\r\n\r\nexport class TorusWallet extends Wallet {\r\n  verifier: string;\r\n  id: string;\r\n  name: string;\r\n  constructor(verifier: string, id: string, name: string) {\r\n    super();\r\n    this.verifier = verifier;\r\n    this.id = id;\r\n    this.name = name;\r\n  }\r\n  displayName() {\r\n    if (this.verifier === 'twitter') {\r\n      return this.name;\r\n    }\r\n    return this.id;\r\n  }\r\n}\r\nexport class LedgerWallet extends Wallet {\r\n  constructor() {\r\n    super();\r\n  }\r\n}\r\n\r\n// Accounts\r\n\r\nexport abstract class Account {\r\n  balanceXTZ: number | null;\r\n  balanceUSD: number | null;\r\n  delegate: string;\r\n  activitiesCounter: number;\r\n  activities: Activity[];\r\n  pkh: string;\r\n  pk: string;\r\n  address: string;\r\n  constructor(pkh: string, pk: string, address: string) {\r\n    this.balanceXTZ = null;\r\n    this.balanceUSD = null;\r\n    this.delegate = '';\r\n    this.activitiesCounter = -1;\r\n    this.activities = [];\r\n    this.pkh = pkh;\r\n    this.pk = pk;\r\n    this.address = address;\r\n  }\r\n  public abstract isImplicit(): boolean;\r\n  shortAddress(): string {\r\n    return this.address.slice(0, 7) + '...' + this.address.slice(-4);\r\n  }\r\n}\r\n\r\nexport class ImplicitAccount extends Account {\r\n  originatedAccounts: OriginatedAccount[];\r\n  derivationPath?: string;\r\n  constructor(pkh: string, pk: string, derivationPath?: string) {\r\n    super(pkh, pk, pkh);\r\n    this.originatedAccounts = [];\r\n    if (derivationPath) {\r\n      this.derivationPath = derivationPath;\r\n    }\r\n  }\r\n  isImplicit(): boolean {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport class OriginatedAccount extends Account {\r\n  constructor(ktAddress: string, managerPkh: string, managerPk: string) {\r\n    super(managerPkh, managerPk, ktAddress);\r\n  }\r\n  isImplicit(): boolean {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport class Activity {\r\n  type: string;\r\n  block: string;\r\n  status: number; // 0: unconfirmed, 1: confirmed, -1: failed\r\n  amount: number;\r\n  source: string;\r\n  fee: number;\r\n  destination: string;\r\n  hash: string;\r\n  timestamp: number | null;\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  templateUrl: '404.component.html',\r\n  styleUrls: ['./error.scss']\r\n})\r\nexport class P404Component {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","<div id=\"error\" class=\"app flex-row align-items-center\">\r\n  <div class=\"container\">\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-6\">\r\n        <div class=\"logo-container\">\r\n          <a class=\"logo\" routerLink=\"/\">\r\n            <img src=\"../../../assets/img/kukai-logo.svg\">\r\n          </a>\r\n        </div>\r\n        <div class=\"clearfix mt-5\">\r\n          <h1 class=\"float-left display-3 mr-4\">404</h1>\r\n          <h4 class=\"pt-3\">Oops! You're lost.</h4>\r\n          <p>The page you are looking for was not found.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  templateUrl: '500.component.html',\r\n  styleUrls: ['./error.scss']\r\n})\r\nexport class P500Component {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","<div id=\"error\" class=\"app flex-row align-items-center\" style=\"height: 100vh;\">\r\n  <div class=\"container\">\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-6\">\r\n        <div class=\"logo-container\">\r\n          <a class=\"logo\" routerLink=\"/\">\r\n            <img src=\"../../../assets/img/kukai-logo.svg\">\r\n          </a>\r\n        </div>\r\n        <div class=\"clearfix mt-5\">\r\n          <h1 class=\"float-left display-3 mr-4\">500</h1>\r\n          <h4 class=\"pt-3\">Houston, we have a problem!</h4>\r\n          <p>The page you are looking for is temporarily unavailable.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","export const BAKERSLIST: any = [\r\n     {\r\n        baker_name: '888 XTZ',\r\n        identity: 'tz1WBfwbT66FC6BTLexc2BoyCCBM9LG7pnVW',\r\n        image: 'assets/img/bakers/888xtz.png'\r\n     },\r\n     {\r\n        baker_name: 'AirBie',\r\n        identity: 'tz1iLbZZ9uoRuVJCrZ9ZwiJMpfzhy3c67mav',\r\n        image: 'assets/img/bakers/airbie.png'\r\n     },\r\n     {\r\n        baker_name: 'Airfoil',\r\n        identity: 'tz1gk3TDbU7cJuiBRMhwQXVvgDnjsxuWhcEA',\r\n        image: 'assets/img/bakers/airfoil2.png'\r\n     },\r\n     {\r\n        baker_name: 'At James',\r\n        identity: 'tz3e75hU4EhDU3ukyJueh5v6UvEHzGwkg3yC',\r\n        image: 'assets/img/bakers/atjames.png'\r\n     },\r\n     {\r\n        baker_name: 'Bake Tz',\r\n        identity: 'tz1ei4WtWEMEJekSv8qDnu9PExG6Q8HgRGr3',\r\n        image: 'assets/img/bakers/bake_tz.png'\r\n     },\r\n     {\r\n        baker_name: 'Bake ꜩ For Me',\r\n        identity: 'tz1NRGxXV9h6SdNaZLcgmjuLx3hyy2f8YoGN',\r\n        image: 'assets/img/bakers/bake_tz_for_me.jpg'\r\n     },\r\n     {\r\n        baker_name: 'Bake\\'n\\'Rolls',\r\n        identity: 'tz1NortRftucvAkD1J58L32EhSVrQEWJCEnB',\r\n        image: 'assets/img/bakers/bake_n_rolls.png'\r\n     },\r\n     {\r\n        baker_name: 'Baked Tezos',\r\n        identity: 'tz1aRhFErGMgL57DYHMT1vYwv7PzsJN1chrk',\r\n        image: 'assets/img/bakers/baked_tezos.jpg'\r\n     },\r\n     {\r\n        baker_name: 'Bakemon',\r\n        identity: 'tz1Z1WwoqgRFbLE3YNdYRpCx44NSfiMJzeAG',\r\n        image: 'assets/img/bakers/bakemon.png'\r\n     },\r\n     {\r\n        baker_name: 'BakeMyStake',\r\n        identity: 'tz1NkFRjmkqqcGkAhqe78fdgemDNKXvL7Bod',\r\n        image: 'assets/img/bakers/bakeyourstake.png'\r\n      },\r\n    /*\r\n     {\r\n        baker_name: 'Baker Avenue',\r\n        identity: 'tz1YgNQBeLTgbwRb7QiyvHrx7hwN7AUbdqpB',        ote3: '',\r\n        image: 'assets/img/bakers/baker-avenue.png'\r\n    },\r\n    {\r\n        baker_name: 'BAKER-IL',\r\n        identity: 'tz1cYufsxHXJcvANhvS55h3aY32a9BAFB494',\r\n        image: 'assets/img/bakers/bakery-il.png'\r\n    },\r\n    */\r\n    {\r\n        baker_name: 'Baking Tacos',\r\n        identity: 'tz1RV1MBbZMR68tacosb7Mwj6LkbPSUS1er1',\r\n        image: 'assets/img/bakers/bakingtacos.png'\r\n    },\r\n    {\r\n        baker_name: 'Blockpower',\r\n        identity: 'tz1LmaFsWRkjr7QMCx5PtV6xTUz3AmEpKQiF',\r\n        image: 'assets/img/bakers/blockpowerstaking.png'\r\n    },\r\n    /*{\r\n          baker_name: 'Bitfinex',\r\n          identity: 'tz1KtGwriE7VuLwT3LwuvU9Nv4wAxP7XZ57d',\r\n          image: 'assets/img/bakers/bitfinex.png'\r\n    },*/\r\n    {\r\n        baker_name: 'BTFD',\r\n        identity: 'tz1d2EwsrmoCPmhNUjt7unCQ8a9RwVsVXEmd',\r\n        image: 'assets/img/bakers/btfd.png'\r\n    },\r\n    {\r\n        baker_name: 'Ceibo XTZ',\r\n        identity: 'tz3bEQoFCZEEfZMskefZ8q8e4eiHH1pssRax',\r\n        image: 'assets/img/bakers/ceiboxtz2.png'\r\n    },\r\n    {\r\n        baker_name: 'Coinbase',\r\n        identity: 'tz1irJKkXS2DBWkU1NnmFQx1c1L7pbGg4yhk',\r\n        image: 'assets/img/bakers/coinbase.png'\r\n    },\r\n    {\r\n        baker_name: 'Coinone',\r\n        identity: 'tz1SYq214SCBy9naR6cvycQsYcUGpBqQAE8d',\r\n        image: 'assets/img/bakers/coinone.png'\r\n    },\r\n    {\r\n        baker_name: 'Cryptium Labs',\r\n        identity: 'tz1eEnQhbwf6trb8Q8mPb2RaPkNk2rN7BKi8',\r\n        image: 'assets/img/bakers/cryptiumlabs3.png'\r\n    },\r\n    {\r\n        baker_name: 'Crypto Delegate',\r\n        identity: 'tz1Tnjaxk6tbAeC2TmMApPh8UsrEVQvhHvx5',\r\n        image: 'assets/img/bakers/cryptodelegate.png'\r\n    },\r\n    {\r\n        baker_name: 'Dash Master',\r\n        identity: 'tz1Lc87p6zRaDwzJs9kHvdpm7XzeWE8QTwVB',\r\n        image: 'assets/img/bakers/dashmaster.png'\r\n    },\r\n    {\r\n        baker_name: 'Delegated Capital',\r\n        identity: 'tz1ZRWFLgT9sz8iFi1VYWPfRYeUvUSFAaDao',\r\n        image: 'assets/img/bakers/delegatedcapital.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Elite Tezos',\r\n        identity: 'tz1W1f1JrE7VsqgpUpj1iiDobqP5TixgZhDk',\r\n        image: 'assets/img/bakers/elitetezos.jpg'\r\n    },\r\n    {\r\n        baker_name: 'EON',\r\n        identity: 'tz1PK8bNrfPbc73BtHH1A63jfU5UtbRFkvU4',\r\n        image: 'assets/img/bakers/eon.png'\r\n    },\r\n    {\r\n        baker_name: 'Everstake',\r\n        identity: 'tz1MXFrtZoaXckE41bjUCSjAjAap3AFDSr3N',\r\n        image: 'assets/img/bakers/everstake.png'\r\n    },\r\n    {\r\n        baker_name: 'Figment',\r\n        identity: 'tz1Scdr2HsZiQjc7bHMeBbmDRXYVvdhjJbBh',\r\n        image: 'assets/img/bakers/figment.png'\r\n    },\r\n    {\r\n        baker_name: 'First Block',\r\n        identity: 'tz1ZQppA6UerMz5CJtGvZmmB6z8L9syq7ixu',\r\n        image: 'assets/img/bakers/firstblock.jpeg'\r\n    },\r\n    {\r\n        baker_name: 'Flippin\\' tacos',\r\n        identity: 'tz1TzaNn7wSQSP5gYPXCnNzBCpyMiidCq1PX',\r\n        image: 'assets/img/bakers/flippintacos.png'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 1',\r\n        identity: 'tz3RDC3Jdn4j15J7bBHZd29EUee9gVB1CxD9',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 2',\r\n        identity: 'tz3bvNMQ95vfAYtG8193ymshqjSvmxiCUuR5',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 3',\r\n        identity: 'tz3RB4aoyjov4KEVRbuhvQ1CKJgBJMWhaeB8',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 4',\r\n        identity: 'tz3bTdwZinP8U1JmSweNzVKhmwafqWmFWRfk',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 5',\r\n        identity: 'tz3NExpXn9aPNZPorRE4SdjJ2RGrfbJgMAaV',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 6',\r\n        identity: 'tz3UoffC7FG7zfpmvmjUmUeAaHvzdcUvAj6r',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 7',\r\n        identity: 'tz3WMqdzXqRWXwyvj5Hp2H7QEepaUuS7vd9K',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Foundation Baker 8',\r\n        identity: 'tz3VEZ4k6a4Wx42iyev6i2aVAptTRLEAivNN',\r\n        image: 'assets/img/bakers/foundationbaker.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Fresh Tezos',\r\n        identity: 'tz1QLXqnfN51dkjeghXvKHkJfhvGiM5gK4tc',\r\n        image: 'assets/img/bakers/freshtezos.png'\r\n    },\r\n    {\r\n        baker_name: 'Gate.io',\r\n        identity: 'tz1NpWrAyDL9k2Lmnyxcgr9xuJakbBxdq7FB',\r\n        image: 'assets/img/bakers/gateio.png'\r\n    },\r\n    {\r\n        baker_name: 'Happy Tezos',\r\n        identity: 'tz1WCd2jm4uSt4vntk4vSuUWoZQGhLcDuR9q',\r\n        image: 'assets/img/bakers/happytezos.png'\r\n    },\r\n    {\r\n        baker_name: 'HashQuark',\r\n        identity: 'tz1KzSC1J9aBxKp7u8TUnpN8L7S65PBRkgdF',\r\n        image: 'assets/img/bakers/hashquark.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Hayek Lab',\r\n        identity: 'tz1SohptP53wDPZhzTWzDUFAUcWF6DMBpaJV',\r\n        image: 'assets/img/bakers/hayeklab2.png'\r\n    },\r\n    {\r\n        baker_name: 'Hot Stake',\r\n        identity: 'tz1Z3KCf8CLGAYfvVWPEr562jDDyWkwNF7sT',\r\n        image: 'assets/img/bakers/hotstake.png'\r\n    },\r\n    {\r\n        baker_name: 'Hyper Blocks Pro',\r\n        identity: 'tz1VHFxUuBhwopxC9YC9gm5s2MHBHLyCtvN1',\r\n        image: 'assets/img/bakers/hyperblocks2.png'\r\n    },\r\n    /*\r\n    {\r\n        baker_name: 'iBakeTezos',\r\n        identity: 'tz1dp3tScJZy8Go3byPdioSujgDi5CdemiuZ',\r\n        image: 'assets/img/bakers/ibaketezos.jpg'\r\n    },\r\n    */\r\n    {\r\n        baker_name: 'Illuminarean',\r\n        identity: 'tz1Ryat7ZuRapjGUgsPym9DuMGrTYYyDBJoq',\r\n        image: 'assets/img/bakers/illuminarean.png'\r\n    },\r\n    {\r\n        baker_name: 'Infinity Stones',\r\n        identity: 'tz1awXW7wuXy21c66vBudMXQVAPgRnqqwgTH',\r\n        image: 'assets/img/bakers/infinitystones.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Just a Baker',\r\n        identity: 'tz1ZTG13gkvouxSANka3HG3uys8C5gu3DPXZ',\r\n        image: 'assets/img/bakers/justabaker.png'\r\n    },\r\n    {\r\n        baker_name: 'Kraken 1',\r\n        identity: 'tz1bDXD6nNSrebqmAnnKKwnX1QdePSMCj4MX',\r\n        image: 'assets/img/bakers/kraken.png'\r\n    },\r\n    {\r\n        baker_name: 'Kraken 2',\r\n        identity: 'tz1NH4A2kRyFQUYhyi9aL8jrrySQUrCgNsX9',\r\n        image: 'assets/img/bakers/kraken.png'\r\n    },\r\n    {\r\n        baker_name: 'LetzBake!',\r\n        identity: 'tz1aqcYgG6NuViML5vdWhohHJBYxcDVLNUsE',\r\n        image: 'assets/img/bakers/letzbake.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Lucid Mining',\r\n        identity: 'tz1VmiY38m3y95HqQLjMwqnMS7sdMfGomzKi',\r\n        image: 'assets/img/bakers/lucidmining.png'\r\n    },\r\n    {\r\n        baker_name: 'My Tezos Baking',\r\n        identity: 'tz1d6Fx42mYgVFnHUW8T8A7WBfJ6nD9pVok8',\r\n        image: 'assets/img/bakers/mytezosbaking.png'\r\n    },\r\n    {\r\n        baker_name: 'Norn Delegate',\r\n        identity: 'tz1YdCPrYbksK7HCoYKDyzgfXwY16Fy9rrGa',\r\n        image: 'assets/img/bakers/norndelegate.png'\r\n    },\r\n    {\r\n        baker_name: 'Ø Crypto Pool',\r\n        identity: 'tz1KtvGSYU5hdKD288a1koTBURWYuADJGrLE',\r\n        image: 'assets/img/bakers/ocryptopool.png'\r\n    },\r\n    {\r\n        baker_name: 'Own Block',\r\n        identity: 'tz1X1fpAZtwQk94QXUgZwfgsvkQgyc2KHp9d',\r\n        image: 'assets/img/bakers/ownblock.png'\r\n    },\r\n    {\r\n        baker_name: 'P2P Validator',\r\n        identity: 'tz1P2Po7YM526ughEsRbY4oR9zaUPDZjxFrb',\r\n        image: 'assets/img/bakers/p2pvalidator.png'\r\n    },\r\n    {\r\n        baker_name: 'PayTezos',\r\n        identity: 'tz1Ldzz6k1BHdhuKvAtMRX7h5kJSMHESMHLC',\r\n        image: 'assets/img/bakers/paytezos.png'\r\n    },\r\n    {\r\n        baker_name: 'Polychain Labs',\r\n        identity: 'tz1Yju7jmmsaUiG9qQLoYv35v5pHgnWoLWbt',\r\n        image: 'assets/img/bakers/polychain.png'\r\n    },\r\n    {\r\n        baker_name: 'Polychain Labs',\r\n        identity: 'tz2TSvNTh2epDMhZHrw73nV9piBX7kLZ9K9m',\r\n        image: 'assets/img/bakers/polychain.png'\r\n    },\r\n    {\r\n        baker_name: 'POS Bakerz',\r\n        identity: 'tz1Vyuu4EJ5Nym4JcrfRLnp3hpaq1DSEp1Ke',\r\n        image: 'assets/img/bakers/pos_bakerz.png'\r\n    },\r\n    {\r\n        baker_name: 'Shake \\'n Bake',\r\n        identity: 'tz1V4qCyvPKZ5UeqdH14HN42rxvNPQfc9UZg',\r\n        image: 'assets/img/bakers/shakenbake.png'\r\n    },\r\n    {\r\n        baker_name: 'Stack Tezos',\r\n        identity: 'tz1MDKr36woXfVtrtXfV1ppPJERxPcm2wU6V',\r\n        image: 'assets/img/bakers/stacktezos.png'\r\n    },\r\n    {\r\n        baker_name: 'Stake House',\r\n        identity: 'tz1V2FYediKBAEaTpXXJBSjuQpjkyCzrTSiE',\r\n        image: 'assets/img/bakers/stake_house.png'\r\n    },\r\n    {\r\n        baker_name: 'Staked',\r\n        identity: 'tz1RCFbB9GpALpsZtu6J58sb74dm8qe6XBzv',\r\n        image: 'assets/img/bakers/staked.png'\r\n    },\r\n    {\r\n        baker_name: 'Stakery',\r\n        identity: 'tz1go7f6mEQfT2xX2LuHAqgnRGN6c2zHPf5c',\r\n        image: 'assets/img/bakers/stakery.png'\r\n    },\r\n    {\r\n        baker_name: 'Staking Facilities',\r\n        identity: 'tz1WpeqFaBG9Jm73Dmgqamy8eF8NWLz9JCoY',\r\n        image: 'assets/img/bakers/stakingfacilities.png'\r\n    },\r\n    {\r\n        baker_name: 'Stir Delegate',\r\n        identity: 'tz1LH4L6XYT2JNPhvWYC4Zq3XEiGgEwzNRvo',\r\n        image: 'assets/img/bakers/stirdelegate.png'\r\n    },\r\n    {\r\n        baker_name: 'Tez Baker',\r\n        identity: 'tz1Lhf4J9Qxoe3DZ2nfe8FGDnvVj7oKjnMY6',\r\n        image: 'assets/img/bakers/tez_baker.png'\r\n    },\r\n    {\r\n        baker_name: 'Tez Mania',\r\n        identity: 'tz1MQJPGNMijnXnVoBENFz9rUhaPt3S7rWoz',\r\n        image: 'assets/img/bakers/tez_mania.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tez Milk',\r\n        identity: 'tz1bakeKFwqmtLBzghw8CFnqFvRxLj849Vfg',\r\n        image: 'assets/img/bakers/tez_milk.png'\r\n    },\r\n    {\r\n        baker_name: 'Tez Patisserie',\r\n        identity: 'tz1UUgPwikRHW1mEyVZfGYy6QaxrY6Y7WaG5',\r\n        image: 'assets/img/bakers/tez_patisserie.png'\r\n    },\r\n    {\r\n        baker_name: 'TEZ Rocket',\r\n        identity: 'tz1abTjX2tjtMdaq5VCzkDtBnMSCFPW2oRPa',\r\n        image: 'assets/img/bakers/tez_rocket.png'\r\n    },\r\n    {\r\n        baker_name: 'Tez Whale',\r\n        identity: 'tz1isXamBXpTUgbByQ6gXgZQg4GWNW7r6rKE',\r\n        image: 'assets/img/bakers/tez_whale.png'\r\n    },\r\n    {\r\n        baker_name: 'Tez-Baking',\r\n        identity: 'tz1LBEKXaxQbd5Gtzbc1ATCwc3pppu81aWGc',\r\n        image: 'assets/img/bakers/tezbaking.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezetetic',\r\n        identity: 'tz1VceyYUpq1gk5dtp6jXQRtCtY8hm5DKt72',\r\n        image: 'assets/img/bakers/tezetetic.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezmania',\r\n        identity: 'tz1MQJPGNMijnXnVoBENFz9rUhaPt3S7rWoz',\r\n        image: 'assets/img/bakers/tezmania.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezocracy',\r\n        identity: 'tz1TaLYBeGZD3yKVHQGBM857CcNnFFNceLYh',\r\n        image: 'assets/img/bakers/tezocracy.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Bakery',\r\n        identity: 'tz1fZ767VDbqx4DeKiFswPSHh513f51mKEUZ',\r\n        image: 'assets/img/bakers/tezos_bakery.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Berlin',\r\n        identity: 'tz1Y42aKCk53vMbaJNpf1hBg1rznGdBxHJ5C',\r\n        image: 'assets/img/bakers/tezos_berlin.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Capital',\r\n        identity: 'tz2PdGc7U5tiyqPgTSgqCDct94qd6ovQwP6u',\r\n        image: 'assets/img/bakers/tezos_capital.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Capital Legacy',\r\n        identity: 'tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ',\r\n        image: 'assets/img/bakers/tezos_capital_legacy.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Cat',\r\n        identity: 'tz1XXayQohB8XRXN7kMoHbf2NFwNiH3oMRQQ',\r\n        image: 'assets/img/bakers/tezos_cat.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Chef',\r\n        identity: 'tz1hThMBD8jQjFt78heuCnKxJnJtQo9Ao25X',\r\n        image: 'assets/img/bakers/tezos_chef.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Delegate EU',\r\n        identity: 'tz1YTyvABUyhE7JHpxMVBVqjZnZM4ofMrWKE',\r\n        image: 'assets/img/bakers/tezos_delegateEU.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos France',\r\n        identity: 'tz1U638Z3xWRiXDDKx2S125MCCaAeGDdA896',\r\n        image: 'assets/img/bakers/tezos_france.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos HODL',\r\n        identity: 'tz1WnfXMPaNTBmH7DBPwqCWs9cPDJdkGBTZ8',\r\n        image: 'assets/img/bakers/tezos_hodl.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Hot Bakery',\r\n        identity: 'tz1bLwpPfr3xqy1gWBF4sGvv8bLJyPHR11kx',\r\n        image: 'assets/img/bakers/tezos_hotbakery.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Istanbul',\r\n        identity: 'tz1Vm5cfHncKGBo7YvZfHc4mmudY4qpWzvSB',\r\n        image: 'assets/img/bakers/tezos_istanbul.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Kitchen',\r\n        identity: 'tz1Nn14BBsDULrPXtkM9UQeXaE4iqJhmqmK5',\r\n        image: 'assets/img/bakers/tezos_kitchen.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Korea',\r\n        identity: 'tz1PPUo28B8BroqmVCMMNDudG4ShA2bzicrU',\r\n        image: 'assets/img/bakers/tezos_korea.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Mars',\r\n        identity: 'tz1S1Aew75hMrPUymqenKfHo8FspppXKpW7h',\r\n        image: 'assets/img/bakers/tezos_mars.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Moon',\r\n        identity: 'tz1TgvirXEwVJPg1cCrxT9zFubdzw7Ng6Ke9',\r\n        image: 'assets/img/bakers/tezos_moon.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Ninja',\r\n        identity: 'tz1djEKk6j1FqigTgbRsunbnY9BB7qsn1aAQ',\r\n        image: 'assets/img/bakers/tezos_ninja.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Panda',\r\n        identity: 'tz1PeZx7FXy7QRuMREGXGxeipb24RsMMzUNe',\r\n        image: 'assets/img/bakers/tezos_panda.png'\r\n    },\r\n    /*\r\n    {\r\n        baker_name: 'Tezos Rio',\r\n        identity: 'tz1gfipKzYrNRT14oSNQJMCdRRsUtcbZoKsd',\r\n        image: 'assets/img/bakers/tezos_rio.png'\r\n    },\r\n    */\r\n    {\r\n        baker_name: 'Tezos Suisse',\r\n        identity: 'tz1hAYfexyzPGG6RhZZMpDvAHifubsbb6kgn',\r\n        image: 'assets/img/bakers/tezos_suisse.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Tacos',\r\n        identity: 'tz1bkKTY9Y3rTsHbpr2fbGUCRm736LLquQfM',\r\n        image: 'assets/img/bakers/tezos_tacos.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Tokyo',\r\n        identity: 'tz1VYQpZvjVhv1CdcENuCNWJQXu1TWBJ8KTD',\r\n        image: 'assets/img/bakers/tezos_tokyo.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezos Vote',\r\n        identity: 'tz1bHzftcTKZMTZgLLtnrXydCm6UEqf4ivca',\r\n        image: 'assets/img/bakers/tezos_vote.png'\r\n    },\r\n    {\r\n        baker_name: 'TezosBC',\r\n        identity: 'tz1QGZ3dD2YpRKZ4APeso6EXTeyCUUkw6MQC',\r\n        image: 'assets/img/bakers/tezosbc.png'\r\n    },\r\n    {\r\n        baker_name: 'TezosBr',\r\n        identity: 'tz1YKh8T79LAtWxX29N5VedCSmaZGw9LNVxQ',\r\n        image: 'assets/img/bakers/tezosbrazil.png'\r\n    },\r\n    {\r\n        baker_name: 'TezosRUs',\r\n        identity: 'tz1b9MYGrbN1NAxphLEsPPNT9JC7aNFc5nA4',\r\n        image: 'assets/img/bakers/tezosrus.jpg'\r\n    },\r\n    {\r\n        baker_name: 'TezosSEAsia',\r\n        identity: 'tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX',\r\n        image: 'assets/img/bakers/tezosseasia.jpg'\r\n    },\r\n    {\r\n        baker_name: 'TezoSteam',\r\n        identity: 'tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA',\r\n        image: 'assets/img/bakers/tezosteam2.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezry',\r\n        identity: 'tz1UJvHTgpVzcKWhTazGxVcn5wsHru5Gietg',\r\n        image: 'assets/img/bakers/tezry.png'\r\n    },\r\n    {\r\n        baker_name: 'TezTech Labs',\r\n        identity: 'tz1Vtimi84kLh9RANfRVX2JvYtP4NPCT1aFm',\r\n        image: 'assets/img/bakers/teztechlabs.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezz City',\r\n        identity: 'tz1Zcxkfa5jKrRbBThG765GP29bUCU3C4ok5',\r\n        image: 'assets/img/bakers/tezzcity.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tezzieland',\r\n        identity: 'tz1fUjvVhJrHLZCbhPNvDRckxApqbkievJHN',\r\n        image: 'assets/img/bakers/tezzieland.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezzigator (HSM)',\r\n        identity: 'tz3adcvQaKXTCg12zbninqo3q8ptKKtDFTLv',\r\n        image: 'assets/img/bakers/tezzigator.png'\r\n    },\r\n    {\r\n        baker_name: 'Tezzigator Legacy',\r\n        identity: 'tz1iZEKy4LaAjnTmn2RuGDf2iqdAQKnRi8kY',\r\n        image: 'assets/img/bakers/tezzigator.png'\r\n    },\r\n    {\r\n        baker_name: 'TZ Bake',\r\n        identity: 'tz1Zhv3RkfU2pHrmaiDyxp7kFZpZrUCu1CiF',\r\n        image: 'assets/img/bakers/tz_bake.png'\r\n    },\r\n    {\r\n        baker_name: 'Tz Bakery',\r\n        identity: 'tz1cX93Q3KsiTADpCC4f12TBvAmS5tw7CW19',\r\n        image: 'assets/img/bakers/tz_bakery.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tz Bank',\r\n        identity: 'tz1bkg7rynMXVcjomoe3diB4URfv8GU2GAcw',\r\n        image: 'assets/img/bakers/tz_bank.png'\r\n    },\r\n    {\r\n        baker_name: 'Tz Dutch',\r\n        identity: 'tz1PesW5khQNhy4revu2ETvMtWPtuVyH2XkZ',\r\n        image: 'assets/img/bakers/tz_dutch.png'\r\n    },\r\n    {\r\n        baker_name: 'Tz Envoy',\r\n        identity: 'tz1iJ4qgGTzyhaYEzd1RnC6duEkLBd1nzexh',\r\n        image: 'assets/img/bakers/tz_envoy.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Tz Node',\r\n        identity: 'tz1Vd1rXpV8hTHbFXCXN3c3qzCsgcU5BZw1e',\r\n        image: 'assets/img/bakers/tz_node.png'\r\n    },\r\n    {\r\n        baker_name: 'TzBakeOven',\r\n        identity: 'tz1Yh1nLXfwqVpP8btykuRguu61n3veVmADa',\r\n        image: 'assets/img/bakers/tzbakeoven.gif'\r\n    },\r\n    {\r\n        baker_name: 'Tzscan',\r\n        identity: 'tz1LWub69XbTxdatJnBkm7caDQoybSgW4T3s',\r\n        image: 'assets/img/bakers/tzscan.png'\r\n    },\r\n    {\r\n        baker_name: 'Validators.com',\r\n        identity: 'tz1Pwgj6j55akKCyvTwwr9X4np1RskSXpQY4',\r\n        image: 'assets/img/bakers/validators.png'\r\n    },\r\n    {\r\n        baker_name: 'View Nodes',\r\n        identity: 'tz1aiYKXmSRckyJ9EybKmpVry373rfyngJU8',\r\n        image: 'assets/img/bakers/viewnodestezos.jpg'\r\n    },\r\n    {\r\n        baker_name: 'Wetez Wallet',\r\n        identity: 'tz1iMAHAVpkCVegF9FLGWUpQQeiAHh4ffdLQ',\r\n        image: 'assets/img/bakers/wetez.jpg'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Antipodes',\r\n        identity: 'tz1TcH4Nb3aHNDJ7CGZhU7jgAK1BkSP4Lxds',\r\n        image: 'assets/img/bakers/xtzantipodes.png'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Baker',\r\n        identity: 'tz1ZKi4VrDMEQpypn2NTn9pPbZL3xLRkETLA',\r\n        image: 'assets/img/bakers/xtzbaker.png'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Bakery',\r\n        identity: 'tz1P9GwUWeAyPoT3ZwBc6gWCTP9exEPaVU3w',\r\n        image: 'assets/img/bakers/xtzbakery.jpg'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Delegate',\r\n        identity: 'tz1Xek93iSXXckyQ6aYLVS5Rr2tge2en7ZxS',\r\n        image: 'assets/img/bakers/xtzdelegate.png'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Land',\r\n        identity: 'tz1Z1tMai15JWUWeN2PKL9faXXVPMuWamzJj',\r\n        image: 'assets/img/bakers/xtzland.png'\r\n    },\r\n    {\r\n        baker_name: 'XTZ Master',\r\n        identity: 'tz1KfEsrtDaA1sX7vdM4qmEPWuSytuqCDp5j',\r\n        image: 'assets/img/bakers/xtzmaster.png'\r\n    },\r\n    {\r\n        baker_name: 'You Loaf We Bake',\r\n        identity: 'tz1eZwq8b5cvE2bPKokatLkVMzkxz24z3Don',\r\n        image: 'assets/img/bakers/youloafwebake.png'\r\n    },\r\n    {\r\n        baker_name: 'Zednode',\r\n        identity: 'tz1L3vFD8mFzBaS8yLHFsd7qDJY1t276Dh8i',\r\n        image: 'assets/img/bakers/zednode.png'\r\n    }\r\n];\r\n","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n  window.console.log = function() {};\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"]}